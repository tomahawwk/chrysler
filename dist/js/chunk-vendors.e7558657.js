(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"01f9":function(t,e,r){"use strict";var i=r("2d00"),n=r("5ca1"),a=r("2aba"),o=r("32e9"),s=r("84f2"),l=r("41a0"),u=r("7f20"),c=r("38fd"),h=r("2b4c")("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",f="keys",m="values",v=function(){return this};t.exports=function(t,e,r,g,y,_,x){l(r,e,g);var b,w,T,S=function(t){if(!p&&t in C)return C[t];switch(t){case f:return function(){return new r(this,t)};case m:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=e+" Iterator",M=y==m,A=!1,C=t.prototype,P=C[h]||C[d]||y&&C[y],L=P||S(y),I=y?M?S("entries"):L:void 0,k="Array"==e&&C.entries||P;if(k&&(T=c(k.call(new t)),T!==Object.prototype&&T.next&&(u(T,E,!0),i||"function"==typeof T[h]||o(T,h,v))),M&&P&&P.name!==m&&(A=!0,L=function(){return P.call(this)}),i&&!x||!p&&!A&&C[h]||o(C,h,L),s[e]=L,s[E]=v,y)if(b={values:M?L:S(m),keys:_?L:S(f),entries:I},x)for(w in b)w in C||a(C,w,b[w]);else n(n.P+n.F*(p||A),e,b);return b}},"02f4":function(t,e,r){var i=r("4588"),n=r("be13");t.exports=function(t){return function(e,r){var a,o,s=String(n(e)),l=i(r),u=s.length;return l<0||l>=u?t?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?t?s.charAt(l):a:t?s.slice(l,l+2):o-56320+(a-55296<<10)+65536)}}},"0390":function(t,e,r){"use strict";var i=r("02f4")(!0);t.exports=function(t,e,r){return e+(r?i(t,e).length:1)}},"07e3":function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},"0949":function(t,e,r){var i,n;(function(a,o){i=o,n="function"===typeof i?i.call(e,r,e,t):i,void 0===n||(t.exports=n)})("undefined"!=typeof window&&window,(function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var r=this._events=this._events||{},i=r[t]=r[t]||[];return-1==i.indexOf(e)&&i.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var r=this._onceEvents=this._onceEvents||{},i=r[t]=r[t]||{};return i[e]=!0,this}},e.off=function(t,e){var r=this._events&&this._events[t];if(r&&r.length){var i=r.indexOf(e);return-1!=i&&r.splice(i,1),this}},e.emitEvent=function(t,e){var r=this._events&&this._events[t];if(r&&r.length){r=r.slice(0),e=e||[];for(var i=this._onceEvents&&this._onceEvents[t],n=0;n<r.length;n++){var a=r[n],o=i&&i[a];o&&(this.off(t,a),delete i[a]),a.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}))},"097d":function(t,e,r){"use strict";var i=r("5ca1"),n=r("8378"),a=r("7726"),o=r("ebd6"),s=r("bcaa");i(i.P+i.R,"Promise",{finally:function(t){var e=o(this,n.Promise||a.Promise),r="function"==typeof t;return this.then(r?function(r){return s(e,t()).then((function(){return r}))}:t,r?function(r){return s(e,t()).then((function(){throw r}))}:t)}})},"0a49":function(t,e,r){var i=r("9b43"),n=r("626a"),a=r("4bf8"),o=r("9def"),s=r("cd1c");t.exports=function(t,e){var r=1==t,l=2==t,u=3==t,c=4==t,h=6==t,p=5==t||h,d=e||s;return function(e,s,f){for(var m,v,g=a(e),y=n(g),_=i(s,f,3),x=o(y.length),b=0,w=r?d(e,x):l?d(e,0):void 0;x>b;b++)if((p||b in y)&&(m=y[b],v=_(m,b,g),t))if(r)w[b]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return b;case 2:w.push(m)}else if(c)return!1;return h?-1:u||c?c:w}}},"0bfb":function(t,e,r){"use strict";var i=r("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,r){var i=r("ce10"),n=r("e11e");t.exports=Object.keys||function(t){return i(t,n)}},"0fc9":function(t,e,r){var i=r("3a38"),n=Math.max,a=Math.min;t.exports=function(t,e){return t=i(t),t<0?n(t+e,0):a(t,e)}},"109c":function(t,e,r){"use strict";var i=r("2e20");
/*!
 * VERSION: 2.1.3
 * DATE: 2019-05-17
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/i["e"]._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],(function(){var t=function(t){var e,r=[],i=t.length;for(e=0;e!==i;r.push(t[e++]));return r},e=function(t,e,r){var i,n,a=t.cycle;for(i in a)n=a[i],t[i]="function"===typeof n?n(r,e[r],e):n[r%n.length];delete t.cycle},r=function(t){if("function"===typeof t)return t;var e="object"===typeof t?t:{each:t},r=e.ease,i=e.from||0,n=e.base||0,a={},o=isNaN(i),s=e.axis,l={center:.5,end:1}[i]||0;return function(t,u,c){var h,p,d,f,m,v,g,y,_,x=(c||e).length,b=a[x];if(!b){if(_="auto"===e.grid?0:(e.grid||[1/0])[0],!_){g=-1/0;while(g<(g=c[_++].getBoundingClientRect().left)&&_<x);_--}for(b=a[x]=[],h=o?Math.min(_,x)*l-.5:i%_,p=o?x*l/_-.5:i/_|0,g=0,y=1/0,v=0;v<x;v++)d=v%_-h,f=p-(v/_|0),b[v]=m=s?Math.abs("y"===s?f:d):Math.sqrt(d*d+f*f),m>g&&(g=m),m<y&&(y=m);b.max=g-y,b.min=y,b.v=x=e.amount||e.each*(_>x?x-1:s?"y"===s?x/_:_:Math.max(_,x/_))||0,b.b=x<0?n-x:n}return x=(b[t]-b.min)/b.max,b.b+(r?r.getRatio(x):x)*b.v}},n=function(t,e,r){i["f"].call(this,t,e,r),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=n.prototype.render},a=1e-8,o=i["f"]._internals,s=o.isSelector,l=o.isArray,u=n.prototype=i["f"].to({},.1,{}),c=[];n.version="2.1.3",u.constructor=n,u.kill()._gc=!1,n.killTweensOf=n.killDelayedCallsTo=i["f"].killTweensOf,n.getTweensOf=i["f"].getTweensOf,n.lagSmoothing=i["f"].lagSmoothing,n.ticker=i["f"].ticker,n.render=i["f"].render,n.distribute=r,u.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),i["f"].prototype.invalidate.call(this)},u.updateTo=function(t,e){var r,n=this,a=n.ratio,o=n.vars.immediateRender||t.immediateRender;for(r in e&&n._startTime<n._timeline._time&&(n._startTime=n._timeline._time,n._uncache(!1),n._gc?n._enabled(!0,!1):n._timeline.insert(n,n._startTime-n._delay)),t)n.vars[r]=t[r];if(n._initted||o)if(e)n._initted=!1,o&&n.render(0,!0,!0);else if(n._gc&&n._enabled(!0,!1),n._notifyPluginsOfEnabled&&n._firstPT&&i["f"]._onPluginEvent("_onDisable",n),n._time/n._duration>.998){var s=n._totalTime;n.render(0,!0,!1),n._initted=!1,n.render(s,!0,!1)}else if(n._initted=!1,n._init(),n._time>0||o){var l,u=1/(1-a),c=n._firstPT;while(c)l=c.s+c.c,c.c*=u,c.s=l-c.c,c=c._next}return n},u.render=function(t,e,r){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,s,l,u,c,h,p,d,f,m=this,v=m._dirty?m.totalDuration():m._totalDuration,g=m._time,y=m._totalTime,_=m._cycle,x=m._duration,b=m._rawPrevTime;if(t>=v-a&&t>=0?(m._totalTime=v,m._cycle=m._repeat,m._yoyo&&0!==(1&m._cycle)?(m._time=0,m.ratio=m._ease._calcEnd?m._ease.getRatio(0):0):(m._time=x,m.ratio=m._ease._calcEnd?m._ease.getRatio(1):1),m._reversed||(n=!0,s="onComplete",r=r||m._timeline.autoRemoveChildren),0===x&&(m._initted||!m.vars.lazy||r)&&(m._startTime===m._timeline._duration&&(t=0),(b<0||t<=0&&t>=-a||b===a&&"isPause"!==m.data)&&b!==t&&(r=!0,b>a&&(s="onReverseComplete")),m._rawPrevTime=d=!e||t||b===t?t:a)):t<a?(m._totalTime=m._time=m._cycle=0,m.ratio=m._ease._calcEnd?m._ease.getRatio(0):0,(0!==y||0===x&&b>0)&&(s="onReverseComplete",n=m._reversed),t>-a?t=0:t<0&&(m._active=!1,0===x&&(m._initted||!m.vars.lazy||r)&&(b>=0&&(r=!0),m._rawPrevTime=d=!e||t||b===t?t:a)),m._initted||(r=!0)):(m._totalTime=m._time=t,0!==m._repeat&&(u=x+m._repeatDelay,m._cycle=m._totalTime/u>>0,0!==m._cycle&&m._cycle===m._totalTime/u&&y<=t&&m._cycle--,m._time=m._totalTime-m._cycle*u,m._yoyo&&0!==(1&m._cycle)&&(m._time=x-m._time,f=m._yoyoEase||m.vars.yoyoEase,f&&(m._yoyoEase||(!0!==f||m._initted?m._yoyoEase=f=!0===f?m._ease:f instanceof i["b"]?f:i["b"].map[f]:(f=m.vars.ease,m._yoyoEase=f=f?f instanceof i["b"]?f:"function"===typeof f?new i["b"](f,m.vars.easeParams):i["b"].map[f]||i["f"].defaultEase:i["f"].defaultEase)),m.ratio=f?1-f.getRatio((x-m._time)/x):0)),m._time>x?m._time=x:m._time<0&&(m._time=0)),m._easeType&&!f?(c=m._time/x,h=m._easeType,p=m._easePower,(1===h||3===h&&c>=.5)&&(c=1-c),3===h&&(c*=2),1===p?c*=c:2===p?c*=c*c:3===p?c*=c*c*c:4===p&&(c*=c*c*c*c),m.ratio=1===h?1-c:2===h?c:m._time/x<.5?c/2:1-c/2):f||(m.ratio=m._ease.getRatio(m._time/x))),g!==m._time||r||_!==m._cycle){if(!m._initted){if(m._init(),!m._initted||m._gc)return;if(!r&&m._firstPT&&(!1!==m.vars.lazy&&m._duration||m.vars.lazy&&!m._duration))return m._time=g,m._totalTime=y,m._rawPrevTime=b,m._cycle=_,o.lazyTweens.push(m),void(m._lazy=[t,e]);!m._time||n||f?n&&this._ease._calcEnd&&!f&&(m.ratio=m._ease.getRatio(0===m._time?0:1)):m.ratio=m._ease.getRatio(m._time/x)}!1!==m._lazy&&(m._lazy=!1),m._active||!m._paused&&m._time!==g&&t>=0&&(m._active=!0),0===y&&(2===m._initted&&t>0&&m._init(),m._startAt&&(t>=0?m._startAt.render(t,!0,r):s||(s="_dummyGS")),m.vars.onStart&&(0===m._totalTime&&0!==x||e||m._callback("onStart"))),l=m._firstPT;while(l)l.f?l.t[l.p](l.c*m.ratio+l.s):l.t[l.p]=l.c*m.ratio+l.s,l=l._next;m._onUpdate&&(t<0&&m._startAt&&m._startTime&&m._startAt.render(t,!0,r),e||(m._totalTime!==y||s)&&m._callback("onUpdate")),m._cycle!==_&&(e||m._gc||m.vars.onRepeat&&m._callback("onRepeat")),s&&(m._gc&&!r||(t<0&&m._startAt&&!m._onUpdate&&m._startTime&&m._startAt.render(t,!0,r),n&&(m._timeline.autoRemoveChildren&&m._enabled(!1,!1),m._active=!1),!e&&m.vars[s]&&m._callback(s),0===x&&m._rawPrevTime===a&&d!==a&&(m._rawPrevTime=0)))}else y!==m._totalTime&&m._onUpdate&&(e||m._callback("onUpdate"))},n.to=function(t,e,r){return new n(t,e,r)},n.from=function(t,e,r){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,new n(t,e,r)},n.fromTo=function(t,e,r,i){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,new n(t,e,i)},n.staggerTo=n.allTo=function(a,o,u,h,p,d,f){var m,v,g,y,_=[],x=r(u.stagger||h),b=u.cycle,w=(u.startAt||c).cycle;for(l(a)||("string"===typeof a&&(a=i["f"].selector(a)||a),s(a)&&(a=t(a))),a=a||[],m=a.length-1,g=0;g<=m;g++){for(y in v={},u)v[y]=u[y];if(b&&(e(v,a,g),null!=v.duration&&(o=v.duration,delete v.duration)),w){for(y in w=v.startAt={},u.startAt)w[y]=u.startAt[y];e(v.startAt,a,g)}v.delay=x(g,a[g],a)+(v.delay||0),g===m&&p&&(v.onComplete=function(){u.onComplete&&u.onComplete.apply(u.onCompleteScope||this,arguments),p.apply(f||u.callbackScope||this,d||c)}),_[g]=new n(a[g],o,v)}return _},n.staggerFrom=n.allFrom=function(t,e,r,i,a,o,s){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,n.staggerTo(t,e,r,i,a,o,s)},n.staggerFromTo=n.allFromTo=function(t,e,r,i,a,o,s,l){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,n.staggerTo(t,e,i,a,o,s,l)},n.delayedCall=function(t,e,r,i,a){return new n(e,0,{delay:t,onComplete:e,onCompleteParams:r,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:r,immediateRender:!1,useFrames:a,overwrite:0})},n.set=function(t,e){return new n(t,0,e)},n.isTweening=function(t){return i["f"].getTweensOf(t,!0).length>0};var h=function(t,e){var r=[],n=0,a=t._first;while(a)a instanceof i["f"]?r[n++]=a:(e&&(r[n++]=a),r=r.concat(h(a,e)),n=r.length),a=a._next;return r},p=n.getAllTweens=function(t){return h(i["a"]._rootTimeline,t).concat(h(i["a"]._rootFramesTimeline,t))};n.killAll=function(t,e,r,n){null==e&&(e=!0),null==r&&(r=!0);var a,o,s,l=p(0!=n),u=l.length,c=e&&r&&n;for(s=0;s<u;s++)o=l[s],(c||o instanceof i["c"]||(a=o.target===o.vars.onComplete)&&r||e&&!a)&&(t?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},n.killChildTweensOf=function(e,r){if(null!=e){var a,u,c,h,p,d=o.tweenLookup;if("string"===typeof e&&(e=i["f"].selector(e)||e),s(e)&&(e=t(e)),l(e)){h=e.length;while(--h>-1)n.killChildTweensOf(e[h],r)}else{for(c in a=[],d){u=d[c].target.parentNode;while(u)u===e&&(a=a.concat(d[c].tweens)),u=u.parentNode}for(p=a.length,h=0;h<p;h++)r&&a[h].totalTime(a[h].totalDuration()),a[h]._enabled(!1,!1)}}};var d=function(t,e,r,n){e=!1!==e,r=!1!==r,n=!1!==n;var a,o,s=p(n),l=e&&r&&n,u=s.length;while(--u>-1)o=s[u],(l||o instanceof i["c"]||(a=o.target===o.vars.onComplete)&&r||e&&!a)&&o.paused(t)};return n.pauseAll=function(t,e,r){d(!0,t,e,r)},n.resumeAll=function(t,e,r){d(!1,t,e,r)},n.globalTimeScale=function(t){var e=i["a"]._rootTimeline,r=i["f"].ticker.time;return arguments.length?(t=t||a,e._startTime=r-(r-e._startTime)*e._timeScale/t,e=i["a"]._rootFramesTimeline,r=i["f"].ticker.frame,e._startTime=r-(r-e._startTime)*e._timeScale/t,e._timeScale=i["a"]._rootTimeline._timeScale=t,t):e._timeScale},u.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this.duration()?this._time/this._duration:this.ratio},u.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},u.time=function(t,e){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var r=this._duration,i=this._cycle,n=i*(r+this._repeatDelay);return t>r&&(t=r),this.totalTime(this._yoyo&&1&i?r-t+n:this._repeat?t+n:t,e)},u.duration=function(t){return arguments.length?i["a"].prototype.duration.call(this,t):this._duration},u.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},u.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},u.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},u.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},n}),!0);var n=i["g"].TweenMax;
/*!
 * VERSION: 2.1.3
 * DATE: 2019-05-17
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */
i["e"]._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],(function(){var t,e,r,n,a=function(){i["d"].call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},o=i["e"]._gsDefine.globals,s={},l=a.prototype=new i["d"]("css");l.constructor=a,a.version="2.1.3",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,l="px",a.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var u,c,h,p,d,f,m,v,g=/(?:\-|\.|\b)(\d|\.|e\-)+/g,y=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,_=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,x=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b),?/gi,b=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,T=/opacity *= *([^)]*)/i,S=/opacity:([^;]*)/i,E=/alpha\(opacity *=.+?\)/i,M=/^(rgb|hsl)/,A=/([A-Z])/g,C=/-([a-z])/gi,P=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,L=function(t,e){return e.toUpperCase()},I=/(?:Left|Right|Width)/i,k=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,R=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,O=/,(?=[^\)]*(?:\(|$))/gi,z=/[\s,\(]/i,D=Math.PI/180,B=180/Math.PI,F={},N={style:{}},U=i["e"].document||{createElement:function(){return N}},V=function(t,e){var r=U.createElementNS?U.createElementNS(e||"http://www.w3.org/1999/xhtml",t):U.createElement(t);return r.style?r:U.createElement(t)},j=V("div"),G=V("img"),H=a._internals={_specialProps:s},W=(i["e"].navigator||{}).userAgent||"",q=function(){var t=W.indexOf("Android"),e=V("a");return h=-1!==W.indexOf("Safari")&&-1===W.indexOf("Chrome")&&(-1===t||parseFloat(W.substr(t+8,2))>3),d=h&&parseFloat(W.substr(W.indexOf("Version/")+8,2))<6,p=-1!==W.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(W)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(W))&&(f=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),X=function(t){return T.test("string"===typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},$=function(t){i["e"].console&&console.log(t)},Y="",Z="",J=function(t,e){e=e||j;var r,i,n=e.style;if(void 0!==n[t])return t;t=t.charAt(0).toUpperCase()+t.substr(1),r=["O","Moz","ms","Ms","Webkit"],i=5;while(--i>-1&&void 0===n[r[i]+t]);return i>=0?(Z=3===i?"ms":r[i],Y="-"+Z.toLowerCase()+"-",Z+t):null},K="undefined"!==typeof window?window:U.defaultView||{getComputedStyle:function(){}},Q=function(t){return K.getComputedStyle(t)},tt=a.getStyle=function(t,e,r,i,n){var a;return q||"opacity"!==e?(!i&&t.style[e]?a=t.style[e]:(r=r||Q(t))?a=r[e]||r.getPropertyValue(e)||r.getPropertyValue(e.replace(A,"-$1").toLowerCase()):t.currentStyle&&(a=t.currentStyle[e]),null==n||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:n):X(t)},et=H.convertToPixels=function(t,e,r,n,o){if("px"===n||!n&&"lineHeight"!==e)return r;if("auto"===n||!r)return 0;var s,l,u,c=I.test(e),h=t,p=j.style,d=r<0,f=1===r;if(d&&(r=-r),f&&(r*=100),"lineHeight"!==e||n)if("%"===n&&-1!==e.indexOf("border"))s=r/100*(c?t.clientWidth:t.clientHeight);else{if(p.cssText="border:0 solid red;position:"+tt(t,"position")+";line-height:0;","%"!==n&&h.appendChild&&"v"!==n.charAt(0)&&"rem"!==n)p[c?"borderLeftWidth":"borderTopWidth"]=r+n;else{if(h=t.parentNode||U.body,-1!==tt(h,"display").indexOf("flex")&&(p.position="absolute"),l=h._gsCache,u=i["f"].ticker.frame,l&&c&&l.time===u)return l.width*r/100;p[c?"width":"height"]=r+n}h.appendChild(j),s=parseFloat(j[c?"offsetWidth":"offsetHeight"]),h.removeChild(j),c&&"%"===n&&!1!==a.cacheWidths&&(l=h._gsCache=h._gsCache||{},l.time=u,l.width=s/r*100),0!==s||o||(s=et(t,e,r,n,!0))}else l=Q(t).lineHeight,t.style.lineHeight=r,s=parseFloat(Q(t).lineHeight),t.style.lineHeight=l;return f&&(s/=100),d?-s:s},rt=H.calculateOffset=function(t,e,r){if("absolute"!==tt(t,"position",r))return 0;var i="left"===e?"Left":"Top",n=tt(t,"margin"+i,r);return t["offset"+i]-(et(t,e,parseFloat(n),n.replace(w,""))||0)},it=function(t,e){var r,i,n,a={};if(e=e||Q(t,null))if(r=e.length)while(--r>-1)n=e[r],-1!==n.indexOf("-transform")&&Lt!==n||(a[n.replace(C,L)]=e.getPropertyValue(n));else for(r in e)-1!==r.indexOf("Transform")&&Pt!==r||(a[r]=e[r]);else if(e=t.currentStyle||t.style)for(r in e)"string"===typeof r&&void 0===a[r]&&(a[r.replace(C,L)]=e[r]);return q||(a.opacity=X(t)),i=Ht(t,e,!1),a.rotation=i.rotation,a.skewX=i.skewX,a.scaleX=i.scaleX,a.scaleY=i.scaleY,a.x=i.x,a.y=i.y,kt&&(a.z=i.z,a.rotationX=i.rotationX,a.rotationY=i.rotationY,a.scaleZ=i.scaleZ),a.filters&&delete a.filters,a},nt=function(t,e,r,i,n){var a,o,s,l={},u=t.style;for(o in r)"cssText"!==o&&"length"!==o&&isNaN(o)&&(e[o]!==(a=r[o])||n&&n[o])&&-1===o.indexOf("Origin")&&("number"!==typeof a&&"string"!==typeof a||(l[o]="auto"!==a||"left"!==o&&"top"!==o?""!==a&&"auto"!==a&&"none"!==a||"string"!==typeof e[o]||""===e[o].replace(b,"")?a:0:rt(t,o),void 0!==u[o]&&(s=new _t(u,o,u[o],s))));if(i)for(o in i)"className"!==o&&(l[o]=i[o]);return{difs:l,firstMPT:s}},at={width:["Left","Right"],height:["Top","Bottom"]},ot=["marginLeft","marginRight","marginTop","marginBottom"],st=function(t,e,r){if("svg"===(t.nodeName+"").toLowerCase())return(r||Q(t))[e]||0;if(t.getCTM&&Vt(t))return t.getBBox()[e]||0;var i=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),n=at[e],a=n.length;r=r||Q(t,null);while(--a>-1)i-=parseFloat(tt(t,"padding"+n[a],r,!0))||0,i-=parseFloat(tt(t,"border"+n[a]+"Width",r,!0))||0;return i},lt=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var r,i=t.split(" "),n=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],a=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];if(i.length>3&&!e){for(i=t.split(", ").join(",").split(","),t=[],r=0;r<i.length;r++)t.push(lt(i[r]));return t.join(",")}return null==a?a="center"===n?"50%":"0":"center"===a&&(a="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),t=n+" "+a+(i.length>2?" "+i[2]:""),e&&(e.oxp=-1!==n.indexOf("%"),e.oyp=-1!==a.indexOf("%"),e.oxr="="===n.charAt(1),e.oyr="="===a.charAt(1),e.ox=parseFloat(n.replace(b,"")),e.oy=parseFloat(a.replace(b,"")),e.v=t),e||t},ut=function(t,e){return"function"===typeof t&&(t=t(v,m)),"string"===typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ct=function(t,e){"function"===typeof t&&(t=t(v,m));var r="string"===typeof t&&"="===t.charAt(1);return"string"===typeof t&&"v"===t.charAt(t.length-2)&&(t=(r?t.substr(0,2):0)+window["inner"+("vh"===t.substr(-2)?"Height":"Width")]*(parseFloat(r?t.substr(2):t)/100)),null==t?e:r?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ht=function(t,e,r,i){var n,a,o,s,l,u=1e-6;return"function"===typeof t&&(t=t(v,m)),null==t?s=e:"number"===typeof t?s=t:(n=360,a=t.split("_"),l="="===t.charAt(1),o=(l?parseInt(t.charAt(0)+"1",10)*parseFloat(a[0].substr(2)):parseFloat(a[0]))*(-1===t.indexOf("rad")?1:B)-(l?0:e),a.length&&(i&&(i[r]=e+o),-1!==t.indexOf("short")&&(o%=n,o!==o%(n/2)&&(o=o<0?o+n:o-n)),-1!==t.indexOf("_cw")&&o<0?o=(o+9999999999*n)%n-(o/n|0)*n:-1!==t.indexOf("ccw")&&o>0&&(o=(o-9999999999*n)%n-(o/n|0)*n)),s=e+o),s<u&&s>-u&&(s=0),s},pt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},dt=function(t,e,r){return t=t<0?t+1:t>1?t-1:t,255*(6*t<1?e+(r-e)*t*6:t<.5?r:3*t<2?e+(r-e)*(2/3-t)*6:e)+.5|0},ft=a.parseColor=function(t,e){var r,i,n,a,o,s,l,u,c,h,p;if(t)if("number"===typeof t)r=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),pt[t])r=pt[t];else if("#"===t.charAt(0))4===t.length&&(i=t.charAt(1),n=t.charAt(2),a=t.charAt(3),t="#"+i+i+n+n+a+a),t=parseInt(t.substr(1),16),r=[t>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(r=p=t.match(g),e){if(-1!==t.indexOf("="))return t.match(y)}else o=Number(r[0])%360/360,s=Number(r[1])/100,l=Number(r[2])/100,n=l<=.5?l*(s+1):l+s-l*s,i=2*l-n,r.length>3&&(r[3]=Number(r[3])),r[0]=dt(o+1/3,i,n),r[1]=dt(o,i,n),r[2]=dt(o-1/3,i,n);else r=t.match(g)||pt.transparent;r[0]=Number(r[0]),r[1]=Number(r[1]),r[2]=Number(r[2]),r.length>3&&(r[3]=Number(r[3]))}else r=pt.black;return e&&!p&&(i=r[0]/255,n=r[1]/255,a=r[2]/255,u=Math.max(i,n,a),c=Math.min(i,n,a),l=(u+c)/2,u===c?o=s=0:(h=u-c,s=l>.5?h/(2-u-c):h/(u+c),o=u===i?(n-a)/h+(n<a?6:0):u===n?(a-i)/h+2:(i-n)/h+4,o*=60),r[0]=o+.5|0,r[1]=100*s+.5|0,r[2]=100*l+.5|0),r},mt=function(t,e){var r,i,n,a=t.match(vt)||[],o=0,s="";if(!a.length)return t;for(r=0;r<a.length;r++)i=a[r],n=t.substr(o,t.indexOf(i,o)-o),o+=n.length+i.length,i=ft(i,e),3===i.length&&i.push(1),s+=n+(e?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return s+t.substr(o)},vt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(l in pt)vt+="|"+l+"\\b";vt=new RegExp(vt+")","gi"),a.colorStringFilter=function(t){var e,r=t[0]+" "+t[1];vt.test(r)&&(e=-1!==r.indexOf("hsl(")||-1!==r.indexOf("hsla("),t[0]=mt(t[0],e),t[1]=mt(t[1],e)),vt.lastIndex=0},i["f"].defaultStringFilter||(i["f"].defaultStringFilter=a.colorStringFilter);var gt=function(t,e,r,i){if(null==t)return function(t){return t};var n,a=e?(t.match(vt)||[""])[0]:"",o=t.split(a).join("").match(_)||[],s=t.substr(0,t.indexOf(o[0])),l=")"===t.charAt(t.length-1)?")":"",u=-1!==t.indexOf(" ")?" ":",",c=o.length,h=c>0?o[0].replace(g,""):"";return c?e?(n=function(t){var e,p,d,f;if("number"===typeof t)t+=h;else if(i&&O.test(t)){for(f=t.replace(O,"|").split("|"),d=0;d<f.length;d++)f[d]=n(f[d]);return f.join(",")}if(e=(t.match(vt)||[a])[0],p=t.split(e).join("").match(_)||[],d=p.length,c>d--)while(++d<c)p[d]=r?p[(d-1)/2|0]:o[d];return s+p.join(u)+u+e+l+(-1!==t.indexOf("inset")?" inset":"")},n):(n=function(t){var e,a,p;if("number"===typeof t)t+=h;else if(i&&O.test(t)){for(a=t.replace(O,"|").split("|"),p=0;p<a.length;p++)a[p]=n(a[p]);return a.join(",")}if(e=t.match(","===u?_:x)||[],p=e.length,c>p--)while(++p<c)e[p]=r?e[(p-1)/2|0]:o[p];return(s&&"none"!==t&&t.substr(0,t.indexOf(e[0]))||s)+e.join(u)+l},n):function(t){return t}},yt=function(t){return t=t.split(","),function(e,r,i,n,a,o,s){var l,u=(r+"").split(" ");for(s={},l=0;l<4;l++)s[t[l]]=u[l]=u[l]||u[(l-1)/2>>0];return n.parse(e,s,a,o)}},_t=(H._setPluginRatio=function(t){this.plugin.setRatio(t);var e,r,i,n,a,o=this.data,s=o.proxy,l=o.firstMPT,u=1e-6;while(l)e=s[l.v],l.r?e=l.r(e):e<u&&e>-u&&(e=0),l.t[l.p]=e,l=l._next;if(o.autoRotate&&(o.autoRotate.rotation=o.mod?o.mod.call(this._tween,s.rotation,this.t,this._tween):s.rotation),1===t||0===t){l=o.firstMPT,a=1===t?"e":"b";while(l){if(r=l.t,r.type){if(1===r.type){for(n=r.xs0+r.s+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r[a]=n}}else r[a]=r.s+r.xs0;l=l._next}}},function(t,e,r,i,n){this.t=t,this.p=e,this.v=r,this.r=n,i&&(i._prev=this,this._next=i)}),xt=(H._parseToProxy=function(t,e,r,i,n,a){var o,s,l,u,c,h=i,p={},d={},f=r._transform,m=F;r._transform=null,F=e,i=c=r.parse(t,e,i,n),F=m,a&&(r._transform=f,h&&(h._prev=null,h._prev&&(h._prev._next=null)));while(i&&i!==h){if(i.type<=1&&(s=i.p,d[s]=i.s+i.c,p[s]=i.s,a||(u=new _t(i,"s",s,u,i.r),i.c=0),1===i.type)){o=i.l;while(--o>0)l="xn"+o,s=i.p+"_"+l,d[s]=i.data[l],p[s]=i[l],a||(u=new _t(i,l,s,u,i.rxp[l]))}i=i._next}return{proxy:p,end:d,firstMPT:u,pt:c}},H.CSSPropTween=function(e,r,i,a,o,s,l,u,c,h,p){this.t=e,this.p=r,this.s=i,this.c=a,this.n=l||r,e instanceof xt||n.push(this.n),this.r=u?"function"===typeof u?u:Math.round:u,this.type=s||0,c&&(this.pr=c,t=!0),this.b=void 0===h?i:h,this.e=void 0===p?i+a:p,o&&(this._next=o,o._prev=this)}),bt=function(t,e,r,i,n,a){var o=new xt(t,e,r,i-r,n,-1,a);return o.b=r,o.e=o.xs0=i,o},wt=a.parseComplex=function(t,e,r,i,n,o,s,l,c,h){r=r||o||"","function"===typeof i&&(i=i(v,m)),s=new xt(t,e,0,0,s,h?2:1,null,!1,l,r,i),i+="",n&&vt.test(i+r)&&(i=[r,i],a.colorStringFilter(i),r=i[0],i=i[1]);var p,d,f,_,x,b,w,T,S,E,M,A,C,P=r.split(", ").join(",").split(" "),L=i.split(", ").join(",").split(" "),I=P.length,k=!1!==u;for(-1===i.indexOf(",")&&-1===r.indexOf(",")||(-1!==(i+r).indexOf("rgb")||-1!==(i+r).indexOf("hsl")?(P=P.join(" ").replace(O,", ").split(" "),L=L.join(" ").replace(O,", ").split(" ")):(P=P.join(" ").split(",").join(", ").split(" "),L=L.join(" ").split(",").join(", ").split(" ")),I=P.length),I!==L.length&&(P=(o||"").split(" "),I=P.length),s.plugin=c,s.setRatio=h,vt.lastIndex=0,p=0;p<I;p++)if(_=P[p],x=L[p]+"",T=parseFloat(_),T||0===T)s.appendXtra("",T,ut(x,T),x.replace(y,""),!(!k||-1===x.indexOf("px"))&&Math.round,!0);else if(n&&vt.test(_))A=x.indexOf(")")+1,A=")"+(A?x.substr(A):""),C=-1!==x.indexOf("hsl")&&q,E=x,_=ft(_,C),x=ft(x,C),S=_.length+x.length>6,S&&!q&&0===x[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(L[p]).join("transparent")):(q||(S=!1),C?s.appendXtra(E.substr(0,E.indexOf("hsl"))+(S?"hsla(":"hsl("),_[0],ut(x[0],_[0]),",",!1,!0).appendXtra("",_[1],ut(x[1],_[1]),"%,",!1).appendXtra("",_[2],ut(x[2],_[2]),S?"%,":"%"+A,!1):s.appendXtra(E.substr(0,E.indexOf("rgb"))+(S?"rgba(":"rgb("),_[0],x[0]-_[0],",",Math.round,!0).appendXtra("",_[1],x[1]-_[1],",",Math.round).appendXtra("",_[2],x[2]-_[2],S?",":A,Math.round),S&&(_=_.length<4?1:_[3],s.appendXtra("",_,(x.length<4?1:x[3])-_,A,!1))),vt.lastIndex=0;else if(b=_.match(g),b){if(w=x.match(y),!w||w.length!==b.length)return s;for(f=0,d=0;d<b.length;d++)M=b[d],E=_.indexOf(M,f),s.appendXtra(_.substr(f,E-f),Number(M),ut(w[d],M),"",!(!k||"px"!==_.substr(E+M.length,2))&&Math.round,0===d),f=E+M.length;s["xs"+s.l]+=_.substr(f)}else s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+x:x;if(-1!==i.indexOf("=")&&s.data){for(A=s.xs0+s.data.s,p=1;p<s.l;p++)A+=s["xs"+p]+s.data["xn"+p];s.e=A+s["xs"+p]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},Tt=9;l=xt.prototype,l.l=l.pr=0;while(--Tt>0)l["xn"+Tt]=0,l["xs"+Tt]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(t,e,r,i,n,a){var o=this,s=o.l;return o["xs"+s]+=a&&(s||o["xs"+s])?" "+t:t||"",r||0===s||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=i||"",s>0?(o.data["xn"+s]=e+r,o.rxp["xn"+s]=n,o["xn"+s]=e,o.plugin||(o.xfirst=new xt(o,"xn"+s,e,r,o.xfirst||o,0,o.n,n,o.pr),o.xfirst.xs0=0),o):(o.data={s:e+r},o.rxp={},o.s=e,o.c=r,o.r=n,o)):(o["xs"+s]+=e+(i||""),o)};var St=function(t,e){e=e||{},this.p=e.prefix&&J(t)||t,s[t]=s[this.p]=this,this.format=e.formatter||gt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.allowFunc=e.allowFunc,this.pr=e.priority||0},Et=H._registerComplexSpecialProp=function(t,e,r){"object"!==typeof e&&(e={parser:r});var i,n=t.split(","),a=e.defaultValue;for(r=r||[a],i=0;i<n.length;i++)e.prefix=0===i&&e.prefix,e.defaultValue=r[i]||a,new St(n[i],e)},Mt=H._registerPluginProp=function(t){if(!s[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";Et(t,{parser:function(t,r,i,n,a,l,u){var c=o.com.greensock.plugins[e];return c?(c._cssRegister(),s[i].parse(t,r,i,n,a,l,u)):($("Error: "+e+" js file not loaded."),a)}})}};l=St.prototype,l.parseComplex=function(t,e,r,i,n,a){var o,s,l,u,c,h,p=this.keyword;if(this.multi&&(O.test(r)||O.test(e)?(s=e.replace(O,"|").split("|"),l=r.replace(O,"|").split("|")):p&&(s=[e],l=[r])),l){for(u=l.length>s.length?l.length:s.length,o=0;o<u;o++)e=s[o]=s[o]||this.dflt,r=l[o]=l[o]||this.dflt,p&&(c=e.indexOf(p),h=r.indexOf(p),c!==h&&(-1===h?s[o]=s[o].split(p).join(""):-1===c&&(s[o]+=" "+p)));e=s.join(", "),r=l.join(", ")}return wt(t,this.p,e,r,this.clrs,this.dflt,i,this.pr,n,a)},l.parse=function(t,e,i,n,a,o,s){return this.parseComplex(t.style,this.format(tt(t,this.p,r,!1,this.dflt)),this.format(e),a,o)},a.registerSpecialProp=function(t,e,r){Et(t,{parser:function(t,i,n,a,o,s,l){var u=new xt(t,n,0,0,o,2,n,!1,r);return u.plugin=s,u.setRatio=e(t,i,a._tween,n),u},priority:r})},a.useSVGTransformAttr=!0;var At,Ct="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Pt=J("transform"),Lt=Y+"transform",It=J("transformOrigin"),kt=null!==J("perspective"),Rt=H.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=!(!1===a.defaultForce3D||!kt)&&(a.defaultForce3D||"auto")},Ot=i["e"].SVGElement,zt=function(t,e,r){var i,n=U.createElementNS("http://www.w3.org/2000/svg",t),a=/([a-z])([A-Z])/g;for(i in r)n.setAttributeNS(null,i.replace(a,"$1-$2").toLowerCase(),r[i]);return e.appendChild(n),n},Dt=U.documentElement||{},Bt=function(){var t,e,r,n=f||/Android/i.test(W)&&!i["e"].chrome;return U.createElementNS&&Dt.appendChild&&!n&&(t=zt("svg",Dt),e=zt("rect",t,{width:100,height:50,x:100}),r=e.getBoundingClientRect().width,e.style[It]="50% 50%",e.style[Pt]="scaleX(0.5)",n=r===e.getBoundingClientRect().width&&!(p&&kt),Dt.removeChild(t)),n}(),Ft=function(t,e,r,i,n,o){var s,l,u,c,h,p,d,f,m,v,g,y,_,x,b=t._gsTransform,w=Gt(t,!0);b&&(_=b.xOrigin,x=b.yOrigin),(!i||(s=i.split(" ")).length<2)&&(d=t.getBBox(),0===d.x&&0===d.y&&d.width+d.height===0&&(d={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),e=lt(e).split(" "),s=[(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*d.width:parseFloat(e[0]))+d.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*d.height:parseFloat(e[1]))+d.y]),r.xOrigin=c=parseFloat(s[0]),r.yOrigin=h=parseFloat(s[1]),i&&w!==jt&&(p=w[0],d=w[1],f=w[2],m=w[3],v=w[4],g=w[5],y=p*m-d*f,y&&(l=c*(m/y)+h*(-f/y)+(f*g-m*v)/y,u=c*(-d/y)+h*(p/y)-(p*g-d*v)/y,c=r.xOrigin=s[0]=l,h=r.yOrigin=s[1]=u)),b&&(o&&(r.xOffset=b.xOffset,r.yOffset=b.yOffset,b=r),n||!1!==n&&!1!==a.defaultSmoothOrigin?(l=c-_,u=h-x,b.xOffset+=l*w[0]+u*w[2]-l,b.yOffset+=l*w[1]+u*w[3]-u):b.xOffset=b.yOffset=0),o||t.setAttribute("data-svg-origin",s.join(" "))},Nt=function(t){var e,r=V("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,n=this.nextSibling,a=this.style.cssText;if(Dt.appendChild(r),r.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Nt}catch(o){}else this._originalGetBBox&&(e=this._originalGetBBox());return n?i.insertBefore(this,n):i.appendChild(this),Dt.removeChild(r),this.style.cssText=a,e},Ut=function(t){try{return t.getBBox()}catch(e){return Nt.call(t,!0)}},Vt=function(t){return!(!Ot||!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Ut(t))},jt=[1,0,0,1,0,0],Gt=function(t,e){var r,i,n,a,o,s,l,u=t._gsTransform||new Rt,c=1e5,h=t.style;if(Pt?i=tt(t,Lt,null,!0):t.currentStyle&&(i=t.currentStyle.filter.match(k),i=i&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),u.x||0,u.y||0].join(","):""),r=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,Pt&&r&&!t.offsetParent&&t!==Dt&&(a=h.display,h.display="block",l=t.parentNode,l&&t.offsetParent||(o=1,s=t.nextSibling,Dt.appendChild(t)),i=tt(t,Lt,null,!0),r=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,a?h.display=a:$t(h,"display"),o&&(s?l.insertBefore(t,s):l?l.appendChild(t):Dt.removeChild(t))),(u.svg||t.getCTM&&Vt(t))&&(r&&-1!==(h[Pt]+"").indexOf("matrix")&&(i=h[Pt],r=0),n=t.getAttribute("transform"),r&&n&&(n=t.transform.baseVal.consolidate().matrix,i="matrix("+n.a+","+n.b+","+n.c+","+n.d+","+n.e+","+n.f+")",r=0)),r)return jt;n=(i||"").match(g)||[],Tt=n.length;while(--Tt>-1)a=Number(n[Tt]),n[Tt]=(o=a-(a|=0))?(o*c+(o<0?-.5:.5)|0)/c+a:a;return e&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n},Ht=H.getTransform=function(t,e,r,n){if(t._gsTransform&&r&&!n)return t._gsTransform;var o,s,l,u,c,h,p=r&&t._gsTransform||new Rt,d=p.scaleX<0,f=2e-5,m=1e5,v=kt&&(parseFloat(tt(t,It,e,!1,"0 0 0").split(" ")[2])||p.zOrigin)||0,g=parseFloat(a.defaultTransformPerspective)||0;if(p.svg=!(!t.getCTM||!Vt(t)),p.svg&&(Ft(t,tt(t,It,e,!1,"50% 50%")+"",p,t.getAttribute("data-svg-origin")),At=a.useSVGTransformAttr||Bt),o=Gt(t),o!==jt){if(16===o.length){var y,_,x,b,w,T=o[0],S=o[1],E=o[2],M=o[3],A=o[4],C=o[5],P=o[6],L=o[7],I=o[8],k=o[9],R=o[10],O=o[12],z=o[13],D=o[14],F=o[11],N=Math.atan2(P,R);p.zOrigin&&(D=-p.zOrigin,O=I*D-o[12],z=k*D-o[13],D=R*D+p.zOrigin-o[14]),p.rotationX=N*B,N&&(b=Math.cos(-N),w=Math.sin(-N),y=A*b+I*w,_=C*b+k*w,x=P*b+R*w,I=A*-w+I*b,k=C*-w+k*b,R=P*-w+R*b,F=L*-w+F*b,A=y,C=_,P=x),N=Math.atan2(-E,R),p.rotationY=N*B,N&&(b=Math.cos(-N),w=Math.sin(-N),y=T*b-I*w,_=S*b-k*w,x=E*b-R*w,k=S*w+k*b,R=E*w+R*b,F=M*w+F*b,T=y,S=_,E=x),N=Math.atan2(S,T),p.rotation=N*B,N&&(b=Math.cos(N),w=Math.sin(N),y=T*b+S*w,_=A*b+C*w,x=I*b+k*w,S=S*b-T*w,C=C*b-A*w,k=k*b-I*w,T=y,A=_,I=x),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY=180-p.rotationY),N=Math.atan2(A,C),p.scaleX=(Math.sqrt(T*T+S*S+E*E)*m+.5|0)/m,p.scaleY=(Math.sqrt(C*C+P*P)*m+.5|0)/m,p.scaleZ=(Math.sqrt(I*I+k*k+R*R)*m+.5|0)/m,T/=p.scaleX,A/=p.scaleY,S/=p.scaleX,C/=p.scaleY,Math.abs(N)>f?(p.skewX=N*B,A=0,"simple"!==p.skewType&&(p.scaleY*=1/Math.cos(N))):p.skewX=0,p.perspective=F?1/(F<0?-F:F):0,p.x=O,p.y=z,p.z=D,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*T-p.yOrigin*A),p.y-=p.yOrigin-(p.yOrigin*S-p.xOrigin*C))}else if(!kt||n||!o.length||p.x!==o[4]||p.y!==o[5]||!p.rotationX&&!p.rotationY){var U=o.length>=6,V=U?o[0]:1,j=o[1]||0,G=o[2]||0,H=U?o[3]:1;p.x=o[4]||0,p.y=o[5]||0,l=Math.sqrt(V*V+j*j),u=Math.sqrt(H*H+G*G),c=V||j?Math.atan2(j,V)*B:p.rotation||0,h=G||H?Math.atan2(G,H)*B+c:p.skewX||0,p.scaleX=l,p.scaleY=u,p.rotation=c,p.skewX=h,kt&&(p.rotationX=p.rotationY=p.z=0,p.perspective=g,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*V+p.yOrigin*G),p.y-=p.yOrigin-(p.xOrigin*j+p.yOrigin*H))}for(s in Math.abs(p.skewX)>90&&Math.abs(p.skewX)<270&&(d?(p.scaleX*=-1,p.skewX+=p.rotation<=0?180:-180,p.rotation+=p.rotation<=0?180:-180):(p.scaleY*=-1,p.skewX+=p.skewX<=0?180:-180)),p.zOrigin=v,p)p[s]<f&&p[s]>-f&&(p[s]=0)}return r&&(t._gsTransform=p,p.svg&&(At&&t.style[Pt]?i["f"].delayedCall(.001,(function(){$t(t.style,Pt)})):!At&&t.getAttribute("transform")&&i["f"].delayedCall(.001,(function(){t.removeAttribute("transform")})))),p},Wt=function(t){var e,r,i=this.data,n=-i.rotation*D,a=n+i.skewX*D,o=1e5,s=(Math.cos(n)*i.scaleX*o|0)/o,l=(Math.sin(n)*i.scaleX*o|0)/o,u=(Math.sin(a)*-i.scaleY*o|0)/o,c=(Math.cos(a)*i.scaleY*o|0)/o,h=this.t.style,p=this.t.currentStyle;if(p){r=l,l=-u,u=-r,e=p.filter,h.filter="";var d,m,v=this.t.offsetWidth,g=this.t.offsetHeight,y="absolute"!==p.position,_="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+l+", M21="+u+", M22="+c,x=i.x+v*i.xPercent/100,b=i.y+g*i.yPercent/100;if(null!=i.ox&&(d=(i.oxp?v*i.ox*.01:i.ox)-v/2,m=(i.oyp?g*i.oy*.01:i.oy)-g/2,x+=d-(d*s+m*l),b+=m-(d*u+m*c)),y?(d=v/2,m=g/2,_+=", Dx="+(d-(d*s+m*l)+x)+", Dy="+(m-(d*u+m*c)+b)+")"):_+=", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?h.filter=e.replace(R,_):h.filter=_+" "+e,0!==t&&1!==t||1===s&&0===l&&0===u&&1===c&&(y&&-1===_.indexOf("Dx=0, Dy=0")||T.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&h.removeAttribute("filter")),!y){var S,E,M,A=f<8?1:-1;for(d=i.ieOffsetX||0,m=i.ieOffsetY||0,i.ieOffsetX=Math.round((v-((s<0?-s:s)*v+(l<0?-l:l)*g))/2+x),i.ieOffsetY=Math.round((g-((c<0?-c:c)*g+(u<0?-u:u)*v))/2+b),Tt=0;Tt<4;Tt++)E=ot[Tt],S=p[E],r=-1!==S.indexOf("px")?parseFloat(S):et(this.t,E,parseFloat(S),S.replace(w,""))||0,M=r!==i[E]?Tt<2?-i.ieOffsetX:-i.ieOffsetY:Tt<2?d-i.ieOffsetX:m-i.ieOffsetY,h[E]=(i[E]=Math.round(r-M*(0===Tt||2===Tt?1:A)))+"px"}}},qt=H.set3DTransformRatio=H.setTransformRatio=function(t){var e,r,i,n,a,o,s,l,u,c,h,d,f,m,v,g,y,_,x,b,w,T,S,E=this.data,M=this.t.style,A=E.rotation,C=E.rotationX,P=E.rotationY,L=E.scaleX,I=E.scaleY,k=E.scaleZ,R=E.x,O=E.y,z=E.z,B=E.svg,F=E.perspective,N=E.force3D,U=E.skewY,V=E.skewX;if(U&&(V+=U,A+=U),!((1!==t&&0!==t||"auto"!==N||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&N||z||F||P||C||1!==k)||At&&B||!kt)A||V||B?(A*=D,T=V*D,S=1e5,r=Math.cos(A)*L,a=Math.sin(A)*L,i=Math.sin(A-T)*-I,o=Math.cos(A-T)*I,T&&"simple"===E.skewType&&(e=Math.tan(T-U*D),e=Math.sqrt(1+e*e),i*=e,o*=e,U&&(e=Math.tan(U*D),e=Math.sqrt(1+e*e),r*=e,a*=e)),B&&(R+=E.xOrigin-(E.xOrigin*r+E.yOrigin*i)+E.xOffset,O+=E.yOrigin-(E.xOrigin*a+E.yOrigin*o)+E.yOffset,At&&(E.xPercent||E.yPercent)&&(v=this.t.getBBox(),R+=.01*E.xPercent*v.width,O+=.01*E.yPercent*v.height),v=1e-6,R<v&&R>-v&&(R=0),O<v&&O>-v&&(O=0)),x=(r*S|0)/S+","+(a*S|0)/S+","+(i*S|0)/S+","+(o*S|0)/S+","+R+","+O+")",B&&At?this.t.setAttribute("transform","matrix("+x):M[Pt]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix(":"matrix(")+x):M[Pt]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix(":"matrix(")+L+",0,0,"+I+","+R+","+O+")";else{if(p&&(v=1e-4,L<v&&L>-v&&(L=k=2e-5),I<v&&I>-v&&(I=k=2e-5),!F||E.z||E.rotationX||E.rotationY||(F=0)),A||V)A*=D,g=r=Math.cos(A),y=a=Math.sin(A),V&&(A-=V*D,g=Math.cos(A),y=Math.sin(A),"simple"===E.skewType&&(e=Math.tan((V-U)*D),e=Math.sqrt(1+e*e),g*=e,y*=e,E.skewY&&(e=Math.tan(U*D),e=Math.sqrt(1+e*e),r*=e,a*=e))),i=-y,o=g;else{if(!(P||C||1!==k||F||B))return void(M[Pt]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) translate3d(":"translate3d(")+R+"px,"+O+"px,"+z+"px)"+(1!==L||1!==I?" scale("+L+","+I+")":""));r=o=1,i=a=0}c=1,n=s=l=u=h=d=0,f=F?-1/F:0,m=E.zOrigin,v=1e-6,b=",",w="0",A=P*D,A&&(g=Math.cos(A),y=Math.sin(A),l=-y,h=f*-y,n=r*y,s=a*y,c=g,f*=g,r*=g,a*=g),A=C*D,A&&(g=Math.cos(A),y=Math.sin(A),e=i*g+n*y,_=o*g+s*y,u=c*y,d=f*y,n=i*-y+n*g,s=o*-y+s*g,c*=g,f*=g,i=e,o=_),1!==k&&(n*=k,s*=k,c*=k,f*=k),1!==I&&(i*=I,o*=I,u*=I,d*=I),1!==L&&(r*=L,a*=L,l*=L,h*=L),(m||B)&&(m&&(R+=n*-m,O+=s*-m,z+=c*-m+m),B&&(R+=E.xOrigin-(E.xOrigin*r+E.yOrigin*i)+E.xOffset,O+=E.yOrigin-(E.xOrigin*a+E.yOrigin*o)+E.yOffset),R<v&&R>-v&&(R=w),O<v&&O>-v&&(O=w),z<v&&z>-v&&(z=0)),x=E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix3d(":"matrix3d(",x+=(r<v&&r>-v?w:r)+b+(a<v&&a>-v?w:a)+b+(l<v&&l>-v?w:l),x+=b+(h<v&&h>-v?w:h)+b+(i<v&&i>-v?w:i)+b+(o<v&&o>-v?w:o),C||P||1!==k?(x+=b+(u<v&&u>-v?w:u)+b+(d<v&&d>-v?w:d)+b+(n<v&&n>-v?w:n),x+=b+(s<v&&s>-v?w:s)+b+(c<v&&c>-v?w:c)+b+(f<v&&f>-v?w:f)+b):x+=",0,0,0,0,1,0,",x+=R+b+O+b+z+b+(F?1+-z/F:1)+")",M[Pt]=x}};l=Rt.prototype,l.x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=l.xOffset=l.yOffset=0,l.scaleX=l.scaleY=l.scaleZ=1,Et("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,n,o,s,l){if(n._lastParsedTransform===l)return o;n._lastParsedTransform=l;var u=l.scale&&"function"===typeof l.scale?l.scale:0;u&&(l.scale=u(v,t));var c,h,p,d,f,g,y,_,x,b=t._gsTransform,w=t.style,T=1e-6,S=Ct.length,E=l,M={},A="transformOrigin",C=Ht(t,r,!0,E.parseTransform),P=E.transform&&("function"===typeof E.transform?E.transform(v,m):E.transform);if(C.skewType=E.skewType||C.skewType||a.defaultSkewType,n._transform=C,"rotationZ"in E&&(E.rotation=E.rotationZ),P&&"string"===typeof P&&Pt)h=j.style,h[Pt]=P,h.display="block",h.position="absolute",-1!==P.indexOf("%")&&(h.width=tt(t,"width"),h.height=tt(t,"height")),U.body.appendChild(j),c=Ht(j,null,!1),"simple"===C.skewType&&(c.scaleY*=Math.cos(c.skewX*D)),C.svg&&(g=C.xOrigin,y=C.yOrigin,c.x-=C.xOffset,c.y-=C.yOffset,(E.transformOrigin||E.svgOrigin)&&(P={},Ft(t,lt(E.transformOrigin),P,E.svgOrigin,E.smoothOrigin,!0),g=P.xOrigin,y=P.yOrigin,c.x-=P.xOffset-C.xOffset,c.y-=P.yOffset-C.yOffset),(g||y)&&(_=Gt(j,!0),c.x-=g-(g*_[0]+y*_[2]),c.y-=y-(g*_[1]+y*_[3]))),U.body.removeChild(j),c.perspective||(c.perspective=C.perspective),null!=E.xPercent&&(c.xPercent=ct(E.xPercent,C.xPercent)),null!=E.yPercent&&(c.yPercent=ct(E.yPercent,C.yPercent));else if("object"===typeof E){if(c={scaleX:ct(null!=E.scaleX?E.scaleX:E.scale,C.scaleX),scaleY:ct(null!=E.scaleY?E.scaleY:E.scale,C.scaleY),scaleZ:ct(E.scaleZ,C.scaleZ),x:ct(E.x,C.x),y:ct(E.y,C.y),z:ct(E.z,C.z),xPercent:ct(E.xPercent,C.xPercent),yPercent:ct(E.yPercent,C.yPercent),perspective:ct(E.transformPerspective,C.perspective)},f=E.directionalRotation,null!=f)if("object"===typeof f)for(h in f)E[h]=f[h];else E.rotation=f;"string"===typeof E.x&&-1!==E.x.indexOf("%")&&(c.x=0,c.xPercent=ct(E.x,C.xPercent)),"string"===typeof E.y&&-1!==E.y.indexOf("%")&&(c.y=0,c.yPercent=ct(E.y,C.yPercent)),c.rotation=ht("rotation"in E?E.rotation:"shortRotation"in E?E.shortRotation+"_short":C.rotation,C.rotation,"rotation",M),kt&&(c.rotationX=ht("rotationX"in E?E.rotationX:"shortRotationX"in E?E.shortRotationX+"_short":C.rotationX||0,C.rotationX,"rotationX",M),c.rotationY=ht("rotationY"in E?E.rotationY:"shortRotationY"in E?E.shortRotationY+"_short":C.rotationY||0,C.rotationY,"rotationY",M)),c.skewX=ht(E.skewX,C.skewX),c.skewY=ht(E.skewY,C.skewY)}kt&&null!=E.force3D&&(C.force3D=E.force3D,d=!0),p=C.force3D||C.z||C.rotationX||C.rotationY||c.z||c.rotationX||c.rotationY||c.perspective,p||null==E.scale||(c.scaleZ=1);while(--S>-1)x=Ct[S],P=c[x]-C[x],(P>T||P<-T||null!=E[x]||null!=F[x])&&(d=!0,o=new xt(C,x,C[x],P,o),x in M&&(o.e=M[x]),o.xs0=0,o.plugin=s,n._overwriteProps.push(o.n));return P="function"===typeof E.transformOrigin?E.transformOrigin(v,m):E.transformOrigin,C.svg&&(P||E.svgOrigin)&&(g=C.xOffset,y=C.yOffset,Ft(t,lt(P),c,E.svgOrigin,E.smoothOrigin),o=bt(C,"xOrigin",(b?C:c).xOrigin,c.xOrigin,o,A),o=bt(C,"yOrigin",(b?C:c).yOrigin,c.yOrigin,o,A),g===C.xOffset&&y===C.yOffset||(o=bt(C,"xOffset",b?g:C.xOffset,C.xOffset,o,A),o=bt(C,"yOffset",b?y:C.yOffset,C.yOffset,o,A)),P="0px 0px"),(P||kt&&p&&C.zOrigin)&&(Pt?(d=!0,x=It,P||(P=(tt(t,x,r,!1,"50% 50%")+"").split(" "),P=P[0]+" "+P[1]+" "+C.zOrigin+"px"),P+="",o=new xt(w,x,0,0,o,-1,A),o.b=w[x],o.plugin=s,kt?(h=C.zOrigin,P=P.split(" "),C.zOrigin=(P.length>2?parseFloat(P[2]):h)||0,o.xs0=o.e=P[0]+" "+(P[1]||"50%")+" 0px",o=new xt(C,"zOrigin",0,0,o,-1,o.n),o.b=h,o.xs0=o.e=C.zOrigin):o.xs0=o.e=P):lt(P+"",C)),d&&(n._transformType=C.svg&&At||!p&&3!==this._transformType?2:3),u&&(l.scale=u),o},allowFunc:!0,prefix:!0}),Et("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Et("clipPath",{defaultValue:"inset(0%)",prefix:!0,multi:!0,formatter:gt("inset(0% 0% 0% 0%)",!1,!0)}),Et("borderRadius",{defaultValue:"0px",parser:function(t,i,n,a,o,s){i=this.format(i);var l,u,c,h,p,d,f,m,v,g,y,_,x,b,w,T,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],E=t.style;for(v=parseFloat(t.offsetWidth),g=parseFloat(t.offsetHeight),l=i.split(" "),u=0;u<S.length;u++)this.p.indexOf("border")&&(S[u]=J(S[u])),p=h=tt(t,S[u],r,!1,"0px"),-1!==p.indexOf(" ")&&(h=p.split(" "),p=h[0],h=h[1]),d=c=l[u],f=parseFloat(p),_=p.substr((f+"").length),x="="===d.charAt(1),x?(m=parseInt(d.charAt(0)+"1",10),d=d.substr(2),m*=parseFloat(d),y=d.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(d),y=d.substr((m+"").length)),""===y&&(y=e[n]||_),y!==_&&(b=et(t,"borderLeft",f,_),w=et(t,"borderTop",f,_),"%"===y?(p=b/v*100+"%",h=w/g*100+"%"):"em"===y?(T=et(t,"borderLeft",1,"em"),p=b/T+"em",h=w/T+"em"):(p=b+"px",h=w+"px"),x&&(d=parseFloat(p)+m+y,c=parseFloat(h)+m+y)),o=wt(E,S[u],p+" "+h,d+" "+c,!1,"0px",o);return o},prefix:!0,formatter:gt("0px 0px 0px 0px",!1,!0)}),Et("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,i,n,a,o){return wt(t.style,i,this.format(tt(t,i,r,!1,"0px 0px")),this.format(e),!1,"0px",a)},prefix:!0,formatter:gt("0px 0px",!1,!0)}),Et("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,a,o){var s,l,u,c,h,p,d="background-position",m=r||Q(t,null),v=this.format((m?f?m.getPropertyValue(d+"-x")+" "+m.getPropertyValue(d+"-y"):m.getPropertyValue(d):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),g=this.format(e);if(-1!==v.indexOf("%")!==(-1!==g.indexOf("%"))&&g.split(",").length<2&&(p=tt(t,"backgroundImage").replace(P,""),p&&"none"!==p)){s=v.split(" "),l=g.split(" "),G.setAttribute("src",p),u=2;while(--u>-1)v=s[u],c=-1!==v.indexOf("%"),c!==(-1!==l[u].indexOf("%"))&&(h=0===u?t.offsetWidth-G.width:t.offsetHeight-G.height,s[u]=c?parseFloat(v)/100*h+"px":parseFloat(v)/h*100+"%");v=s.join(" ")}return this.parseComplex(t.style,v,g,a,o)},formatter:lt}),Et("backgroundSize",{defaultValue:"0 0",formatter:function(t){return t+="","co"===t.substr(0,2)?t:lt(-1===t.indexOf(" ")?t+" "+t:t)}}),Et("perspective",{defaultValue:"0px",prefix:!0}),Et("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Et("transformStyle",{prefix:!0}),Et("backfaceVisibility",{prefix:!0}),Et("userSelect",{prefix:!0}),Et("margin",{parser:yt("marginTop,marginRight,marginBottom,marginLeft")}),Et("padding",{parser:yt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Et("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,a,o){var s,l,u;return f<9?(l=t.currentStyle,u=f<8?" ":",",s="rect("+l.clipTop+u+l.clipRight+u+l.clipBottom+u+l.clipLeft+")",e=this.format(e).split(",").join(u)):(s=this.format(tt(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,s,e,a,o)}}),Et("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Et("autoRound,strictUnits",{parser:function(t,e,r,i,n){return n}}),Et("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,a,o){var s=tt(t,"borderTopWidth",r,!1,"0px"),l=this.format(e).split(" "),u=l[0].replace(w,"");return"px"!==u&&(s=parseFloat(s)/et(t,"borderTopWidth",1,u)+u),this.parseComplex(t.style,this.format(s+" "+tt(t,"borderTopStyle",r,!1,"solid")+" "+tt(t,"borderTopColor",r,!1,"#000")),l.join(" "),a,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(vt)||["#000"])[0]}}),Et("borderWidth",{parser:yt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Et("float,cssFloat,styleFloat",{parser:function(t,e,r,i,n,a){var o=t.style,s="cssFloat"in o?"cssFloat":"styleFloat";return new xt(o,s,0,0,n,-1,r,!1,0,o[s],e)}});var Xt=function(t){var e,r=this.t,i=r.filter||tt(this.data,"filter")||"",n=this.s+this.c*t|0;100===n&&(-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")&&-1===i.indexOf("oader(")?(r.removeAttribute("filter"),e=!tt(this.data,"filter")):(r.filter=i.replace(E,""),e=!0)),e||(this.xn1&&(r.filter=i=i||"alpha(opacity="+n+")"),-1===i.indexOf("pacity")?0===n&&this.xn1||(r.filter=i+" alpha(opacity="+n+")"):r.filter=i.replace(T,"opacity="+n))};Et("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,a,o){var s=parseFloat(tt(t,"opacity",r,!1,"1")),l=t.style,u="autoAlpha"===i;return"string"===typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+s),u&&1===s&&"hidden"===tt(t,"visibility",r)&&0!==e&&(s=0),q?a=new xt(l,"opacity",s,e-s,a):(a=new xt(l,"opacity",100*s,100*(e-s),a),a.xn1=u?1:0,l.zoom=1,a.type=2,a.b="alpha(opacity="+a.s+")",a.e="alpha(opacity="+(a.s+a.c)+")",a.data=t,a.plugin=o,a.setRatio=Xt),u&&(a=new xt(l,"visibility",0,0,a,-1,null,!1,0,0!==s?"inherit":"hidden",0===e?"hidden":"inherit"),a.xs0="inherit",n._overwriteProps.push(a.n),n._overwriteProps.push(i)),a}});var $t=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(A,"-$1").toLowerCase())):t.removeAttribute(e))},Yt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);var e=this.data,r=this.t.style;while(e)e.v?r[e.p]=e.v:$t(r,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Et("className",{parser:function(e,i,n,a,o,s,l){var u,c,h,p,d,f=e.getAttribute("class")||"",m=e.style.cssText;if(o=a._classNamePT=new xt(e,n,0,0,o,2),o.setRatio=Yt,o.pr=-11,t=!0,o.b=f,c=it(e,r),h=e._gsClassPT,h){p={},d=h.data;while(d)p[d.p]=1,d=d._next;h.setRatio(1)}return e._gsClassPT=o,o.e="="!==i.charAt(1)?i:f.replace(new RegExp("(?:\\s|^)"+i.substr(2)+"(?![\\w-])"),"")+("+"===i.charAt(0)?" "+i.substr(2):""),e.setAttribute("class",o.e),u=nt(e,c,it(e),l,p),e.setAttribute("class",f),o.data=u.firstMPT,e.style.cssText!==m&&(e.style.cssText=m),o=o.xfirst=a.parse(e,u.difs,o,s),o}});var Zt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,r,i,n,a,o=this.t.style,l=s.transform.parse;if("all"===this.e)o.cssText="",n=!0;else{e=this.e.split(" ").join("").split(","),i=e.length;while(--i>-1)r=e[i],s[r]&&(s[r].parse===l?n=!0:r="transformOrigin"===r?It:s[r].p),$t(o,r)}n&&($t(o,Pt),a=this.t._gsTransform,a&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};Et("clearProps",{parser:function(e,r,i,n,a){return a=new xt(e,i,0,0,a,2),a.setRatio=Zt,a.e=r,a.pr=-10,a.data=n._tween,t=!0,a}}),l="bezier,throwProps,physicsProps,physics2D".split(","),Tt=l.length;while(Tt--)Mt(l[Tt]);l=a.prototype,l._firstPT=l._lastParsedTransform=l._transform=null,l._onInitTween=function(i,o,l,p){if(!i.nodeType)return!1;this._target=m=i,this._tween=l,this._vars=o,v=p,u=o.autoRound,t=!1,e=o.suffixMap||a.suffixMap,r=Q(i,""),n=this._overwriteProps;var f,g,y,_,x,b,w,T,E,M=i.style;if(c&&""===M.zIndex&&(f=tt(i,"zIndex",r),"auto"!==f&&""!==f||this._addLazySet(M,"zIndex",0)),"string"===typeof o&&(_=M.cssText,f=it(i,r),M.cssText=_+";"+o,f=nt(i,f,it(i)).difs,!q&&S.test(o)&&(f.opacity=parseFloat(RegExp.$1)),o=f,M.cssText=_),o.className?this._firstPT=g=s.className.parse(i,o.className,"className",this,null,null,o):this._firstPT=g=this.parse(i,o,null),this._transformType){E=3===this._transformType,Pt?h&&(c=!0,""===M.zIndex&&(w=tt(i,"zIndex",r),"auto"!==w&&""!==w||this._addLazySet(M,"zIndex",0)),d&&this._addLazySet(M,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(E?"visible":"hidden"))):M.zoom=1,y=g;while(y&&y._next)y=y._next;T=new xt(i,"transform",0,0,null,2),this._linkCSSP(T,null,y),T.setRatio=Pt?qt:Wt,T.data=this._transform||Ht(i,r,!0),T.tween=l,T.pr=-1,n.pop()}if(t){while(g){b=g._next,y=_;while(y&&y.pr>g.pr)y=y._next;(g._prev=y?y._prev:x)?g._prev._next=g:_=g,(g._next=y)?y._prev=g:x=g,g=b}this._firstPT=_}return!0},l.parse=function(t,i,n,a){var o,l,c,h,p,d,f,g,y,_,x=t.style;for(o in i){if(d=i[o],l=s[o],"function"!==typeof d||l&&l.allowFunc||(d=d(v,m)),l)n=l.parse(t,d,o,this,n,a,i);else{if("--"===o.substr(0,2)){this._tween._propLookup[o]=this._addTween.call(this._tween,t.style,"setProperty",Q(t).getPropertyValue(o)+"",d+"",o,!1,o);continue}p=tt(t,o,r)+"",y="string"===typeof d,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||y&&M.test(d)?(y||(d=ft(d),d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"),n=wt(x,o,p,d,!0,"transparent",n,0,a)):y&&z.test(d)?n=wt(x,o,p,d,!0,null,n,0,a):(c=parseFloat(p),f=c||0===c?p.substr((c+"").length):"",""!==p&&"auto"!==p||("width"===o||"height"===o?(c=st(t,o,r),f="px"):"left"===o||"top"===o?(c=rt(t,o,r),f="px"):(c="opacity"!==o?0:1,f="")),_=y&&"="===d.charAt(1),_?(h=parseInt(d.charAt(0)+"1",10),d=d.substr(2),h*=parseFloat(d),g=d.replace(w,"")):(h=parseFloat(d),g=y?d.replace(w,""):""),""===g&&(g=o in e?e[o]:f),d=h||0===h?(_?h+c:h)+g:i[o],f!==g&&(""===g&&"lineHeight"!==o||(h||0===h)&&c&&(c=et(t,o,c,f),"%"===g?(c/=et(t,o,100,"%")/100,!0!==i.strictUnits&&(p=c+"%")):"em"===g||"rem"===g||"vw"===g||"vh"===g?c/=et(t,o,1,g):"px"!==g&&(h=et(t,o,h,g),g="px"),_&&(h||0===h)&&(d=h+c+g))),_&&(h+=c),!c&&0!==c||!h&&0!==h?void 0!==x[o]&&(d||d+""!=="NaN"&&null!=d)?(n=new xt(x,o,h||c||0,0,n,-1,o,!1,0,p,d),n.xs0="none"!==d||"display"!==o&&-1===o.indexOf("Style")?d:p):$("invalid "+o+" tween value: "+i[o]):(n=new xt(x,o,c,h-c,n,0,o,!1!==u&&("px"===g||"zIndex"===o),0,p,d),n.xs0=g))}a&&n&&!n.plugin&&(n.plugin=a)}return n},l.setRatio=function(t){var e,r,i,n=this._firstPT,a=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)while(n){if(e=n.c*t+n.s,n.r?e=n.r(e):e<a&&e>-a&&(e=0),n.type)if(1===n.type)if(i=n.l,2===i)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2;else if(3===i)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===i)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===i)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(r=n.xs0+e+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n.t[n.p]=r}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(t);else n.t[n.p]=e+n.xs0;n=n._next}else while(n)2!==n.type?n.t[n.p]=n.b:n.setRatio(t),n=n._next;else while(n){if(2!==n.type)if(n.r&&-1!==n.type)if(e=n.r(n.s+n.c),n.type){if(1===n.type){for(i=n.l,r=n.xs0+e+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n.t[n.p]=r}}else n.t[n.p]=e+n.xs0;else n.t[n.p]=n.e;else n.setRatio(t);n=n._next}},l._enableTransforms=function(t){this._transform=this._transform||Ht(this._target,r,!0),this._transformType=this._transform.svg&&At||!t&&3!==this._transformType?2:3};var Jt=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(t,e,r){var i=this._firstPT=new xt(t,e,0,0,this._firstPT,2);i.e=r,i.setRatio=Jt,i.data=this},l._linkCSSP=function(t,e,r,i){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,i=!0),r?r._next=t:i||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=r),t},l._mod=function(t){var e=this._firstPT;while(e)"function"===typeof t[e.p]&&(e.r=t[e.p]),e=e._next},l._kill=function(t){var e,r,n,a=t;if(t.autoAlpha||t.alpha){for(r in a={},t)a[r]=t[r];a.opacity=1,a.autoAlpha&&(a.visibility=1)}t.className&&(e=this._classNamePT)&&(n=e.xfirst,n&&n._prev?this._linkCSSP(n._prev,e._next,n._prev._prev):n===this._firstPT&&(this._firstPT=e._next),e._next&&this._linkCSSP(e._next,e._next._next,n._prev),this._classNamePT=null),e=this._firstPT;while(e)e.plugin&&e.plugin!==r&&e.plugin._kill&&(e.plugin._kill(t),r=e.plugin),e=e._next;return i["d"].prototype._kill.call(this,a)};var Kt=function(t,e,r){var i,n,a,o;if(t.slice){n=t.length;while(--n>-1)Kt(t[n],e,r)}else{i=t.childNodes,n=i.length;while(--n>-1)a=i[n],o=a.type,a.style&&(e.push(it(a)),r&&r.push(a)),1!==o&&9!==o&&11!==o||!a.childNodes.length||Kt(a,e,r)}};return a.cascadeTo=function(t,e,r){var n,a,o,s,l=i["f"].to(t,e,r),u=[l],c=[],h=[],p=[],d=i["f"]._internals.reservedProps;t=l._targets||l.target,Kt(t,c,p),l.render(e,!0,!0),Kt(t,h),l.render(0,!0,!0),l._enabled(!0),n=p.length;while(--n>-1)if(a=nt(p[n],c[n],h[n]),a.firstMPT){for(o in a=a.difs,r)d[o]&&(a[o]=r[o]);for(o in s={},a)s[o]=c[n][o];u.push(i["f"].fromTo(p[n],e,s,a))}return u},i["d"].activate([a]),a}),!0);var a=i["g"].CSSPlugin,o=i["e"]._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(t,e,r,i){var n,a;if("function"!==typeof t.setAttribute)return!1;for(n in e)a=e[n],"function"===typeof a&&(a=a(i,t)),this._addTween(t,"setAttribute",t.getAttribute(n)+"",a+"",n,!1,n),this._overwriteProps.push(n);return!0}}),s=i["e"]._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(t,e,r){return this._tween=r,!0}}),l=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(r){return(Math.round(r/t)*t*e|0)/e}},u=function(t,e){while(t)t.f||t.blob||(t.m=e||Math.round),t=t._next},c=s.prototype;
/*!
 * VERSION: 0.6.1
 * DATE: 2018-08-27
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */c._onInitAllProps=function(){var t,e,r,i,n=this._tween,a=n.vars.roundProps,o={},s=n._propLookup.roundProps;if("object"!==typeof a||a.push){"string"===typeof a&&(a=a.split(",")),r=a.length;while(--r>-1)o[a[r]]=Math.round}else for(i in a)o[i]=l(a[i]);for(i in o){t=n._firstPT;while(t)e=t._next,t.pg?t.t._mod(o):t.n===i&&(2===t.f&&t.t?u(t.t._firstPT,o[i]):(this._add(t.t,i,t.s,t.c,o[i]),e&&(e._prev=t._prev),t._prev?t._prev._next=e:n._firstPT===t&&(n._firstPT=e),t._next=t._prev=null,n._propLookup[i]=s)),t=e}return!1},c._add=function(t,e,r,i,n){this._addTween(t,e,r,r+i,e,n||Math.round),this._overwriteProps.push(e)};
/*!
 * VERSION: 0.3.1
 * DATE: 2018-08-27
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
var h=i["e"]._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(t,e,r,i){"object"!==typeof e&&(e={rotation:e}),this.finals={};var n,a,o,s,l,u,c=!0===e.useRadians?2*Math.PI:360,h=1e-6;for(n in e)"useRadians"!==n&&(s=e[n],"function"===typeof s&&(s=s(i,t)),u=(s+"").split("_"),a=u[0],o=parseFloat("function"!==typeof t[n]?t[n]:t[n.indexOf("set")||"function"!==typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]()),s=this.finals[n]="string"===typeof a&&"="===a.charAt(1)?o+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0,l=s-o,u.length&&(a=u.join("_"),-1!==a.indexOf("short")&&(l%=c,l!==l%(c/2)&&(l=l<0?l+c:l-c)),-1!==a.indexOf("_cw")&&l<0?l=(l+9999999999*c)%c-(l/c|0)*c:-1!==a.indexOf("ccw")&&l>0&&(l=(l-9999999999*c)%c-(l/c|0)*c)),(l>h||l<-h)&&(this._addTween(t,n,o,o+l,n),this._overwriteProps.push(n)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else{e=this._firstPT;while(e)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}}});h._autoCSS=!0,
/*!
 * VERSION: 2.1.3
 * DATE: 2019-05-17
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */
i["e"]._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],(function(){var t=function(t){i["c"].call(this,t);var e,r,n=this,a=n.vars;for(r in n._labels={},n.autoRemoveChildren=!!a.autoRemoveChildren,n.smoothChildTiming=!!a.smoothChildTiming,n._sortChildren=!0,n._onUpdate=a.onUpdate,a)e=a[r],o(e)&&-1!==e.join("").indexOf("{self}")&&(a[r]=n._swapSelfInParams(e));o(a.tweens)&&n.add(a.tweens,0,a.align,a.stagger)},e=1e-8,r=i["f"]._internals,n=t._internals={},a=r.isSelector,o=r.isArray,s=r.lazyTweens,l=r.lazyRender,u=i["e"]._gsDefine.globals,c=function(t){var e,r={};for(e in t)r[e]=t[e];return r},h=function(t,e,r){var i,n,a=t.cycle;for(i in a)n=a[i],t[i]="function"===typeof n?n(r,e[r],e):n[r%n.length];delete t.cycle},p=n.pauseCallback=function(){},d=function(t){var e,r=[],i=t.length;for(e=0;e!==i;r.push(t[e++]));return r},f=function(t,e,r,i){var n="immediateRender";return n in e||(e[n]=!(r&&!1===r[n]||i)),e},m=function(t){if("function"===typeof t)return t;var e="object"===typeof t?t:{each:t},r=e.ease,i=e.from||0,n=e.base||0,a={},o=isNaN(i),s=e.axis,l={center:.5,end:1}[i]||0;return function(t,u,c){var h,p,d,f,m,v,g,y,_,x=(c||e).length,b=a[x];if(!b){if(_="auto"===e.grid?0:(e.grid||[1/0])[0],!_){g=-1/0;while(g<(g=c[_++].getBoundingClientRect().left)&&_<x);_--}for(b=a[x]=[],h=o?Math.min(_,x)*l-.5:i%_,p=o?x*l/_-.5:i/_|0,g=0,y=1/0,v=0;v<x;v++)d=v%_-h,f=p-(v/_|0),b[v]=m=s?Math.abs("y"===s?f:d):Math.sqrt(d*d+f*f),m>g&&(g=m),m<y&&(y=m);b.max=g-y,b.min=y,b.v=x=e.amount||e.each*(_>x?x-1:s?"y"===s?x/_:_:Math.max(_,x/_))||0,b.b=x<0?n-x:n}return x=(b[t]-b.min)/b.max,b.b+(r?r.getRatio(x):x)*b.v}},v=t.prototype=new i["c"];return t.version="2.1.3",t.distribute=m,v.constructor=t,v.kill()._gc=v._forcingPlayhead=v._hasPause=!1,v.to=function(t,e,r,n){var a=r.repeat&&u.TweenMax||i["f"];return e?this.add(new a(t,e,r),n):this.set(t,r,n)},v.from=function(t,e,r,n){return this.add((r.repeat&&u.TweenMax||i["f"]).from(t,e,f(this,r)),n)},v.fromTo=function(t,e,r,n,a){var o=n.repeat&&u.TweenMax||i["f"];return n=f(this,n,r),e?this.add(o.fromTo(t,e,r,n),a):this.set(t,n,a)},v.staggerTo=function(e,r,n,o,s,l,u,p){var f,v,g=new t({onComplete:l,onCompleteParams:u,callbackScope:p,smoothChildTiming:this.smoothChildTiming}),y=m(n.stagger||o),_=n.startAt,x=n.cycle;for("string"===typeof e&&(e=i["f"].selector(e)||e),e=e||[],a(e)&&(e=d(e)),v=0;v<e.length;v++)f=c(n),_&&(f.startAt=c(_),_.cycle&&h(f.startAt,e,v)),x&&(h(f,e,v),null!=f.duration&&(r=f.duration,delete f.duration)),g.to(e[v],r,f,y(v,e[v],e));return this.add(g,s)},v.staggerFrom=function(t,e,r,i,n,a,o,s){return r.runBackwards=!0,this.staggerTo(t,e,f(this,r),i,n,a,o,s)},v.staggerFromTo=function(t,e,r,i,n,a,o,s,l){return i.startAt=r,this.staggerTo(t,e,f(this,i,r),n,a,o,s,l)},v.call=function(t,e,r,n){return this.add(i["f"].delayedCall(0,t,e,r),n)},v.set=function(t,e,r){return this.add(new i["f"](t,0,f(this,e,null,!0)),r)},t.exportRoot=function(e,r){e=e||{},null==e.smoothChildTiming&&(e.smoothChildTiming=!0);var n,a,o,s,l=new t(e),u=l._timeline;null==r&&(r=!0),u._remove(l,!0),l._startTime=0,l._rawPrevTime=l._time=l._totalTime=u._time,o=u._first;while(o)s=o._next,r&&o instanceof i["f"]&&o.target===o.vars.onComplete||(a=o._startTime-o._delay,a<0&&(n=1),l.add(o,a)),o=s;return u.add(l,0),n&&l.totalDuration(),l},v.add=function(e,r,n,a){var s,l,u,c,h,p,d=this;if("number"!==typeof r&&(r=d._parseTimeOrLabel(r,0,!0,e)),!(e instanceof i["a"])){if(e instanceof Array||e&&e.push&&o(e)){for(n=n||"normal",a=a||0,s=r,l=e.length,u=0;u<l;u++)o(c=e[u])&&(c=new t({tweens:c})),d.add(c,s),"string"!==typeof c&&"function"!==typeof c&&("sequence"===n?s=c._startTime+c.totalDuration()/c._timeScale:"start"===n&&(c._startTime-=c.delay())),s+=a;return d._uncache(!0)}if("string"===typeof e)return d.addLabel(e,r);if("function"!==typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=i["f"].delayedCall(0,e)}if(i["c"].prototype.add.call(d,e,r),(e._time||!e._duration&&e._initted)&&(s=(d.rawTime()-e._startTime)*e._timeScale,(!e._duration||Math.abs(Math.max(0,Math.min(e.totalDuration(),s)))-e._totalTime>1e-5)&&e.render(s,!1,!1)),(d._gc||d._time===d._duration)&&!d._paused&&d._duration<d.duration()){h=d,p=h.rawTime()>e._startTime;while(h._timeline)p&&h._timeline.smoothChildTiming?h.totalTime(h._totalTime,!0):h._gc&&h._enabled(!0,!1),h=h._timeline}return d},v.remove=function(t){if(t instanceof i["a"]){this._remove(t,!1);var e=t._timeline=t.vars.useFrames?i["a"]._rootFramesTimeline:i["a"]._rootTimeline;return t._startTime=(t._paused?t._pauseTime:e._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&o(t)){var r=t.length;while(--r>-1)this.remove(t[r]);return this}return"string"===typeof t?this.removeLabel(t):this.kill(null,t)},v._remove=function(t,e){i["c"].prototype._remove.call(this,t,e);var r=this._last;return r?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},v.insert=v.insertMultiple=function(t,e,r,i){return this.add(t,e||0,r,i)},v.appendMultiple=function(t,e,r,i){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),r,i)},v.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},v.addPause=function(t,e,r,n){var a=i["f"].delayedCall(0,p,r,n||this);return a.vars.onComplete=a.vars.onReverseComplete=e,a.data="isPause",this._hasPause=!0,this.add(a,t)},v.removeLabel=function(t){return delete this._labels[t],this},v.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},v._parseTimeOrLabel=function(t,e,r,n){var a,s;if(n instanceof i["a"]&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&o(n))){s=n.length;while(--s>-1)n[s]instanceof i["a"]&&n[s].timeline===this&&this.remove(n[s])}if(a="number"!==typeof t||e?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,"string"===typeof e)return this._parseTimeOrLabel(e,r&&"number"===typeof t&&null==this._labels[e]?t-a:0,r);if(e=e||0,"string"!==typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=a);else{if(s=t.indexOf("="),-1===s)return null==this._labels[t]?r?this._labels[t]=a+e:e:this._labels[t]+e;e=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1)),t=s>1?this._parseTimeOrLabel(t.substr(0,s-1),0,r):a}return Number(t)+e},v.seek=function(t,e){return this.totalTime("number"===typeof t?t:this._parseTimeOrLabel(t),!1!==e)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(t,e){return this.play(t,e)},v.gotoAndStop=function(t,e){return this.pause(t,e)},v.render=function(t,r,i){this._gc&&this._enabled(!0,!1);var n,a,o,u,c,h,p,d,f=this,m=f._time,v=f._dirty?f.totalDuration():f._totalDuration,g=f._startTime,y=f._timeScale,_=f._paused;if(m!==f._time&&(t+=f._time-m),f._hasPause&&!f._forcingPlayhead&&!r){if(t>m){n=f._first;while(n&&n._startTime<=t&&!h)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===f._rawPrevTime||(h=n),n=n._next}else{n=f._last;while(n&&n._startTime>=t&&!h)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(h=n),n=n._prev}h&&(f._time=f._totalTime=t=h._startTime,d=f._startTime+(f._reversed?f._duration-t:t)/f._timeScale)}if(t>=v-e&&t>=0)f._totalTime=f._time=v,f._reversed||f._hasPausedChild()||(a=!0,u="onComplete",c=!!f._timeline.autoRemoveChildren,0===f._duration&&(t<=0&&t>=-e||f._rawPrevTime<0||f._rawPrevTime===e)&&f._rawPrevTime!==t&&f._first&&(c=!0,f._rawPrevTime>e&&(u="onReverseComplete"))),f._rawPrevTime=f._duration||!r||t||f._rawPrevTime===t?t:e,t=v+1e-4;else if(t<e)if(f._totalTime=f._time=0,t>-e&&(t=0),(0!==m||0===f._duration&&f._rawPrevTime!==e&&(f._rawPrevTime>0||t<0&&f._rawPrevTime>=0))&&(u="onReverseComplete",a=f._reversed),t<0)f._active=!1,f._timeline.autoRemoveChildren&&f._reversed?(c=a=!0,u="onReverseComplete"):f._rawPrevTime>=0&&f._first&&(c=!0),f._rawPrevTime=t;else{if(f._rawPrevTime=f._duration||!r||t||f._rawPrevTime===t?t:e,0===t&&a){n=f._first;while(n&&0===n._startTime)n._duration||(a=!1),n=n._next}t=0,f._initted||(c=!0)}else f._totalTime=f._time=f._rawPrevTime=t;if(f._time!==m&&f._first||i||c||h){if(f._initted||(f._initted=!0),f._active||!f._paused&&f._time!==m&&t>0&&(f._active=!0),0===m&&f.vars.onStart&&(0===f._time&&f._duration||r||f._callback("onStart")),p=f._time,p>=m){n=f._first;while(n){if(o=n._next,p!==f._time||f._paused&&!_)break;(n._active||n._startTime<=p&&!n._paused&&!n._gc)&&(h===n&&(f.pause(),f._pauseTime=d),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,r,i):n.render((t-n._startTime)*n._timeScale,r,i)),n=o}}else{n=f._last;while(n){if(o=n._prev,p!==f._time||f._paused&&!_)break;if(n._active||n._startTime<=m&&!n._paused&&!n._gc){if(h===n){h=n._prev;while(h&&h.endTime()>f._time)h.render(h._reversed?h.totalDuration()-(t-h._startTime)*h._timeScale:(t-h._startTime)*h._timeScale,r,i),h=h._prev;h=null,f.pause(),f._pauseTime=d}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,r,i):n.render((t-n._startTime)*n._timeScale,r,i)}n=o}}f._onUpdate&&(r||(s.length&&l(),f._callback("onUpdate"))),u&&(f._gc||g!==f._startTime&&y===f._timeScale||(0===f._time||v>=f.totalDuration())&&(a&&(s.length&&l(),f._timeline.autoRemoveChildren&&f._enabled(!1,!1),f._active=!1),!r&&f.vars[u]&&f._callback(u)))}},v._hasPausedChild=function(){var e=this._first;while(e){if(e._paused||e instanceof t&&e._hasPausedChild())return!0;e=e._next}return!1},v.getChildren=function(t,e,r,n){n=n||-9999999999;var a=[],o=this._first,s=0;while(o)o._startTime<n||(o instanceof i["f"]?!1!==e&&(a[s++]=o):(!1!==r&&(a[s++]=o),!1!==t&&(a=a.concat(o.getChildren(!0,e,r)),s=a.length))),o=o._next;return a},v.getTweensOf=function(t,e){var r,n,a=this._gc,o=[],s=0;a&&this._enabled(!0,!0),r=i["f"].getTweensOf(t),n=r.length;while(--n>-1)(r[n].timeline===this||e&&this._contains(r[n]))&&(o[s++]=r[n]);return a&&this._enabled(!1,!0),o},v.recent=function(){return this._recent},v._contains=function(t){var e=t.timeline;while(e){if(e===this)return!0;e=e.timeline}return!1},v.shiftChildren=function(t,e,r){r=r||0;var i,n=this._first,a=this._labels;while(n)n._startTime>=r&&(n._startTime+=t),n=n._next;if(e)for(i in a)a[i]>=r&&(a[i]+=t);return this._uncache(!0)},v._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);var r=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),i=r.length,n=!1;while(--i>-1)r[i]._kill(t,e)&&(n=!0);return n},v.clear=function(t){var e=this.getChildren(!1,!0,!0),r=e.length;this._time=this._totalTime=0;while(--r>-1)e[r]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){var t=this._first;while(t)t.invalidate(),t=t._next;return i["a"].prototype.invalidate.call(this)},v._enabled=function(t,e){if(t===this._gc){var r=this._first;while(r)r._enabled(t,!0),r=r._next}return i["c"].prototype._enabled.call(this,t,e)},v.totalTime=function(t,e,r){this._forcingPlayhead=!0;var n=i["a"].prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,n},v.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(t){if(!arguments.length){if(this._dirty){var e,r,i=0,n=this,a=n._last,o=999999999999;while(a)e=a._prev,a._dirty&&a.totalDuration(),a._startTime>o&&n._sortChildren&&!a._paused&&!n._calculatingDuration?(n._calculatingDuration=1,n.add(a,a._startTime-a._delay),n._calculatingDuration=0):o=a._startTime,a._startTime<0&&!a._paused&&(i-=a._startTime,n._timeline.smoothChildTiming&&(n._startTime+=a._startTime/n._timeScale,n._time-=a._startTime,n._totalTime-=a._startTime,n._rawPrevTime-=a._startTime),n.shiftChildren(-a._startTime,!1,-9999999999),o=0),r=a._startTime+a._totalDuration/a._timeScale,r>i&&(i=r),a=e;n._duration=n._totalDuration=i,n._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},v.paused=function(t){if(!1===t&&this._paused){var e=this._first;while(e)e._startTime===this._time&&"isPause"===e.data&&(e._rawPrevTime=0),e=e._next}return i["a"].prototype.paused.apply(this,arguments)},v.usesFrames=function(){var t=this._timeline;while(t._timeline)t=t._timeline;return t===i["a"]._rootFramesTimeline},v.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},t}),!0);var p=i["g"].TimelineLite;
/*!
 * VERSION: 2.1.3
 * DATE: 2019-05-17
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */i["e"]._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],(function(){var t=function(t){p.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0},e=1e-8,r=i["f"]._internals,n=r.lazyTweens,a=r.lazyRender,o=i["e"]._gsDefine.globals,s=new i["b"](null,null,1,0),l=t.prototype=new p;return l.constructor=t,l.kill()._gc=!1,t.version="2.1.3",l.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),p.prototype.invalidate.call(this)},l.addCallback=function(t,e,r,n){return this.add(i["f"].delayedCall(0,t,r,n),e)},l.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else{var r=this.getTweensOf(t,!1),i=r.length,n=this._parseTimeOrLabel(e);while(--i>-1)r[i]._startTime===n&&r[i]._enabled(!1,!1)}return this},l.removePause=function(t){return this.removeCallback(p._internals.pauseCallback,t)},l.tweenTo=function(t,e){e=e||{};var r,n,a,l={ease:s,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},u=e.repeat&&o.TweenMax||i["f"];for(n in e)l[n]=e[n];return l.time=this._parseTimeOrLabel(t),r=Math.abs(Number(l.time)-this._time)/this._timeScale||.001,a=new u(this,r,l),l.onStart=function(){a.target.paused(!0),a.vars.time===a.target.time()||r!==a.duration()||a.isFromTo||a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale).render(a.time(),!0,!0),e.onStart&&e.onStart.apply(e.onStartScope||e.callbackScope||a,e.onStartParams||[])},a},l.tweenFromTo=function(t,e,r){r=r||{},t=this._parseTimeOrLabel(t),r.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},r.immediateRender=!1!==r.immediateRender;var i=this.tweenTo(e,r);return i.isFromTo=1,i.duration(Math.abs(i.vars.time-t)/this._timeScale||.001)},l.render=function(t,r,i){this._gc&&this._enabled(!0,!1);var o,s,l,u,c,h,p,d,f,m=this,v=m._time,g=m._dirty?m.totalDuration():m._totalDuration,y=m._duration,_=m._totalTime,x=m._startTime,b=m._timeScale,w=m._rawPrevTime,T=m._paused,S=m._cycle;if(v!==m._time&&(t+=m._time-v),t>=g-e&&t>=0)m._locked||(m._totalTime=g,m._cycle=m._repeat),m._reversed||m._hasPausedChild()||(s=!0,u="onComplete",c=!!m._timeline.autoRemoveChildren,0===m._duration&&(t<=0&&t>=-e||w<0||w===e)&&w!==t&&m._first&&(c=!0,w>e&&(u="onReverseComplete"))),m._rawPrevTime=m._duration||!r||t||m._rawPrevTime===t?t:e,m._yoyo&&1&m._cycle?m._time=t=0:(m._time=y,t=y+1e-4);else if(t<e)if(m._locked||(m._totalTime=m._cycle=0),m._time=0,t>-e&&(t=0),(0!==v||0===y&&w!==e&&(w>0||t<0&&w>=0)&&!m._locked)&&(u="onReverseComplete",s=m._reversed),t<0)m._active=!1,m._timeline.autoRemoveChildren&&m._reversed?(c=s=!0,u="onReverseComplete"):w>=0&&m._first&&(c=!0),m._rawPrevTime=t;else{if(m._rawPrevTime=y||!r||t||m._rawPrevTime===t?t:e,0===t&&s){o=m._first;while(o&&0===o._startTime)o._duration||(s=!1),o=o._next}t=0,m._initted||(c=!0)}else 0===y&&w<0&&(c=!0),m._time=m._rawPrevTime=t,m._locked||(m._totalTime=t,0!==m._repeat&&(h=y+m._repeatDelay,m._cycle=m._totalTime/h>>0,m._cycle&&m._cycle===m._totalTime/h&&_<=t&&m._cycle--,m._time=m._totalTime-m._cycle*h,m._yoyo&&1&m._cycle&&(m._time=y-m._time),m._time>y?(m._time=y,t=y+1e-4):m._time<0?m._time=t=0:t=m._time));if(m._hasPause&&!m._forcingPlayhead&&!r){if(t=m._time,t>v||m._repeat&&S!==m._cycle){o=m._first;while(o&&o._startTime<=t&&!p)o._duration||"isPause"!==o.data||o.ratio||0===o._startTime&&0===m._rawPrevTime||(p=o),o=o._next}else{o=m._last;while(o&&o._startTime>=t&&!p)o._duration||"isPause"===o.data&&o._rawPrevTime>0&&(p=o),o=o._prev}p&&(f=m._startTime+(m._reversed?m._duration-p._startTime:p._startTime)/m._timeScale,p._startTime<y&&(m._time=m._rawPrevTime=t=p._startTime,m._totalTime=t+m._cycle*(m._totalDuration+m._repeatDelay)))}if(m._cycle!==S&&!m._locked){var E=m._yoyo&&0!==(1&S),M=E===(m._yoyo&&0!==(1&m._cycle)),A=m._totalTime,C=m._cycle,P=m._rawPrevTime,L=m._time;if(m._totalTime=S*y,m._cycle<S?E=!E:m._totalTime+=y,m._time=v,m._rawPrevTime=0===y?w-1e-4:w,m._cycle=S,m._locked=!0,v=E?0:y,m.render(v,r,0===y),r||m._gc||m.vars.onRepeat&&(m._cycle=C,m._locked=!1,m._callback("onRepeat")),v!==m._time)return;if(M&&(m._cycle=S,m._locked=!0,v=E?y+1e-4:-1e-4,m.render(v,!0,!1)),m._locked=!1,m._paused&&!T)return;m._time=L,m._totalTime=A,m._cycle=C,m._rawPrevTime=P}if(m._time!==v&&m._first||i||c||p){if(m._initted||(m._initted=!0),m._active||!m._paused&&m._totalTime!==_&&t>0&&(m._active=!0),0===_&&m.vars.onStart&&(0===m._totalTime&&m._totalDuration||r||m._callback("onStart")),d=m._time,d>=v){o=m._first;while(o){if(l=o._next,d!==m._time||m._paused&&!T)break;(o._active||o._startTime<=m._time&&!o._paused&&!o._gc)&&(p===o&&(m.pause(),m._pauseTime=f),o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(t-o._startTime)*o._timeScale,r,i):o.render((t-o._startTime)*o._timeScale,r,i)),o=l}}else{o=m._last;while(o){if(l=o._prev,d!==m._time||m._paused&&!T)break;if(o._active||o._startTime<=v&&!o._paused&&!o._gc){if(p===o){p=o._prev;while(p&&p.endTime()>m._time)p.render(p._reversed?p.totalDuration()-(t-p._startTime)*p._timeScale:(t-p._startTime)*p._timeScale,r,i),p=p._prev;p=null,m.pause(),m._pauseTime=f}o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(t-o._startTime)*o._timeScale,r,i):o.render((t-o._startTime)*o._timeScale,r,i)}o=l}}m._onUpdate&&(r||(n.length&&a(),m._callback("onUpdate"))),u&&(m._locked||m._gc||x!==m._startTime&&b===m._timeScale||(0===m._time||g>=m.totalDuration())&&(s&&(n.length&&a(),m._timeline.autoRemoveChildren&&m._enabled(!1,!1),m._active=!1),!r&&m.vars[u]&&m._callback(u)))}else _!==m._totalTime&&m._onUpdate&&(r||m._callback("onUpdate"))},l.getActive=function(t,e,r){var i,n,a=[],o=this.getChildren(t||null==t,e||null==t,!!r),s=0,l=o.length;for(i=0;i<l;i++)n=o[i],n.isActive()&&(a[s++]=n);return a},l.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,r=this.getLabelsArray(),i=r.length;for(e=0;e<i;e++)if(r[e].time>t)return r[e].name;return null},l.getLabelBefore=function(t){null==t&&(t=this._time);var e=this.getLabelsArray(),r=e.length;while(--r>-1)if(e[r].time<t)return e[r].name;return null},l.getLabelsArray=function(){var t,e=[],r=0;for(t in this._labels)e[r++]={time:this._labels[t],name:t};return e.sort((function(t,e){return t.time-e.time})),e},l.invalidate=function(){return this._locked=!1,p.prototype.invalidate.call(this)},l.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()||0},l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()||0},l.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(p.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(t,e){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var r=this._duration,i=this._cycle,n=i*(r+this._repeatDelay);return t>r&&(t=r),this.totalTime(this._yoyo&&1&i?r-t+n:this._repeat?t+n:t,e)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},l.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+e)},t}),!0);var d=i["g"].TimelineMax,f=180/Math.PI,m=[],v=[],g=[],y={},_=i["e"]._gsDefine.globals,x=function(t,e,r,i){r===i&&(r=i-(i-e)/1e6),t===e&&(e=t+(r-t)/1e6),this.a=t,this.b=e,this.c=r,this.d=i,this.da=i-t,this.ca=r-t,this.ba=e-t},b=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",w=function(t,e,r,i){var n={a:t},a={},o={},s={c:i},l=(t+e)/2,u=(e+r)/2,c=(r+i)/2,h=(l+u)/2,p=(u+c)/2,d=(p-h)/8;return n.b=l+(t-l)/4,a.b=h+d,n.c=a.a=(n.b+a.b)/2,a.c=o.a=(h+p)/2,o.b=p-d,s.b=c+(i-c)/4,o.c=s.a=(o.b+s.b)/2,[n,a,o,s]},T=function(t,e,r,i,n){var a,o,s,l,u,c,h,p,d,f,y,_,x,b=t.length-1,T=0,S=t[0].a;for(a=0;a<b;a++)u=t[T],o=u.a,s=u.d,l=t[T+1].d,n?(y=m[a],_=v[a],x=(_+y)*e*.25/(i?.5:g[a]||.5),c=s-(s-o)*(i?.5*e:0!==y?x/y:0),h=s+(l-s)*(i?.5*e:0!==_?x/_:0),p=s-(c+((h-c)*(3*y/(y+_)+.5)/4||0))):(c=s-(s-o)*e*.5,h=s+(l-s)*e*.5,p=s-(c+h)/2),c+=p,h+=p,u.c=d=c,u.b=0!==a?S:S=u.a+.6*(u.c-u.a),u.da=s-o,u.ca=d-o,u.ba=S-o,r?(f=w(o,S,d,s),t.splice(T,1,f[0],f[1],f[2],f[3]),T+=4):T++,S=h;u=t[T],u.b=S,u.c=S+.4*(u.d-S),u.da=u.d-u.a,u.ca=u.c-u.a,u.ba=S-u.a,r&&(f=w(u.a,S,u.c,u.d),t.splice(T,1,f[0],f[1],f[2],f[3]))},S=function(t,e,r,i){var n,a,o,s,l,u,c=[];if(i){t=[i].concat(t),a=t.length;while(--a>-1)"string"===typeof(u=t[a][e])&&"="===u.charAt(1)&&(t[a][e]=i[e]+Number(u.charAt(0)+u.substr(2)))}if(n=t.length-2,n<0)return c[0]=new x(t[0][e],0,0,t[0][e]),c;for(a=0;a<n;a++)o=t[a][e],s=t[a+1][e],c[a]=new x(o,0,0,s),r&&(l=t[a+2][e],m[a]=(m[a]||0)+(s-o)*(s-o),v[a]=(v[a]||0)+(l-s)*(l-s));return c[a]=new x(t[a][e],0,0,t[a+1][e]),c},E=function(t,e,r,i,n,a){var o,s,l,u,c,h,p,d,f={},_=[],x=a||t[0];for(s in n="string"===typeof n?","+n+",":b,null==e&&(e=1),t[0])_.push(s);if(t.length>1){d=t[t.length-1],p=!0,o=_.length;while(--o>-1)if(s=_[o],Math.abs(x[s]-d[s])>.05){p=!1;break}p&&(t=t.concat(),a&&t.unshift(a),t.push(t[1]),a=t[t.length-3])}m.length=v.length=g.length=0,o=_.length;while(--o>-1)s=_[o],y[s]=-1!==n.indexOf(","+s+","),f[s]=S(t,s,y[s],a);o=m.length;while(--o>-1)m[o]=Math.sqrt(m[o]),v[o]=Math.sqrt(v[o]);if(!i){o=_.length;while(--o>-1)if(y[s])for(l=f[_[o]],h=l.length-1,u=0;u<h;u++)c=l[u+1].da/v[u]+l[u].da/m[u]||0,g[u]=(g[u]||0)+c*c;o=g.length;while(--o>-1)g[o]=Math.sqrt(g[o])}o=_.length,u=r?4:1;while(--o>-1)s=_[o],l=f[s],T(l,e,r,i,y[s]),p&&(l.splice(0,u),l.splice(l.length-u,u));return f},M=function(t,e,r){e=e||"soft";var i,n,a,o,s,l,u,c,h,p,d,f={},m="cubic"===e?3:2,v="soft"===e,g=[];if(v&&r&&(t=[r].concat(t)),null==t||t.length<m+1)throw"invalid Bezier data";for(h in t[0])g.push(h);l=g.length;while(--l>-1){for(h=g[l],f[h]=s=[],p=0,c=t.length,u=0;u<c;u++)i=null==r?t[u][h]:"string"===typeof(d=t[u][h])&&"="===d.charAt(1)?r[h]+Number(d.charAt(0)+d.substr(2)):Number(d),v&&u>1&&u<c-1&&(s[p++]=(i+s[p-2])/2),s[p++]=i;for(c=p-m+1,p=0,u=0;u<c;u+=m)i=s[u],n=s[u+1],a=s[u+2],o=2===m?0:s[u+3],s[p++]=d=3===m?new x(i,n,a,o):new x(i,(2*n+i)/3,(2*n+a)/3,a);s.length=p}return f},A=function(t,e,r){var i,n,a,o,s,l,u,c,h,p,d,f=1/r,m=t.length;while(--m>-1)for(p=t[m],a=p.a,o=p.d-a,s=p.c-a,l=p.b-a,i=n=0,c=1;c<=r;c++)u=f*c,h=1-u,i=n-(n=(u*u*o+3*h*(u*s+h*l))*u),d=m*r+c-1,e[d]=(e[d]||0)+i*i},C=function(t,e){e=e>>0||6;var r,i,n,a,o=[],s=[],l=0,u=0,c=e-1,h=[],p=[];for(r in t)A(t[r],o,e);for(n=o.length,i=0;i<n;i++)l+=Math.sqrt(o[i]),a=i%e,p[a]=l,a===c&&(u+=l,a=i/e>>0,h[a]=p,s[a]=u,l=0,p=[]);return{length:u,lengths:s,segments:h}},P=i["e"]._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.9",API:2,global:!0,init:function(t,e,r){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var i,n,a,o,s,l=e.values||[],u={},c=l[0],h=e.autoRotate||r.vars.orientToBezier;for(i in this._autoRotate=h?h instanceof Array?h:[["x","y","rotation",!0===h?0:Number(h)||0]]:null,c)this._props.push(i);a=this._props.length;while(--a>-1)i=this._props[a],this._overwriteProps.push(i),n=this._func[i]="function"===typeof t[i],u[i]=n?t[i.indexOf("set")||"function"!==typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(t[i]),s||u[i]!==l[0][i]&&(s=u);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?E(l,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,s):M(l,e.type,u),this._segCount=this._beziers[i].length,this._timeRes){var p=C(this._beziers,this._timeRes);this._length=p.length,this._lengths=p.lengths,this._segments=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(h=this._autoRotate){this._initialRotations=[],h[0]instanceof Array||(this._autoRotate=h=[h]),a=h.length;while(--a>-1){for(o=0;o<3;o++)i=h[a][o],this._func[i]="function"===typeof t[i]&&t[i.indexOf("set")||"function"!==typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)];i=h[a][2],this._initialRotations[a]=(this._func[i]?this._func[i].call(this._target):this._target[i])||0,this._overwriteProps.push(i)}}return this._startRatio=r.vars.runBackwards?1:0,!0},set:function(t){var e,r,i,n,a,o,s,l,u,c,h,p=this._segCount,d=this._func,m=this._target,v=t!==this._startRatio;if(this._timeRes){if(u=this._lengths,c=this._curSeg,h=t*this._length,i=this._li,h>this._l2&&i<p-1){l=p-1;while(i<l&&(this._l2=u[++i])<=h);this._l1=u[i-1],this._li=i,this._curSeg=c=this._segments[i],this._s2=c[this._s1=this._si=0]}else if(h<this._l1&&i>0){while(i>0&&(this._l1=u[--i])>=h);0===i&&h<this._l1?this._l1=0:i++,this._l2=u[i],this._li=i,this._curSeg=c=this._segments[i],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(e=i,h-=this._l1,i=this._si,h>this._s2&&i<c.length-1){l=c.length-1;while(i<l&&(this._s2=c[++i])<=h);this._s1=c[i-1],this._si=i}else if(h<this._s1&&i>0){while(i>0&&(this._s1=c[--i])>=h);0===i&&h<this._s1?this._s1=0:i++,this._s2=c[i],this._si=i}o=1===t?1:(i+(h-this._s1)/(this._s2-this._s1))*this._prec||0}else e=t<0?0:t>=1?p-1:p*t>>0,o=(t-e*(1/p))*p;r=1-o,i=this._props.length;while(--i>-1)n=this._props[i],a=this._beziers[n][e],s=(o*o*a.da+3*r*(o*a.ca+r*a.ba))*o+a.a,this._mod[n]&&(s=this._mod[n](s,m)),d[n]?m[n](s):m[n]=s;if(this._autoRotate){var g,y,_,x,b,w,T,S=this._autoRotate;i=S.length;while(--i>-1)n=S[i][2],w=S[i][3]||0,T=!0===S[i][4]?1:f,a=this._beziers[S[i][0]],g=this._beziers[S[i][1]],a&&g&&(a=a[e],g=g[e],y=a.a+(a.b-a.a)*o,x=a.b+(a.c-a.b)*o,y+=(x-y)*o,x+=(a.c+(a.d-a.c)*o-x)*o,_=g.a+(g.b-g.a)*o,b=g.b+(g.c-g.b)*o,_+=(b-_)*o,b+=(g.c+(g.d-g.c)*o-b)*o,s=v?Math.atan2(b-_,x-y)*T+w:this._initialRotations[i],this._mod[n]&&(s=this._mod[n](s,m)),d[n]?m[n](s):m[n]=s)}}}),L=P.prototype;
/*!
 * VERSION: 1.3.9
 * DATE: 2019-05-17
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/P.bezierThrough=E,P.cubicToQuadratic=w,P._autoCSS=!0,P.quadraticToCubic=function(t,e,r){return new x(t,(2*e+t)/3,(2*e+r)/3,r)},P._cssRegister=function(){var t=_.CSSPlugin;if(t){var e=t._internals,r=e._parseToProxy,i=e._setPluginRatio,n=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,a,o,s,l){e instanceof Array&&(e={values:e}),l=new P;var u,c,h,p=e.values,d=p.length-1,f=[],m={};if(d<0)return s;for(u=0;u<=d;u++)h=r(t,p[u],o,s,l,d!==u),f[u]=h.end;for(c in e)m[c]=e[c];return m.values=f,s=new n(t,"bezier",0,0,h.pt,2),s.data=h,s.plugin=l,s.setRatio=i,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(u=!0===m.autoRotate?0:Number(m.autoRotate),m.autoRotate=null!=h.end.left?[["left","top","rotation",u,!1]]:null!=h.end.x&&[["x","y","rotation",u,!1]]),m.autoRotate&&(o._transform||o._enableTransforms(!1),h.autoRotate=o._target._gsTransform,h.proxy.rotation=h.autoRotate.rotation||0,o._overwriteProps.push("rotation")),l._onInitTween(h.proxy,m,o._tween),s}})}},L._mod=function(t){var e,r=this._overwriteProps,i=r.length;while(--i>-1)e=t[r[i]],e&&"function"===typeof e&&(this._mod[r[i]]=e)},L._kill=function(t){var e,r,i=this._props;for(e in this._beziers)if(e in t){delete this._beziers[e],delete this._func[e],r=i.length;while(--r>-1)i[r]===e&&i.splice(r,1)}if(i=this._autoRotate,i){r=i.length;while(--r>-1)t[i[r][2]]&&i.splice(r,1)}return this._super._kill.call(this,t)},
/*!
 * VERSION: 1.16.1
 * DATE: 2018-08-27
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
i["e"]._gsDefine("easing.Back",["easing.Ease"],(function(){var t,e,r,n,a=i["e"].GreenSockGlobals||i["e"],o=a.com.greensock,s=2*Math.PI,l=Math.PI/2,u=o._class,c=function(t,e){var r=u("easing."+t,(function(){}),!0),n=r.prototype=new i["b"];return n.constructor=r,n.getRatio=e,r},h=i["b"].register||function(){},p=function(t,e,r,i,n){var a=u("easing."+t,{easeOut:new e,easeIn:new r,easeInOut:new i},!0);return h(a,t),a},d=function(t,e,r){this.t=t,this.v=e,r&&(this.next=r,r.prev=this,this.c=r.v-e,this.gap=r.t-t)},f=function(t,e){var r=u("easing."+t,(function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1}),!0),n=r.prototype=new i["b"];return n.constructor=r,n.getRatio=e,n.config=function(t){return new r(t)},r},m=p("Back",f("BackOut",(function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1})),f("BackIn",(function(t){return t*t*((this._p1+1)*t-this._p1)})),f("BackInOut",(function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)}))),v=u("easing.SlowMo",(function(t,e,r){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===r}),!0),g=v.prototype=new i["b"];return g.constructor=v,g.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1===t?0:1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},v.ease=new v(.7,.7),g.config=v.config=function(t,e,r){return new v(t,e,r)},t=u("easing.SteppedEase",(function(t,e){t=t||1,this._p1=1/t,this._p2=t+(e?0:1),this._p3=e?1:0}),!0),g=t.prototype=new i["b"],g.constructor=t,g.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),((this._p2*t|0)+this._p3)*this._p1},g.config=t.config=function(e,r){return new t(e,r)},e=u("easing.ExpoScaleEase",(function(t,e,r){this._p1=Math.log(e/t),this._p2=e-t,this._p3=t,this._ease=r}),!0),g=e.prototype=new i["b"],g.constructor=e,g.getRatio=function(t){return this._ease&&(t=this._ease.getRatio(t)),(this._p3*Math.exp(this._p1*t)-this._p3)/this._p2},g.config=e.config=function(t,r,i){return new e(t,r,i)},r=u("easing.RoughEase",(function(t){t=t||{};var e,r,n,a,o,s,l=t.taper||"none",u=[],c=0,h=0|(t.points||20),p=h,f=!1!==t.randomize,m=!0===t.clamp,v=t.template instanceof i["b"]?t.template:null,g="number"===typeof t.strength?.4*t.strength:.4;while(--p>-1)e=f?Math.random():1/h*p,r=v?v.getRatio(e):e,"none"===l?n=g:"out"===l?(a=1-e,n=a*a*g):"in"===l?n=e*e*g:e<.5?(a=2*e,n=a*a*.5*g):(a=2*(1-e),n=a*a*.5*g),f?r+=Math.random()*n-.5*n:p%2?r+=.5*n:r-=.5*n,m&&(r>1?r=1:r<0&&(r=0)),u[c++]={x:e,y:r};u.sort((function(t,e){return t.x-e.x})),s=new d(1,1,null),p=h;while(--p>-1)o=u[p],s=new d(o.x,o.y,s);this._prev=new d(0,0,0!==s.t?s:s.next)}),!0),g=r.prototype=new i["b"],g.constructor=r,g.getRatio=function(t){var e=this._prev;if(t>e.t){while(e.next&&t>=e.t)e=e.next;e=e.prev}else while(e.prev&&t<=e.t)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},g.config=function(t){return new r(t)},r.ease=new r,p("Bounce",c("BounceOut",(function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375})),c("BounceIn",(function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)})),c("BounceInOut",(function(t){var e=t<.5;return t=e?1-2*t:2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}))),p("Circ",c("CircOut",(function(t){return Math.sqrt(1-(t-=1)*t)})),c("CircIn",(function(t){return-(Math.sqrt(1-t*t)-1)})),c("CircInOut",(function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}))),n=function(t,e,r){var n=u("easing."+t,(function(t,e){this._p1=t>=1?t:1,this._p2=(e||r)/(t<1?t:1),this._p3=this._p2/s*(Math.asin(1/this._p1)||0),this._p2=s/this._p2}),!0),a=n.prototype=new i["b"];return a.constructor=n,a.getRatio=e,a.config=function(t,e){return new n(t,e)},n},p("Elastic",n("ElasticOut",(function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1}),.3),n("ElasticIn",(function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)}),.3),n("ElasticInOut",(function(t){return(t*=2)<1?this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1}),.45)),p("Expo",c("ExpoOut",(function(t){return 1-Math.pow(2,-10*t)})),c("ExpoIn",(function(t){return Math.pow(2,10*(t-1))-.001})),c("ExpoInOut",(function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}))),p("Sine",c("SineOut",(function(t){return Math.sin(t*l)})),c("SineIn",(function(t){return 1-Math.cos(t*l)})),c("SineInOut",(function(t){return-.5*(Math.cos(Math.PI*t)-1)}))),u("easing.EaseLookup",{find:function(t){return i["b"].map[t]}},!0),h(a.SlowMo,"SlowMo","ease,"),h(r,"RoughEase","ease,"),h(t,"SteppedEase","ease,"),m}),!0);var I=i["g"].Back,k=i["g"].Elastic,R=i["g"].Bounce,O=i["g"].RoughEase,z=i["g"].SlowMo,D=i["g"].SteppedEase,B=i["g"].Circ,F=i["g"].Expo,N=i["g"].Sine,U=i["g"].ExpoScaleEase;r.d(e,"a",(function(){return V}));
/*!
 * VERSION: 2.1.3
 * DATE: 2019-05-17
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
var V=n;V._autoActivated=[p,d,a,o,P,s,h,I,k,R,O,z,D,B,F,N,U]},1169:function(t,e,r){var i=r("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"11e9":function(t,e,r){var i=r("52a7"),n=r("4630"),a=r("6821"),o=r("6a99"),s=r("69a8"),l=r("c69a"),u=Object.getOwnPropertyDescriptor;e.f=r("9e1e")?u:function(t,e){if(t=a(t),e=o(e,!0),l)try{return u(t,e)}catch(r){}if(s(t,e))return n(!i.f.call(t,e),t[e])}},1495:function(t,e,r){var i=r("86cc"),n=r("cb7c"),a=r("0d58");t.exports=r("9e1e")?Object.defineProperties:function(t,e){n(t);var r,o=a(e),s=o.length,l=0;while(s>l)i.f(t,r=o[l++],e[r]);return t}},1654:function(t,e,r){"use strict";var i=r("71c1")(!0);r("30f1")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=i(e,r),this._i+=t.length,{value:t,done:!1})}))},1691:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},1991:function(t,e,r){var i,n,a,o=r("9b43"),s=r("31f4"),l=r("fab2"),u=r("230e"),c=r("7726"),h=c.process,p=c.setImmediate,d=c.clearImmediate,f=c.MessageChannel,m=c.Dispatch,v=0,g={},y="onreadystatechange",_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},x=function(t){_.call(t.data)};p&&d||(p=function(t){var e=[],r=1;while(arguments.length>r)e.push(arguments[r++]);return g[++v]=function(){s("function"==typeof t?t:Function(t),e)},i(v),v},d=function(t){delete g[t]},"process"==r("2d95")(h)?i=function(t){h.nextTick(o(_,t,1))}:m&&m.now?i=function(t){m.now(o(_,t,1))}:f?(n=new f,a=n.port2,n.port1.onmessage=x,i=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",x,!1)):i=y in u("script")?function(t){l.appendChild(u("script"))[y]=function(){l.removeChild(this),_.call(t)}}:function(t){setTimeout(o(_,t,1),0)}),t.exports={set:p,clear:d}},"1af6":function(t,e,r){var i=r("63b6");i(i.S,"Array",{isArray:r("9003")})},"1bc3":function(t,e,r){var i=r("f772");t.exports=function(t,e){if(!i(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!i(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},"1c4c":function(t,e,r){"use strict";var i=r("9b43"),n=r("5ca1"),a=r("4bf8"),o=r("1fa8"),s=r("33a4"),l=r("9def"),u=r("f1ae"),c=r("27ee");n(n.S+n.F*!r("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,n,h,p=a(t),d="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m,g=0,y=c(p);if(v&&(m=i(m,f>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(e=l(p.length),r=new d(e);e>g;g++)u(r,g,v?m(p[g],g):p[g]);else for(h=y.call(p),r=new d;!(n=h.next()).done;g++)u(r,g,v?o(h,m,[n.value,g],!0):n.value);return r.length=g,r}})},"1ec9":function(t,e,r){var i=r("f772"),n=r("e53d").document,a=i(n)&&i(n.createElement);t.exports=function(t){return a?n.createElement(t):{}}},"1fa8":function(t,e,r){var i=r("cb7c");t.exports=function(t,e,r,n){try{return n?e(i(r)[0],r[1]):e(r)}catch(o){var a=t["return"];throw void 0!==a&&i(a.call(t)),o}}},"20d6":function(t,e,r){"use strict";var i=r("5ca1"),n=r("0a49")(6),a="findIndex",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),i(i.P+i.F*o,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(a)},"20fd":function(t,e,r){"use strict";var i=r("d9f6"),n=r("aebd");t.exports=function(t,e,r){e in t?i.f(t,e,n(0,r)):t[e]=r}},"214f":function(t,e,r){"use strict";r("b0c5");var i=r("2aba"),n=r("32e9"),a=r("79e5"),o=r("be13"),s=r("2b4c"),l=r("520a"),u=s("species"),c=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(t,e,r){var p=s(t),d=!a((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),f=d?!a((function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===t&&(r.constructor={},r.constructor[u]=function(){return r}),r[p](""),!e})):void 0;if(!d||!f||"replace"===t&&!c||"split"===t&&!h){var m=/./[p],v=r(o,p,""[t],(function(t,e,r,i,n){return e.exec===l?d&&!n?{done:!0,value:m.call(e,r,i)}:{done:!0,value:t.call(r,e,i)}:{done:!1}})),g=v[0],y=v[1];i(String.prototype,t,g),n(RegExp.prototype,p,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},"230e":function(t,e,r){var i=r("d3f4"),n=r("7726").document,a=i(n)&&i(n.createElement);t.exports=function(t){return a?n.createElement(t):{}}},"23c6":function(t,e,r){var i=r("2d95"),n=r("2b4c")("toStringTag"),a="Arguments"==i(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(r){}};t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=o(e=Object(t),n))?r:a?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},"241e":function(t,e,r){var i=r("25eb");t.exports=function(t){return Object(i(t))}},"25eb":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"27ee":function(t,e,r){var i=r("23c6"),n=r("2b4c")("iterator"),a=r("84f2");t.exports=r("8378").getIteratorMethod=function(t){if(void 0!=t)return t[n]||t["@@iterator"]||a[i(t)]}},2877:function(t,e,r){"use strict";function i(t,e,r,i,n,a,o,s){var l,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),i&&(u.functional=!0),a&&(u._scopeId="data-v-"+a),o?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}r.d(e,"a",(function(){return i}))},"28a0":function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},"294c":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"2aba":function(t,e,r){var i=r("7726"),n=r("32e9"),a=r("69a8"),o=r("ca5a")("src"),s=r("fa5b"),l="toString",u=(""+s).split(l);r("8378").inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,r,s){var l="function"==typeof r;l&&(a(r,"name")||n(r,"name",e)),t[e]!==r&&(l&&(a(r,o)||n(r,o,t[e]?""+t[e]:u.join(String(e)))),t===i?t[e]=r:s?t[e]?t[e]=r:n(t,e,r):(delete t[e],n(t,e,r)))})(Function.prototype,l,(function(){return"function"==typeof this&&this[o]||s.call(this)}))},"2aeb":function(t,e,r){var i=r("cb7c"),n=r("1495"),a=r("e11e"),o=r("613b")("IE_PROTO"),s=function(){},l="prototype",u=function(){var t,e=r("230e")("iframe"),i=a.length,n="<",o=">";e.style.display="none",r("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(n+"script"+o+"document.F=Object"+n+"/script"+o),t.close(),u=t.F;while(i--)delete u[l][a[i]];return u()};t.exports=Object.create||function(t,e){var r;return null!==t?(s[l]=i(t),r=new s,s[l]=null,r[o]=t):r=u(),void 0===e?r:n(r,e)}},"2b0e":function(t,e,r){"use strict";(function(t){
/*!
 * Vue.js v2.6.10
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({});function i(t){return void 0===t||null===t}function n(t){return void 0!==t&&null!==t}function a(t){return!0===t}function o(t){return!1===t}function s(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function l(t){return null!==t&&"object"===typeof t}var u=Object.prototype.toString;function c(t){return"[object Object]"===u.call(t)}function h(t){return"[object RegExp]"===u.call(t)}function p(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function d(t){return n(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function f(t){return null==t?"":Array.isArray(t)||c(t)&&t.toString===u?JSON.stringify(t,null,2):String(t)}function m(t){var e=parseFloat(t);return isNaN(e)?t:e}function v(t,e){for(var r=Object.create(null),i=t.split(","),n=0;n<i.length;n++)r[i[n]]=!0;return e?function(t){return r[t.toLowerCase()]}:function(t){return r[t]}}v("slot,component",!0);var g=v("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var r=t.indexOf(e);if(r>-1)return t.splice(r,1)}}var _=Object.prototype.hasOwnProperty;function x(t,e){return _.call(t,e)}function b(t){var e=Object.create(null);return function(r){var i=e[r];return i||(e[r]=t(r))}}var w=/-(\w)/g,T=b((function(t){return t.replace(w,(function(t,e){return e?e.toUpperCase():""}))})),S=b((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),E=/\B([A-Z])/g,M=b((function(t){return t.replace(E,"-$1").toLowerCase()}));function A(t,e){function r(r){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,r):t.call(e)}return r._length=t.length,r}function C(t,e){return t.bind(e)}var P=Function.prototype.bind?C:A;function L(t,e){e=e||0;var r=t.length-e,i=new Array(r);while(r--)i[r]=t[r+e];return i}function I(t,e){for(var r in e)t[r]=e[r];return t}function k(t){for(var e={},r=0;r<t.length;r++)t[r]&&I(e,t[r]);return e}function R(t,e,r){}var O=function(t,e,r){return!1},z=function(t){return t};function D(t,e){if(t===e)return!0;var r=l(t),i=l(e);if(!r||!i)return!r&&!i&&String(t)===String(e);try{var n=Array.isArray(t),a=Array.isArray(e);if(n&&a)return t.length===e.length&&t.every((function(t,r){return D(t,e[r])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(n||a)return!1;var o=Object.keys(t),s=Object.keys(e);return o.length===s.length&&o.every((function(r){return D(t[r],e[r])}))}catch(u){return!1}}function B(t,e){for(var r=0;r<t.length;r++)if(D(t[r],e))return r;return-1}function F(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var N="data-server-rendered",U=["component","directive","filter"],V=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],j={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:O,isReservedAttr:O,isUnknownElement:O,getTagNamespace:R,parsePlatformTagName:z,mustUseProp:O,async:!0,_lifecycleHooks:V},G=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function H(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function W(t,e,r,i){Object.defineProperty(t,e,{value:r,enumerable:!!i,writable:!0,configurable:!0})}var q=new RegExp("[^"+G.source+".$_\\d]");function X(t){if(!q.test(t)){var e=t.split(".");return function(t){for(var r=0;r<e.length;r++){if(!t)return;t=t[e[r]]}return t}}}var $,Y="__proto__"in{},Z="undefined"!==typeof window,J="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,K=J&&WXEnvironment.platform.toLowerCase(),Q=Z&&window.navigator.userAgent.toLowerCase(),tt=Q&&/msie|trident/.test(Q),et=Q&&Q.indexOf("msie 9.0")>0,rt=Q&&Q.indexOf("edge/")>0,it=(Q&&Q.indexOf("android"),Q&&/iphone|ipad|ipod|ios/.test(Q)||"ios"===K),nt=(Q&&/chrome\/\d+/.test(Q),Q&&/phantomjs/.test(Q),Q&&Q.match(/firefox\/(\d+)/)),at={}.watch,ot=!1;if(Z)try{var st={};Object.defineProperty(st,"passive",{get:function(){ot=!0}}),window.addEventListener("test-passive",null,st)}catch(To){}var lt=function(){return void 0===$&&($=!Z&&!J&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),$},ut=Z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ct(t){return"function"===typeof t&&/native code/.test(t.toString())}var ht,pt="undefined"!==typeof Symbol&&ct(Symbol)&&"undefined"!==typeof Reflect&&ct(Reflect.ownKeys);ht="undefined"!==typeof Set&&ct(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var dt=R,ft=0,mt=function(){this.id=ft++,this.subs=[]};mt.prototype.addSub=function(t){this.subs.push(t)},mt.prototype.removeSub=function(t){y(this.subs,t)},mt.prototype.depend=function(){mt.target&&mt.target.addDep(this)},mt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,r=t.length;e<r;e++)t[e].update()},mt.target=null;var vt=[];function gt(t){vt.push(t),mt.target=t}function yt(){vt.pop(),mt.target=vt[vt.length-1]}var _t=function(t,e,r,i,n,a,o,s){this.tag=t,this.data=e,this.children=r,this.text=i,this.elm=n,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},xt={child:{configurable:!0}};xt.child.get=function(){return this.componentInstance},Object.defineProperties(_t.prototype,xt);var bt=function(t){void 0===t&&(t="");var e=new _t;return e.text=t,e.isComment=!0,e};function wt(t){return new _t(void 0,void 0,void 0,String(t))}function Tt(t){var e=new _t(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var St=Array.prototype,Et=Object.create(St),Mt=["push","pop","shift","unshift","splice","sort","reverse"];Mt.forEach((function(t){var e=St[t];W(Et,t,(function(){var r=[],i=arguments.length;while(i--)r[i]=arguments[i];var n,a=e.apply(this,r),o=this.__ob__;switch(t){case"push":case"unshift":n=r;break;case"splice":n=r.slice(2);break}return n&&o.observeArray(n),o.dep.notify(),a}))}));var At=Object.getOwnPropertyNames(Et),Ct=!0;function Pt(t){Ct=t}var Lt=function(t){this.value=t,this.dep=new mt,this.vmCount=0,W(t,"__ob__",this),Array.isArray(t)?(Y?It(t,Et):kt(t,Et,At),this.observeArray(t)):this.walk(t)};function It(t,e){t.__proto__=e}function kt(t,e,r){for(var i=0,n=r.length;i<n;i++){var a=r[i];W(t,a,e[a])}}function Rt(t,e){var r;if(l(t)&&!(t instanceof _t))return x(t,"__ob__")&&t.__ob__ instanceof Lt?r=t.__ob__:Ct&&!lt()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(r=new Lt(t)),e&&r&&r.vmCount++,r}function Ot(t,e,r,i,n){var a=new mt,o=Object.getOwnPropertyDescriptor(t,e);if(!o||!1!==o.configurable){var s=o&&o.get,l=o&&o.set;s&&!l||2!==arguments.length||(r=t[e]);var u=!n&&Rt(r);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):r;return mt.target&&(a.depend(),u&&(u.dep.depend(),Array.isArray(e)&&Bt(e))),e},set:function(e){var i=s?s.call(t):r;e===i||e!==e&&i!==i||s&&!l||(l?l.call(t,e):r=e,u=!n&&Rt(e),a.notify())}})}}function zt(t,e,r){if(Array.isArray(t)&&p(e))return t.length=Math.max(t.length,e),t.splice(e,1,r),r;if(e in t&&!(e in Object.prototype))return t[e]=r,r;var i=t.__ob__;return t._isVue||i&&i.vmCount?r:i?(Ot(i.value,e,r),i.dep.notify(),r):(t[e]=r,r)}function Dt(t,e){if(Array.isArray(t)&&p(e))t.splice(e,1);else{var r=t.__ob__;t._isVue||r&&r.vmCount||x(t,e)&&(delete t[e],r&&r.dep.notify())}}function Bt(t){for(var e=void 0,r=0,i=t.length;r<i;r++)e=t[r],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Bt(e)}Lt.prototype.walk=function(t){for(var e=Object.keys(t),r=0;r<e.length;r++)Ot(t,e[r])},Lt.prototype.observeArray=function(t){for(var e=0,r=t.length;e<r;e++)Rt(t[e])};var Ft=j.optionMergeStrategies;function Nt(t,e){if(!e)return t;for(var r,i,n,a=pt?Reflect.ownKeys(e):Object.keys(e),o=0;o<a.length;o++)r=a[o],"__ob__"!==r&&(i=t[r],n=e[r],x(t,r)?i!==n&&c(i)&&c(n)&&Nt(i,n):zt(t,r,n));return t}function Ut(t,e,r){return r?function(){var i="function"===typeof e?e.call(r,r):e,n="function"===typeof t?t.call(r,r):t;return i?Nt(i,n):n}:e?t?function(){return Nt("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function Vt(t,e){var r=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return r?jt(r):r}function jt(t){for(var e=[],r=0;r<t.length;r++)-1===e.indexOf(t[r])&&e.push(t[r]);return e}function Gt(t,e,r,i){var n=Object.create(t||null);return e?I(n,e):n}Ft.data=function(t,e,r){return r?Ut(t,e,r):e&&"function"!==typeof e?t:Ut(t,e)},V.forEach((function(t){Ft[t]=Vt})),U.forEach((function(t){Ft[t+"s"]=Gt})),Ft.watch=function(t,e,r,i){if(t===at&&(t=void 0),e===at&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var n={};for(var a in I(n,t),e){var o=n[a],s=e[a];o&&!Array.isArray(o)&&(o=[o]),n[a]=o?o.concat(s):Array.isArray(s)?s:[s]}return n},Ft.props=Ft.methods=Ft.inject=Ft.computed=function(t,e,r,i){if(!t)return e;var n=Object.create(null);return I(n,t),e&&I(n,e),n},Ft.provide=Ut;var Ht=function(t,e){return void 0===e?t:e};function Wt(t,e){var r=t.props;if(r){var i,n,a,o={};if(Array.isArray(r)){i=r.length;while(i--)n=r[i],"string"===typeof n&&(a=T(n),o[a]={type:null})}else if(c(r))for(var s in r)n=r[s],a=T(s),o[a]=c(n)?n:{type:n};else 0;t.props=o}}function qt(t,e){var r=t.inject;if(r){var i=t.inject={};if(Array.isArray(r))for(var n=0;n<r.length;n++)i[r[n]]={from:r[n]};else if(c(r))for(var a in r){var o=r[a];i[a]=c(o)?I({from:a},o):{from:o}}else 0}}function Xt(t){var e=t.directives;if(e)for(var r in e){var i=e[r];"function"===typeof i&&(e[r]={bind:i,update:i})}}function $t(t,e,r){if("function"===typeof e&&(e=e.options),Wt(e,r),qt(e,r),Xt(e),!e._base&&(e.extends&&(t=$t(t,e.extends,r)),e.mixins))for(var i=0,n=e.mixins.length;i<n;i++)t=$t(t,e.mixins[i],r);var a,o={};for(a in t)s(a);for(a in e)x(t,a)||s(a);function s(i){var n=Ft[i]||Ht;o[i]=n(t[i],e[i],r,i)}return o}function Yt(t,e,r,i){if("string"===typeof r){var n=t[e];if(x(n,r))return n[r];var a=T(r);if(x(n,a))return n[a];var o=S(a);if(x(n,o))return n[o];var s=n[r]||n[a]||n[o];return s}}function Zt(t,e,r,i){var n=e[t],a=!x(r,t),o=r[t],s=te(Boolean,n.type);if(s>-1)if(a&&!x(n,"default"))o=!1;else if(""===o||o===M(t)){var l=te(String,n.type);(l<0||s<l)&&(o=!0)}if(void 0===o){o=Jt(i,n,t);var u=Ct;Pt(!0),Rt(o),Pt(u)}return o}function Jt(t,e,r){if(x(e,"default")){var i=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[r]&&void 0!==t._props[r]?t._props[r]:"function"===typeof i&&"Function"!==Kt(e.type)?i.call(t):i}}function Kt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Qt(t,e){return Kt(t)===Kt(e)}function te(t,e){if(!Array.isArray(e))return Qt(e,t)?0:-1;for(var r=0,i=e.length;r<i;r++)if(Qt(e[r],t))return r;return-1}function ee(t,e,r){gt();try{if(e){var i=e;while(i=i.$parent){var n=i.$options.errorCaptured;if(n)for(var a=0;a<n.length;a++)try{var o=!1===n[a].call(i,t,e,r);if(o)return}catch(To){ie(To,i,"errorCaptured hook")}}}ie(t,e,r)}finally{yt()}}function re(t,e,r,i,n){var a;try{a=r?t.apply(e,r):t.call(e),a&&!a._isVue&&d(a)&&!a._handled&&(a.catch((function(t){return ee(t,i,n+" (Promise/async)")})),a._handled=!0)}catch(To){ee(To,i,n)}return a}function ie(t,e,r){if(j.errorHandler)try{return j.errorHandler.call(null,t,e,r)}catch(To){To!==t&&ne(To,null,"config.errorHandler")}ne(t,e,r)}function ne(t,e,r){if(!Z&&!J||"undefined"===typeof console)throw t;console.error(t)}var ae,oe=!1,se=[],le=!1;function ue(){le=!1;var t=se.slice(0);se.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&ct(Promise)){var ce=Promise.resolve();ae=function(){ce.then(ue),it&&setTimeout(R)},oe=!0}else if(tt||"undefined"===typeof MutationObserver||!ct(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())ae="undefined"!==typeof setImmediate&&ct(setImmediate)?function(){setImmediate(ue)}:function(){setTimeout(ue,0)};else{var he=1,pe=new MutationObserver(ue),de=document.createTextNode(String(he));pe.observe(de,{characterData:!0}),ae=function(){he=(he+1)%2,de.data=String(he)},oe=!0}function fe(t,e){var r;if(se.push((function(){if(t)try{t.call(e)}catch(To){ee(To,e,"nextTick")}else r&&r(e)})),le||(le=!0,ae()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){r=t}))}var me=new ht;function ve(t){ge(t,me),me.clear()}function ge(t,e){var r,i,n=Array.isArray(t);if(!(!n&&!l(t)||Object.isFrozen(t)||t instanceof _t)){if(t.__ob__){var a=t.__ob__.dep.id;if(e.has(a))return;e.add(a)}if(n){r=t.length;while(r--)ge(t[r],e)}else{i=Object.keys(t),r=i.length;while(r--)ge(t[i[r]],e)}}}var ye=b((function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var r="~"===t.charAt(0);t=r?t.slice(1):t;var i="!"===t.charAt(0);return t=i?t.slice(1):t,{name:t,once:r,capture:i,passive:e}}));function _e(t,e){function r(){var t=arguments,i=r.fns;if(!Array.isArray(i))return re(i,null,arguments,e,"v-on handler");for(var n=i.slice(),a=0;a<n.length;a++)re(n[a],null,t,e,"v-on handler")}return r.fns=t,r}function xe(t,e,r,n,o,s){var l,u,c,h;for(l in t)u=t[l],c=e[l],h=ye(l),i(u)||(i(c)?(i(u.fns)&&(u=t[l]=_e(u,s)),a(h.once)&&(u=t[l]=o(h.name,u,h.capture)),r(h.name,u,h.capture,h.passive,h.params)):u!==c&&(c.fns=u,t[l]=c));for(l in e)i(t[l])&&(h=ye(l),n(h.name,e[l],h.capture))}function be(t,e,r){var o;t instanceof _t&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function l(){r.apply(this,arguments),y(o.fns,l)}i(s)?o=_e([l]):n(s.fns)&&a(s.merged)?(o=s,o.fns.push(l)):o=_e([s,l]),o.merged=!0,t[e]=o}function we(t,e,r){var a=e.options.props;if(!i(a)){var o={},s=t.attrs,l=t.props;if(n(s)||n(l))for(var u in a){var c=M(u);Te(o,l,u,c,!0)||Te(o,s,u,c,!1)}return o}}function Te(t,e,r,i,a){if(n(e)){if(x(e,r))return t[r]=e[r],a||delete e[r],!0;if(x(e,i))return t[r]=e[i],a||delete e[i],!0}return!1}function Se(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Ee(t){return s(t)?[wt(t)]:Array.isArray(t)?Ae(t):void 0}function Me(t){return n(t)&&n(t.text)&&o(t.isComment)}function Ae(t,e){var r,o,l,u,c=[];for(r=0;r<t.length;r++)o=t[r],i(o)||"boolean"===typeof o||(l=c.length-1,u=c[l],Array.isArray(o)?o.length>0&&(o=Ae(o,(e||"")+"_"+r),Me(o[0])&&Me(u)&&(c[l]=wt(u.text+o[0].text),o.shift()),c.push.apply(c,o)):s(o)?Me(u)?c[l]=wt(u.text+o):""!==o&&c.push(wt(o)):Me(o)&&Me(u)?c[l]=wt(u.text+o.text):(a(t._isVList)&&n(o.tag)&&i(o.key)&&n(e)&&(o.key="__vlist"+e+"_"+r+"__"),c.push(o)));return c}function Ce(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function Pe(t){var e=Le(t.$options.inject,t);e&&(Pt(!1),Object.keys(e).forEach((function(r){Ot(t,r,e[r])})),Pt(!0))}function Le(t,e){if(t){for(var r=Object.create(null),i=pt?Reflect.ownKeys(t):Object.keys(t),n=0;n<i.length;n++){var a=i[n];if("__ob__"!==a){var o=t[a].from,s=e;while(s){if(s._provided&&x(s._provided,o)){r[a]=s._provided[o];break}s=s.$parent}if(!s)if("default"in t[a]){var l=t[a].default;r[a]="function"===typeof l?l.call(e):l}else 0}}return r}}function Ie(t,e){if(!t||!t.length)return{};for(var r={},i=0,n=t.length;i<n;i++){var a=t[i],o=a.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,a.context!==e&&a.fnContext!==e||!o||null==o.slot)(r.default||(r.default=[])).push(a);else{var s=o.slot,l=r[s]||(r[s]=[]);"template"===a.tag?l.push.apply(l,a.children||[]):l.push(a)}}for(var u in r)r[u].every(ke)&&delete r[u];return r}function ke(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Re(t,e,i){var n,a=Object.keys(e).length>0,o=t?!!t.$stable:!a,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(o&&i&&i!==r&&s===i.$key&&!a&&!i.$hasNormal)return i;for(var l in n={},t)t[l]&&"$"!==l[0]&&(n[l]=Oe(e,l,t[l]))}else n={};for(var u in e)u in n||(n[u]=ze(e,u));return t&&Object.isExtensible(t)&&(t._normalized=n),W(n,"$stable",o),W(n,"$key",s),W(n,"$hasNormal",a),n}function Oe(t,e,r){var i=function(){var t=arguments.length?r.apply(null,arguments):r({});return t=t&&"object"===typeof t&&!Array.isArray(t)?[t]:Ee(t),t&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return r.proxy&&Object.defineProperty(t,e,{get:i,enumerable:!0,configurable:!0}),i}function ze(t,e){return function(){return t[e]}}function De(t,e){var r,i,a,o,s;if(Array.isArray(t)||"string"===typeof t)for(r=new Array(t.length),i=0,a=t.length;i<a;i++)r[i]=e(t[i],i);else if("number"===typeof t)for(r=new Array(t),i=0;i<t;i++)r[i]=e(i+1,i);else if(l(t))if(pt&&t[Symbol.iterator]){r=[];var u=t[Symbol.iterator](),c=u.next();while(!c.done)r.push(e(c.value,r.length)),c=u.next()}else for(o=Object.keys(t),r=new Array(o.length),i=0,a=o.length;i<a;i++)s=o[i],r[i]=e(t[s],s,i);return n(r)||(r=[]),r._isVList=!0,r}function Be(t,e,r,i){var n,a=this.$scopedSlots[t];a?(r=r||{},i&&(r=I(I({},i),r)),n=a(r)||e):n=this.$slots[t]||e;var o=r&&r.slot;return o?this.$createElement("template",{slot:o},n):n}function Fe(t){return Yt(this.$options,"filters",t,!0)||z}function Ne(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Ue(t,e,r,i,n){var a=j.keyCodes[e]||r;return n&&i&&!j.keyCodes[e]?Ne(n,i):a?Ne(a,t):i?M(i)!==e:void 0}function Ve(t,e,r,i,n){if(r)if(l(r)){var a;Array.isArray(r)&&(r=k(r));var o=function(o){if("class"===o||"style"===o||g(o))a=t;else{var s=t.attrs&&t.attrs.type;a=i||j.mustUseProp(e,s,o)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var l=T(o),u=M(o);if(!(l in a)&&!(u in a)&&(a[o]=r[o],n)){var c=t.on||(t.on={});c["update:"+o]=function(t){r[o]=t}}};for(var s in r)o(s)}else;return t}function je(t,e){var r=this._staticTrees||(this._staticTrees=[]),i=r[t];return i&&!e?i:(i=r[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),He(i,"__static__"+t,!1),i)}function Ge(t,e,r){return He(t,"__once__"+e+(r?"_"+r:""),!0),t}function He(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&"string"!==typeof t[i]&&We(t[i],e+"_"+i,r);else We(t,e,r)}function We(t,e,r){t.isStatic=!0,t.key=e,t.isOnce=r}function qe(t,e){if(e)if(c(e)){var r=t.on=t.on?I({},t.on):{};for(var i in e){var n=r[i],a=e[i];r[i]=n?[].concat(n,a):a}}else;return t}function Xe(t,e,r,i){e=e||{$stable:!r};for(var n=0;n<t.length;n++){var a=t[n];Array.isArray(a)?Xe(a,e,r):a&&(a.proxy&&(a.fn.proxy=!0),e[a.key]=a.fn)}return i&&(e.$key=i),e}function $e(t,e){for(var r=0;r<e.length;r+=2){var i=e[r];"string"===typeof i&&i&&(t[e[r]]=e[r+1])}return t}function Ye(t,e){return"string"===typeof t?e+t:t}function Ze(t){t._o=Ge,t._n=m,t._s=f,t._l=De,t._t=Be,t._q=D,t._i=B,t._m=je,t._f=Fe,t._k=Ue,t._b=Ve,t._v=wt,t._e=bt,t._u=Xe,t._g=qe,t._d=$e,t._p=Ye}function Je(t,e,i,n,o){var s,l=this,u=o.options;x(n,"_uid")?(s=Object.create(n),s._original=n):(s=n,n=n._original);var c=a(u._compiled),h=!c;this.data=t,this.props=e,this.children=i,this.parent=n,this.listeners=t.on||r,this.injections=Le(u.inject,n),this.slots=function(){return l.$slots||Re(t.scopedSlots,l.$slots=Ie(i,n)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Re(t.scopedSlots,this.slots())}}),c&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=Re(t.scopedSlots,this.$slots)),u._scopeId?this._c=function(t,e,r,i){var a=cr(s,t,e,r,i,h);return a&&!Array.isArray(a)&&(a.fnScopeId=u._scopeId,a.fnContext=n),a}:this._c=function(t,e,r,i){return cr(s,t,e,r,i,h)}}function Ke(t,e,i,a,o){var s=t.options,l={},u=s.props;if(n(u))for(var c in u)l[c]=Zt(c,u,e||r);else n(i.attrs)&&tr(l,i.attrs),n(i.props)&&tr(l,i.props);var h=new Je(i,l,o,a,t),p=s.render.call(null,h._c,h);if(p instanceof _t)return Qe(p,i,h.parent,s,h);if(Array.isArray(p)){for(var d=Ee(p)||[],f=new Array(d.length),m=0;m<d.length;m++)f[m]=Qe(d[m],i,h.parent,s,h);return f}}function Qe(t,e,r,i,n){var a=Tt(t);return a.fnContext=r,a.fnOptions=i,e.slot&&((a.data||(a.data={})).slot=e.slot),a}function tr(t,e){for(var r in e)t[T(r)]=e[r]}Ze(Je.prototype);var er={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var r=t;er.prepatch(r,r)}else{var i=t.componentInstance=nr(t,Pr);i.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var r=e.componentOptions,i=e.componentInstance=t.componentInstance;Or(i,r.propsData,r.listeners,e,r.children)},insert:function(t){var e=t.context,r=t.componentInstance;r._isMounted||(r._isMounted=!0,Fr(r,"mounted")),t.data.keepAlive&&(e._isMounted?Jr(r):Dr(r,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Br(e,!0):e.$destroy())}},rr=Object.keys(er);function ir(t,e,r,o,s){if(!i(t)){var u=r.$options._base;if(l(t)&&(t=u.extend(t)),"function"===typeof t){var c;if(i(t.cid)&&(c=t,t=xr(c,u),void 0===t))return _r(c,e,r,o,s);e=e||{},xi(t),n(e.model)&&sr(t.options,e);var h=we(e,t,s);if(a(t.options.functional))return Ke(t,h,e,r,o);var p=e.on;if(e.on=e.nativeOn,a(t.options.abstract)){var d=e.slot;e={},d&&(e.slot=d)}ar(e);var f=t.options.name||s,m=new _t("vue-component-"+t.cid+(f?"-"+f:""),e,void 0,void 0,void 0,r,{Ctor:t,propsData:h,listeners:p,tag:s,children:o},c);return m}}}function nr(t,e){var r={_isComponent:!0,_parentVnode:t,parent:e},i=t.data.inlineTemplate;return n(i)&&(r.render=i.render,r.staticRenderFns=i.staticRenderFns),new t.componentOptions.Ctor(r)}function ar(t){for(var e=t.hook||(t.hook={}),r=0;r<rr.length;r++){var i=rr[r],n=e[i],a=er[i];n===a||n&&n._merged||(e[i]=n?or(a,n):a)}}function or(t,e){var r=function(r,i){t(r,i),e(r,i)};return r._merged=!0,r}function sr(t,e){var r=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[r]=e.model.value;var a=e.on||(e.on={}),o=a[i],s=e.model.callback;n(o)?(Array.isArray(o)?-1===o.indexOf(s):o!==s)&&(a[i]=[s].concat(o)):a[i]=s}var lr=1,ur=2;function cr(t,e,r,i,n,o){return(Array.isArray(r)||s(r))&&(n=i,i=r,r=void 0),a(o)&&(n=ur),hr(t,e,r,i,n)}function hr(t,e,r,i,a){if(n(r)&&n(r.__ob__))return bt();if(n(r)&&n(r.is)&&(e=r.is),!e)return bt();var o,s,l;(Array.isArray(i)&&"function"===typeof i[0]&&(r=r||{},r.scopedSlots={default:i[0]},i.length=0),a===ur?i=Ee(i):a===lr&&(i=Se(i)),"string"===typeof e)?(s=t.$vnode&&t.$vnode.ns||j.getTagNamespace(e),o=j.isReservedTag(e)?new _t(j.parsePlatformTagName(e),r,i,void 0,void 0,t):r&&r.pre||!n(l=Yt(t.$options,"components",e))?new _t(e,r,i,void 0,void 0,t):ir(l,r,t,i,e)):o=ir(e,r,t,i);return Array.isArray(o)?o:n(o)?(n(s)&&pr(o,s),n(r)&&dr(r),o):bt()}function pr(t,e,r){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,r=!0),n(t.children))for(var o=0,s=t.children.length;o<s;o++){var l=t.children[o];n(l.tag)&&(i(l.ns)||a(r)&&"svg"!==l.tag)&&pr(l,e,r)}}function dr(t){l(t.style)&&ve(t.style),l(t.class)&&ve(t.class)}function fr(t){t._vnode=null,t._staticTrees=null;var e=t.$options,i=t.$vnode=e._parentVnode,n=i&&i.context;t.$slots=Ie(e._renderChildren,n),t.$scopedSlots=r,t._c=function(e,r,i,n){return cr(t,e,r,i,n,!1)},t.$createElement=function(e,r,i,n){return cr(t,e,r,i,n,!0)};var a=i&&i.data;Ot(t,"$attrs",a&&a.attrs||r,null,!0),Ot(t,"$listeners",e._parentListeners||r,null,!0)}var mr,vr=null;function gr(t){Ze(t.prototype),t.prototype.$nextTick=function(t){return fe(t,this)},t.prototype._render=function(){var t,e=this,r=e.$options,i=r.render,n=r._parentVnode;n&&(e.$scopedSlots=Re(n.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=n;try{vr=e,t=i.call(e._renderProxy,e.$createElement)}catch(To){ee(To,e,"render"),t=e._vnode}finally{vr=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof _t||(t=bt()),t.parent=n,t}}function yr(t,e){return(t.__esModule||pt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),l(t)?e.extend(t):t}function _r(t,e,r,i,n){var a=bt();return a.asyncFactory=t,a.asyncMeta={data:e,context:r,children:i,tag:n},a}function xr(t,e){if(a(t.error)&&n(t.errorComp))return t.errorComp;if(n(t.resolved))return t.resolved;var r=vr;if(r&&n(t.owners)&&-1===t.owners.indexOf(r)&&t.owners.push(r),a(t.loading)&&n(t.loadingComp))return t.loadingComp;if(r&&!n(t.owners)){var o=t.owners=[r],s=!0,u=null,c=null;r.$on("hook:destroyed",(function(){return y(o,r)}));var h=function(t){for(var e=0,r=o.length;e<r;e++)o[e].$forceUpdate();t&&(o.length=0,null!==u&&(clearTimeout(u),u=null),null!==c&&(clearTimeout(c),c=null))},p=F((function(r){t.resolved=yr(r,e),s?o.length=0:h(!0)})),f=F((function(e){n(t.errorComp)&&(t.error=!0,h(!0))})),m=t(p,f);return l(m)&&(d(m)?i(t.resolved)&&m.then(p,f):d(m.component)&&(m.component.then(p,f),n(m.error)&&(t.errorComp=yr(m.error,e)),n(m.loading)&&(t.loadingComp=yr(m.loading,e),0===m.delay?t.loading=!0:u=setTimeout((function(){u=null,i(t.resolved)&&i(t.error)&&(t.loading=!0,h(!1))}),m.delay||200)),n(m.timeout)&&(c=setTimeout((function(){c=null,i(t.resolved)&&f(null)}),m.timeout)))),s=!1,t.loading?t.loadingComp:t.resolved}}function br(t){return t.isComment&&t.asyncFactory}function wr(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var r=t[e];if(n(r)&&(n(r.componentOptions)||br(r)))return r}}function Tr(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Ar(t,e)}function Sr(t,e){mr.$on(t,e)}function Er(t,e){mr.$off(t,e)}function Mr(t,e){var r=mr;return function i(){var n=e.apply(null,arguments);null!==n&&r.$off(t,i)}}function Ar(t,e,r){mr=t,xe(e,r||{},Sr,Er,Mr,t),mr=void 0}function Cr(t){var e=/^hook:/;t.prototype.$on=function(t,r){var i=this;if(Array.isArray(t))for(var n=0,a=t.length;n<a;n++)i.$on(t[n],r);else(i._events[t]||(i._events[t]=[])).push(r),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){var r=this;function i(){r.$off(t,i),e.apply(r,arguments)}return i.fn=e,r.$on(t,i),r},t.prototype.$off=function(t,e){var r=this;if(!arguments.length)return r._events=Object.create(null),r;if(Array.isArray(t)){for(var i=0,n=t.length;i<n;i++)r.$off(t[i],e);return r}var a,o=r._events[t];if(!o)return r;if(!e)return r._events[t]=null,r;var s=o.length;while(s--)if(a=o[s],a===e||a.fn===e){o.splice(s,1);break}return r},t.prototype.$emit=function(t){var e=this,r=e._events[t];if(r){r=r.length>1?L(r):r;for(var i=L(arguments,1),n='event handler for "'+t+'"',a=0,o=r.length;a<o;a++)re(r[a],e,i,e,n)}return e}}var Pr=null;function Lr(t){var e=Pr;return Pr=t,function(){Pr=e}}function Ir(t){var e=t.$options,r=e.parent;if(r&&!e.abstract){while(r.$options.abstract&&r.$parent)r=r.$parent;r.$children.push(t)}t.$parent=r,t.$root=r?r.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function kr(t){t.prototype._update=function(t,e){var r=this,i=r.$el,n=r._vnode,a=Lr(r);r._vnode=t,r.$el=n?r.__patch__(n,t):r.__patch__(r.$el,t,e,!1),a(),i&&(i.__vue__=null),r.$el&&(r.$el.__vue__=r),r.$vnode&&r.$parent&&r.$vnode===r.$parent._vnode&&(r.$parent.$el=r.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Fr(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();var r=t._watchers.length;while(r--)t._watchers[r].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Fr(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Rr(t,e,r){var i;return t.$el=e,t.$options.render||(t.$options.render=bt),Fr(t,"beforeMount"),i=function(){t._update(t._render(),r)},new ei(t,i,R,{before:function(){t._isMounted&&!t._isDestroyed&&Fr(t,"beforeUpdate")}},!0),r=!1,null==t.$vnode&&(t._isMounted=!0,Fr(t,"mounted")),t}function Or(t,e,i,n,a){var o=n.data.scopedSlots,s=t.$scopedSlots,l=!!(o&&!o.$stable||s!==r&&!s.$stable||o&&t.$scopedSlots.$key!==o.$key),u=!!(a||t.$options._renderChildren||l);if(t.$options._parentVnode=n,t.$vnode=n,t._vnode&&(t._vnode.parent=n),t.$options._renderChildren=a,t.$attrs=n.data.attrs||r,t.$listeners=i||r,e&&t.$options.props){Pt(!1);for(var c=t._props,h=t.$options._propKeys||[],p=0;p<h.length;p++){var d=h[p],f=t.$options.props;c[d]=Zt(d,f,e,t)}Pt(!0),t.$options.propsData=e}i=i||r;var m=t.$options._parentListeners;t.$options._parentListeners=i,Ar(t,i,m),u&&(t.$slots=Ie(a,n.context),t.$forceUpdate())}function zr(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Dr(t,e){if(e){if(t._directInactive=!1,zr(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var r=0;r<t.$children.length;r++)Dr(t.$children[r]);Fr(t,"activated")}}function Br(t,e){if((!e||(t._directInactive=!0,!zr(t)))&&!t._inactive){t._inactive=!0;for(var r=0;r<t.$children.length;r++)Br(t.$children[r]);Fr(t,"deactivated")}}function Fr(t,e){gt();var r=t.$options[e],i=e+" hook";if(r)for(var n=0,a=r.length;n<a;n++)re(r[n],t,null,t,i);t._hasHookEvent&&t.$emit("hook:"+e),yt()}var Nr=[],Ur=[],Vr={},jr=!1,Gr=!1,Hr=0;function Wr(){Hr=Nr.length=Ur.length=0,Vr={},jr=Gr=!1}var qr=0,Xr=Date.now;if(Z&&!tt){var $r=window.performance;$r&&"function"===typeof $r.now&&Xr()>document.createEvent("Event").timeStamp&&(Xr=function(){return $r.now()})}function Yr(){var t,e;for(qr=Xr(),Gr=!0,Nr.sort((function(t,e){return t.id-e.id})),Hr=0;Hr<Nr.length;Hr++)t=Nr[Hr],t.before&&t.before(),e=t.id,Vr[e]=null,t.run();var r=Ur.slice(),i=Nr.slice();Wr(),Kr(r),Zr(i),ut&&j.devtools&&ut.emit("flush")}function Zr(t){var e=t.length;while(e--){var r=t[e],i=r.vm;i._watcher===r&&i._isMounted&&!i._isDestroyed&&Fr(i,"updated")}}function Jr(t){t._inactive=!1,Ur.push(t)}function Kr(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Dr(t[e],!0)}function Qr(t){var e=t.id;if(null==Vr[e]){if(Vr[e]=!0,Gr){var r=Nr.length-1;while(r>Hr&&Nr[r].id>t.id)r--;Nr.splice(r+1,0,t)}else Nr.push(t);jr||(jr=!0,fe(Yr))}}var ti=0,ei=function(t,e,r,i,n){this.vm=t,n&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++ti,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ht,this.newDepIds=new ht,this.expression="","function"===typeof e?this.getter=e:(this.getter=X(e),this.getter||(this.getter=R)),this.value=this.lazy?void 0:this.get()};ei.prototype.get=function(){var t;gt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(To){if(!this.user)throw To;ee(To,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ve(t),yt(),this.cleanupDeps()}return t},ei.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},ei.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},ei.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Qr(this)},ei.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||l(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(To){ee(To,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},ei.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ei.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},ei.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var ri={enumerable:!0,configurable:!0,get:R,set:R};function ii(t,e,r){ri.get=function(){return this[e][r]},ri.set=function(t){this[e][r]=t},Object.defineProperty(t,r,ri)}function ni(t){t._watchers=[];var e=t.$options;e.props&&ai(t,e.props),e.methods&&di(t,e.methods),e.data?oi(t):Rt(t._data={},!0),e.computed&&ui(t,e.computed),e.watch&&e.watch!==at&&fi(t,e.watch)}function ai(t,e){var r=t.$options.propsData||{},i=t._props={},n=t.$options._propKeys=[],a=!t.$parent;a||Pt(!1);var o=function(a){n.push(a);var o=Zt(a,e,r,t);Ot(i,a,o),a in t||ii(t,"_props",a)};for(var s in e)o(s);Pt(!0)}function oi(t){var e=t.$options.data;e=t._data="function"===typeof e?si(e,t):e||{},c(e)||(e={});var r=Object.keys(e),i=t.$options.props,n=(t.$options.methods,r.length);while(n--){var a=r[n];0,i&&x(i,a)||H(a)||ii(t,"_data",a)}Rt(e,!0)}function si(t,e){gt();try{return t.call(e,e)}catch(To){return ee(To,e,"data()"),{}}finally{yt()}}var li={lazy:!0};function ui(t,e){var r=t._computedWatchers=Object.create(null),i=lt();for(var n in e){var a=e[n],o="function"===typeof a?a:a.get;0,i||(r[n]=new ei(t,o||R,R,li)),n in t||ci(t,n,a)}}function ci(t,e,r){var i=!lt();"function"===typeof r?(ri.get=i?hi(e):pi(r),ri.set=R):(ri.get=r.get?i&&!1!==r.cache?hi(e):pi(r.get):R,ri.set=r.set||R),Object.defineProperty(t,e,ri)}function hi(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),mt.target&&e.depend(),e.value}}function pi(t){return function(){return t.call(this,this)}}function di(t,e){t.$options.props;for(var r in e)t[r]="function"!==typeof e[r]?R:P(e[r],t)}function fi(t,e){for(var r in e){var i=e[r];if(Array.isArray(i))for(var n=0;n<i.length;n++)mi(t,r,i[n]);else mi(t,r,i)}}function mi(t,e,r,i){return c(r)&&(i=r,r=r.handler),"string"===typeof r&&(r=t[r]),t.$watch(e,r,i)}function vi(t){var e={get:function(){return this._data}},r={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",r),t.prototype.$set=zt,t.prototype.$delete=Dt,t.prototype.$watch=function(t,e,r){var i=this;if(c(e))return mi(i,t,e,r);r=r||{},r.user=!0;var n=new ei(i,t,e,r);if(r.immediate)try{e.call(i,n.value)}catch(a){ee(a,i,'callback for immediate watcher "'+n.expression+'"')}return function(){n.teardown()}}}var gi=0;function yi(t){t.prototype._init=function(t){var e=this;e._uid=gi++,e._isVue=!0,t&&t._isComponent?_i(e,t):e.$options=$t(xi(e.constructor),t||{},e),e._renderProxy=e,e._self=e,Ir(e),Tr(e),fr(e),Fr(e,"beforeCreate"),Pe(e),ni(e),Ce(e),Fr(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function _i(t,e){var r=t.$options=Object.create(t.constructor.options),i=e._parentVnode;r.parent=e.parent,r._parentVnode=i;var n=i.componentOptions;r.propsData=n.propsData,r._parentListeners=n.listeners,r._renderChildren=n.children,r._componentTag=n.tag,e.render&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns)}function xi(t){var e=t.options;if(t.super){var r=xi(t.super),i=t.superOptions;if(r!==i){t.superOptions=r;var n=bi(t);n&&I(t.extendOptions,n),e=t.options=$t(r,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function bi(t){var e,r=t.options,i=t.sealedOptions;for(var n in r)r[n]!==i[n]&&(e||(e={}),e[n]=r[n]);return e}function wi(t){this._init(t)}function Ti(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var r=L(arguments,1);return r.unshift(this),"function"===typeof t.install?t.install.apply(t,r):"function"===typeof t&&t.apply(null,r),e.push(t),this}}function Si(t){t.mixin=function(t){return this.options=$t(this.options,t),this}}function Ei(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var r=this,i=r.cid,n=t._Ctor||(t._Ctor={});if(n[i])return n[i];var a=t.name||r.options.name;var o=function(t){this._init(t)};return o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.cid=e++,o.options=$t(r.options,t),o["super"]=r,o.options.props&&Mi(o),o.options.computed&&Ai(o),o.extend=r.extend,o.mixin=r.mixin,o.use=r.use,U.forEach((function(t){o[t]=r[t]})),a&&(o.options.components[a]=o),o.superOptions=r.options,o.extendOptions=t,o.sealedOptions=I({},o.options),n[i]=o,o}}function Mi(t){var e=t.options.props;for(var r in e)ii(t.prototype,"_props",r)}function Ai(t){var e=t.options.computed;for(var r in e)ci(t.prototype,r,e[r])}function Ci(t){U.forEach((function(e){t[e]=function(t,r){return r?("component"===e&&c(r)&&(r.name=r.name||t,r=this.options._base.extend(r)),"directive"===e&&"function"===typeof r&&(r={bind:r,update:r}),this.options[e+"s"][t]=r,r):this.options[e+"s"][t]}}))}function Pi(t){return t&&(t.Ctor.options.name||t.tag)}function Li(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!h(t)&&t.test(e)}function Ii(t,e){var r=t.cache,i=t.keys,n=t._vnode;for(var a in r){var o=r[a];if(o){var s=Pi(o.componentOptions);s&&!e(s)&&ki(r,a,i,n)}}}function ki(t,e,r,i){var n=t[e];!n||i&&n.tag===i.tag||n.componentInstance.$destroy(),t[e]=null,y(r,e)}yi(wi),vi(wi),Cr(wi),kr(wi),gr(wi);var Ri=[String,RegExp,Array],Oi={name:"keep-alive",abstract:!0,props:{include:Ri,exclude:Ri,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)ki(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",(function(e){Ii(t,(function(t){return Li(e,t)}))})),this.$watch("exclude",(function(e){Ii(t,(function(t){return!Li(e,t)}))}))},render:function(){var t=this.$slots.default,e=wr(t),r=e&&e.componentOptions;if(r){var i=Pi(r),n=this,a=n.include,o=n.exclude;if(a&&(!i||!Li(a,i))||o&&i&&Li(o,i))return e;var s=this,l=s.cache,u=s.keys,c=null==e.key?r.Ctor.cid+(r.tag?"::"+r.tag:""):e.key;l[c]?(e.componentInstance=l[c].componentInstance,y(u,c),u.push(c)):(l[c]=e,u.push(c),this.max&&u.length>parseInt(this.max)&&ki(l,u[0],u,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},zi={KeepAlive:Oi};function Di(t){var e={get:function(){return j}};Object.defineProperty(t,"config",e),t.util={warn:dt,extend:I,mergeOptions:$t,defineReactive:Ot},t.set=zt,t.delete=Dt,t.nextTick=fe,t.observable=function(t){return Rt(t),t},t.options=Object.create(null),U.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,I(t.options.components,zi),Ti(t),Si(t),Ei(t),Ci(t)}Di(wi),Object.defineProperty(wi.prototype,"$isServer",{get:lt}),Object.defineProperty(wi.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(wi,"FunctionalRenderContext",{value:Je}),wi.version="2.6.10";var Bi=v("style,class"),Fi=v("input,textarea,option,select,progress"),Ni=function(t,e,r){return"value"===r&&Fi(t)&&"button"!==e||"selected"===r&&"option"===t||"checked"===r&&"input"===t||"muted"===r&&"video"===t},Ui=v("contenteditable,draggable,spellcheck"),Vi=v("events,caret,typing,plaintext-only"),ji=function(t,e){return Xi(e)||"false"===e?"false":"contenteditable"===t&&Vi(e)?e:"true"},Gi=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Hi="http://www.w3.org/1999/xlink",Wi=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},qi=function(t){return Wi(t)?t.slice(6,t.length):""},Xi=function(t){return null==t||!1===t};function $i(t){var e=t.data,r=t,i=t;while(n(i.componentInstance))i=i.componentInstance._vnode,i&&i.data&&(e=Yi(i.data,e));while(n(r=r.parent))r&&r.data&&(e=Yi(e,r.data));return Zi(e.staticClass,e.class)}function Yi(t,e){return{staticClass:Ji(t.staticClass,e.staticClass),class:n(t.class)?[t.class,e.class]:e.class}}function Zi(t,e){return n(t)||n(e)?Ji(t,Ki(e)):""}function Ji(t,e){return t?e?t+" "+e:t:e||""}function Ki(t){return Array.isArray(t)?Qi(t):l(t)?tn(t):"string"===typeof t?t:""}function Qi(t){for(var e,r="",i=0,a=t.length;i<a;i++)n(e=Ki(t[i]))&&""!==e&&(r&&(r+=" "),r+=e);return r}function tn(t){var e="";for(var r in t)t[r]&&(e&&(e+=" "),e+=r);return e}var en={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},rn=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),nn=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),an=function(t){return rn(t)||nn(t)};function on(t){return nn(t)?"svg":"math"===t?"math":void 0}var sn=Object.create(null);function ln(t){if(!Z)return!0;if(an(t))return!1;if(t=t.toLowerCase(),null!=sn[t])return sn[t];var e=document.createElement(t);return t.indexOf("-")>-1?sn[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:sn[t]=/HTMLUnknownElement/.test(e.toString())}var un=v("text,number,password,search,email,tel,url");function cn(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function hn(t,e){var r=document.createElement(t);return"select"!==t?r:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&r.setAttribute("multiple","multiple"),r)}function pn(t,e){return document.createElementNS(en[t],e)}function dn(t){return document.createTextNode(t)}function fn(t){return document.createComment(t)}function mn(t,e,r){t.insertBefore(e,r)}function vn(t,e){t.removeChild(e)}function gn(t,e){t.appendChild(e)}function yn(t){return t.parentNode}function _n(t){return t.nextSibling}function xn(t){return t.tagName}function bn(t,e){t.textContent=e}function wn(t,e){t.setAttribute(e,"")}var Tn=Object.freeze({createElement:hn,createElementNS:pn,createTextNode:dn,createComment:fn,insertBefore:mn,removeChild:vn,appendChild:gn,parentNode:yn,nextSibling:_n,tagName:xn,setTextContent:bn,setStyleScope:wn}),Sn={create:function(t,e){En(e)},update:function(t,e){t.data.ref!==e.data.ref&&(En(t,!0),En(e))},destroy:function(t){En(t,!0)}};function En(t,e){var r=t.data.ref;if(n(r)){var i=t.context,a=t.componentInstance||t.elm,o=i.$refs;e?Array.isArray(o[r])?y(o[r],a):o[r]===a&&(o[r]=void 0):t.data.refInFor?Array.isArray(o[r])?o[r].indexOf(a)<0&&o[r].push(a):o[r]=[a]:o[r]=a}}var Mn=new _t("",{},[]),An=["create","activate","update","remove","destroy"];function Cn(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&n(t.data)===n(e.data)&&Pn(t,e)||a(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&i(e.asyncFactory.error))}function Pn(t,e){if("input"!==t.tag)return!0;var r,i=n(r=t.data)&&n(r=r.attrs)&&r.type,a=n(r=e.data)&&n(r=r.attrs)&&r.type;return i===a||un(i)&&un(a)}function Ln(t,e,r){var i,a,o={};for(i=e;i<=r;++i)a=t[i].key,n(a)&&(o[a]=i);return o}function In(t){var e,r,o={},l=t.modules,u=t.nodeOps;for(e=0;e<An.length;++e)for(o[An[e]]=[],r=0;r<l.length;++r)n(l[r][An[e]])&&o[An[e]].push(l[r][An[e]]);function c(t){return new _t(u.tagName(t).toLowerCase(),{},[],void 0,t)}function h(t,e){function r(){0===--r.listeners&&p(t)}return r.listeners=e,r}function p(t){var e=u.parentNode(t);n(e)&&u.removeChild(e,t)}function d(t,e,r,i,o,s,l){if(n(t.elm)&&n(s)&&(t=s[l]=Tt(t)),t.isRootInsert=!o,!f(t,e,r,i)){var c=t.data,h=t.children,p=t.tag;n(p)?(t.elm=t.ns?u.createElementNS(t.ns,p):u.createElement(p,t),w(t),_(t,h,e),n(c)&&b(t,e),y(r,t.elm,i)):a(t.isComment)?(t.elm=u.createComment(t.text),y(r,t.elm,i)):(t.elm=u.createTextNode(t.text),y(r,t.elm,i))}}function f(t,e,r,i){var o=t.data;if(n(o)){var s=n(t.componentInstance)&&o.keepAlive;if(n(o=o.hook)&&n(o=o.init)&&o(t,!1),n(t.componentInstance))return m(t,e),y(r,t.elm,i),a(s)&&g(t,e,r,i),!0}}function m(t,e){n(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,x(t)?(b(t,e),w(t)):(En(t),e.push(t))}function g(t,e,r,i){var a,s=t;while(s.componentInstance)if(s=s.componentInstance._vnode,n(a=s.data)&&n(a=a.transition)){for(a=0;a<o.activate.length;++a)o.activate[a](Mn,s);e.push(s);break}y(r,t.elm,i)}function y(t,e,r){n(t)&&(n(r)?u.parentNode(r)===t&&u.insertBefore(t,e,r):u.appendChild(t,e))}function _(t,e,r){if(Array.isArray(e)){0;for(var i=0;i<e.length;++i)d(e[i],r,t.elm,null,!0,e,i)}else s(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function x(t){while(t.componentInstance)t=t.componentInstance._vnode;return n(t.tag)}function b(t,r){for(var i=0;i<o.create.length;++i)o.create[i](Mn,t);e=t.data.hook,n(e)&&(n(e.create)&&e.create(Mn,t),n(e.insert)&&r.push(t))}function w(t){var e;if(n(e=t.fnScopeId))u.setStyleScope(t.elm,e);else{var r=t;while(r)n(e=r.context)&&n(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),r=r.parent}n(e=Pr)&&e!==t.context&&e!==t.fnContext&&n(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function T(t,e,r,i,n,a){for(;i<=n;++i)d(r[i],a,t,e,!1,r,i)}function S(t){var e,r,i=t.data;if(n(i))for(n(e=i.hook)&&n(e=e.destroy)&&e(t),e=0;e<o.destroy.length;++e)o.destroy[e](t);if(n(e=t.children))for(r=0;r<t.children.length;++r)S(t.children[r])}function E(t,e,r,i){for(;r<=i;++r){var a=e[r];n(a)&&(n(a.tag)?(M(a),S(a)):p(a.elm))}}function M(t,e){if(n(e)||n(t.data)){var r,i=o.remove.length+1;for(n(e)?e.listeners+=i:e=h(t.elm,i),n(r=t.componentInstance)&&n(r=r._vnode)&&n(r.data)&&M(r,e),r=0;r<o.remove.length;++r)o.remove[r](t,e);n(r=t.data.hook)&&n(r=r.remove)?r(t,e):e()}else p(t.elm)}function A(t,e,r,a,o){var s,l,c,h,p=0,f=0,m=e.length-1,v=e[0],g=e[m],y=r.length-1,_=r[0],x=r[y],b=!o;while(p<=m&&f<=y)i(v)?v=e[++p]:i(g)?g=e[--m]:Cn(v,_)?(P(v,_,a,r,f),v=e[++p],_=r[++f]):Cn(g,x)?(P(g,x,a,r,y),g=e[--m],x=r[--y]):Cn(v,x)?(P(v,x,a,r,y),b&&u.insertBefore(t,v.elm,u.nextSibling(g.elm)),v=e[++p],x=r[--y]):Cn(g,_)?(P(g,_,a,r,f),b&&u.insertBefore(t,g.elm,v.elm),g=e[--m],_=r[++f]):(i(s)&&(s=Ln(e,p,m)),l=n(_.key)?s[_.key]:C(_,e,p,m),i(l)?d(_,a,t,v.elm,!1,r,f):(c=e[l],Cn(c,_)?(P(c,_,a,r,f),e[l]=void 0,b&&u.insertBefore(t,c.elm,v.elm)):d(_,a,t,v.elm,!1,r,f)),_=r[++f]);p>m?(h=i(r[y+1])?null:r[y+1].elm,T(t,h,r,f,y,a)):f>y&&E(t,e,p,m)}function C(t,e,r,i){for(var a=r;a<i;a++){var o=e[a];if(n(o)&&Cn(t,o))return a}}function P(t,e,r,s,l,c){if(t!==e){n(e.elm)&&n(s)&&(e=s[l]=Tt(e));var h=e.elm=t.elm;if(a(t.isAsyncPlaceholder))n(e.asyncFactory.resolved)?k(t.elm,e,r):e.isAsyncPlaceholder=!0;else if(a(e.isStatic)&&a(t.isStatic)&&e.key===t.key&&(a(e.isCloned)||a(e.isOnce)))e.componentInstance=t.componentInstance;else{var p,d=e.data;n(d)&&n(p=d.hook)&&n(p=p.prepatch)&&p(t,e);var f=t.children,m=e.children;if(n(d)&&x(e)){for(p=0;p<o.update.length;++p)o.update[p](t,e);n(p=d.hook)&&n(p=p.update)&&p(t,e)}i(e.text)?n(f)&&n(m)?f!==m&&A(h,f,m,r,c):n(m)?(n(t.text)&&u.setTextContent(h,""),T(h,null,m,0,m.length-1,r)):n(f)?E(h,f,0,f.length-1):n(t.text)&&u.setTextContent(h,""):t.text!==e.text&&u.setTextContent(h,e.text),n(d)&&n(p=d.hook)&&n(p=p.postpatch)&&p(t,e)}}}function L(t,e,r){if(a(r)&&n(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var I=v("attrs,class,staticClass,staticStyle,key");function k(t,e,r,i){var o,s=e.tag,l=e.data,u=e.children;if(i=i||l&&l.pre,e.elm=t,a(e.isComment)&&n(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(n(l)&&(n(o=l.hook)&&n(o=o.init)&&o(e,!0),n(o=e.componentInstance)))return m(e,r),!0;if(n(s)){if(n(u))if(t.hasChildNodes())if(n(o=l)&&n(o=o.domProps)&&n(o=o.innerHTML)){if(o!==t.innerHTML)return!1}else{for(var c=!0,h=t.firstChild,p=0;p<u.length;p++){if(!h||!k(h,u[p],r,i)){c=!1;break}h=h.nextSibling}if(!c||h)return!1}else _(e,u,r);if(n(l)){var d=!1;for(var f in l)if(!I(f)){d=!0,b(e,r);break}!d&&l["class"]&&ve(l["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,r,s){if(!i(e)){var l=!1,h=[];if(i(t))l=!0,d(e,h);else{var p=n(t.nodeType);if(!p&&Cn(t,e))P(t,e,h,null,null,s);else{if(p){if(1===t.nodeType&&t.hasAttribute(N)&&(t.removeAttribute(N),r=!0),a(r)&&k(t,e,h))return L(e,h,!0),t;t=c(t)}var f=t.elm,m=u.parentNode(f);if(d(e,h,f._leaveCb?null:m,u.nextSibling(f)),n(e.parent)){var v=e.parent,g=x(e);while(v){for(var y=0;y<o.destroy.length;++y)o.destroy[y](v);if(v.elm=e.elm,g){for(var _=0;_<o.create.length;++_)o.create[_](Mn,v);var b=v.data.hook.insert;if(b.merged)for(var w=1;w<b.fns.length;w++)b.fns[w]()}else En(v);v=v.parent}}n(m)?E(m,[t],0,0):n(t.tag)&&S(t)}}return L(e,h,l),e.elm}n(t)&&S(t)}}var kn={create:Rn,update:Rn,destroy:function(t){Rn(t,Mn)}};function Rn(t,e){(t.data.directives||e.data.directives)&&On(t,e)}function On(t,e){var r,i,n,a=t===Mn,o=e===Mn,s=Dn(t.data.directives,t.context),l=Dn(e.data.directives,e.context),u=[],c=[];for(r in l)i=s[r],n=l[r],i?(n.oldValue=i.value,n.oldArg=i.arg,Fn(n,"update",e,t),n.def&&n.def.componentUpdated&&c.push(n)):(Fn(n,"bind",e,t),n.def&&n.def.inserted&&u.push(n));if(u.length){var h=function(){for(var r=0;r<u.length;r++)Fn(u[r],"inserted",e,t)};a?be(e,"insert",h):h()}if(c.length&&be(e,"postpatch",(function(){for(var r=0;r<c.length;r++)Fn(c[r],"componentUpdated",e,t)})),!a)for(r in s)l[r]||Fn(s[r],"unbind",t,t,o)}var zn=Object.create(null);function Dn(t,e){var r,i,n=Object.create(null);if(!t)return n;for(r=0;r<t.length;r++)i=t[r],i.modifiers||(i.modifiers=zn),n[Bn(i)]=i,i.def=Yt(e.$options,"directives",i.name,!0);return n}function Bn(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Fn(t,e,r,i,n){var a=t.def&&t.def[e];if(a)try{a(r.elm,t,r,i,n)}catch(To){ee(To,r.context,"directive "+t.name+" "+e+" hook")}}var Nn=[Sn,kn];function Un(t,e){var r=e.componentOptions;if((!n(r)||!1!==r.Ctor.options.inheritAttrs)&&(!i(t.data.attrs)||!i(e.data.attrs))){var a,o,s,l=e.elm,u=t.data.attrs||{},c=e.data.attrs||{};for(a in n(c.__ob__)&&(c=e.data.attrs=I({},c)),c)o=c[a],s=u[a],s!==o&&Vn(l,a,o);for(a in(tt||rt)&&c.value!==u.value&&Vn(l,"value",c.value),u)i(c[a])&&(Wi(a)?l.removeAttributeNS(Hi,qi(a)):Ui(a)||l.removeAttribute(a))}}function Vn(t,e,r){t.tagName.indexOf("-")>-1?jn(t,e,r):Gi(e)?Xi(r)?t.removeAttribute(e):(r="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,r)):Ui(e)?t.setAttribute(e,ji(e,r)):Wi(e)?Xi(r)?t.removeAttributeNS(Hi,qi(e)):t.setAttributeNS(Hi,e,r):jn(t,e,r)}function jn(t,e,r){if(Xi(r))t.removeAttribute(e);else{if(tt&&!et&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==r&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,r)}}var Gn={create:Un,update:Un};function Hn(t,e){var r=e.elm,a=e.data,o=t.data;if(!(i(a.staticClass)&&i(a.class)&&(i(o)||i(o.staticClass)&&i(o.class)))){var s=$i(e),l=r._transitionClasses;n(l)&&(s=Ji(s,Ki(l))),s!==r._prevClass&&(r.setAttribute("class",s),r._prevClass=s)}}var Wn,qn={create:Hn,update:Hn},Xn="__r",$n="__c";function Yn(t){if(n(t[Xn])){var e=tt?"change":"input";t[e]=[].concat(t[Xn],t[e]||[]),delete t[Xn]}n(t[$n])&&(t.change=[].concat(t[$n],t.change||[]),delete t[$n])}function Zn(t,e,r){var i=Wn;return function n(){var a=e.apply(null,arguments);null!==a&&Qn(t,n,r,i)}}var Jn=oe&&!(nt&&Number(nt[1])<=53);function Kn(t,e,r,i){if(Jn){var n=qr,a=e;e=a._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=n||t.timeStamp<=0||t.target.ownerDocument!==document)return a.apply(this,arguments)}}Wn.addEventListener(t,e,ot?{capture:r,passive:i}:r)}function Qn(t,e,r,i){(i||Wn).removeEventListener(t,e._wrapper||e,r)}function ta(t,e){if(!i(t.data.on)||!i(e.data.on)){var r=e.data.on||{},n=t.data.on||{};Wn=e.elm,Yn(r),xe(r,n,Kn,Qn,Zn,e.context),Wn=void 0}}var ea,ra={create:ta,update:ta};function ia(t,e){if(!i(t.data.domProps)||!i(e.data.domProps)){var r,a,o=e.elm,s=t.data.domProps||{},l=e.data.domProps||{};for(r in n(l.__ob__)&&(l=e.data.domProps=I({},l)),s)r in l||(o[r]="");for(r in l){if(a=l[r],"textContent"===r||"innerHTML"===r){if(e.children&&(e.children.length=0),a===s[r])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===r&&"PROGRESS"!==o.tagName){o._value=a;var u=i(a)?"":String(a);na(o,u)&&(o.value=u)}else if("innerHTML"===r&&nn(o.tagName)&&i(o.innerHTML)){ea=ea||document.createElement("div"),ea.innerHTML="<svg>"+a+"</svg>";var c=ea.firstChild;while(o.firstChild)o.removeChild(o.firstChild);while(c.firstChild)o.appendChild(c.firstChild)}else if(a!==s[r])try{o[r]=a}catch(To){}}}}function na(t,e){return!t.composing&&("OPTION"===t.tagName||aa(t,e)||oa(t,e))}function aa(t,e){var r=!0;try{r=document.activeElement!==t}catch(To){}return r&&t.value!==e}function oa(t,e){var r=t.value,i=t._vModifiers;if(n(i)){if(i.number)return m(r)!==m(e);if(i.trim)return r.trim()!==e.trim()}return r!==e}var sa={create:ia,update:ia},la=b((function(t){var e={},r=/;(?![^(]*\))/g,i=/:(.+)/;return t.split(r).forEach((function(t){if(t){var r=t.split(i);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function ua(t){var e=ca(t.style);return t.staticStyle?I(t.staticStyle,e):e}function ca(t){return Array.isArray(t)?k(t):"string"===typeof t?la(t):t}function ha(t,e){var r,i={};if(e){var n=t;while(n.componentInstance)n=n.componentInstance._vnode,n&&n.data&&(r=ua(n.data))&&I(i,r)}(r=ua(t.data))&&I(i,r);var a=t;while(a=a.parent)a.data&&(r=ua(a.data))&&I(i,r);return i}var pa,da=/^--/,fa=/\s*!important$/,ma=function(t,e,r){if(da.test(e))t.style.setProperty(e,r);else if(fa.test(r))t.style.setProperty(M(e),r.replace(fa,""),"important");else{var i=ga(e);if(Array.isArray(r))for(var n=0,a=r.length;n<a;n++)t.style[i]=r[n];else t.style[i]=r}},va=["Webkit","Moz","ms"],ga=b((function(t){if(pa=pa||document.createElement("div").style,t=T(t),"filter"!==t&&t in pa)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<va.length;r++){var i=va[r]+e;if(i in pa)return i}}));function ya(t,e){var r=e.data,a=t.data;if(!(i(r.staticStyle)&&i(r.style)&&i(a.staticStyle)&&i(a.style))){var o,s,l=e.elm,u=a.staticStyle,c=a.normalizedStyle||a.style||{},h=u||c,p=ca(e.data.style)||{};e.data.normalizedStyle=n(p.__ob__)?I({},p):p;var d=ha(e,!0);for(s in h)i(d[s])&&ma(l,s,"");for(s in d)o=d[s],o!==h[s]&&ma(l,s,null==o?"":o)}}var _a={create:ya,update:ya},xa=/\s+/;function ba(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(xa).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var r=" "+(t.getAttribute("class")||"")+" ";r.indexOf(" "+e+" ")<0&&t.setAttribute("class",(r+e).trim())}}function wa(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(xa).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var r=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";while(r.indexOf(i)>=0)r=r.replace(i," ");r=r.trim(),r?t.setAttribute("class",r):t.removeAttribute("class")}}function Ta(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&I(e,Sa(t.name||"v")),I(e,t),e}return"string"===typeof t?Sa(t):void 0}}var Sa=b((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),Ea=Z&&!et,Ma="transition",Aa="animation",Ca="transition",Pa="transitionend",La="animation",Ia="animationend";Ea&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ca="WebkitTransition",Pa="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(La="WebkitAnimation",Ia="webkitAnimationEnd"));var ka=Z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Ra(t){ka((function(){ka(t)}))}function Oa(t,e){var r=t._transitionClasses||(t._transitionClasses=[]);r.indexOf(e)<0&&(r.push(e),ba(t,e))}function za(t,e){t._transitionClasses&&y(t._transitionClasses,e),wa(t,e)}function Da(t,e,r){var i=Fa(t,e),n=i.type,a=i.timeout,o=i.propCount;if(!n)return r();var s=n===Ma?Pa:Ia,l=0,u=function(){t.removeEventListener(s,c),r()},c=function(e){e.target===t&&++l>=o&&u()};setTimeout((function(){l<o&&u()}),a+1),t.addEventListener(s,c)}var Ba=/\b(transform|all)(,|$)/;function Fa(t,e){var r,i=window.getComputedStyle(t),n=(i[Ca+"Delay"]||"").split(", "),a=(i[Ca+"Duration"]||"").split(", "),o=Na(n,a),s=(i[La+"Delay"]||"").split(", "),l=(i[La+"Duration"]||"").split(", "),u=Na(s,l),c=0,h=0;e===Ma?o>0&&(r=Ma,c=o,h=a.length):e===Aa?u>0&&(r=Aa,c=u,h=l.length):(c=Math.max(o,u),r=c>0?o>u?Ma:Aa:null,h=r?r===Ma?a.length:l.length:0);var p=r===Ma&&Ba.test(i[Ca+"Property"]);return{type:r,timeout:c,propCount:h,hasTransform:p}}function Na(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map((function(e,r){return Ua(e)+Ua(t[r])})))}function Ua(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Va(t,e){var r=t.elm;n(r._leaveCb)&&(r._leaveCb.cancelled=!0,r._leaveCb());var a=Ta(t.data.transition);if(!i(a)&&!n(r._enterCb)&&1===r.nodeType){var o=a.css,s=a.type,u=a.enterClass,c=a.enterToClass,h=a.enterActiveClass,p=a.appearClass,d=a.appearToClass,f=a.appearActiveClass,v=a.beforeEnter,g=a.enter,y=a.afterEnter,_=a.enterCancelled,x=a.beforeAppear,b=a.appear,w=a.afterAppear,T=a.appearCancelled,S=a.duration,E=Pr,M=Pr.$vnode;while(M&&M.parent)E=M.context,M=M.parent;var A=!E._isMounted||!t.isRootInsert;if(!A||b||""===b){var C=A&&p?p:u,P=A&&f?f:h,L=A&&d?d:c,I=A&&x||v,k=A&&"function"===typeof b?b:g,R=A&&w||y,O=A&&T||_,z=m(l(S)?S.enter:S);0;var D=!1!==o&&!et,B=Ha(k),N=r._enterCb=F((function(){D&&(za(r,L),za(r,P)),N.cancelled?(D&&za(r,C),O&&O(r)):R&&R(r),r._enterCb=null}));t.data.show||be(t,"insert",(function(){var e=r.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),k&&k(r,N)})),I&&I(r),D&&(Oa(r,C),Oa(r,P),Ra((function(){za(r,C),N.cancelled||(Oa(r,L),B||(Ga(z)?setTimeout(N,z):Da(r,s,N)))}))),t.data.show&&(e&&e(),k&&k(r,N)),D||B||N()}}}function ja(t,e){var r=t.elm;n(r._enterCb)&&(r._enterCb.cancelled=!0,r._enterCb());var a=Ta(t.data.transition);if(i(a)||1!==r.nodeType)return e();if(!n(r._leaveCb)){var o=a.css,s=a.type,u=a.leaveClass,c=a.leaveToClass,h=a.leaveActiveClass,p=a.beforeLeave,d=a.leave,f=a.afterLeave,v=a.leaveCancelled,g=a.delayLeave,y=a.duration,_=!1!==o&&!et,x=Ha(d),b=m(l(y)?y.leave:y);0;var w=r._leaveCb=F((function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[t.key]=null),_&&(za(r,c),za(r,h)),w.cancelled?(_&&za(r,u),v&&v(r)):(e(),f&&f(r)),r._leaveCb=null}));g?g(T):T()}function T(){w.cancelled||(!t.data.show&&r.parentNode&&((r.parentNode._pending||(r.parentNode._pending={}))[t.key]=t),p&&p(r),_&&(Oa(r,u),Oa(r,h),Ra((function(){za(r,u),w.cancelled||(Oa(r,c),x||(Ga(b)?setTimeout(w,b):Da(r,s,w)))}))),d&&d(r,w),_||x||w())}}function Ga(t){return"number"===typeof t&&!isNaN(t)}function Ha(t){if(i(t))return!1;var e=t.fns;return n(e)?Ha(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Wa(t,e){!0!==e.data.show&&Va(e)}var qa=Z?{create:Wa,activate:Wa,remove:function(t,e){!0!==t.data.show?ja(t,e):e()}}:{},Xa=[Gn,qn,ra,sa,_a,qa],$a=Xa.concat(Nn),Ya=In({nodeOps:Tn,modules:$a});et&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&io(t,"input")}));var Za={inserted:function(t,e,r,i){"select"===r.tag?(i.elm&&!i.elm._vOptions?be(r,"postpatch",(function(){Za.componentUpdated(t,e,r)})):Ja(t,e,r.context),t._vOptions=[].map.call(t.options,to)):("textarea"===r.tag||un(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",eo),t.addEventListener("compositionend",ro),t.addEventListener("change",ro),et&&(t.vmodel=!0)))},componentUpdated:function(t,e,r){if("select"===r.tag){Ja(t,e,r.context);var i=t._vOptions,n=t._vOptions=[].map.call(t.options,to);if(n.some((function(t,e){return!D(t,i[e])}))){var a=t.multiple?e.value.some((function(t){return Qa(t,n)})):e.value!==e.oldValue&&Qa(e.value,n);a&&io(t,"change")}}}};function Ja(t,e,r){Ka(t,e,r),(tt||rt)&&setTimeout((function(){Ka(t,e,r)}),0)}function Ka(t,e,r){var i=e.value,n=t.multiple;if(!n||Array.isArray(i)){for(var a,o,s=0,l=t.options.length;s<l;s++)if(o=t.options[s],n)a=B(i,to(o))>-1,o.selected!==a&&(o.selected=a);else if(D(to(o),i))return void(t.selectedIndex!==s&&(t.selectedIndex=s));n||(t.selectedIndex=-1)}}function Qa(t,e){return e.every((function(e){return!D(e,t)}))}function to(t){return"_value"in t?t._value:t.value}function eo(t){t.target.composing=!0}function ro(t){t.target.composing&&(t.target.composing=!1,io(t.target,"input"))}function io(t,e){var r=document.createEvent("HTMLEvents");r.initEvent(e,!0,!0),t.dispatchEvent(r)}function no(t){return!t.componentInstance||t.data&&t.data.transition?t:no(t.componentInstance._vnode)}var ao={bind:function(t,e,r){var i=e.value;r=no(r);var n=r.data&&r.data.transition,a=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&n?(r.data.show=!0,Va(r,(function(){t.style.display=a}))):t.style.display=i?a:"none"},update:function(t,e,r){var i=e.value,n=e.oldValue;if(!i!==!n){r=no(r);var a=r.data&&r.data.transition;a?(r.data.show=!0,i?Va(r,(function(){t.style.display=t.__vOriginalDisplay})):ja(r,(function(){t.style.display="none"}))):t.style.display=i?t.__vOriginalDisplay:"none"}},unbind:function(t,e,r,i,n){n||(t.style.display=t.__vOriginalDisplay)}},oo={model:Za,show:ao},so={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function lo(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?lo(wr(e.children)):t}function uo(t){var e={},r=t.$options;for(var i in r.propsData)e[i]=t[i];var n=r._parentListeners;for(var a in n)e[T(a)]=n[a];return e}function co(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function ho(t){while(t=t.parent)if(t.data.transition)return!0}function po(t,e){return e.key===t.key&&e.tag===t.tag}var fo=function(t){return t.tag||br(t)},mo=function(t){return"show"===t.name},vo={name:"transition",props:so,abstract:!0,render:function(t){var e=this,r=this.$slots.default;if(r&&(r=r.filter(fo),r.length)){0;var i=this.mode;0;var n=r[0];if(ho(this.$vnode))return n;var a=lo(n);if(!a)return n;if(this._leaving)return co(t,n);var o="__transition-"+this._uid+"-";a.key=null==a.key?a.isComment?o+"comment":o+a.tag:s(a.key)?0===String(a.key).indexOf(o)?a.key:o+a.key:a.key;var l=(a.data||(a.data={})).transition=uo(this),u=this._vnode,c=lo(u);if(a.data.directives&&a.data.directives.some(mo)&&(a.data.show=!0),c&&c.data&&!po(a,c)&&!br(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var h=c.data.transition=I({},l);if("out-in"===i)return this._leaving=!0,be(h,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),co(t,n);if("in-out"===i){if(br(a))return u;var p,d=function(){p()};be(l,"afterEnter",d),be(l,"enterCancelled",d),be(h,"delayLeave",(function(t){p=t}))}}return n}}},go=I({tag:String,moveClass:String},so);delete go.mode;var yo={props:go,beforeMount:function(){var t=this,e=this._update;this._update=function(r,i){var n=Lr(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,n(),e.call(t,r,i)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",r=Object.create(null),i=this.prevChildren=this.children,n=this.$slots.default||[],a=this.children=[],o=uo(this),s=0;s<n.length;s++){var l=n[s];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))a.push(l),r[l.key]=l,(l.data||(l.data={})).transition=o;else;}if(i){for(var u=[],c=[],h=0;h<i.length;h++){var p=i[h];p.data.transition=o,p.data.pos=p.elm.getBoundingClientRect(),r[p.key]?u.push(p):c.push(p)}this.kept=t(e,null,u),this.removed=c}return t(e,null,a)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(_o),t.forEach(xo),t.forEach(bo),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var r=t.elm,i=r.style;Oa(r,e),i.transform=i.WebkitTransform=i.transitionDuration="",r.addEventListener(Pa,r._moveCb=function t(i){i&&i.target!==r||i&&!/transform$/.test(i.propertyName)||(r.removeEventListener(Pa,t),r._moveCb=null,za(r,e))})}})))},methods:{hasMove:function(t,e){if(!Ea)return!1;if(this._hasMove)return this._hasMove;var r=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){wa(r,t)})),ba(r,e),r.style.display="none",this.$el.appendChild(r);var i=Fa(r);return this.$el.removeChild(r),this._hasMove=i.hasTransform}}};function _o(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function xo(t){t.data.newPos=t.elm.getBoundingClientRect()}function bo(t){var e=t.data.pos,r=t.data.newPos,i=e.left-r.left,n=e.top-r.top;if(i||n){t.data.moved=!0;var a=t.elm.style;a.transform=a.WebkitTransform="translate("+i+"px,"+n+"px)",a.transitionDuration="0s"}}var wo={Transition:vo,TransitionGroup:yo};wi.config.mustUseProp=Ni,wi.config.isReservedTag=an,wi.config.isReservedAttr=Bi,wi.config.getTagNamespace=on,wi.config.isUnknownElement=ln,I(wi.options.directives,oo),I(wi.options.components,wo),wi.prototype.__patch__=Z?Ya:R,wi.prototype.$mount=function(t,e){return t=t&&Z?cn(t):void 0,Rr(this,t,e)},Z&&setTimeout((function(){j.devtools&&ut&&ut.emit("init",wi)}),0),e["a"]=wi}).call(this,r("c8ba"))},"2b4c":function(t,e,r){var i=r("5537")("wks"),n=r("ca5a"),a=r("7726").Symbol,o="function"==typeof a,s=t.exports=function(t){return i[t]||(i[t]=o&&a[t]||(o?a:n)("Symbol."+t))};s.store=i},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},"2e20":function(t,e,r){"use strict";(function(t,i){r.d(e,"e",(function(){return n})),r.d(e,"g",(function(){return o})),r.d(e,"f",(function(){return a})),r.d(e,"c",(function(){return l})),r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return c})),r.d(e,"d",(function(){return h}));
/*!
 * VERSION: 2.1.3
 * DATE: 2019-05-17
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 *
 * @author: Jack Doyle, jack@greensock.com
 */
var n="undefined"!==typeof window?window:t.exports&&"undefined"!==typeof i?i:{},a=function(t){var e={},r=t.document,i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(i.TweenLite)return i.TweenLite;var n,a,o,s,l,u=function(t){var e,r=t.split("."),n=i;for(e=0;e<r.length;e++)n[r[e]]=n=n[r[e]]||{};return n},c=u("com.greensock"),h=1e-8,p=function(t){var e,r=[],i=t.length;for(e=0;e!==i;r.push(t[e++]));return r},d=function(){},f=function(){var t=Object.prototype.toString,e=t.call([]);return function(r){return null!=r&&(r instanceof Array||"object"===typeof r&&!!r.push&&t.call(r)===e)}}(),m={},v=function(t,r,n,a){this.sc=m[t]?m[t].sc:[],m[t]=this,this.gsClass=null,this.func=n;var o=[];this.check=function(s){var l,c,h,p,d=r.length,f=d;while(--d>-1)(l=m[r[d]]||new v(r[d],[])).gsClass?(o[d]=l.gsClass,f--):s&&l.sc.push(this);if(0===f&&n)for(c=("com.greensock."+t).split("."),h=c.pop(),p=u(c.join("."))[h]=this.gsClass=n.apply(n,o),a&&(i[h]=e[h]=p),d=0;d<this.sc.length;d++)this.sc[d].check()},this.check(!0)},g=t._gsDefine=function(t,e,r,i){return new v(t,e,r,i)},y=c._class=function(t,e,r){return e=e||function(){},g(t,[],(function(){return e}),r),e};g.globals=i;var _=[0,0,1,1],x=y("easing.Ease",(function(t,e,r,i){this._func=t,this._type=r||0,this._power=i||0,this._params=e?_.concat(e):_}),!0),b=x.map={},w=x.register=function(t,e,r,i){var n,a,o,s,l=e.split(","),u=l.length,h=(r||"easeIn,easeOut,easeInOut").split(",");while(--u>-1){a=l[u],n=i?y("easing."+a,null,!0):c.easing[a]||{},o=h.length;while(--o>-1)s=h[o],b[a+"."+s]=b[s+a]=n[s]=t.getRatio?t:t[s]||new t}};o=x.prototype,o._calcEnd=!1,o.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,r=this._power,i=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===r?i*=i:2===r?i*=i*i:3===r?i*=i*i*i:4===r&&(i*=i*i*i*i),1===e?1-i:2===e?i:t<.5?i/2:1-i/2},n=["Linear","Quad","Cubic","Quart","Quint,Strong"],a=n.length;while(--a>-1)o=n[a]+",Power"+a,w(new x(null,null,1,a),o,"easeOut",!0),w(new x(null,null,2,a),o,"easeIn"+(0===a?",easeNone":"")),w(new x(null,null,3,a),o,"easeInOut");b.linear=c.easing.Linear.easeIn,b.swing=c.easing.Quad.easeInOut;var T=y("events.EventDispatcher",(function(t){this._listeners={},this._eventTarget=t||this}));o=T.prototype,o.addEventListener=function(t,e,r,i,n){n=n||0;var a,o,u=this._listeners[t],c=0;this!==s||l||s.wake(),null==u&&(this._listeners[t]=u=[]),o=u.length;while(--o>-1)a=u[o],a.c===e&&a.s===r?u.splice(o,1):0===c&&a.pr<n&&(c=o+1);u.splice(c,0,{c:e,s:r,up:i,pr:n})},o.removeEventListener=function(t,e){var r,i=this._listeners[t];if(i){r=i.length;while(--r>-1)if(i[r].c===e)return void i.splice(r,1)}},o.dispatchEvent=function(t){var e,r,i,n=this._listeners[t];if(n){e=n.length,e>1&&(n=n.slice(0)),r=this._eventTarget;while(--e>-1)i=n[e],i&&(i.up?i.c.call(i.s||r,{type:t,target:r}):i.c.call(i.s||r))}};var S=t.requestAnimationFrame,E=t.cancelAnimationFrame,M=Date.now||function(){return(new Date).getTime()},A=M();n=["ms","moz","webkit","o"],a=n.length;while(--a>-1&&!S)S=t[n[a]+"RequestAnimationFrame"],E=t[n[a]+"CancelAnimationFrame"]||t[n[a]+"CancelRequestAnimationFrame"];y("Ticker",(function(t,e){var i,n,a,o,u,c=this,p=M(),f=!(!1===e||!S)&&"auto",m=500,v=33,g="tick",y=function(t){var e,r,s=M()-A;s>m&&(p+=s-v),A+=s,c.time=(A-p)/1e3,e=c.time-u,(!i||e>0||!0===t)&&(c.frame++,u+=e+(e>=o?.004:o-e),r=!0),!0!==t&&(a=n(y)),r&&c.dispatchEvent(g)};T.call(c),c.time=c.frame=0,c.tick=function(){y(!0)},c.lagSmoothing=function(t,e){if(!arguments.length)return m<1/h;m=t||1/h,v=Math.min(e,m,0)},c.sleep=function(){null!=a&&(f&&E?E(a):clearTimeout(a),n=d,a=null,c===s&&(l=!1))},c.wake=function(t){null!==a?c.sleep():t?p+=-A+(A=M()):c.frame>10&&(A=M()-m+5),n=0===i?d:f&&S?S:function(t){return setTimeout(t,1e3*(u-c.time)+1|0)},c===s&&(l=!0),y(2)},c.fps=function(t){if(!arguments.length)return i;i=t,o=1/(i||60),u=this.time+o,c.wake()},c.useRAF=function(t){if(!arguments.length)return f;c.sleep(),f=t,c.fps(i)},c.fps(t),setTimeout((function(){"auto"===f&&c.frame<5&&"hidden"!==(r||{}).visibilityState&&c.useRAF(!1)}),1500)})),o=c.Ticker.prototype=new c.events.EventDispatcher,o.constructor=c.Ticker;var C=y("core.Animation",(function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!!e.immediateRender,this.data=e.data,this._reversed=!!e.reversed,Y){l||s.wake();var r=this.vars.useFrames?$:Y;r.add(this,r._time),this.vars.paused&&this.paused(!0)}}));s=C.ticker=new c.Ticker,o=C.prototype,o._dirty=o._gc=o._initted=o._paused=!1,o._totalTime=o._time=0,o._rawPrevTime=-1,o._next=o._last=o._onUpdate=o._timeline=o.timeline=null,o._paused=!1;var P=function(){l&&M()-A>2e3&&("hidden"!==(r||{}).visibilityState||!s.lagSmoothing())&&s.wake();var t=setTimeout(P,2e3);t.unref&&t.unref()};P(),o.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},o.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},o.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},o.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},o.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},o.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},o.render=function(t,e,r){},o.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},o.isActive=function(){var t,e=this._timeline,r=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=r&&t<r+this.totalDuration()/this._timeScale-h},o._enabled=function(t,e){return l||s.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},o._kill=function(t,e){return this._enabled(!1,!1)},o.kill=function(t,e){return this._kill(t,e),this},o._uncache=function(t){var e=t?this:this.timeline;while(e)e._dirty=!0,e=e.timeline;return this},o._swapSelfInParams=function(t){var e=t.length,r=t.concat();while(--e>-1)"{self}"===t[e]&&(r[e]=this);return r},o._callback=function(t){var e=this.vars,r=e[t],i=e[t+"Params"],n=e[t+"Scope"]||e.callbackScope||this,a=i?i.length:0;switch(a){case 0:r.call(n);break;case 1:r.call(n,i[0]);break;case 2:r.call(n,i[0],i[1]);break;default:r.apply(n,i)}},o.eventCallback=function(t,e,r,i){if("on"===(t||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[t];null==e?delete n[t]:(n[t]=e,n[t+"Params"]=f(r)&&-1!==r.join("").indexOf("{self}")?this._swapSelfInParams(r):r,n[t+"Scope"]=i),"onUpdate"===t&&(this._onUpdate=e)}return this},o.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},o.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},o.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},o.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},o.totalTime=function(t,e,r){if(l||s.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!r&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,n=this._timeline;if(t>i&&!r&&(t=i),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?i-t:t)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)while(n._timeline)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(O.length&&J(),this.render(t,e,!1),O.length&&J())}return this},o.progress=o.totalProgress=function(t,e){var r=this.duration();return arguments.length?this.totalTime(r*t,e):r?this._time/r:this.ratio},o.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},o.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},o.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,r;t=t||h,this._timeline&&this._timeline.smoothChildTiming&&(e=this._pauseTime,r=e||0===e?e:this._timeline.totalTime(),this._startTime=r-(r-this._startTime)*this._timeScale/t),this._timeScale=t,r=this.timeline;while(r&&r.timeline)r._dirty=!0,r.totalDuration(),r=r.timeline;return this},o.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},o.paused=function(t){if(!arguments.length)return this._paused;var e,r,i=this._timeline;return t!=this._paused&&i&&(l||t||s.wake(),e=i.rawTime(),r=e-this._pauseTime,!t&&i.smoothChildTiming&&(this._startTime+=r,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==r&&this._initted&&this.duration()&&(e=i.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var L=y("core.SimpleTimeline",(function(t){C.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0}));o=L.prototype=new C,o.constructor=L,o.kill()._gc=!1,o._first=o._last=o._recent=null,o._sortChildren=!1,o.add=o.insert=function(t,e,r,i){var n,a;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=this.rawTime()-(t._timeline.rawTime()-t._pauseTime)),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),n=this._last,this._sortChildren){a=t._startTime;while(n&&n._startTime>a)n=n._prev}return n?(t._next=n._next,n._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=n,this._recent=t,this._timeline&&this._uncache(!0),this},o._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},o.render=function(t,e,r){var i,n=this._first;this._totalTime=this._time=this._rawPrevTime=t;while(n)i=n._next,(n._active||t>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,r):n.render((t-n._startTime)*n._timeScale,e,r)),n=i},o.rawTime=function(){return l||s.wake(),this._totalTime};var I=y("TweenLite",(function(e,r,i){if(C.call(this,r,i),this.render=I.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!==typeof e?e:I.selector(e)||e;var n,a,o,s=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?X[I.defaultOverwrite]:"number"===typeof l?l>>0:X[l],(s||e instanceof Array||e.push&&f(e))&&"number"!==typeof e[0])for(this._targets=o=p(e),this._propLookup=[],this._siblings=[],n=0;n<o.length;n++)a=o[n],a?"string"!==typeof a?a.length&&a!==t&&a[0]&&(a[0]===t||a[0].nodeType&&a[0].style&&!a.nodeType)?(o.splice(n--,1),this._targets=o=o.concat(p(a))):(this._siblings[n]=K(a,this,!1),1===l&&this._siblings[n].length>1&&tt(a,this,null,1,this._siblings[n])):(a=o[n--]=I.selector(a),"string"===typeof a&&o.splice(n+1,1)):o.splice(n--,1);else this._propLookup={},this._siblings=K(e,this,!1),1===l&&this._siblings.length>1&&tt(e,this,null,1,this._siblings);(this.vars.immediateRender||0===r&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-h,this.render(Math.min(0,-this._delay)))}),!0),k=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},R=function(t,e){var r,i={};for(r in t)q[r]||r in e&&"transform"!==r&&"x"!==r&&"y"!==r&&"width"!==r&&"height"!==r&&"className"!==r&&"border"!==r||!(!G[r]||G[r]&&G[r]._autoCSS)||(i[r]=t[r],delete t[r]);t.css=i};o=I.prototype=new C,o.constructor=I,o.kill()._gc=!1,o.ratio=0,o._firstPT=o._targets=o._overwrittenProps=o._startAt=null,o._notifyPluginsOfEnabled=o._lazy=!1,I.version="2.1.3",I.defaultEase=o._ease=new x(null,null,1,1),I.defaultOverwrite="auto",I.ticker=s,I.autoSleep=120,I.lagSmoothing=function(t,e){s.lagSmoothing(t,e)},I.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(I.selector=i,i(e)):(r||(r=t.document),r?r.querySelectorAll?r.querySelectorAll(e):r.getElementById("#"===e.charAt(0)?e.substr(1):e):e)};var O=[],z={},D=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,B=/[\+-]=-?[\.\d]/,F=function(t){var e,r=this._firstPT,i=1e-6;while(r)e=r.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:r.c*t+r.s,r.m?e=r.m.call(this._tween,e,this._target||r.t,this._tween):e<i&&e>-i&&!r.blob&&(e=0),r.f?r.fp?r.t[r.p](r.fp,e):r.t[r.p](e):r.t[r.p]=e,r=r._next},N=function(t){return(1e3*t|0)/1e3+""},U=function(t,e,r,i){var n,a,o,s,l,u,c,h=[],p=0,d="",f=0;for(h.start=t,h.end=e,t=h[0]=t+"",e=h[1]=e+"",r&&(r(h),t=h[0],e=h[1]),h.length=0,n=t.match(D)||[],a=e.match(D)||[],i&&(i._next=null,i.blob=1,h._firstPT=h._applyPT=i),l=a.length,s=0;s<l;s++)c=a[s],u=e.substr(p,e.indexOf(c,p)-p),d+=u||!s?u:",",p+=u.length,f?f=(f+1)%5:"rgba("===u.substr(-5)&&(f=1),c===n[s]||n.length<=s?d+=c:(d&&(h.push(d),d=""),o=parseFloat(n[s]),h.push(o),h._firstPT={_next:h._firstPT,t:h,p:h.length-1,s:o,c:("="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*parseFloat(c.substr(2)):parseFloat(c)-o)||0,f:0,m:f&&f<4?Math.round:N}),p+=c.length;return d+=e.substr(p),d&&h.push(d),h.setRatio=F,B.test(e)&&(h.end=null),h},V=function(t,e,r,i,n,a,o,s,l){"function"===typeof i&&(i=i(l||0,t));var u,c=typeof t[e],h="function"!==c?"":e.indexOf("set")||"function"!==typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),p="get"!==r?r:h?o?t[h](o):t[h]():t[e],d="string"===typeof i&&"="===i.charAt(1),f={t:t,p:e,s:p,f:"function"===c,pg:0,n:n||e,m:a?"function"===typeof a?a:Math.round:0,pr:0,c:d?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-p||0};if(("number"!==typeof p||"number"!==typeof i&&!d)&&(o||isNaN(p)||!d&&isNaN(i)||"boolean"===typeof p||"boolean"===typeof i?(f.fp=o,u=U(p,d?parseFloat(f.s)+f.c+(f.s+"").replace(/[0-9\-\.]/g,""):i,s||I.defaultStringFilter,f),f={t:u,p:"setRatio",s:0,c:1,f:2,pg:0,n:n||e,pr:0,m:0}):(f.s=parseFloat(p),d||(f.c=parseFloat(i)-f.s||0))),f.c)return(f._next=this._firstPT)&&(f._next._prev=f),this._firstPT=f,f},j=I._internals={isArray:f,isSelector:k,lazyTweens:O,blobDif:U},G=I._plugins={},H=j.tweenLookup={},W=0,q=j.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},X={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},$=C._rootFramesTimeline=new L,Y=C._rootTimeline=new L,Z=30,J=j.lazyRender=function(){var t,e,r=O.length;for(z={},t=0;t<r;t++)e=O[t],e&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);O.length=0};Y._startTime=s.time,$._startTime=s.frame,Y._active=$._active=!0,setTimeout(J,1),C._updateRoot=I.render=function(){var t,e,r;if(O.length&&J(),Y.render((s.time-Y._startTime)*Y._timeScale,!1,!1),$.render((s.frame-$._startTime)*$._timeScale,!1,!1),O.length&&J(),s.frame>=Z){for(r in Z=s.frame+(parseInt(I.autoSleep,10)||120),H){e=H[r].tweens,t=e.length;while(--t>-1)e[t]._gc&&e.splice(t,1);0===e.length&&delete H[r]}if(r=Y._first,(!r||r._paused)&&I.autoSleep&&!$._first&&1===s._listeners.tick.length){while(r&&r._paused)r=r._next;r||s.sleep()}}},s.addEventListener("tick",C._updateRoot);var K=function(t,e,r){var i,n,a=t._gsTweenID;if(H[a||(t._gsTweenID=a="t"+W++)]||(H[a]={target:t,tweens:[]}),e&&(i=H[a].tweens,i[n=i.length]=e,r))while(--n>-1)i[n]===e&&i.splice(n,1);return H[a].tweens},Q=function(t,e,r,i){var n,a,o=t.vars.onOverwrite;return o&&(n=o(t,e,r,i)),o=I.onOverwrite,o&&(a=o(t,e,r,i)),!1!==n&&!1!==a},tt=function(t,e,r,i,n){var a,o,s,l;if(1===i||i>=4){for(l=n.length,a=0;a<l;a++)if((s=n[a])!==e)s._gc||s._kill(null,t,e)&&(o=!0);else if(5===i)break;return o}var u,c=e._startTime+h,p=[],d=0,f=0===e._duration;a=n.length;while(--a>-1)(s=n[a])===e||s._gc||s._paused||(s._timeline!==e._timeline?(u=u||et(e,0,f),0===et(s,u,f)&&(p[d++]=s)):s._startTime<=c&&s._startTime+s.totalDuration()/s._timeScale>c&&((f||!s._initted)&&c-s._startTime<=2*h||(p[d++]=s)));a=d;while(--a>-1)if(s=p[a],l=s._firstPT,2===i&&s._kill(r,t,e)&&(o=!0),2!==i||!s._firstPT&&s._initted&&l){if(2!==i&&!Q(s,e))continue;s._enabled(!1,!1)&&(o=!0)}return o},et=function(t,e,r){var i=t._timeline,n=i._timeScale,a=t._startTime;while(i._timeline){if(a+=i._startTime,n*=i._timeScale,i._paused)return-100;i=i._timeline}return a/=n,a>e?a-e:r&&a===e||!t._initted&&a-e<2*h?h:(a+=t.totalDuration()/t._timeScale/n)>e+h?0:a-e-h};o._init=function(){var t,e,r,i,n,a,o=this.vars,s=this._overwrittenProps,l=this._duration,u=!!o.immediateRender,c=o.ease,h=this._startAt;if(o.startAt){for(i in h&&(h.render(-1,!0),h.kill()),n={},o.startAt)n[i]=o.startAt[i];if(n.data="isStart",n.overwrite=!1,n.immediateRender=!0,n.lazy=u&&!1!==o.lazy,n.startAt=n.delay=null,n.onUpdate=o.onUpdate,n.onUpdateParams=o.onUpdateParams,n.onUpdateScope=o.onUpdateScope||o.callbackScope||this,this._startAt=I.to(this.target||{},0,n),u)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(o.runBackwards&&0!==l)if(h)h.render(-1,!0),h.kill(),this._startAt=null;else{for(i in 0!==this._time&&(u=!1),r={},o)q[i]&&"autoCSS"!==i||(r[i]=o[i]);if(r.overwrite=0,r.data="isFromStart",r.lazy=u&&!1!==o.lazy,r.immediateRender=u,this._startAt=I.to(this.target,0,r),u){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof x?c:"function"===typeof c?new x(c,o.easeParams):b[c]||I.defaultEase:I.defaultEase,o.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,t=0;t<a;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],s?s[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,s,0);if(e&&I._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!==typeof this.target&&this._enabled(!1,!1)),o.runBackwards){r=this._firstPT;while(r)r.s+=r.c,r.c=-r.c,r=r._next}this._onUpdate=o.onUpdate,this._initted=!0},o._initProps=function(e,r,i,n,a){var o,s,l,u,c,h;if(null==e)return!1;for(o in z[e._gsTweenID]&&J(),this.vars.css||e.style&&e!==t&&e.nodeType&&G.css&&!1!==this.vars.autoCSS&&R(this.vars,e),this.vars)if(h=this.vars[o],q[o])h&&(h instanceof Array||h.push&&f(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[o]=h=this._swapSelfInParams(h,this));else if(G[o]&&(u=new G[o])._onInitTween(e,this.vars[o],this,a)){this._firstPT=c={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:u._priority,m:0},s=u._overwriteProps.length;while(--s>-1)r[u._overwriteProps[s]]=this._firstPT;(u._priority||u._onInitAllProps)&&(l=!0),(u._onDisable||u._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else r[o]=V.call(this,e,o,"get",h,o,0,null,this.vars.stringFilter,a);return n&&this._kill(n,e)?this._initProps(e,r,i,n,a):this._overwrite>1&&this._firstPT&&i.length>1&&tt(e,this,r,this._overwrite,i)?(this._kill(r,e),this._initProps(e,r,i,n,a)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(z[e._gsTweenID]=!0),l)},o.render=function(t,e,r){var i,n,a,o,s=this,l=s._time,u=s._duration,c=s._rawPrevTime;if(t>=u-h&&t>=0)s._totalTime=s._time=u,s.ratio=s._ease._calcEnd?s._ease.getRatio(1):1,s._reversed||(i=!0,n="onComplete",r=r||s._timeline.autoRemoveChildren),0===u&&(s._initted||!s.vars.lazy||r)&&(s._startTime===s._timeline._duration&&(t=0),(c<0||t<=0&&t>=-h||c===h&&"isPause"!==s.data)&&c!==t&&(r=!0,c>h&&(n="onReverseComplete")),s._rawPrevTime=o=!e||t||c===t?t:h);else if(t<h)s._totalTime=s._time=0,s.ratio=s._ease._calcEnd?s._ease.getRatio(0):0,(0!==l||0===u&&c>0)&&(n="onReverseComplete",i=s._reversed),t>-h?t=0:t<0&&(s._active=!1,0===u&&(s._initted||!s.vars.lazy||r)&&(c>=0&&(c!==h||"isPause"!==s.data)&&(r=!0),s._rawPrevTime=o=!e||t||c===t?t:h)),(!s._initted||s._startAt&&s._startAt.progress())&&(r=!0);else if(s._totalTime=s._time=t,s._easeType){var p=t/u,d=s._easeType,f=s._easePower;(1===d||3===d&&p>=.5)&&(p=1-p),3===d&&(p*=2),1===f?p*=p:2===f?p*=p*p:3===f?p*=p*p*p:4===f&&(p*=p*p*p*p),s.ratio=1===d?1-p:2===d?p:t/u<.5?p/2:1-p/2}else s.ratio=s._ease.getRatio(t/u);if(s._time!==l||r){if(!s._initted){if(s._init(),!s._initted||s._gc)return;if(!r&&s._firstPT&&(!1!==s.vars.lazy&&s._duration||s.vars.lazy&&!s._duration))return s._time=s._totalTime=l,s._rawPrevTime=c,O.push(s),void(s._lazy=[t,e]);s._time&&!i?s.ratio=s._ease.getRatio(s._time/u):i&&s._ease._calcEnd&&(s.ratio=s._ease.getRatio(0===s._time?0:1))}!1!==s._lazy&&(s._lazy=!1),s._active||!s._paused&&s._time!==l&&t>=0&&(s._active=!0),0===l&&(s._startAt&&(t>=0?s._startAt.render(t,!0,r):n||(n="_dummyGS")),s.vars.onStart&&(0===s._time&&0!==u||e||s._callback("onStart"))),a=s._firstPT;while(a)a.f?a.t[a.p](a.c*s.ratio+a.s):a.t[a.p]=a.c*s.ratio+a.s,a=a._next;s._onUpdate&&(t<0&&s._startAt&&-1e-4!==t&&s._startAt.render(t,!0,r),e||(s._time!==l||i||r)&&s._callback("onUpdate")),n&&(s._gc&&!r||(t<0&&s._startAt&&!s._onUpdate&&-1e-4!==t&&s._startAt.render(t,!0,r),i&&(s._timeline.autoRemoveChildren&&s._enabled(!1,!1),s._active=!1),!e&&s.vars[n]&&s._callback(n),0===u&&s._rawPrevTime===h&&o!==h&&(s._rawPrevTime=0)))}},o._kill=function(t,e,r){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!==typeof e?e||this._targets||this.target:I.selector(e)||e;var i,n,a,o,s,l,u,c,h,p=r&&this._time&&r._startTime===this._startTime&&this._timeline===r._timeline,d=this._firstPT;if((f(e)||k(e))&&"number"!==typeof e[0]){i=e.length;while(--i>-1)this._kill(t,e[i],r)&&(l=!0)}else{if(this._targets){i=this._targets.length;while(--i>-1)if(e===this._targets[i]){s=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;s=this._propLookup,n=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(s){if(u=t||s,c=t!==n&&"all"!==n&&t!==s&&("object"!==typeof t||!t._tempKill),r&&(I.onOverwrite||this.vars.onOverwrite)){for(a in u)s[a]&&(h||(h=[]),h.push(a));if((h||!t)&&!Q(this,r,e,h))return!1}for(a in u)(o=s[a])&&(p&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,l=!0),o.pg&&o.t._kill(u)&&(l=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete s[a]),c&&(n[a]=1);!this._firstPT&&this._initted&&d&&this._enabled(!1,!1)}}return l},o.invalidate=function(){this._notifyPluginsOfEnabled&&I._onPluginEvent("_onDisable",this);var t=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],C.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-h,this.render(t,!1,!1!==this.vars.lazy)),this},o._enabled=function(t,e){if(l||s.wake(),t&&this._gc){var r,i=this._targets;if(i){r=i.length;while(--r>-1)this._siblings[r]=K(i[r],this,!0)}else this._siblings=K(this.target,this,!0)}return C.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&I._onPluginEvent(t?"_onEnable":"_onDisable",this)},I.to=function(t,e,r){return new I(t,e,r)},I.from=function(t,e,r){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,new I(t,e,r)},I.fromTo=function(t,e,r,i){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,new I(t,e,i)},I.delayedCall=function(t,e,r,i,n){return new I(e,0,{delay:t,onComplete:e,onCompleteParams:r,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:r,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},I.set=function(t,e){return new I(t,0,e)},I.getTweensOf=function(t,e){if(null==t)return[];var r,i,n,a;if(t="string"!==typeof t?t:I.selector(t)||t,(f(t)||k(t))&&"number"!==typeof t[0]){r=t.length,i=[];while(--r>-1)i=i.concat(I.getTweensOf(t[r],e));r=i.length;while(--r>-1){a=i[r],n=r;while(--n>-1)a===i[n]&&i.splice(r,1)}}else if(t._gsTweenID){i=K(t).concat(),r=i.length;while(--r>-1)(i[r]._gc||e&&!i[r].isActive())&&i.splice(r,1)}return i||[]},I.killTweensOf=I.killDelayedCallsTo=function(t,e,r){"object"===typeof e&&(r=e,e=!1);var i=I.getTweensOf(t,e),n=i.length;while(--n>-1)i[n]._kill(r,t)};var rt=y("plugins.TweenPlugin",(function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=rt.prototype}),!0);if(o=rt.prototype,rt.version="1.19.0",rt.API=2,o._firstPT=null,o._addTween=V,o.setRatio=F,o._kill=function(t){var e,r=this._overwriteProps,i=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else{e=r.length;while(--e>-1)null!=t[r[e]]&&r.splice(e,1)}while(i)null!=t[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},o._mod=o._roundProps=function(t){var e,r=this._firstPT;while(r)e=t[this._propName]||null!=r.n&&t[r.n.split(this._propName+"_").join("")],e&&"function"===typeof e&&(2===r.f?r.t._applyPT.m=e:r.m=e),r=r._next},I._onPluginEvent=function(t,e){var r,i,n,a,o,s=e._firstPT;if("_onInitAllProps"===t){while(s){o=s._next,i=n;while(i&&i.pr>s.pr)i=i._next;(s._prev=i?i._prev:a)?s._prev._next=s:n=s,(s._next=i)?i._prev=s:a=s,s=o}s=e._firstPT=n}while(s)s.pg&&"function"===typeof s.t[t]&&s.t[t]()&&(r=!0),s=s._next;return r},rt.activate=function(t){var e=t.length;while(--e>-1)t[e].API===rt.API&&(G[(new t[e])._propName]=t[e]);return!0},g.plugin=function(t){if(!t||!t.propName||!t.init||!t.API)throw"illegal plugin definition.";var e,r=t.propName,i=t.priority||0,n=t.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},o=y("plugins."+r.charAt(0).toUpperCase()+r.substr(1)+"Plugin",(function(){rt.call(this,r,i),this._overwriteProps=n||[]}),!0===t.global),s=o.prototype=new rt(r);for(e in s.constructor=o,o.API=t.API,a)"function"===typeof t[e]&&(s[a[e]]=t[e]);return o.version=t.version,rt.activate([o]),o},n=t._gsQueue,n){for(a=0;a<n.length;a++)n[a]();for(o in m)m[o].func||t.console.log("GSAP encountered missing dependency: "+o)}return l=!1,I}(n),o=n.GreenSockGlobals,s=o.com.greensock,l=s.core.SimpleTimeline,u=s.core.Animation,c=o.Ease,h=(o.Linear,o.Power1,o.Power2,o.Power3,o.Power4,o.TweenPlugin);s.events.EventDispatcher}).call(this,r("dd40")(t),r("c8ba"))},"2ea2":function(t,e,r){"use strict";t.exports=function(){return{hasWheelEvent:"onwheel"in document,hasMouseWheelEvent:"onmousewheel"in document,hasTouch:"ontouchstart"in document,hasTouchWin:navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,hasPointer:!!window.navigator.msPointerEnabled,hasKeyDown:"onkeydown"in document,isFirefox:navigator.userAgent.indexOf("Firefox")>-1}}()},"2fdb":function(t,e,r){"use strict";var i=r("5ca1"),n=r("d2c8"),a="includes";i(i.P+i.F*r("5147")(a),"String",{includes:function(t){return!!~n(this,t,a).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},3022:function(t,e,r){(function(t){var i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},i=0;i<e.length;i++)r[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return r},n=/%[sdj%]/g;e.format=function(t){if(!w(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var i=arguments,a=i.length,o=String(t).replace(n,(function(t){if("%%"===t)return"%";if(r>=a)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return t}})),l=i[r];r<a;l=i[++r])_(l)||!M(l)?o+=" "+l:o+=" "+s(l);return o},e.deprecate=function(r,i){if("undefined"!==typeof t&&!0===t.noDeprecation)return r;if("undefined"===typeof t)return function(){return e.deprecate(r,i).apply(this,arguments)};var n=!1;function a(){if(!n){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),n=!0}return r.apply(this,arguments)}return a};var a,o={};function s(t,r){var i={seen:[],stylize:u};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),y(r)?i.showHidden=r:r&&e._extend(i,r),S(i.showHidden)&&(i.showHidden=!1),S(i.depth)&&(i.depth=2),S(i.colors)&&(i.colors=!1),S(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=l),h(i,t,i.depth)}function l(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function u(t,e){return t}function c(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}function h(t,r,i){if(t.customInspect&&r&&P(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(i,t);return w(n)||(n=h(t,n,i)),n}var a=p(t,r);if(a)return a;var o=Object.keys(r),s=c(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(r)),C(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return d(r);if(0===o.length){if(P(r)){var l=r.name?": "+r.name:"";return t.stylize("[Function"+l+"]","special")}if(E(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(A(r))return t.stylize(Date.prototype.toString.call(r),"date");if(C(r))return d(r)}var u,y="",_=!1,x=["{","}"];if(g(r)&&(_=!0,x=["[","]"]),P(r)){var b=r.name?": "+r.name:"";y=" [Function"+b+"]"}return E(r)&&(y=" "+RegExp.prototype.toString.call(r)),A(r)&&(y=" "+Date.prototype.toUTCString.call(r)),C(r)&&(y=" "+d(r)),0!==o.length||_&&0!=r.length?i<0?E(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),u=_?f(t,r,i,s,o):o.map((function(e){return m(t,r,i,s,e,_)})),t.seen.pop(),v(u,y,x)):x[0]+y+x[1]}function p(t,e){if(S(e))return t.stylize("undefined","undefined");if(w(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return b(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):_(e)?t.stylize("null","null"):void 0}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,i,n){for(var a=[],o=0,s=e.length;o<s;++o)z(e,String(o))?a.push(m(t,e,r,i,String(o),!0)):a.push("");return n.forEach((function(n){n.match(/^\d+$/)||a.push(m(t,e,r,i,n,!0))})),a}function m(t,e,r,i,n,a){var o,s,l;if(l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),z(i,n)||(o="["+n+"]"),s||(t.seen.indexOf(l.value)<0?(s=_(r)?h(t,l.value,null):h(t,l.value,r-1),s.indexOf("\n")>-1&&(s=a?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n"))):s=t.stylize("[Circular]","special")),S(o)){if(a&&n.match(/^\d+$/))return s;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+s}function v(t,e,r){var i=t.reduce((function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function g(t){return Array.isArray(t)}function y(t){return"boolean"===typeof t}function _(t){return null===t}function x(t){return null==t}function b(t){return"number"===typeof t}function w(t){return"string"===typeof t}function T(t){return"symbol"===typeof t}function S(t){return void 0===t}function E(t){return M(t)&&"[object RegExp]"===I(t)}function M(t){return"object"===typeof t&&null!==t}function A(t){return M(t)&&"[object Date]"===I(t)}function C(t){return M(t)&&("[object Error]"===I(t)||t instanceof Error)}function P(t){return"function"===typeof t}function L(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t}function I(t){return Object.prototype.toString.call(t)}function k(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(S(a)&&(a=Object({NODE_ENV:"production",BASE_URL:"/"}).NODE_DEBUG||""),r=r.toUpperCase(),!o[r])if(new RegExp("\\b"+r+"\\b","i").test(a)){var i=t.pid;o[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,i,t)}}else o[r]=function(){};return o[r]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=g,e.isBoolean=y,e.isNull=_,e.isNullOrUndefined=x,e.isNumber=b,e.isString=w,e.isSymbol=T,e.isUndefined=S,e.isRegExp=E,e.isObject=M,e.isDate=A,e.isError=C,e.isFunction=P,e.isPrimitive=L,e.isBuffer=r("d60a");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var t=new Date,e=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),R[t.getMonth()],e].join(" ")}function z(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",O(),e.format.apply(e,arguments))},e.inherits=r("28a0"),e._extend=function(t,e){if(!e||!M(e))return t;var r=Object.keys(e),i=r.length;while(i--)t[r[i]]=e[r[i]];return t};var D="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function B(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function F(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if("function"!==typeof n)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return n.apply(a,arguments)};e.apply(this,r).then((function(e){t.nextTick(o,null,e)}),(function(e){t.nextTick(B,e,o)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,i(e)),r}e.promisify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');if(D&&t[D]){var e=t[D];if("function"!==typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,D,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,i=new Promise((function(t,i){e=t,r=i})),n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);n.push((function(t,i){t?r(t):e(i)}));try{t.apply(this,n)}catch(o){r(o)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),D&&Object.defineProperty(e,D,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},e.promisify.custom=D,e.callbackify=F}).call(this,r("f28c"))},"30f1":function(t,e,r){"use strict";var i=r("b8e3"),n=r("63b6"),a=r("9138"),o=r("35e8"),s=r("481b"),l=r("8f60"),u=r("45f2"),c=r("53e2"),h=r("5168")("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",f="keys",m="values",v=function(){return this};t.exports=function(t,e,r,g,y,_,x){l(r,e,g);var b,w,T,S=function(t){if(!p&&t in C)return C[t];switch(t){case f:return function(){return new r(this,t)};case m:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=e+" Iterator",M=y==m,A=!1,C=t.prototype,P=C[h]||C[d]||y&&C[y],L=P||S(y),I=y?M?S("entries"):L:void 0,k="Array"==e&&C.entries||P;if(k&&(T=c(k.call(new t)),T!==Object.prototype&&T.next&&(u(T,E,!0),i||"function"==typeof T[h]||o(T,h,v))),M&&P&&P.name!==m&&(A=!0,L=function(){return P.call(this)}),i&&!x||!p&&!A&&C[h]||o(C,h,L),s[e]=L,s[E]=v,y)if(b={values:M?L:S(m),keys:_?L:S(f),entries:I},x)for(w in b)w in C||a(C,w,b[w]);else n(n.P+n.F*(p||A),e,b);return b}},"31f4":function(t,e){t.exports=function(t,e,r){var i=void 0===r;switch(e.length){case 0:return i?t():t.call(r);case 1:return i?t(e[0]):t.call(r,e[0]);case 2:return i?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},"320c":function(t,e,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function s(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==i.join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(a){return!1}}t.exports=s()?Object.assign:function(t,e){for(var r,s,l=o(t),u=1;u<arguments.length;u++){for(var c in r=Object(arguments[u]),r)n.call(r,c)&&(l[c]=r[c]);if(i){s=i(r);for(var h=0;h<s.length;h++)a.call(r,s[h])&&(l[s[h]]=r[s[h]])}}return l}},"32e9":function(t,e,r){var i=r("86cc"),n=r("4630");t.exports=r("9e1e")?function(t,e,r){return i.f(t,e,n(1,r))}:function(t,e,r){return t[e]=r,t}},"32fc":function(t,e,r){var i=r("e53d").document;t.exports=i&&i.documentElement},"335c":function(t,e,r){var i=r("6b4c");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},"33a4":function(t,e,r){var i=r("84f2"),n=r("2b4c")("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[n]===t)}},"35e8":function(t,e,r){var i=r("d9f6"),n=r("aebd");t.exports=r("8e60")?function(t,e,r){return i.f(t,e,n(1,r))}:function(t,e,r){return t[e]=r,t}},"36c3":function(t,e,r){var i=r("335c"),n=r("25eb");t.exports=function(t){return i(n(t))}},3702:function(t,e,r){var i=r("481b"),n=r("5168")("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[n]===t)}},3846:function(t,e,r){r("9e1e")&&"g"!=/./g.flags&&r("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:r("0bfb")})},"386b":function(t,e,r){var i=r("5ca1"),n=r("79e5"),a=r("be13"),o=/"/g,s=function(t,e,r,i){var n=String(a(t)),s="<"+e;return""!==r&&(s+=" "+r+'="'+String(i).replace(o,"&quot;")+'"'),s+">"+n+"</"+e+">"};t.exports=function(t,e){var r={};r[t]=e(s),i(i.P+i.F*n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",r)}},"38fd":function(t,e,r){var i=r("69a8"),n=r("4bf8"),a=r("613b")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),i(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},"3a38":function(t,e){var r=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:r)(t)}},"3c35":function(t,e){(function(e){t.exports=e}).call(this,{})},"3f3d":function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mgl-map-wrapper"},[t._m(0),t.initialized?t._t("default"):t._e()],2)},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"container",attrs:{id:t.container}})}],a=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),o={methods:{$_emitEvent(t,e={}){this.$emit(t,{map:this.map,component:this,...e})},$_emitMapEvent(t,e={}){this.$_emitEvent(t.type,{mapboxEvent:t,...e})}}},s={resize:{name:"resize"},webglcontextlost:{name:"webglcontextlost"},webglcontextrestored:{name:"webglcontextrestored"},remove:{name:"remove"},movestart:{name:"movestart"},load:{name:"load"},contextmenu:{name:"contextmenu"},dblclick:{name:"dblclick"},click:{name:"click"},touchcancel:{name:"touchcancel"},touchmove:{name:"touchmove"},touchend:{name:"touchend"},touchstart:{name:"touchstart"},dataloading:{name:"dataloading"},mousemove:{name:"mousemove"},mouseup:{name:"mouseup"},mousedown:{name:"mousedown"},sourcedataloading:{name:"sourcedataloading"},error:{name:"error"},data:{name:"data"},styledata:{name:"styledata"},sourcedata:{name:"sourcedata"},mouseout:{name:"mouseout"},styledataloading:{name:"styledataloading"},moveend:{name:"moveend"},move:{name:"move"},render:{name:"render"},zoom:{name:"zoom"},zoomstart:{name:"zoomstart"},zoomend:{name:"zoomend"},boxzoomstart:{name:"boxzoomstart"},boxzoomcancel:{name:"boxzoomcancel"},boxzoomend:{name:"boxzoomend"},rotate:{name:"rotate"},rotatestart:{name:"rotatestart"},rotateend:{name:"rotateend"},dragend:{name:"dragend"},drag:{name:"drag"},dragstart:{name:"dragstart"},pitch:{name:"pitch"},idle:{name:"idle"}},l={container:{type:[String,HTMLElement],default(){return`map-${(""+Math.random()).split(".")[1]}`}},accessToken:{type:String,default:void 0},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:22},mapStyle:{type:[String,Object],required:!0},hash:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0},bearingSnap:{type:Number,default:7},pitchWithRotate:{type:Boolean,default:!0},clickTolerance:{type:Number,default:3},attributionControl:{type:Boolean,default:!0},customAttribution:{type:[String,Array],default:null},logoPosition:{type:String,default:"bottom-left",validator:t=>["top-left","top-right","bottom-left","bottom-right"].includes(t)},failIfMajorPerformanceCaveat:{type:Boolean,default:!1},preserveDrawingBuffer:{type:Boolean,default:!1},refreshExpiredTiles:{type:Boolean,default:!0},maxBounds:{type:Array,default(){}},scrollZoom:{type:[Boolean,Object],default(){return!0}},boxZoom:{type:Boolean,default:!0},dragRotate:{type:Boolean,default:!0},dragPan:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},doubleClickZoom:{type:Boolean,default:!0},touchZoomRotate:{type:[Boolean,Object],default(){return!0}},trackResize:{type:Boolean,default:!0},center:{type:[Object,Array],default:void 0},zoom:{type:Number,default:0},bearing:{type:Number,default:0},pitch:{type:Number,default:0},initialBounds:{type:[Object,Array],default:void 0},renderWorldCopies:{type:Boolean,default:!0},RTLTextPluginUrl:{type:String,default:void 0},light:{type:Object,default:void 0},tileBoundaries:{type:Boolean,default:!1},collisionBoxes:{type:Boolean,default:!1},repaint:{type:Boolean,default:!1},transformRequest:{type:Function,default:null},maxTileCacheSize:{type:Number,default:null},localIdeographFontFamily:{type:String,default:null},collectResourceTiming:{type:Boolean,default:!1},fadeDuration:{type:Number,default:300},crossSourceCollisions:{type:Boolean,default:!0}};const u={maxBounds(t){this.map.setMaxBounds(t)},minZoom(t){this.map.setMinZoom(t)},maxZoom(t){this.map.setMaxZoom(t)},mapStyle(t){this.map.setStyle(t)},collisionBoxes(t){this.map.showCollisionBoxes=t},tileBoundaries(t){this.map.showTileBoundaries=t},repaint(t){this.map.repaint=t},zoom(t){this.map.setZoom(t)},center(t){this.map.setCenter(t)},bearing(t){this.map.setBearing(t)},pitch(t){this.map.setPitch(t)},light(t){this.map.setLigh(t)}};function c(t,e,r,i){this.initial||(this.$listeners[`update:${t}`]?(this.propsIsUpdating[t]?(this._watcher.active=!1,this.$nextTick(()=>{this._watcher.active=!0})):(this._watcher.active=!0,e(r,i)),this.propsIsUpdating[t]=!1):e(r,i))}function h(){const t={};return Object.entries(u).forEach(e=>{t[e[0]]=function(t,r){return c.call(this,e[0],e[1].bind(this),t,r)}}),t}var p={watch:h()},d={methods:{$_updateSyncedPropsFabric(t,e){return()=>{this.propsIsUpdating[t]=!0;let r="function"===typeof e?e():e;return this.$emit(`update:${t}`,r)}},$_bindPropsUpdateEvents(){const t=[{events:["moveend"],prop:"center",getter:this.map.getCenter.bind(this.map)},{events:["zoomend"],prop:"zoom",getter:this.map.getZoom.bind(this.map)},{events:["rotate"],prop:"bearing",getter:this.map.getBearing.bind(this.map)},{events:["pitch"],prop:"pitch",getter:this.map.getPitch.bind(this.map)}];t.forEach(({events:t,prop:e,getter:r})=>{t.forEach(t=>{this.$listeners[`update:${e}`]&&this.map.on(t,this.$_updateSyncedPropsFabric(e,r))})})},$_loadMap(){return this.mapboxPromise.then(t=>{return this.mapbox=t.default?t.default:t,new Promise(t=>{this.accessToken&&(this.mapbox.accessToken=this.accessToken);const e=new this.mapbox.Map({...this._props,container:this.$refs.container,style:this.mapStyle});e.on("load",()=>t(e))})})},$_RTLTextPluginError(t){this.$emit("rtl-plugin-error",{map:this.map,error:t})},$_bindMapEvents(t){Object.keys(this.$listeners).forEach(e=>{t.includes(e)&&this.map.on(e,this.$_emitMapEvent)})},$_unbindEvents(t){t.forEach(t=>{this.map.off(t,this.$_emitMapEvent)})}}},f=r("7f84"),m=r.n(f),v={created(){this.actions={}},methods:{$_registerAsyncActions(t){this.actions={...m()(t),stop(){this.map.stop();const t={pitch:this.map.getPitch(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),center:this.map.getCenter()};return Object.entries(t).forEach(t=>{this.$_updateSyncedPropsFabric(t[0],t[1])()}),Promise.resolve(t)}}}}};function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var _={name:"GlMap",mixins:[p,v,d,o],props:y({mapboxGl:{type:Object,default:null}},l),provide:function(){var t=this;return{get mapbox(){return t.mapbox},get map(){return t.map},get actions(){return t.actions}}},data:function(){return{initial:!0,initialized:!1}},computed:{loaded:function(){return!!this.map&&this.map.loaded()},version:function(){return this.map?this.map.version:null},bounds:function(){return this.map?this.map.getBounds():null},isStyleLoaded:function(){return!!this.map&&this.map.isStyleLoaded()},areTilesLoaded:function(){return!!this.map&&this.map.areTilesLoaded()},isMoving:function(){return!!this.map&&this.map.isMoving()},canvas:function(){return this.map?this.map.getCanvas():null},canvasContainer:function(){return this.map?this.map.getCanvasContainer():null},images:function(){return this.map?this.map.listImages():null}},created:function(){this.map=null,this.propsIsUpdating={},this.mapboxPromise=this.mapboxGl?Promise.resolve(this.mapboxGl):Promise.resolve().then(r.t.bind(null,"e192",7))},mounted:function(){var t=this;this.$_loadMap().then((function(e){t.map=e,void 0!==t.RTLTextPluginUrl&&t.mapbox.setRTLTextPlugin(t.RTLTextPluginUrl,t.$_RTLTextPluginError);var r=Object.keys(s);t.$_bindMapEvents(r),t.$_registerAsyncActions(e),t.$_bindPropsUpdateEvents(),t.initial=!1,t.initialized=!0,t.$emit("load",{map:e,component:t})}))},beforeDestroy:function(){var t=this;this.$nextTick((function(){t.map&&t.map.remove()}))}},x=_,b=(r("8460"),r("2877")),w=Object(b["a"])(x,i,n,!1,null,null,null),T=w.exports,S={methods:{$_emitSelfEvent(t,e={}){this.$_emitMapEvent(t,{control:this.control,...e})},$_bindSelfEvents(t,e){Object.keys(this.$listeners).forEach(r=>{t.includes(r)&&e.on(r,this.$_emitSelfEvent)})},$_unbindSelfEvents(t,e){0!==t.length&&e&&t.forEach(t=>{e.off(t,this.$_emitSelfEvent)})}}},E={mixins:[o,S],inject:["mapbox","map","actions"],props:{position:{type:String,default:"top-right"}},beforeDestroy(){this.map&&this.control&&this.map.removeControl(this.control)},methods:{$_addControl(){try{this.map.addControl(this.control,this.position)}catch(t){return void this.$_emitEvent("error",{error:t})}this.$_emitEvent("added",{control:this.control})}},render(){}};Boolean,Boolean;const M={trackuserlocationstart:"trackuserlocationstart",trackuserlocationend:"trackuserlocationend",geolocate:"geolocate",error:"error"};Object,Object,Boolean,Boolean,HTMLElement,Boolean,String,Array,Number,String;var A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{display:"none"}},[t._t("marker"),t.marker?t._t("default"):t._e()],2)},C=[];r("8615"),r("6762"),r("2fdb");function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var I={drag:"drag",dragstart:"dragstart",dragend:"dragend"},k={click:"click",mouseenter:"mouseenter",mouseleave:"mouseleave"},R={name:"MapMarker",mixins:[o,S],inject:["mapbox","map"],provide:function(){var t=this;return{get marker(){return t.marker}}},props:{offset:{type:[Object,Array],default:function(){return[0,0]}},coordinates:{type:Array,required:!0},color:{type:String},anchor:{type:String,default:"center"},draggable:{type:Boolean,default:!1}},data:function(){return{initial:!0,marker:void 0}},watch:{coordinates:function(t){this.initial||this.marker.setLngLat(t)},draggable:function(t){this.initial||this.marker.setDraggable(t)}},mounted:function(){var t=this,e=L({},this.$props);this.$slots.marker&&(e.element=this.$slots.marker[0].elm),this.marker=new this.mapbox.Marker(e),this.$listeners["update:coordinates"]&&this.marker.on("dragend",(function(e){var r;r=t.coordinates instanceof Array?[e.target._lngLat.lng,e.target._lngLat.lat]:e.target._lngLat,t.$emit("update:coordinates",r)}));var r=Object.keys(I);this.$_bindSelfEvents(r,this.marker),this.initial=!1,this.$_addMarker()},beforeDestroy:function(){void 0!==this.map&&void 0!==this.marker&&this.marker.remove()},methods:{$_addMarker:function(){this.marker.setLngLat(this.coordinates).addTo(this.map),this.$_bindMarkerDOMEvents(),this.$_emitEvent("added",{marker:this.marker})},$_emitSelfEvent:function(t){this.$_emitMapEvent(t,{marker:this.marker})},$_bindMarkerDOMEvents:function(){var t=this;Object.keys(this.$listeners).forEach((function(e){Object.values(k).includes(e)&&t.marker._element.addEventListener(e,(function(e){t.$_emitSelfEvent(e)}))}))},remove:function(){this.marker.remove(),this.$_emitEvent("removed")},togglePopup:function(){return this.marker.togglePopup()}}},O=R,z=Object(b["a"])(O,A,C,!1,null,null,null),D=z.exports,B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{display:"none"}},[t._t("default")],2)},F=[],N=(r("c5f6"),{open:"open",close:"close"}),U={name:"Popup",mixins:[o,S],inject:{mapbox:{default:null},map:{default:null},marker:{default:null}},props:{closeButton:{type:Boolean,default:!0},closeOnClick:{type:Boolean,default:!0},anchor:{validator:function(t){var e=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"];return"string"===typeof t&&e.includes(t)},default:void 0},offset:{type:[Number,Object,Array],default:function(){return[0,0]}},coordinates:{type:Array},onlyText:{type:Boolean,default:!1},showed:{type:Boolean,default:!1}},data:function(){return{initial:!0,popup:void 0}},computed:{open:{get:function(){return void 0!==this.popup&&this.popup.isOpen()},set:function(t){this.map&&this.popup&&(t?this.popup.remove():this.popup.addTo(this.map))}}},watch:{coordinates:function(t){this.initial||this.popup.setLngLat(t)},showed:function(t,e){t!==e&&(this.open=t,this.marker&&this.marker.togglePopup())}},created:function(){this.popup=new this.mapbox.Popup(this.$props)},mounted:function(){this.$_addPopup(),this.initial=!1},beforeDestroy:function(){this.map&&(this.popup.remove(),this.$_emitEvent("removed"))},methods:{$_addPopup:function(){if(this.popup=new this.mapbox.Popup(this.$props),void 0!==this.coordinates&&this.popup.setLngLat(this.coordinates),void 0!==this.$slots.default)if(this.onlyText)if(3===this.$slots.default[0].elm.nodeType){var t=document.createElement("span");t.appendChild(this.$slots.default[0].elm),this.popup.setText(t.innerText)}else this.popup.setText(this.$slots.default[0].elm.innerText);else this.popup.setDOMContent(this.$slots.default[0].elm);this.$_bindSelfEvents(Object.keys(N),this.popup),this.$_emitEvent("added",{popup:this.popup}),this.marker&&this.marker.setPopup(this.popup),this.showed&&(this.open=!0,this.marker&&this.marker.togglePopup())},$_emitSelfEvent:function(t){this.$_emitMapEvent(t,{popup:this.popup})},remove:function(){this.popup.remove(),this.$_emitEvent("remove",{popup:this.popup})}}},V=U,j=Object(b["a"])(V,B,F,!1,null,null,null),G=j.exports,H=["mousedown","mouseup","click","dblclick","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","touchstart","touchend","touchcancel"];const W={sourceId:{type:String,required:!0},source:{type:[Object,String],default:void 0}},q={layerId:{type:String,required:!0},layer:{type:Object,required:!0},before:{type:String,default:void 0}},X={clearSource:{type:Boolean,default:!0},replaceSource:{type:Boolean,default:!1},replace:{type:Boolean,default:!1}};var $={mixins:[o],props:{...W,...q,...X},inject:["mapbox","map"],data(){return{initial:!0}},computed:{sourceLoaded(){return!!this.map&&this.map.isSourceLoaded(this.sourceId)},mapLayer(){return this.map?this.map.getLayer(this.layerId):null},mapSource(){return this.map?this.map.getSource(this.sourceId):null}},created(){this.layer.minzoom&&this.$watch("layer.minzoom",(function(t){this.initial||this.map.setLayerZoomRange(this.layerId,t,this.layer.maxzoom)})),this.layer.maxzoom&&this.$watch("layer.maxzoom",(function(t){this.initial||this.map.setLayerZoomRange(this.layerId,this.layer.minzoom,t)})),this.layer.paint&&this.$watch("layer.paint",(function(t){if(!this.initial&&t)for(let e of Object.keys(t))this.map.setPaintProperty(this.layerId,e,t[e])}),{deep:!0}),this.layer.layout&&this.$watch("layer.layout",(function(t){if(!this.initial&&t)for(let e of Object.keys(t))this.map.setLayoutProperty(this.layerId,e,t[e])}),{deep:!0}),this.layer.filter&&this.$watch("layer.filter",(function(t){this.initial||this.map.setFilter(this.layerId,t)}),{deep:!0})},beforeDestroy(){if(this.map&&this.map.loaded()){try{this.map.removeLayer(this.layerId)}catch(t){this.$_emitEvent("layer-does-not-exist",{layerId:this.sourceId,error:t})}if(this.clearSource)try{this.map.removeSource(this.sourceId)}catch(t){this.$_emitEvent("source-does-not-exist",{sourceId:this.sourceId,error:t})}}},methods:{$_emitLayerMapEvent(t){return this.$_emitMapEvent(t,{layerId:this.layerId})},$_bindLayerEvents(t){Object.keys(this.$listeners).forEach(e=>{t.includes(e)&&this.map.on(e,this.layerId,this.$_emitLayerMapEvent)})},$_unbindEvents(t){this.map&&t.forEach(t=>{this.map.off(t,this.layerId,this.$_emitLayerMapEvent)})},$_watchSourceLoading(t){"source"===t.dataType&&t.sourceId===this.sourceId&&(this.$_emitEvent("layer-source-loading",{sourceId:this.sourceId}),this.map.off("dataloading",this.$_watchSourceLoading))},move(t){this.map.moveLayer(this.layerId,t),this.$_emitEvent("layer-moved",{layerId:this.layerId,beforeId:t})},remove(){this.map.removeLayer(this.layerId),this.map.removeSource(this.sourceId),this.$_emitEvent("layer-removed",{layerId:this.layerId}),this.$destroy()}},render(){}};Object,Object;r.d(e,"a",(function(){return Y})),r.d(e,"b",(function(){return Z})),r.d(e,"c",(function(){return J}));const Y=T,Z=D,J=G},"40c3":function(t,e,r){var i=r("6b4c"),n=r("5168")("toStringTag"),a="Arguments"==i(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(r){}};t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=o(e=Object(t),n))?r:a?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},"41a0":function(t,e,r){"use strict";var i=r("2aeb"),n=r("4630"),a=r("7f20"),o={};r("32e9")(o,r("2b4c")("iterator"),(function(){return this})),t.exports=function(t,e,r){t.prototype=i(o,{next:n(1,r)}),a(t,e+" Iterator")}},"454f":function(t,e,r){r("46a7");var i=r("584a").Object;t.exports=function(t,e,r){return i.defineProperty(t,e,r)}},"456d":function(t,e,r){var i=r("4bf8"),n=r("0d58");r("5eda")("keys",(function(){return function(t){return n(i(t))}}))},4588:function(t,e){var r=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:r)(t)}},"45f2":function(t,e,r){var i=r("d9f6").f,n=r("07e3"),a=r("5168")("toStringTag");t.exports=function(t,e,r){t&&!n(t=r?t:t.prototype,a)&&i(t,a,{configurable:!0,value:e})}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"46a7":function(t,e,r){var i=r("63b6");i(i.S+i.F*!r("8e60"),"Object",{defineProperty:r("d9f6").f})},"481b":function(t,e){t.exports={}},4917:function(t,e,r){"use strict";var i=r("cb7c"),n=r("9def"),a=r("0390"),o=r("5f1b");r("214f")("match",1,(function(t,e,r,s){return[function(r){var i=t(this),n=void 0==r?void 0:r[e];return void 0!==n?n.call(r,i):new RegExp(r)[e](String(i))},function(t){var e=s(r,t,this);if(e.done)return e.value;var l=i(t),u=String(this);if(!l.global)return o(l,u);var c=l.unicode;l.lastIndex=0;var h,p=[],d=0;while(null!==(h=o(l,u))){var f=String(h[0]);p[d]=f,""===f&&(l.lastIndex=a(u,n(l.lastIndex),c)),d++}return 0===d?null:p}]}))},"4a59":function(t,e,r){var i=r("9b43"),n=r("1fa8"),a=r("33a4"),o=r("cb7c"),s=r("9def"),l=r("27ee"),u={},c={};e=t.exports=function(t,e,r,h,p){var d,f,m,v,g=p?function(){return t}:l(t),y=i(r,h,e?2:1),_=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(a(g)){for(d=s(t.length);d>_;_++)if(v=e?y(o(f=t[_])[0],f[1]):y(t[_]),v===u||v===c)return v}else for(m=g.call(t);!(f=m.next()).done;)if(v=n(m,y,f.value,e),v===u||v===c)return v};e.BREAK=u,e.RETURN=c},"4bf8":function(t,e,r){var i=r("be13");t.exports=function(t){return Object(i(t))}},"4ee1":function(t,e,r){var i=r("5168")("iterator"),n=!1;try{var a=[7][i]();a["return"]=function(){n=!0},Array.from(a,(function(){throw 2}))}catch(o){}t.exports=function(t,e){if(!e&&!n)return!1;var r=!1;try{var a=[7],s=a[i]();s.next=function(){return{done:r=!0}},a[i]=function(){return s},t(a)}catch(o){}return r}},"504c":function(t,e,r){var i=r("9e1e"),n=r("0d58"),a=r("6821"),o=r("52a7").f;t.exports=function(t){return function(e){var r,s=a(e),l=n(s),u=l.length,c=0,h=[];while(u>c)r=l[c++],i&&!o.call(s,r)||h.push(t?[r,s[r]]:s[r]);return h}}},"50ed":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},5147:function(t,e,r){var i=r("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,!"/./"[t](e)}catch(n){}}return!0}},5168:function(t,e,r){var i=r("dbdb")("wks"),n=r("62a0"),a=r("e53d").Symbol,o="function"==typeof a,s=t.exports=function(t){return i[t]||(i[t]=o&&a[t]||(o?a:n)("Symbol."+t))};s.store=i},"520a":function(t,e,r){"use strict";var i=r("0bfb"),n=RegExp.prototype.exec,a=String.prototype.replace,o=n,s="lastIndex",l=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t[s]||0!==e[s]}(),u=void 0!==/()??/.exec("")[1],c=l||u;c&&(o=function(t){var e,r,o,c,h=this;return u&&(r=new RegExp("^"+h.source+"$(?!\\s)",i.call(h))),l&&(e=h[s]),o=n.call(h,t),l&&o&&(h[s]=h.global?o.index+o[0].length:e),u&&o&&o.length>1&&a.call(o[0],r,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(o[c]=void 0)})),o}),t.exports=o},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"53e2":function(t,e,r){var i=r("07e3"),n=r("241e"),a=r("5559")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),i(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},"549b":function(t,e,r){"use strict";var i=r("d864"),n=r("63b6"),a=r("241e"),o=r("b0dc"),s=r("3702"),l=r("b447"),u=r("20fd"),c=r("7cd6");n(n.S+n.F*!r("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,n,h,p=a(t),d="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m,g=0,y=c(p);if(v&&(m=i(m,f>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(e=l(p.length),r=new d(e);e>g;g++)u(r,g,v?m(p[g],g):p[g]);else for(h=y.call(p),r=new d;!(n=h.next()).done;g++)u(r,g,v?o(h,m,[n.value,g],!0):n.value);return r.length=g,r}})},"54a1":function(t,e,r){r("6c1c"),r("1654"),t.exports=r("95d5")},"551c":function(t,e,r){"use strict";var i,n,a,o,s=r("2d00"),l=r("7726"),u=r("9b43"),c=r("23c6"),h=r("5ca1"),p=r("d3f4"),d=r("d8e8"),f=r("f605"),m=r("4a59"),v=r("ebd6"),g=r("1991").set,y=r("8079")(),_=r("a5b8"),x=r("9c80"),b=r("a25f"),w=r("bcaa"),T="Promise",S=l.TypeError,E=l.process,M=E&&E.versions,A=M&&M.v8||"",C=l[T],P="process"==c(E),L=function(){},I=n=_.f,k=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[r("2b4c")("species")]=function(t){t(L,L)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(L)instanceof e&&0!==A.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(i){}}(),R=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},O=function(t,e){if(!t._n){t._n=!0;var r=t._c;y((function(){var i=t._v,n=1==t._s,a=0,o=function(e){var r,a,o,s=n?e.ok:e.fail,l=e.resolve,u=e.reject,c=e.domain;try{s?(n||(2==t._h&&B(t),t._h=1),!0===s?r=i:(c&&c.enter(),r=s(i),c&&(c.exit(),o=!0)),r===e.promise?u(S("Promise-chain cycle")):(a=R(r))?a.call(r,l,u):l(r)):u(i)}catch(h){c&&!o&&c.exit(),u(h)}};while(r.length>a)o(r[a++]);t._c=[],t._n=!1,e&&!t._h&&z(t)}))}},z=function(t){g.call(l,(function(){var e,r,i,n=t._v,a=D(t);if(a&&(e=x((function(){P?E.emit("unhandledRejection",n,t):(r=l.onunhandledrejection)?r({promise:t,reason:n}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",n)})),t._h=P||D(t)?2:1),t._a=void 0,a&&e.e)throw e.v}))},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},B=function(t){g.call(l,(function(){var e;P?E.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})}))},F=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),O(e,!0))},N=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw S("Promise can't be resolved itself");(e=R(t))?y((function(){var i={_w:r,_d:!1};try{e.call(t,u(N,i,1),u(F,i,1))}catch(n){F.call(i,n)}})):(r._v=t,r._s=1,O(r,!1))}catch(i){F.call({_w:r,_d:!1},i)}}};k||(C=function(t){f(this,C,T,"_h"),d(t),i.call(this);try{t(u(N,this,1),u(F,this,1))}catch(e){F.call(this,e)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=r("dcbc")(C.prototype,{then:function(t,e){var r=I(v(this,C));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=P?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&O(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new i;this.promise=t,this.resolve=u(N,t,1),this.reject=u(F,t,1)},_.f=I=function(t){return t===C||t===o?new a(t):n(t)}),h(h.G+h.W+h.F*!k,{Promise:C}),r("7f20")(C,T),r("7a56")(T),o=r("8378")[T],h(h.S+h.F*!k,T,{reject:function(t){var e=I(this),r=e.reject;return r(t),e.promise}}),h(h.S+h.F*(s||!k),T,{resolve:function(t){return w(s&&this===o?C:this,t)}}),h(h.S+h.F*!(k&&r("5cc5")((function(t){C.all(t)["catch"](L)}))),T,{all:function(t){var e=this,r=I(e),i=r.resolve,n=r.reject,a=x((function(){var r=[],a=0,o=1;m(t,!1,(function(t){var s=a++,l=!1;r.push(void 0),o++,e.resolve(t).then((function(t){l||(l=!0,r[s]=t,--o||i(r))}),n)})),--o||i(r)}));return a.e&&n(a.v),r.promise},race:function(t){var e=this,r=I(e),i=r.reject,n=x((function(){m(t,!1,(function(t){e.resolve(t).then(r.resolve,i)}))}));return n.e&&i(n.v),r.promise}})},5537:function(t,e,r){var i=r("8378"),n=r("7726"),a="__core-js_shared__",o=n[a]||(n[a]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:r("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},5559:function(t,e,r){var i=r("dbdb")("keys"),n=r("62a0");t.exports=function(t){return i[t]||(i[t]=n(t))}},"584a":function(t,e){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},5889:function(t,e,r){!function(e,r){t.exports=r()}("undefined"!=typeof self&&self,(function(){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=0)}([function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){return Math.max(t.offsetWidth,t.scrollWidth)}function a(t){return Math.max(t.offsetHeight,t.scrollHeight)}function o(t,e,r){for(var i=void 0,n=t.childNodes,a=document.createRange(),o=0;i=n[o],o<n.length;o++)if(3===i.nodeType){a.selectNodeContents(i);var s=a.getBoundingClientRect();if(e>=s.left&&r>=s.top&&e<=s.right&&r<=s.bottom)return i}return!1}function s(){var t=window.getSelection?window.getSelection():document.selection;t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty())}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},u=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,t),e.viewport&&e.viewport instanceof Element){var r={handle:e.viewport,content:e.viewport.children[0],bounce:!0,friction:.05,bounceForce:.1,textSelection:!1,onClick:function(){},shouldScroll:function(){return!0},onUpdate:function(){}};this.props=l({},r,e),this.props.content?(this.viewport={width:this.props.viewport.clientWidth,height:this.props.viewport.clientHeight},this.content={width:n(this.props.content),height:a(this.props.content)},this.position={x:0,y:0},this.velocity={x:0,y:0},this.friction=1-this.props.friction,this.bounceForce=this.props.bounceForce,this.isDragging=!1,this.dragStartPosition={x:0,y:0},this.dragOffsetPosition=l({},this.dragStartPosition),this.dragPosition=l({},this.position),this.isScrollEnabled=!!this.props.emulateScroll,this.isScrolling=!1,this.scrollOffset={x:0,y:0},this.bounce=this.props.bounce,this.textSelection=this.props.textSelection,this.boundX={from:Math.min(-this.content.width+this.viewport.width,0),to:0},this.boundY={from:Math.min(-this.content.height+this.viewport.height,0),to:0},this.mode={x:"x"==this.props.mode,y:"y"==this.props.mode,xy:"x"!==this.props.mode&&"y"!==this.props.mode},this.isRunning=!1,this.rafID=null,this.events={},this.animate(),this.handleEvents()):console.error("Viewport does not have any content")}else console.error('"viewport" config property must be present and must be Element')}return u(t,[{key:"run",value:function(){var t=this;this.isRunning=!0,cancelAnimationFrame(this.rafID),this.rafID=requestAnimationFrame((function(){return t.animate()}))}},{key:"animate",value:function(){var t=this;this.isRunning&&(this.update(),this.notify(),this.rafID=requestAnimationFrame((function(){return t.animate()})))}},{key:"update",value:function(){this.applyBoundForce(),this.applyDragForce(),this.applyScrollForce(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.mode.y||(this.position.x+=this.velocity.x),this.mode.x||(this.position.y+=this.velocity.y),this.bounce&&!this.isScrolling||(this.position.x=Math.max(Math.min(this.position.x,this.boundX.to),this.boundX.from),this.position.y=Math.max(Math.min(this.position.y,this.boundY.to),this.boundY.from)),!this.isDragging&&!this.isScrolling&&Math.abs(this.velocity.x)<.1&&Math.abs(this.velocity.y)<.1&&(this.isRunning=!1)}},{key:"applyForce",value:function(t){this.velocity.x+=t.x,this.velocity.y+=t.y}},{key:"applyBoundForce",value:function(){if(this.bounce&&!this.isDragging){var t=this.position.x<this.boundX.from,e=this.position.x>this.boundX.to,r=this.position.y<this.boundY.from,i=this.position.y>this.boundY.to,n={x:0,y:0};if(t||e){var a=t?this.boundX.from:this.boundX.to,o=a-this.position.x,s=o*this.bounceForce,l=this.position.x+(this.velocity.x+s)/(1-this.friction);t&&l<this.boundX.from||e&&l>this.boundX.to||(s=o*this.bounceForce-this.velocity.x),n.x=s}if(r||i){var u=r?this.boundY.from:this.boundY.to,c=u-this.position.y,h=c*this.bounceForce,p=this.position.y+(this.velocity.y+h)/(1-this.friction);r&&p<this.boundY.from||i&&p>this.boundY.to||(h=c*this.bounceForce-this.velocity.y),n.y=h}this.applyForce(n)}}},{key:"applyDragForce",value:function(){if(this.isDragging){var t={x:this.dragPosition.x-this.position.x,y:this.dragPosition.y-this.position.y},e={x:t.x-this.velocity.x,y:t.y-this.velocity.y};this.applyForce(e)}}},{key:"applyScrollForce",value:function(){if(this.isScrolling){var t={x:this.scrollOffset.x-this.velocity.x,y:this.scrollOffset.y-this.velocity.y};this.scrollOffset.x=0,this.scrollOffset.y=0,this.applyForce(t)}}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.velocity.x=0,this.velocity.y=0,this.position.x=-t.x||0,this.position.y=-t.y||0,this.run()}},{key:"getUpdate",value:function(){return{isRunning:this.isRunning,isDragging:this.isDragging,isScrolling:this.isScrolling,position:{x:-this.position.x,y:-this.position.y},dragOffsetPosition:this.dragOffsetPosition,viewport:l({},this.viewport),content:l({},this.content)}}},{key:"notify",value:function(){this.props.onUpdate(this.getUpdate())}},{key:"updateMetrics",value:function(){this.viewport.width=this.props.viewport.clientWidth,this.viewport.height=this.props.viewport.clientHeight,this.content.width=n(this.props.content),this.content.height=a(this.props.content),this.boundX.from=Math.min(-this.content.width+this.viewport.width,0),this.boundY.from=Math.min(-this.content.height+this.viewport.height,0),this.run()}},{key:"handleEvents",value:function(){var t=this,e=this.props.viewport,r={x:0,y:0},i={x:0,y:0},n=!1,a=function(e){var r=void 0,a=void 0;n?(r=e.touches[0].pageX,a=e.touches[0].pageY):(r=e.pageX,a=e.pageY),t.dragOffsetPosition.x=r-i.x,t.dragOffsetPosition.y=a-i.y,t.dragPosition.x=t.dragStartPosition.x+t.dragOffsetPosition.x,t.dragPosition.y=t.dragStartPosition.y+t.dragOffsetPosition.y,n||e.preventDefault()};this.events.pointerdown=function(l){var u=void 0,c=void 0,h=void 0,p=void 0;n=!(!l.touches||!l.touches[0]),n?(u=l.touches[0].pageX,c=l.touches[0].pageY,h=l.touches[0].clientX,p=l.touches[0].clientY):(u=l.pageX,c=l.pageY,h=l.clientX,p=l.clientY);var d=e.getBoundingClientRect();if(!(h-d.left>=e.clientLeft+e.clientWidth)&&!(p-d.top>=e.clientTop+e.clientHeight)&&t.props.shouldScroll(t.getUpdate(),l)){if(t.textSelection){if(o(l.target,h,p))return;s()}t.isDragging=!0,(r.x||r.y)&&(t.position.x=r.x,t.position.y=r.y,r.x=0,r.y=0),i.x=u,i.y=c,t.dragStartPosition.x=t.position.x,t.dragStartPosition.y=t.position.y,a(l),t.run();var f=void 0,m=void 0;m=function(e){t.isDragging=!1,n?(window.removeEventListener("touchmove",a),window.removeEventListener("touchend",f)):(window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",f))},n?(f=window.addEventListener("touchend",m),window.addEventListener("touchmove",a)):(f=window.addEventListener("mouseup",m),window.addEventListener("mousemove",a))}};var l=null;this.events.wheel=function(e){t.velocity.x=0,t.isScrollEnabled&&(t.isScrolling=!0,t.scrollOffset.x=-e.deltaX,t.scrollOffset.y=-e.deltaY,t.run(),clearTimeout(l),l=setTimeout((function(){return t.isScrolling=!1}),80),e.preventDefault())},this.events.scroll=function(e){var i=t.props.viewport.scrollLeft,n=t.props.viewport.scrollTop;Math.abs(t.position.x+i)>3&&(t.position.x=-i,t.velocity.x=0),Math.abs(t.position.y+n)>3&&(t.position.y=-n,t.velocity.y=0),r.x=-t.props.viewport.scrollLeft,r.y=-t.props.viewport.scrollTop},this.events.click=function(e){t.props.onClick(t.getUpdate(),e)},this.events.resize=this.updateMetrics.bind(this),this.props.handle.addEventListener("mousedown",this.events.pointerdown),this.props.handle.addEventListener("touchstart",this.events.pointerdown),this.props.handle.addEventListener("click",this.events.click),this.props.viewport.addEventListener("wheel",this.events.wheel),this.props.viewport.addEventListener("scroll",this.events.scroll),window.addEventListener("resize",this.events.resize)}},{key:"destroy",value:function(){this.props.handle.removeEventListener("mousedown",this.events.pointerdown),this.props.handle.removeEventListener("touchstart",this.events.pointerdown),this.props.handle.removeEventListener("click",this.events.click),this.props.viewport.removeEventListener("wheel",this.events.wheel),this.props.viewport.removeEventListener("scroll",this.events.scroll),window.removeEventListener("resize",this.events.resize)}}]),t}();e.default=c,t.exports=e.default}])}))},"5a89":function(t,e,r){"use strict";r.r(e),r.d(e,"ACESFilmicToneMapping",(function(){return lt})),r.d(e,"AddEquation",(function(){return L})),r.d(e,"AddOperation",(function(){return rt})),r.d(e,"AdditiveBlending",(function(){return M})),r.d(e,"AlphaFormat",(function(){return jt})),r.d(e,"AlwaysDepth",(function(){return X})),r.d(e,"AlwaysStencilFunc",(function(){return ar})),r.d(e,"AmbientLight",(function(){return zd})),r.d(e,"AmbientLightProbe",(function(){return of})),r.d(e,"AnimationClip",(function(){return Op})),r.d(e,"AnimationLoader",(function(){return Gp})),r.d(e,"AnimationMixer",(function(){return Ff})),r.d(e,"AnimationObjectGroup",(function(){return Df})),r.d(e,"AnimationUtils",(function(){return bp})),r.d(e,"ArcCurve",(function(){return Jp})),r.d(e,"ArrayCamera",(function(){return Uu})),r.d(e,"ArrowHelper",(function(){return Nm})),r.d(e,"Audio",(function(){return vf})),r.d(e,"AudioAnalyser",(function(){return wf})),r.d(e,"AudioContext",(function(){return tf})),r.d(e,"AudioListener",(function(){return mf})),r.d(e,"AudioLoader",(function(){return ef})),r.d(e,"AxesHelper",(function(){return Um})),r.d(e,"AxisHelper",(function(){return pv})),r.d(e,"BackSide",(function(){return g})),r.d(e,"BasicDepthPacking",(function(){return Ue})),r.d(e,"BasicShadowMap",(function(){return p})),r.d(e,"BinaryTextureLoader",(function(){return gv})),r.d(e,"Bone",(function(){return xc})),r.d(e,"BooleanKeyframeTrack",(function(){return Ap})),r.d(e,"BoundingBoxHelper",(function(){return dv})),r.d(e,"Box2",(function(){return Xf})),r.d(e,"Box3",(function(){return yi})),r.d(e,"Box3Helper",(function(){return Om})),r.d(e,"BoxBufferGeometry",(function(){return Yn})),r.d(e,"BoxGeometry",(function(){return $n})),r.d(e,"BoxHelper",(function(){return Rm})),r.d(e,"BufferAttribute",(function(){return rn})),r.d(e,"BufferGeometry",(function(){return wn})),r.d(e,"BufferGeometryLoader",(function(){return Vd})),r.d(e,"ByteType",(function(){return It})),r.d(e,"Cache",(function(){return Bp})),r.d(e,"Camera",(function(){return ra})),r.d(e,"CameraHelper",(function(){return Lm})),r.d(e,"CanvasRenderer",(function(){return _v})),r.d(e,"CanvasTexture",(function(){return jc})),r.d(e,"CatmullRomCurve3",(function(){return id})),r.d(e,"CineonToneMapping",(function(){return st})),r.d(e,"CircleBufferGeometry",(function(){return lp})),r.d(e,"CircleGeometry",(function(){return sp})),r.d(e,"ClampToEdgeWrapping",(function(){return yt})),r.d(e,"Clock",(function(){return cf})),r.d(e,"ClosedSplineCurve3",(function(){return uv})),r.d(e,"Color",(function(){return $i})),r.d(e,"ColorKeyframeTrack",(function(){return Cp})),r.d(e,"CompressedTexture",(function(){return Vc})),r.d(e,"CompressedTextureLoader",(function(){return Hp})),r.d(e,"ConeBufferGeometry",(function(){return op})),r.d(e,"ConeGeometry",(function(){return ap})),r.d(e,"CubeCamera",(function(){return oa})),r.d(e,"CubeGeometry",(function(){return $n})),r.d(e,"CubeReflectionMapping",(function(){return ct})),r.d(e,"CubeRefractionMapping",(function(){return ht})),r.d(e,"CubeTexture",(function(){return qs})),r.d(e,"CubeTextureLoader",(function(){return Xp})),r.d(e,"CubeUVReflectionMapping",(function(){return mt})),r.d(e,"CubeUVRefractionMapping",(function(){return vt})),r.d(e,"CubicBezierCurve",(function(){return fd})),r.d(e,"CubicBezierCurve3",(function(){return md})),r.d(e,"CubicInterpolant",(function(){return Tp})),r.d(e,"CullFaceBack",(function(){return s})),r.d(e,"CullFaceFront",(function(){return l})),r.d(e,"CullFaceFrontBack",(function(){return u})),r.d(e,"CullFaceNone",(function(){return o})),r.d(e,"Curve",(function(){return Yp})),r.d(e,"CurvePath",(function(){return wd})),r.d(e,"CustomBlending",(function(){return P})),r.d(e,"CylinderBufferGeometry",(function(){return np})),r.d(e,"CylinderGeometry",(function(){return ip})),r.d(e,"Cylindrical",(function(){return Wf})),r.d(e,"DataTexture",(function(){return la})),r.d(e,"DataTexture2DArray",(function(){return Xs})),r.d(e,"DataTexture3D",(function(){return $s})),r.d(e,"DataTextureLoader",(function(){return Wp})),r.d(e,"DecrementStencilOp",(function(){return $e})),r.d(e,"DecrementWrapStencilOp",(function(){return Ze})),r.d(e,"DefaultLoadingManager",(function(){return Np})),r.d(e,"DepthFormat",(function(){return $t})),r.d(e,"DepthStencilFormat",(function(){return Yt})),r.d(e,"DepthTexture",(function(){return Gc})),r.d(e,"DirectionalLight",(function(){return Od})),r.d(e,"DirectionalLightHelper",(function(){return Am})),r.d(e,"DirectionalLightShadow",(function(){return Rd})),r.d(e,"DiscreteInterpolant",(function(){return Ep})),r.d(e,"DodecahedronBufferGeometry",(function(){return rh})),r.d(e,"DodecahedronGeometry",(function(){return eh})),r.d(e,"DoubleSide",(function(){return y})),r.d(e,"DstAlphaFactor",(function(){return V})),r.d(e,"DstColorFactor",(function(){return G})),r.d(e,"DynamicBufferAttribute",(function(){return Qm})),r.d(e,"DynamicCopyUsage",(function(){return dr})),r.d(e,"DynamicDrawUsage",(function(){return sr})),r.d(e,"DynamicReadUsage",(function(){return cr})),r.d(e,"EdgesGeometry",(function(){return rp})),r.d(e,"EdgesHelper",(function(){return fv})),r.d(e,"EllipseCurve",(function(){return Zp})),r.d(e,"EqualDepth",(function(){return Z})),r.d(e,"EqualStencilFunc",(function(){return tr})),r.d(e,"EquirectangularReflectionMapping",(function(){return pt})),r.d(e,"EquirectangularRefractionMapping",(function(){return dt})),r.d(e,"Euler",(function(){return Gr})),r.d(e,"EventDispatcher",(function(){return mr})),r.d(e,"ExtrudeBufferGeometry",(function(){return jh})),r.d(e,"ExtrudeGeometry",(function(){return Vh})),r.d(e,"Face3",(function(){return Ki})),r.d(e,"Face4",(function(){return Vm})),r.d(e,"FaceColors",(function(){return w})),r.d(e,"FaceNormalsHelper",(function(){return Tm})),r.d(e,"FileLoader",(function(){return jp})),r.d(e,"FlatShading",(function(){return _})),r.d(e,"Float32Attribute",(function(){return sv})),r.d(e,"Float32BufferAttribute",(function(){return hn})),r.d(e,"Float64Attribute",(function(){return lv})),r.d(e,"Float64BufferAttribute",(function(){return pn})),r.d(e,"FloatType",(function(){return Dt})),r.d(e,"Fog",(function(){return Yu})),r.d(e,"FogExp2",(function(){return $u})),r.d(e,"Font",(function(){return Zd})),r.d(e,"FontLoader",(function(){return Qd})),r.d(e,"FrontFaceDirectionCCW",(function(){return h})),r.d(e,"FrontFaceDirectionCW",(function(){return c})),r.d(e,"FrontSide",(function(){return v})),r.d(e,"Frustum",(function(){return ha})),r.d(e,"GammaEncoding",(function(){return Oe})),r.d(e,"Geometry",(function(){return Xn})),r.d(e,"GeometryUtils",(function(){return yv})),r.d(e,"GreaterDepth",(function(){return K})),r.d(e,"GreaterEqualDepth",(function(){return J})),r.d(e,"GreaterEqualStencilFunc",(function(){return nr})),r.d(e,"GreaterStencilFunc",(function(){return rr})),r.d(e,"GridHelper",(function(){return gm})),r.d(e,"Group",(function(){return Nu})),r.d(e,"HalfFloatType",(function(){return Bt})),r.d(e,"HemisphereLight",(function(){return Md})),r.d(e,"HemisphereLightHelper",(function(){return mm})),r.d(e,"HemisphereLightProbe",(function(){return af})),r.d(e,"IcosahedronBufferGeometry",(function(){return th})),r.d(e,"IcosahedronGeometry",(function(){return Qc})),r.d(e,"ImageBitmapLoader",(function(){return $d})),r.d(e,"ImageLoader",(function(){return qp})),r.d(e,"ImageUtils",(function(){return Ar})),r.d(e,"ImmediateRenderObject",(function(){return Jf})),r.d(e,"IncrementStencilOp",(function(){return Xe})),r.d(e,"IncrementWrapStencilOp",(function(){return Ye})),r.d(e,"InstancedBufferAttribute",(function(){return Ud})),r.d(e,"InstancedBufferGeometry",(function(){return Nd})),r.d(e,"InstancedInterleavedBuffer",(function(){return Uf})),r.d(e,"InstancedMesh",(function(){return bc})),r.d(e,"Int16Attribute",(function(){return iv})),r.d(e,"Int16BufferAttribute",(function(){return sn})),r.d(e,"Int32Attribute",(function(){return av})),r.d(e,"Int32BufferAttribute",(function(){return un})),r.d(e,"Int8Attribute",(function(){return tv})),r.d(e,"Int8BufferAttribute",(function(){return nn})),r.d(e,"IntType",(function(){return Ot})),r.d(e,"InterleavedBuffer",(function(){return Zu})),r.d(e,"InterleavedBufferAttribute",(function(){return Ju})),r.d(e,"Interpolant",(function(){return wp})),r.d(e,"InterpolateDiscrete",(function(){return Te})),r.d(e,"InterpolateLinear",(function(){return Se})),r.d(e,"InterpolateSmooth",(function(){return Ee})),r.d(e,"InvertStencilOp",(function(){return Je})),r.d(e,"JSONLoader",(function(){return xv})),r.d(e,"KeepStencilOp",(function(){return We})),r.d(e,"KeyframeTrack",(function(){return Mp})),r.d(e,"LOD",(function(){return mc})),r.d(e,"LatheBufferGeometry",(function(){return Kh})),r.d(e,"LatheGeometry",(function(){return Jh})),r.d(e,"Layers",(function(){return Hr})),r.d(e,"LensFlare",(function(){return wv})),r.d(e,"LessDepth",(function(){return $})),r.d(e,"LessEqualDepth",(function(){return Y})),r.d(e,"LessEqualStencilFunc",(function(){return er})),r.d(e,"LessStencilFunc",(function(){return Qe})),r.d(e,"Light",(function(){return Ed})),r.d(e,"LightProbe",(function(){return nf})),r.d(e,"LightProbeHelper",(function(){return vm})),r.d(e,"LightShadow",(function(){return Ad})),r.d(e,"Line",(function(){return Cc})),r.d(e,"Line3",(function(){return Zf})),r.d(e,"LineBasicMaterial",(function(){return wc})),r.d(e,"LineCurve",(function(){return vd})),r.d(e,"LineCurve3",(function(){return gd})),r.d(e,"LineDashedMaterial",(function(){return _p})),r.d(e,"LineLoop",(function(){return kc})),r.d(e,"LinePieces",(function(){return Gm})),r.d(e,"LineSegments",(function(){return Ic})),r.d(e,"LineStrip",(function(){return jm})),r.d(e,"LinearEncoding",(function(){return ke})),r.d(e,"LinearFilter",(function(){return Et})),r.d(e,"LinearInterpolant",(function(){return Sp})),r.d(e,"LinearMipMapLinearFilter",(function(){return Pt})),r.d(e,"LinearMipMapNearestFilter",(function(){return At})),r.d(e,"LinearMipmapLinearFilter",(function(){return Ct})),r.d(e,"LinearMipmapNearestFilter",(function(){return Mt})),r.d(e,"LinearToneMapping",(function(){return nt})),r.d(e,"Loader",(function(){return Up})),r.d(e,"LoaderUtils",(function(){return Fd})),r.d(e,"LoadingManager",(function(){return Fp})),r.d(e,"LogLuvEncoding",(function(){return De})),r.d(e,"LoopOnce",(function(){return xe})),r.d(e,"LoopPingPong",(function(){return we})),r.d(e,"LoopRepeat",(function(){return be})),r.d(e,"LuminanceAlphaFormat",(function(){return qt})),r.d(e,"LuminanceFormat",(function(){return Wt})),r.d(e,"MOUSE",(function(){return n})),r.d(e,"Material",(function(){return tn})),r.d(e,"MaterialLoader",(function(){return Bd})),r.d(e,"Math",(function(){return yr})),r.d(e,"Matrix3",(function(){return Mr})),r.d(e,"Matrix4",(function(){return Ur})),r.d(e,"MaxEquation",(function(){return O})),r.d(e,"Mesh",(function(){return Un})),r.d(e,"MeshBasicMaterial",(function(){return en})),r.d(e,"MeshDepthMaterial",(function(){return Pu})),r.d(e,"MeshDistanceMaterial",(function(){return Lu})),r.d(e,"MeshFaceMaterial",(function(){return Hm})),r.d(e,"MeshLambertMaterial",(function(){return gp})),r.d(e,"MeshMatcapMaterial",(function(){return yp})),r.d(e,"MeshNormalMaterial",(function(){return vp})),r.d(e,"MeshPhongMaterial",(function(){return fp})),r.d(e,"MeshPhysicalMaterial",(function(){return dp})),r.d(e,"MeshStandardMaterial",(function(){return pp})),r.d(e,"MeshToonMaterial",(function(){return mp})),r.d(e,"MinEquation",(function(){return R})),r.d(e,"MirroredRepeatWrapping",(function(){return _t})),r.d(e,"MixOperation",(function(){return et})),r.d(e,"MultiMaterial",(function(){return Wm})),r.d(e,"MultiplyBlending",(function(){return C})),r.d(e,"MultiplyOperation",(function(){return tt})),r.d(e,"NearestFilter",(function(){return xt})),r.d(e,"NearestMipMapLinearFilter",(function(){return St})),r.d(e,"NearestMipMapNearestFilter",(function(){return wt})),r.d(e,"NearestMipmapLinearFilter",(function(){return Tt})),r.d(e,"NearestMipmapNearestFilter",(function(){return bt})),r.d(e,"NeverDepth",(function(){return q})),r.d(e,"NeverStencilFunc",(function(){return Ke})),r.d(e,"NoBlending",(function(){return S})),r.d(e,"NoColors",(function(){return b})),r.d(e,"NoToneMapping",(function(){return it})),r.d(e,"NormalBlending",(function(){return E})),r.d(e,"NotEqualDepth",(function(){return Q})),r.d(e,"NotEqualStencilFunc",(function(){return ir})),r.d(e,"NumberKeyframeTrack",(function(){return Pp})),r.d(e,"Object3D",(function(){return ni})),r.d(e,"ObjectLoader",(function(){return Gd})),r.d(e,"ObjectSpaceNormalMap",(function(){return Ge})),r.d(e,"OctahedronBufferGeometry",(function(){return Kc})),r.d(e,"OctahedronGeometry",(function(){return Jc})),r.d(e,"OneFactor",(function(){return D})),r.d(e,"OneMinusDstAlphaFactor",(function(){return j})),r.d(e,"OneMinusDstColorFactor",(function(){return H})),r.d(e,"OneMinusSrcAlphaFactor",(function(){return U})),r.d(e,"OneMinusSrcColorFactor",(function(){return F})),r.d(e,"OrthographicCamera",(function(){return kd})),r.d(e,"PCFShadowMap",(function(){return d})),r.d(e,"PCFSoftShadowMap",(function(){return f})),r.d(e,"ParametricBufferGeometry",(function(){return qc})),r.d(e,"ParametricGeometry",(function(){return Wc})),r.d(e,"Particle",(function(){return Xm})),r.d(e,"ParticleBasicMaterial",(function(){return Zm})),r.d(e,"ParticleSystem",(function(){return $m})),r.d(e,"ParticleSystemMaterial",(function(){return Jm})),r.d(e,"Path",(function(){return Td})),r.d(e,"PerspectiveCamera",(function(){return ia})),r.d(e,"Plane",(function(){return Ri})),r.d(e,"PlaneBufferGeometry",(function(){return Os})),r.d(e,"PlaneGeometry",(function(){return Rs})),r.d(e,"PlaneHelper",(function(){return zm})),r.d(e,"PointCloud",(function(){return qm})),r.d(e,"PointCloudMaterial",(function(){return Ym})),r.d(e,"PointLight",(function(){return Id})),r.d(e,"PointLightHelper",(function(){return cm})),r.d(e,"Points",(function(){return Fc})),r.d(e,"PointsMaterial",(function(){return Rc})),r.d(e,"PolarGridHelper",(function(){return ym})),r.d(e,"PolyhedronBufferGeometry",(function(){return $c})),r.d(e,"PolyhedronGeometry",(function(){return Xc})),r.d(e,"PositionalAudio",(function(){return bf})),r.d(e,"PositionalAudioHelper",(function(){return _m})),r.d(e,"PropertyBinding",(function(){return zf})),r.d(e,"PropertyMixer",(function(){return Tf})),r.d(e,"QuadraticBezierCurve",(function(){return yd})),r.d(e,"QuadraticBezierCurve3",(function(){return _d})),r.d(e,"Quaternion",(function(){return xr})),r.d(e,"QuaternionKeyframeTrack",(function(){return Ip})),r.d(e,"QuaternionLinearInterpolant",(function(){return Lp})),r.d(e,"REVISION",(function(){return i})),r.d(e,"RGBADepthPacking",(function(){return Ve})),r.d(e,"RGBAFormat",(function(){return Ht})),r.d(e,"RGBA_ASTC_10x10_Format",(function(){return ge})),r.d(e,"RGBA_ASTC_10x5_Format",(function(){return fe})),r.d(e,"RGBA_ASTC_10x6_Format",(function(){return me})),r.d(e,"RGBA_ASTC_10x8_Format",(function(){return ve})),r.d(e,"RGBA_ASTC_12x10_Format",(function(){return ye})),r.d(e,"RGBA_ASTC_12x12_Format",(function(){return _e})),r.d(e,"RGBA_ASTC_4x4_Format",(function(){return oe})),r.d(e,"RGBA_ASTC_5x4_Format",(function(){return se})),r.d(e,"RGBA_ASTC_5x5_Format",(function(){return le})),r.d(e,"RGBA_ASTC_6x5_Format",(function(){return ue})),r.d(e,"RGBA_ASTC_6x6_Format",(function(){return ce})),r.d(e,"RGBA_ASTC_8x5_Format",(function(){return he})),r.d(e,"RGBA_ASTC_8x6_Format",(function(){return pe})),r.d(e,"RGBA_ASTC_8x8_Format",(function(){return de})),r.d(e,"RGBA_PVRTC_2BPPV1_Format",(function(){return ne})),r.d(e,"RGBA_PVRTC_4BPPV1_Format",(function(){return ie})),r.d(e,"RGBA_S3TC_DXT1_Format",(function(){return Kt})),r.d(e,"RGBA_S3TC_DXT3_Format",(function(){return Qt})),r.d(e,"RGBA_S3TC_DXT5_Format",(function(){return te})),r.d(e,"RGBDEncoding",(function(){return Ne})),r.d(e,"RGBEEncoding",(function(){return ze})),r.d(e,"RGBEFormat",(function(){return Xt})),r.d(e,"RGBFormat",(function(){return Gt})),r.d(e,"RGBM16Encoding",(function(){return Fe})),r.d(e,"RGBM7Encoding",(function(){return Be})),r.d(e,"RGB_ETC1_Format",(function(){return ae})),r.d(e,"RGB_PVRTC_2BPPV1_Format",(function(){return re})),r.d(e,"RGB_PVRTC_4BPPV1_Format",(function(){return ee})),r.d(e,"RGB_S3TC_DXT1_Format",(function(){return Jt})),r.d(e,"RawShaderMaterial",(function(){return hp})),r.d(e,"Ray",(function(){return Pi})),r.d(e,"Raycaster",(function(){return Vf})),r.d(e,"RectAreaLight",(function(){return Dd})),r.d(e,"RectAreaLightHelper",(function(){return hm})),r.d(e,"RedFormat",(function(){return Zt})),r.d(e,"ReinhardToneMapping",(function(){return at})),r.d(e,"RepeatWrapping",(function(){return gt})),r.d(e,"ReplaceStencilOp",(function(){return qe})),r.d(e,"ReverseSubtractEquation",(function(){return k})),r.d(e,"RingBufferGeometry",(function(){return Zh})),r.d(e,"RingGeometry",(function(){return Yh})),r.d(e,"Scene",(function(){return ai})),r.d(e,"SceneUtils",(function(){return bv})),r.d(e,"ShaderChunk",(function(){return Cs})),r.d(e,"ShaderLib",(function(){return Ls})),r.d(e,"ShaderMaterial",(function(){return ea})),r.d(e,"ShadowMaterial",(function(){return cp})),r.d(e,"Shape",(function(){return Sd})),r.d(e,"ShapeBufferGeometry",(function(){return tp})),r.d(e,"ShapeGeometry",(function(){return Qh})),r.d(e,"ShapePath",(function(){return Yd})),r.d(e,"ShapeUtils",(function(){return Fh})),r.d(e,"ShortType",(function(){return kt})),r.d(e,"Skeleton",(function(){return _c})),r.d(e,"SkeletonHelper",(function(){return um})),r.d(e,"SkinnedMesh",(function(){return vc})),r.d(e,"SmoothShading",(function(){return x})),r.d(e,"Sphere",(function(){return bi})),r.d(e,"SphereBufferGeometry",(function(){return $h})),r.d(e,"SphereGeometry",(function(){return Xh})),r.d(e,"Spherical",(function(){return Hf})),r.d(e,"SphericalHarmonics3",(function(){return rf})),r.d(e,"SphericalReflectionMapping",(function(){return ft})),r.d(e,"Spline",(function(){return hv})),r.d(e,"SplineCurve",(function(){return xd})),r.d(e,"SplineCurve3",(function(){return cv})),r.d(e,"SpotLight",(function(){return Pd})),r.d(e,"SpotLightHelper",(function(){return nm})),r.d(e,"SpotLightShadow",(function(){return Cd})),r.d(e,"Sprite",(function(){return hc})),r.d(e,"SpriteMaterial",(function(){return Ku})),r.d(e,"SrcAlphaFactor",(function(){return N})),r.d(e,"SrcAlphaSaturateFactor",(function(){return W})),r.d(e,"SrcColorFactor",(function(){return B})),r.d(e,"StaticCopyUsage",(function(){return pr})),r.d(e,"StaticDrawUsage",(function(){return or})),r.d(e,"StaticReadUsage",(function(){return ur})),r.d(e,"StereoCamera",(function(){return uf})),r.d(e,"StreamCopyUsage",(function(){return fr})),r.d(e,"StreamDrawUsage",(function(){return lr})),r.d(e,"StreamReadUsage",(function(){return hr})),r.d(e,"StringKeyframeTrack",(function(){return kp})),r.d(e,"SubtractEquation",(function(){return I})),r.d(e,"SubtractiveBlending",(function(){return A})),r.d(e,"TOUCH",(function(){return a})),r.d(e,"TangentSpaceNormalMap",(function(){return je})),r.d(e,"TetrahedronBufferGeometry",(function(){return Zc})),r.d(e,"TetrahedronGeometry",(function(){return Yc})),r.d(e,"TextBufferGeometry",(function(){return qh})),r.d(e,"TextGeometry",(function(){return Wh})),r.d(e,"Texture",(function(){return Pr})),r.d(e,"TextureLoader",(function(){return $p})),r.d(e,"TorusBufferGeometry",(function(){return lh})),r.d(e,"TorusGeometry",(function(){return sh})),r.d(e,"TorusKnotBufferGeometry",(function(){return oh})),r.d(e,"TorusKnotGeometry",(function(){return ah})),r.d(e,"Triangle",(function(){return Hi})),r.d(e,"TriangleFanDrawMode",(function(){return Ie})),r.d(e,"TriangleStripDrawMode",(function(){return Le})),r.d(e,"TrianglesDrawMode",(function(){return Pe})),r.d(e,"TubeBufferGeometry",(function(){return nh})),r.d(e,"TubeGeometry",(function(){return ih})),r.d(e,"UVMapping",(function(){return ut})),r.d(e,"Uint16Attribute",(function(){return nv})),r.d(e,"Uint16BufferAttribute",(function(){return ln})),r.d(e,"Uint32Attribute",(function(){return ov})),r.d(e,"Uint32BufferAttribute",(function(){return cn})),r.d(e,"Uint8Attribute",(function(){return ev})),r.d(e,"Uint8BufferAttribute",(function(){return an})),r.d(e,"Uint8ClampedAttribute",(function(){return rv})),r.d(e,"Uint8ClampedBufferAttribute",(function(){return on})),r.d(e,"Uncharted2ToneMapping",(function(){return ot})),r.d(e,"Uniform",(function(){return Nf})),r.d(e,"UniformsLib",(function(){return Ps})),r.d(e,"UniformsUtils",(function(){return Kn})),r.d(e,"UnsignedByteType",(function(){return Lt})),r.d(e,"UnsignedInt248Type",(function(){return Vt})),r.d(e,"UnsignedIntType",(function(){return zt})),r.d(e,"UnsignedShort4444Type",(function(){return Ft})),r.d(e,"UnsignedShort5551Type",(function(){return Nt})),r.d(e,"UnsignedShort565Type",(function(){return Ut})),r.d(e,"UnsignedShortType",(function(){return Rt})),r.d(e,"VSMShadowMap",(function(){return m})),r.d(e,"Vector2",(function(){return _r})),r.d(e,"Vector3",(function(){return Tr})),r.d(e,"Vector4",(function(){return Lr})),r.d(e,"VectorKeyframeTrack",(function(){return Rp})),r.d(e,"Vertex",(function(){return Km})),r.d(e,"VertexColors",(function(){return T})),r.d(e,"VertexNormalsHelper",(function(){return rm})),r.d(e,"VideoTexture",(function(){return Uc})),r.d(e,"WebGLMultisampleRenderTarget",(function(){return kr})),r.d(e,"WebGLRenderTarget",(function(){return Ir})),r.d(e,"WebGLRenderTargetCube",(function(){return sa})),r.d(e,"WebGLRenderer",(function(){return Xu})),r.d(e,"WebGLUtils",(function(){return Du})),r.d(e,"WireframeGeometry",(function(){return Hc})),r.d(e,"WireframeHelper",(function(){return mv})),r.d(e,"WrapAroundEnding",(function(){return Ce})),r.d(e,"XHRLoader",(function(){return vv})),r.d(e,"ZeroCurvatureEnding",(function(){return Me})),r.d(e,"ZeroFactor",(function(){return z})),r.d(e,"ZeroSlopeEnding",(function(){return Ae})),r.d(e,"ZeroStencilOp",(function(){return He})),r.d(e,"sRGBEncoding",(function(){return Re})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e});var i="110",n={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},a={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o=0,s=1,l=2,u=3,c=0,h=1,p=0,d=1,f=2,m=3,v=0,g=1,y=2,_=1,x=2,b=0,w=1,T=2,S=0,E=1,M=2,A=3,C=4,P=5,L=100,I=101,k=102,R=103,O=104,z=200,D=201,B=202,F=203,N=204,U=205,V=206,j=207,G=208,H=209,W=210,q=0,X=1,$=2,Y=3,Z=4,J=5,K=6,Q=7,tt=0,et=1,rt=2,it=0,nt=1,at=2,ot=3,st=4,lt=5,ut=300,ct=301,ht=302,pt=303,dt=304,ft=305,mt=306,vt=307,gt=1e3,yt=1001,_t=1002,xt=1003,bt=1004,wt=1004,Tt=1005,St=1005,Et=1006,Mt=1007,At=1007,Ct=1008,Pt=1008,Lt=1009,It=1010,kt=1011,Rt=1012,Ot=1013,zt=1014,Dt=1015,Bt=1016,Ft=1017,Nt=1018,Ut=1019,Vt=1020,jt=1021,Gt=1022,Ht=1023,Wt=1024,qt=1025,Xt=Ht,$t=1026,Yt=1027,Zt=1028,Jt=33776,Kt=33777,Qt=33778,te=33779,ee=35840,re=35841,ie=35842,ne=35843,ae=36196,oe=37808,se=37809,le=37810,ue=37811,ce=37812,he=37813,pe=37814,de=37815,fe=37816,me=37817,ve=37818,ge=37819,ye=37820,_e=37821,xe=2200,be=2201,we=2202,Te=2300,Se=2301,Ee=2302,Me=2400,Ae=2401,Ce=2402,Pe=0,Le=1,Ie=2,ke=3e3,Re=3001,Oe=3007,ze=3002,De=3003,Be=3004,Fe=3005,Ne=3006,Ue=3200,Ve=3201,je=0,Ge=1,He=0,We=7680,qe=7681,Xe=7682,$e=7683,Ye=34055,Ze=34056,Je=5386,Ke=512,Qe=513,tr=514,er=515,rr=516,ir=517,nr=518,ar=519,or=35044,sr=35048,lr=35040,ur=35045,cr=35049,hr=35041,pr=35046,dr=35050,fr=35042;function mr(){}Object.assign(mr.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[t]&&-1!==r[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var r=this._listeners,i=r[t];if(void 0!==i){var n=i.indexOf(e);-1!==n&&i.splice(n,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,r=e[t.type];if(void 0!==r){t.target=this;for(var i=r.slice(0),n=0,a=i.length;n<a;n++)i[n].call(this,t)}}}});for(var vr=[],gr=0;gr<256;gr++)vr[gr]=(gr<16?"0":"")+gr.toString(16);var yr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=vr[255&t]+vr[t>>8&255]+vr[t>>16&255]+vr[t>>24&255]+"-"+vr[255&e]+vr[e>>8&255]+"-"+vr[e>>16&15|64]+vr[e>>24&255]+"-"+vr[63&r|128]+vr[r>>8&255]+"-"+vr[r>>16&255]+vr[r>>24&255]+vr[255&i]+vr[i>>8&255]+vr[i>>16&255]+vr[i>>24&255];return n.toUpperCase()},clamp:function(t,e,r){return Math.max(e,Math.min(r,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,r,i,n){return i+(t-e)*(n-i)/(r-e)},lerp:function(t,e,r){return(1-r)*t+r*e},smoothstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e),t*t*(3-2*t))},smootherstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*yr.DEG2RAD},radToDeg:function(t){return t*yr.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function _r(t,e){this.x=t||0,this.y=e||0}function xr(t,e,r,i){this._x=t||0,this._y=e||0,this._z=r||0,this._w=void 0!==i?i:1}Object.defineProperties(_r.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(_r.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,r=this.y,i=t.elements;return this.x=i[0]*e+i[3]*r+i[6],this.y=i[1]*e+i[4]*r+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var r=Math.cos(e),i=Math.sin(e),n=this.x-t.x,a=this.y-t.y;return this.x=n*r-a*i+t.x,this.y=n*i+a*r+t.y,this}}),Object.assign(xr,{slerp:function(t,e,r,i){return r.copy(t).slerp(e,i)},slerpFlat:function(t,e,r,i,n,a,o){var s=r[i+0],l=r[i+1],u=r[i+2],c=r[i+3],h=n[a+0],p=n[a+1],d=n[a+2],f=n[a+3];if(c!==f||s!==h||l!==p||u!==d){var m=1-o,v=s*h+l*p+u*d+c*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,v*g);m=Math.sin(m*x)/_,o=Math.sin(o*x)/_}var b=o*g;if(s=s*m+h*b,l=l*m+p*b,u=u*m+d*b,c=c*m+f*b,m===1-o){var w=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=w,l*=w,u*=w,c*=w}}t[e]=s,t[e+1]=l,t[e+2]=u,t[e+3]=c}}),Object.defineProperties(xr.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(xr.prototype,{isQuaternion:!0,set:function(t,e,r,i){return this._x=t,this._y=e,this._z=r,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=t._x,i=t._y,n=t._z,a=t.order,o=Math.cos,s=Math.sin,l=o(r/2),u=o(i/2),c=o(n/2),h=s(r/2),p=s(i/2),d=s(n/2);return"XYZ"===a?(this._x=h*u*c+l*p*d,this._y=l*p*c-h*u*d,this._z=l*u*d+h*p*c,this._w=l*u*c-h*p*d):"YXZ"===a?(this._x=h*u*c+l*p*d,this._y=l*p*c-h*u*d,this._z=l*u*d-h*p*c,this._w=l*u*c+h*p*d):"ZXY"===a?(this._x=h*u*c-l*p*d,this._y=l*p*c+h*u*d,this._z=l*u*d+h*p*c,this._w=l*u*c-h*p*d):"ZYX"===a?(this._x=h*u*c-l*p*d,this._y=l*p*c+h*u*d,this._z=l*u*d-h*p*c,this._w=l*u*c+h*p*d):"YZX"===a?(this._x=h*u*c+l*p*d,this._y=l*p*c+h*u*d,this._z=l*u*d-h*p*c,this._w=l*u*c-h*p*d):"XZY"===a&&(this._x=h*u*c-l*p*d,this._y=l*p*c-h*u*d,this._z=l*u*d+h*p*c,this._w=l*u*c+h*p*d),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var r=e/2,i=Math.sin(r);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(r),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,r=t.elements,i=r[0],n=r[4],a=r[8],o=r[1],s=r[5],l=r[9],u=r[2],c=r[6],h=r[10],p=i+s+h;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(c-l)*e,this._y=(a-u)*e,this._z=(o-n)*e):i>s&&i>h?(e=2*Math.sqrt(1+i-s-h),this._w=(c-l)/e,this._x=.25*e,this._y=(n+o)/e,this._z=(a+u)/e):s>h?(e=2*Math.sqrt(1+s-i-h),this._w=(a-u)/e,this._x=(n+o)/e,this._y=.25*e,this._z=(l+c)/e):(e=2*Math.sqrt(1+h-i-s),this._w=(o-n)/e,this._x=(a+u)/e,this._y=(l+c)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var r=1e-6,i=t.dot(e)+1;return i<r?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(yr.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var r=this.angleTo(t);if(0===r)return this;var i=Math.min(1,e/r);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var r=t._x,i=t._y,n=t._z,a=t._w,o=e._x,s=e._y,l=e._z,u=e._w;return this._x=r*u+a*o+i*l-n*s,this._y=i*u+a*s+n*o-r*l,this._z=n*u+a*l+r*s-i*o,this._w=a*u-r*o-i*s-n*l,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var r=this._x,i=this._y,n=this._z,a=this._w,o=a*t._w+r*t._x+i*t._y+n*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=r,this._y=i,this._z=n,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-e;return this._w=l*a+e*this._w,this._x=l*r+e*this._x,this._y=l*i+e*this._y,this._z=l*n+e*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),h=Math.sin((1-e)*c)/u,p=Math.sin(e*c)/u;return this._w=a*h+this._w*p,this._x=r*h+this._x*p,this._y=i*h+this._y*p,this._z=n*h+this._z*p,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var br=new Tr,wr=new xr;function Tr(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0}Object.assign(Tr.prototype,{isVector3:!0,set:function(t,e,r){return this.x=t,this.y=e,this.z=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(wr.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(wr.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,r=this.y,i=this.z,n=t.elements;return this.x=n[0]*e+n[3]*r+n[6]*i,this.y=n[1]*e+n[4]*r+n[7]*i,this.z=n[2]*e+n[5]*r+n[8]*i,this},applyMatrix4:function(t){var e=this.x,r=this.y,i=this.z,n=t.elements,a=1/(n[3]*e+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*e+n[4]*r+n[8]*i+n[12])*a,this.y=(n[1]*e+n[5]*r+n[9]*i+n[13])*a,this.z=(n[2]*e+n[6]*r+n[10]*i+n[14])*a,this},applyQuaternion:function(t){var e=this.x,r=this.y,i=this.z,n=t.x,a=t.y,o=t.z,s=t.w,l=s*e+a*i-o*r,u=s*r+o*e-n*i,c=s*i+n*r-a*e,h=-n*e-a*r-o*i;return this.x=l*s+h*-n+u*-o-c*-a,this.y=u*s+h*-a+c*-n-l*-o,this.z=c*s+h*-o+l*-a-u*-n,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,r=this.y,i=this.z,n=t.elements;return this.x=n[0]*e+n[4]*r+n[8]*i,this.y=n[1]*e+n[5]*r+n[9]*i,this.z=n[2]*e+n[6]*r+n[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var r=t.x,i=t.y,n=t.z,a=e.x,o=e.y,s=e.z;return this.x=i*s-n*o,this.y=n*a-r*s,this.z=r*o-i*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(t){return br.copy(this).projectOnVector(t),this.sub(br)},reflect:function(t){return this.sub(br.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());0===e&&console.error("THREE.Vector3: angleTo() can't handle zero length vectors.");var r=this.dot(t)/e;return Math.acos(yr.clamp(r,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return e*e+r*r+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,r){var i=Math.sin(e)*t;return this.x=i*Math.sin(r),this.y=Math.cos(e)*t,this.z=i*Math.cos(r),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,r){return this.x=t*Math.sin(e),this.y=r,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=r,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var Sr,Er=new Tr;function Mr(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Mr.prototype,{isMatrix3:!0,set:function(t,e,r,i,n,a,o,s,l){var u=this.elements;return u[0]=t,u[1]=i,u[2]=o,u[3]=e,u[4]=n,u[5]=s,u[6]=r,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(t){for(var e=0,r=t.count;e<r;e++)Er.x=t.getX(e),Er.y=t.getY(e),Er.z=t.getZ(e),Er.applyMatrix3(this),t.setXYZ(e,Er.x,Er.y,Er.z);return t},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,i=e.elements,n=this.elements,a=r[0],o=r[3],s=r[6],l=r[1],u=r[4],c=r[7],h=r[2],p=r[5],d=r[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],_=i[7],x=i[2],b=i[5],w=i[8];return n[0]=a*f+o*g+s*x,n[3]=a*m+o*y+s*b,n[6]=a*v+o*_+s*w,n[1]=l*f+u*g+c*x,n[4]=l*m+u*y+c*b,n[7]=l*v+u*_+c*w,n[2]=h*f+p*g+d*x,n[5]=h*m+p*y+d*b,n[8]=h*v+p*_+d*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],r=t[1],i=t[2],n=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*a*u-e*o*l-r*n*u+r*o*s+i*n*l-i*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=t.elements,i=this.elements,n=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],h=r[7],p=r[8],d=p*l-u*h,f=u*c-p*s,m=h*s-l*c,v=n*d+a*f+o*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return i[0]=d*y,i[1]=(o*h-p*a)*y,i[2]=(u*a-o*l)*y,i[3]=f*y,i[4]=(p*n-o*c)*y,i[5]=(o*s-u*n)*y,i[6]=m*y,i[7]=(a*c-h*n)*y,i[8]=(l*n-a*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,r,i,n,a,o){var s=Math.cos(n),l=Math.sin(n);this.set(r*s,r*l,-r*(s*a+l*o)+a+t,-i*l,i*s,-i*(-l*a+s*o)+o+e,0,0,1)},scale:function(t,e){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=e,r[4]*=e,r[7]*=e,this},rotate:function(t){var e=Math.cos(t),r=Math.sin(t),i=this.elements,n=i[0],a=i[3],o=i[6],s=i[1],l=i[4],u=i[7];return i[0]=e*n+r*s,i[3]=e*a+r*l,i[6]=e*o+r*u,i[1]=-r*n+e*s,i[4]=-r*a+e*l,i[7]=-r*o+e*u,this},translate:function(t,e){var r=this.elements;return r[0]+=t*r[2],r[3]+=t*r[5],r[6]+=t*r[8],r[1]+=e*r[2],r[4]+=e*r[5],r[7]+=e*r[8],this},equals:function(t){for(var e=this.elements,r=t.elements,i=0;i<9;i++)if(e[i]!==r[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;r<9;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}});var Ar={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Sr&&(Sr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Sr.width=t.width,Sr.height=t.height;var r=Sr.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),e=Sr}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},Cr=0;function Pr(t,e,r,i,n,a,o,s,l,u){Object.defineProperty(this,"id",{value:Cr++}),this.uuid=yr.generateUUID(),this.name="",this.image=void 0!==t?t:Pr.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:Pr.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:yt,this.wrapT=void 0!==i?i:yt,this.magFilter=void 0!==n?n:Et,this.minFilter=void 0!==a?a:Ct,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:Ht,this.type=void 0!==s?s:Lt,this.offset=new _r(0,0),this.repeat=new _r(1,1),this.center=new _r(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Mr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:ke,this.version=0,this.onUpdate=null}function Lr(t,e,r,i){this.x=t||0,this.y=e||0,this.z=r||0,this.w=void 0!==i?i:1}function Ir(t,e,r){this.width=t,this.height=e,this.scissor=new Lr(0,0,t,e),this.scissorTest=!1,this.viewport=new Lr(0,0,t,e),r=r||{},this.texture=new Pr(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Et,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function kr(t,e,r){Ir.call(this,t,e,r),this.samples=4}Pr.DEFAULT_IMAGE=void 0,Pr.DEFAULT_MAPPING=ut,Pr.prototype=Object.assign(Object.create(mr.prototype),{constructor:Pr,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=yr.generateUUID()),!e&&void 0===t.images[i.uuid]){var n;if(Array.isArray(i)){n=[];for(var a=0,o=i.length;a<o;a++)n.push(Ar.getDataURL(i[a]))}else n=Ar.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:n}}r.image=i.uuid}return e||(t.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==ut)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case gt:t.x=t.x-Math.floor(t.x);break;case yt:t.x=t.x<0?0:1;break;case _t:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case gt:t.y=t.y-Math.floor(t.y);break;case yt:t.y=t.y<0?0:1;break;case _t:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Pr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(Lr.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(Lr.prototype,{isVector4:!0,set:function(t,e,r,i){return this.x=t,this.y=e,this.z=r,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,r=this.y,i=this.z,n=this.w,a=t.elements;return this.x=a[0]*e+a[4]*r+a[8]*i+a[12]*n,this.y=a[1]*e+a[5]*r+a[9]*i+a[13]*n,this.z=a[2]*e+a[6]*r+a[10]*i+a[14]*n,this.w=a[3]*e+a[7]*r+a[11]*i+a[15]*n,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,r,i,n,a=.01,o=.1,s=t.elements,l=s[0],u=s[4],c=s[8],h=s[1],p=s[5],d=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(u-h)<a&&Math.abs(c-f)<a&&Math.abs(d-m)<a){if(Math.abs(u+h)<o&&Math.abs(c+f)<o&&Math.abs(d+m)<o&&Math.abs(l+p+v-3)<o)return this.set(1,0,0,0),this;e=Math.PI;var g=(l+1)/2,y=(p+1)/2,_=(v+1)/2,x=(u+h)/4,b=(c+f)/4,w=(d+m)/4;return g>y&&g>_?g<a?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(g),i=x/r,n=b/r):y>_?y<a?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(y),r=x/i,n=w/i):_<a?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(_),r=b/n,i=w/n),this.set(r,i,n,e),this}var T=Math.sqrt((m-d)*(m-d)+(c-f)*(c-f)+(h-u)*(h-u));return Math.abs(T)<.001&&(T=1),this.x=(m-d)/T,this.y=(c-f)/T,this.z=(h-u)/T,this.w=Math.acos((l+p+v-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Ir.prototype=Object.assign(Object.create(mr.prototype),{constructor:Ir,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),kr.prototype=Object.assign(Object.create(Ir.prototype),{constructor:kr,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Ir.prototype.copy.call(this,t),this.samples=t.samples,this}});var Rr=new Tr,Or=new Ur,zr=new Tr(0,0,0),Dr=new Tr(1,1,1),Br=new Tr,Fr=new Tr,Nr=new Tr;function Ur(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Ur.prototype,{isMatrix4:!0,set:function(t,e,r,i,n,a,o,s,l,u,c,h,p,d,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=r,v[12]=i,v[1]=n,v[5]=a,v[9]=o,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ur).fromArray(this.elements)},copy:function(t){var e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this},copyPosition:function(t){var e=this.elements,r=t.elements;return e[12]=r[12],e[13]=r[13],e[14]=r[14],this},extractBasis:function(t,e,r){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,r=t.elements,i=1/Rr.setFromMatrixColumn(t,0).length(),n=1/Rr.setFromMatrixColumn(t,1).length(),a=1/Rr.setFromMatrixColumn(t,2).length();return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=0,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=0,e[8]=r[8]*a,e[9]=r[9]*a,e[10]=r[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,r=t.x,i=t.y,n=t.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(i),l=Math.sin(i),u=Math.cos(n),c=Math.sin(n);if("XYZ"===t.order){var h=a*u,p=a*c,d=o*u,f=o*c;e[0]=s*u,e[4]=-s*c,e[8]=l,e[1]=p+d*l,e[5]=h-f*l,e[9]=-o*s,e[2]=f-h*l,e[6]=d+p*l,e[10]=a*s}else if("YXZ"===t.order){var m=s*u,v=s*c,g=l*u,y=l*c;e[0]=m+y*o,e[4]=g*o-v,e[8]=a*l,e[1]=a*c,e[5]=a*u,e[9]=-o,e[2]=v*o-g,e[6]=y+m*o,e[10]=a*s}else if("ZXY"===t.order){m=s*u,v=s*c,g=l*u,y=l*c;e[0]=m-y*o,e[4]=-a*c,e[8]=g+v*o,e[1]=v+g*o,e[5]=a*u,e[9]=y-m*o,e[2]=-a*l,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){h=a*u,p=a*c,d=o*u,f=o*c;e[0]=s*u,e[4]=d*l-p,e[8]=h*l+f,e[1]=s*c,e[5]=f*l+h,e[9]=p*l-d,e[2]=-l,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var _=a*s,x=a*l,b=o*s,w=o*l;e[0]=s*u,e[4]=w-_*c,e[8]=b*c+x,e[1]=c,e[5]=a*u,e[9]=-o*u,e[2]=-l*u,e[6]=x*c+b,e[10]=_-w*c}else if("XZY"===t.order){_=a*s,x=a*l,b=o*s,w=o*l;e[0]=s*u,e[4]=-c,e[8]=l*u,e[1]=_*c+w,e[5]=a*u,e[9]=x*c-b,e[2]=b*c-x,e[6]=o*u,e[10]=w*c+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(zr,t,Dr)},lookAt:function(t,e,r){var i=this.elements;return Nr.subVectors(t,e),0===Nr.lengthSq()&&(Nr.z=1),Nr.normalize(),Br.crossVectors(r,Nr),0===Br.lengthSq()&&(1===Math.abs(r.z)?Nr.x+=1e-4:Nr.z+=1e-4,Nr.normalize(),Br.crossVectors(r,Nr)),Br.normalize(),Fr.crossVectors(Nr,Br),i[0]=Br.x,i[4]=Fr.x,i[8]=Nr.x,i[1]=Br.y,i[5]=Fr.y,i[9]=Nr.y,i[2]=Br.z,i[6]=Fr.z,i[10]=Nr.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,i=e.elements,n=this.elements,a=r[0],o=r[4],s=r[8],l=r[12],u=r[1],c=r[5],h=r[9],p=r[13],d=r[2],f=r[6],m=r[10],v=r[14],g=r[3],y=r[7],_=r[11],x=r[15],b=i[0],w=i[4],T=i[8],S=i[12],E=i[1],M=i[5],A=i[9],C=i[13],P=i[2],L=i[6],I=i[10],k=i[14],R=i[3],O=i[7],z=i[11],D=i[15];return n[0]=a*b+o*E+s*P+l*R,n[4]=a*w+o*M+s*L+l*O,n[8]=a*T+o*A+s*I+l*z,n[12]=a*S+o*C+s*k+l*D,n[1]=u*b+c*E+h*P+p*R,n[5]=u*w+c*M+h*L+p*O,n[9]=u*T+c*A+h*I+p*z,n[13]=u*S+c*C+h*k+p*D,n[2]=d*b+f*E+m*P+v*R,n[6]=d*w+f*M+m*L+v*O,n[10]=d*T+f*A+m*I+v*z,n[14]=d*S+f*C+m*k+v*D,n[3]=g*b+y*E+_*P+x*R,n[7]=g*w+y*M+_*L+x*O,n[11]=g*T+y*A+_*I+x*z,n[15]=g*S+y*C+_*k+x*D,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(t){for(var e=0,r=t.count;e<r;e++)Rr.x=t.getX(e),Rr.y=t.getY(e),Rr.z=t.getZ(e),Rr.applyMatrix4(this),t.setXYZ(e,Rr.x,Rr.y,Rr.z);return t},determinant:function(){var t=this.elements,e=t[0],r=t[4],i=t[8],n=t[12],a=t[1],o=t[5],s=t[9],l=t[13],u=t[2],c=t[6],h=t[10],p=t[14],d=t[3],f=t[7],m=t[11],v=t[15];return d*(+n*s*c-i*l*c-n*o*h+r*l*h+i*o*p-r*s*p)+f*(+e*s*p-e*l*h+n*a*h-i*a*p+i*l*u-n*s*u)+m*(+e*l*c-e*o*p-n*a*c+r*a*p+n*o*u-r*l*u)+v*(-i*o*u-e*s*c+e*o*h+i*a*c-r*a*h+r*s*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,r){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=r),this},getInverse:function(t,e){var r=this.elements,i=t.elements,n=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],c=i[6],h=i[7],p=i[8],d=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],_=i[15],x=d*y*h-g*f*h+g*c*m-u*y*m-d*c*_+u*f*_,b=v*f*h-p*y*h-v*c*m+l*y*m+p*c*_-l*f*_,w=p*g*h-v*d*h+v*u*m-l*g*m-p*u*_+l*d*_,T=v*d*c-p*g*c-v*u*f+l*g*f+p*u*y-l*d*y,S=n*x+a*b+o*w+s*T;if(0===S){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(E);return console.warn(E),this.identity()}var M=1/S;return r[0]=x*M,r[1]=(g*f*s-d*y*s-g*o*m+a*y*m+d*o*_-a*f*_)*M,r[2]=(u*y*s-g*c*s+g*o*h-a*y*h-u*o*_+a*c*_)*M,r[3]=(d*c*s-u*f*s-d*o*h+a*f*h+u*o*m-a*c*m)*M,r[4]=b*M,r[5]=(p*y*s-v*f*s+v*o*m-n*y*m-p*o*_+n*f*_)*M,r[6]=(v*c*s-l*y*s-v*o*h+n*y*h+l*o*_-n*c*_)*M,r[7]=(l*f*s-p*c*s+p*o*h-n*f*h-l*o*m+n*c*m)*M,r[8]=w*M,r[9]=(v*d*s-p*g*s-v*a*m+n*g*m+p*a*_-n*d*_)*M,r[10]=(l*g*s-v*u*s+v*a*h-n*g*h-l*a*_+n*u*_)*M,r[11]=(p*u*s-l*d*s-p*a*h+n*d*h+l*a*m-n*u*m)*M,r[12]=T*M,r[13]=(p*g*o-v*d*o+v*a*f-n*g*f-p*a*y+n*d*y)*M,r[14]=(v*u*o-l*g*o-v*a*c+n*g*c+l*a*y-n*u*y)*M,r[15]=(l*d*o-p*u*o+p*a*c-n*d*c-l*a*f+n*u*f)*M,this},scale:function(t){var e=this.elements,r=t.x,i=t.y,n=t.z;return e[0]*=r,e[4]*=i,e[8]*=n,e[1]*=r,e[5]*=i,e[9]*=n,e[2]*=r,e[6]*=i,e[10]*=n,e[3]*=r,e[7]*=i,e[11]*=n,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,i))},makeTranslation:function(t,e,r){return this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var r=Math.cos(e),i=Math.sin(e),n=1-r,a=t.x,o=t.y,s=t.z,l=n*a,u=n*o;return this.set(l*a+r,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+r,u*s-i*a,0,l*s-i*o,u*s+i*a,n*s*s+r,0,0,0,0,1),this},makeScale:function(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(t,e,r){return this.set(1,e,r,0,t,1,r,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,r){var i=this.elements,n=e._x,a=e._y,o=e._z,s=e._w,l=n+n,u=a+a,c=o+o,h=n*l,p=n*u,d=n*c,f=a*u,m=a*c,v=o*c,g=s*l,y=s*u,_=s*c,x=r.x,b=r.y,w=r.z;return i[0]=(1-(f+v))*x,i[1]=(p+_)*x,i[2]=(d-y)*x,i[3]=0,i[4]=(p-_)*b,i[5]=(1-(h+v))*b,i[6]=(m+g)*b,i[7]=0,i[8]=(d+y)*w,i[9]=(m-g)*w,i[10]=(1-(h+f))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,r){var i=this.elements,n=Rr.set(i[0],i[1],i[2]).length(),a=Rr.set(i[4],i[5],i[6]).length(),o=Rr.set(i[8],i[9],i[10]).length(),s=this.determinant();s<0&&(n=-n),t.x=i[12],t.y=i[13],t.z=i[14],Or.copy(this);var l=1/n,u=1/a,c=1/o;return Or.elements[0]*=l,Or.elements[1]*=l,Or.elements[2]*=l,Or.elements[4]*=u,Or.elements[5]*=u,Or.elements[6]*=u,Or.elements[8]*=c,Or.elements[9]*=c,Or.elements[10]*=c,e.setFromRotationMatrix(Or),r.x=n,r.y=a,r.z=o,this},makePerspective:function(t,e,r,i,n,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*n/(e-t),l=2*n/(r-i),u=(e+t)/(e-t),c=(r+i)/(r-i),h=-(a+n)/(a-n),p=-2*a*n/(a-n);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,r,i,n,a){var o=this.elements,s=1/(e-t),l=1/(r-i),u=1/(a-n),c=(e+t)*s,h=(r+i)*l,p=(a+n)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,r=t.elements,i=0;i<16;i++)if(e[i]!==r[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;r<16;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}});var Vr=new Ur,jr=new xr;function Gr(t,e,r,i){this._x=t||0,this._y=e||0,this._z=r||0,this._order=i||Gr.DefaultOrder}function Hr(){this.mask=1}Gr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Gr.DefaultOrder="XYZ",Object.defineProperties(Gr.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(Gr.prototype,{isEuler:!0,set:function(t,e,r,i){return this._x=t,this._y=e,this._z=r,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,r){var i=yr.clamp,n=t.elements,a=n[0],o=n[4],s=n[8],l=n[1],u=n[5],c=n[9],h=n[2],p=n[6],d=n[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(p,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===e?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==r&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,r){return Vr.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Vr,e,r)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return jr.setFromEuler(this),this.setFromQuaternion(jr,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new Tr(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(Hr.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!==(this.mask&t.mask)}});var Wr=0,qr=new Tr,Xr=new xr,$r=new Ur,Yr=new Tr,Zr=new Tr,Jr=new Tr,Kr=new xr,Qr=new Tr(1,0,0),ti=new Tr(0,1,0),ei=new Tr(0,0,1),ri={type:"added"},ii={type:"removed"};function ni(){Object.defineProperty(this,"id",{value:Wr++}),this.uuid=yr.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ni.DefaultUp.clone();var t=new Tr,e=new Gr,r=new xr,i=new Tr(1,1,1);function n(){r.setFromEuler(e,!1)}function a(){e.setFromQuaternion(r,void 0,!1)}e._onChange(n),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ur},normalMatrix:{value:new Mr}}),this.matrix=new Ur,this.matrixWorld=new Ur,this.matrixAutoUpdate=ni.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Hr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function ai(){ni.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}ni.DefaultUp=new Tr(0,1,0),ni.DefaultMatrixAutoUpdate=!0,ni.prototype=Object.assign(Object.create(mr.prototype),{constructor:ni,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Xr.setFromAxisAngle(t,e),this.quaternion.multiply(Xr),this},rotateOnWorldAxis:function(t,e){return Xr.setFromAxisAngle(t,e),this.quaternion.premultiply(Xr),this},rotateX:function(t){return this.rotateOnAxis(Qr,t)},rotateY:function(t){return this.rotateOnAxis(ti,t)},rotateZ:function(t){return this.rotateOnAxis(ei,t)},translateOnAxis:function(t,e){return qr.copy(t).applyQuaternion(this.quaternion),this.position.add(qr.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Qr,t)},translateY:function(t){return this.translateOnAxis(ti,t)},translateZ:function(t){return this.translateOnAxis(ei,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4($r.getInverse(this.matrixWorld))},lookAt:function(t,e,r){t.isVector3?Yr.copy(t):Yr.set(t,e,r);var i=this.parent;this.updateWorldMatrix(!0,!1),Zr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$r.lookAt(Zr,Yr,this.up):$r.lookAt(Yr,Zr,this.up),this.quaternion.setFromRotationMatrix($r),i&&($r.extractRotation(i.matrixWorld),Xr.setFromRotationMatrix($r),this.quaternion.premultiply(Xr.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ri)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var r=this.children.indexOf(t);return-1!==r&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(ii)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),$r.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),$r.multiply(t.parent.matrixWorld)),t.applyMatrix($r),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var r=0,i=this.children.length;r<i;r++){var n=this.children[r],a=n.getObjectByProperty(t,e);if(void 0!==a)return a}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Tr),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new xr),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Zr,t,Jr),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Tr),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Zr,Kr,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Tr),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,n=0,a=i.length;n<a;n++)i[n].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"===typeof t,r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function n(e,r){return void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t)),r.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Pe&&(i.drawMode=this.drawMode),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=n(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];n(t.shapes,u)}else n(t.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,l=this.material.length;s<l;s++)c.push(n(t.materials,this.material[s]));i.material=c}else i.material=n(t.materials,this.material);if(this.children.length>0){i.children=[];for(s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(t).object)}if(e){var h=m(t.geometries),p=m(t.materials),d=m(t.textures),f=m(t.images);o=m(t.shapes);h.length>0&&(r.geometries=h),p.length>0&&(r.materials=p),d.length>0&&(r.textures=d),f.length>0&&(r.images=f),o.length>0&&(r.shapes=o)}return r.object=i,r;function m(t){var e=[];for(var r in t){var i=t[r];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var r=0;r<t.children.length;r++){var i=t.children[r];this.add(i.clone())}return this}}),ai.prototype=Object.assign(Object.create(ni.prototype),{constructor:ai,isScene:!0,copy:function(t,e){return ni.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=ni.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var oi=[new Tr,new Tr,new Tr,new Tr,new Tr,new Tr,new Tr,new Tr],si=new Tr,li=new Tr,ui=new Tr,ci=new Tr,hi=new Tr,pi=new Tr,di=new Tr,fi=new Tr,mi=new Tr,vi=new Tr,gi=new Tr;function yi(t,e){this.min=void 0!==t?t:new Tr(1/0,1/0,1/0),this.max=void 0!==e?e:new Tr(-1/0,-1/0,-1/0)}function _i(t,e,r,i,n){var a,o;for(a=0,o=t.length-3;a<=o;a+=3){gi.fromArray(t,a);var s=n.x*Math.abs(gi.x)+n.y*Math.abs(gi.y)+n.z*Math.abs(gi.z),l=e.dot(gi),u=r.dot(gi),c=i.dot(gi);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}Object.assign(yi.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,o=-1/0,s=0,l=t.length;s<l;s+=3){var u=t[s],c=t[s+1],h=t[s+2];u<e&&(e=u),c<r&&(r=c),h<i&&(i=h),u>n&&(n=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,r,i),this.max.set(n,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,o=-1/0,s=0,l=t.count;s<l;s++){var u=t.getX(s),c=t.getY(s),h=t.getZ(s);u<e&&(e=u),c<r&&(r=c),h<i&&(i=h),u>n&&(n=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,r,i),this.max.set(n,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var r=si.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Tr),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Tr),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){var e,r;t.updateWorldMatrix(!1,!1);var i=t.geometry;if(void 0!==i)if(i.isGeometry){var n=i.vertices;for(e=0,r=n.length;e<r;e++)si.copy(n[e]),si.applyMatrix4(t.matrixWorld),this.expandByPoint(si)}else if(i.isBufferGeometry){var a=i.attributes.position;if(void 0!==a)for(e=0,r=a.count;e<r;e++)si.fromBufferAttribute(a,e).applyMatrix4(t.matrixWorld),this.expandByPoint(si)}var o=t.children;for(e=0,r=o.length;e<r;e++)this.expandByObject(o[e]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Tr),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,si),si.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,r;return t.normal.x>0?(e=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),e<=-t.constant&&r>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(fi),mi.subVectors(this.max,fi),li.subVectors(t.a,fi),ui.subVectors(t.b,fi),ci.subVectors(t.c,fi),hi.subVectors(ui,li),pi.subVectors(ci,ui),di.subVectors(li,ci);var e=[0,-hi.z,hi.y,0,-pi.z,pi.y,0,-di.z,di.y,hi.z,0,-hi.x,pi.z,0,-pi.x,di.z,0,-di.x,-hi.y,hi.x,0,-pi.y,pi.x,0,-di.y,di.x,0];return!!_i(e,li,ui,ci,mi)&&(e=[1,0,0,0,1,0,0,0,1],!!_i(e,li,ui,ci,mi)&&(vi.crossVectors(hi,pi),e=[vi.x,vi.y,vi.z],_i(e,li,ui,ci,mi)))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Tr),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){var e=si.copy(t).clamp(this.min,this.max);return e.sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(si).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(oi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),oi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),oi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),oi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),oi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),oi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),oi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),oi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(oi),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var xi=new yi;function bi(t,e){this.center=void 0!==t?t:new Tr,this.radius=void 0!==e?e:0}Object.assign(bi.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var r=this.center;void 0!==e?r.copy(e):xi.setFromPoints(t).getCenter(r);for(var i=0,n=0,a=t.length;n<a;n++)i=Math.max(i,r.distanceToSquared(t[n]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var r=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Tr),e.copy(t),r>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new yi),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var wi=new Tr,Ti=new Tr,Si=new Tr,Ei=new Tr,Mi=new Tr,Ai=new Tr,Ci=new Tr;function Pi(t,e){this.origin=void 0!==t?t:new Tr,this.direction=void 0!==e?e:new Tr}Object.assign(Pi.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Tr),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,wi)),this},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Tr),e.subVectors(t,this.origin);var r=e.dot(this.direction);return r<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=wi.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(wi.copy(this.direction).multiplyScalar(e).add(this.origin),wi.distanceToSquared(t))},distanceSqToSegment:function(t,e,r,i){Ti.copy(t).add(e).multiplyScalar(.5),Si.copy(e).sub(t).normalize(),Ei.copy(this.origin).sub(Ti);var n,a,o,s,l=.5*t.distanceTo(e),u=-this.direction.dot(Si),c=Ei.dot(this.direction),h=-Ei.dot(Si),p=Ei.lengthSq(),d=Math.abs(1-u*u);if(d>0)if(n=u*h-c,a=u*c-h,s=l*d,n>=0)if(a>=-s)if(a<=s){var f=1/d;n*=f,a*=f,o=n*(n+u*a+2*c)+a*(u*n+a+2*h)+p}else a=l,n=Math.max(0,-(u*a+c)),o=-n*n+a*(a+2*h)+p;else a=-l,n=Math.max(0,-(u*a+c)),o=-n*n+a*(a+2*h)+p;else a<=-s?(n=Math.max(0,-(-u*l+c)),a=n>0?-l:Math.min(Math.max(-l,-h),l),o=-n*n+a*(a+2*h)+p):a<=s?(n=0,a=Math.min(Math.max(-l,-h),l),o=a*(a+2*h)+p):(n=Math.max(0,-(u*l+c)),a=n>0?l:Math.min(Math.max(-l,-h),l),o=-n*n+a*(a+2*h)+p);else a=u>0?-l:l,n=Math.max(0,-(u*a+c)),o=-n*n+a*(a+2*h)+p;return r&&r.copy(this.direction).multiplyScalar(n).add(this.origin),i&&i.copy(Si).multiplyScalar(a).add(Ti),o},intersectSphere:function(t,e){wi.subVectors(t.center,this.origin);var r=wi.dot(this.direction),i=wi.dot(wi)-r*r,n=t.radius*t.radius;if(i>n)return null;var a=Math.sqrt(n-i),o=r-a,s=r+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(t.normal)+t.constant)/e;return r>=0?r:null},intersectPlane:function(t,e){var r=this.distanceToPlane(t);return null===r?null:this.at(r,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var r=t.normal.dot(this.direction);return r*e<0},intersectBox:function(t,e){var r,i,n,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(r=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(r=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),u>=0?(n=(t.min.y-h.y)*u,a=(t.max.y-h.y)*u):(n=(t.max.y-h.y)*u,a=(t.min.y-h.y)*u),r>a||n>i?null:((n>r||r!==r)&&(r=n),(a<i||i!==i)&&(i=a),c>=0?(o=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(o=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),r>s||o>i?null:((o>r||r!==r)&&(r=o),(s<i||i!==i)&&(i=s),i<0?null:this.at(r>=0?r:i,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,wi)},intersectTriangle:function(t,e,r,i,n){Mi.subVectors(e,t),Ai.subVectors(r,t),Ci.crossVectors(Mi,Ai);var a,o=this.direction.dot(Ci);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ei.subVectors(this.origin,t);var s=a*this.direction.dot(Ai.crossVectors(Ei,Ai));if(s<0)return null;var l=a*this.direction.dot(Mi.cross(Ei));if(l<0)return null;if(s+l>o)return null;var u=-a*Ei.dot(Ci);return u<0?null:this.at(u/o,n)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var Li=new Tr,Ii=new Tr,ki=new Mr;function Ri(t,e){this.normal=void 0!==t?t:new Tr(1,0,0),this.constant=void 0!==e?e:0}Object.assign(Ri.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,r,i){return this.normal.set(t,e,r),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,r){var i=Li.subVectors(r,e).cross(Ii.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Tr),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Tr);var r=t.delta(Li),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var n=-(t.start.dot(this.normal)+this.constant)/i;return n<0||n>1?void 0:e.copy(r).multiplyScalar(n).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return e<0&&r>0||r<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Tr),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var r=e||ki.getNormalMatrix(t),i=this.coplanarPoint(Li).applyMatrix4(t),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Oi=new Tr,zi=new Tr,Di=new Tr,Bi=new Tr,Fi=new Tr,Ni=new Tr,Ui=new Tr,Vi=new Tr,ji=new Tr,Gi=new Tr;function Hi(t,e,r){this.a=void 0!==t?t:new Tr,this.b=void 0!==e?e:new Tr,this.c=void 0!==r?r:new Tr}Object.assign(Hi,{getNormal:function(t,e,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Tr),i.subVectors(r,e),Oi.subVectors(t,e),i.cross(Oi);var n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)},getBarycoord:function(t,e,r,i,n){Oi.subVectors(i,e),zi.subVectors(r,e),Di.subVectors(t,e);var a=Oi.dot(Oi),o=Oi.dot(zi),s=Oi.dot(Di),l=zi.dot(zi),u=zi.dot(Di),c=a*l-o*o;if(void 0===n&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),n=new Tr),0===c)return n.set(-2,-1,-1);var h=1/c,p=(l*s-o*u)*h,d=(a*u-o*s)*h;return n.set(1-p-d,d,p)},containsPoint:function(t,e,r,i){return Hi.getBarycoord(t,e,r,i,Bi),Bi.x>=0&&Bi.y>=0&&Bi.x+Bi.y<=1},getUV:function(t,e,r,i,n,a,o,s){return this.getBarycoord(t,e,r,i,Bi),s.set(0,0),s.addScaledVector(n,Bi.x),s.addScaledVector(a,Bi.y),s.addScaledVector(o,Bi.z),s},isFrontFacing:function(t,e,r,i){return Oi.subVectors(r,e),zi.subVectors(t,e),Oi.cross(zi).dot(i)<0}}),Object.assign(Hi.prototype,{set:function(t,e,r){return this.a.copy(t),this.b.copy(e),this.c.copy(r),this},setFromPointsAndIndices:function(t,e,r,i){return this.a.copy(t[e]),this.b.copy(t[r]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Oi.subVectors(this.c,this.b),zi.subVectors(this.a,this.b),.5*Oi.cross(zi).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Tr),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Hi.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Ri),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Hi.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,r,i,n){return Hi.getUV(t,this.a,this.b,this.c,e,r,i,n)},containsPoint:function(t){return Hi.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Hi.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Tr);var r,i,n=this.a,a=this.b,o=this.c;Fi.subVectors(a,n),Ni.subVectors(o,n),Vi.subVectors(t,n);var s=Fi.dot(Vi),l=Ni.dot(Vi);if(s<=0&&l<=0)return e.copy(n);ji.subVectors(t,a);var u=Fi.dot(ji),c=Ni.dot(ji);if(u>=0&&c<=u)return e.copy(a);var h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return r=s/(s-u),e.copy(n).addScaledVector(Fi,r);Gi.subVectors(t,o);var p=Fi.dot(Gi),d=Ni.dot(Gi);if(d>=0&&p<=d)return e.copy(o);var f=p*l-s*d;if(f<=0&&l>=0&&d<=0)return i=l/(l-d),e.copy(n).addScaledVector(Ni,i);var m=u*d-p*c;if(m<=0&&c-u>=0&&p-d>=0)return Ui.subVectors(o,a),i=(c-u)/(c-u+(p-d)),e.copy(a).addScaledVector(Ui,i);var v=1/(m+f+h);return r=f*v,i=h*v,e.copy(n).addScaledVector(Fi,r).addScaledVector(Ni,i)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Wi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},qi={h:0,s:0,l:0},Xi={h:0,s:0,l:0};function $i(t,e,r){return void 0===e&&void 0===r?this.set(t):this.setRGB(t,e,r)}function Yi(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+6*(e-t)*(2/3-r):t}function Zi(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Ji(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function Ki(t,e,r,i,n,a){this.a=t,this.b=e,this.c=r,this.normal=i&&i.isVector3?i:new Tr,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new $i,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==a?a:0}Object.assign($i.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,r){return this.r=t,this.g=e,this.b=r,this},setHSL:function(t,e,r){if(t=yr.euclideanModulo(t,1),e=yr.clamp(e,0,1),r=yr.clamp(r,0,1),0===e)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+e):r+e-r*e,n=2*r-i;this.r=Yi(n,i,t+1/3),this.g=Yi(n,i,t),this.b=Yi(n,i,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,n=r[1],a=r[2];switch(n){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(o,s,l)}break}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u=r[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function(t){var e=Wi[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var r=e>0?1/e:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=Zi(t.r),this.g=Zi(t.g),this.b=Zi(t.b),this},copyLinearToSRGB:function(t){return this.r=Ji(t.r),this.g=Ji(t.g),this.b=Ji(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,r,i=this.r,n=this.g,a=this.b,o=Math.max(i,n,a),s=Math.min(i,n,a),l=(s+o)/2;if(s===o)e=0,r=0;else{var u=o-s;switch(r=l<=.5?u/(o+s):u/(2-o-s),o){case i:e=(n-a)/u+(n<a?6:0);break;case n:e=(a-i)/u+2;break;case a:e=(i-n)/u+4;break}e/=6}return t.h=e,t.s=r,t.l=l,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,r){return this.getHSL(qi),qi.h+=t,qi.s+=e,qi.l+=r,this.setHSL(qi.h,qi.s,qi.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(qi),t.getHSL(Xi);var r=yr.lerp(qi.h,Xi.h,e),i=yr.lerp(qi.s,Xi.s,e),n=yr.lerp(qi.l,Xi.l,e);return this.setHSL(r,i,n),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),$i.NAMES=Wi,Object.assign(Ki.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,r=t.vertexNormals.length;e<r;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,r=t.vertexColors.length;e<r;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Qi=0;function tn(){Object.defineProperty(this,"id",{value:Qi++}),this.uuid=yr.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=E,this.side=v,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=b,this.opacity=1,this.transparent=!1,this.blendSrc=N,this.blendDst=U,this.blendEquation=L,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Y,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ar,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=We,this.stencilZFail=We,this.stencilZPass=We,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.needsUpdate=!0}function en(t){tn.call(this),this.type="MeshBasicMaterial",this.color=new $i(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}function rn(t,e,r){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===r,this.usage=or,this.updateRange={offset:0,count:-1},this.version=0}function nn(t,e,r){rn.call(this,new Int8Array(t),e,r)}function an(t,e,r){rn.call(this,new Uint8Array(t),e,r)}function on(t,e,r){rn.call(this,new Uint8ClampedArray(t),e,r)}function sn(t,e,r){rn.call(this,new Int16Array(t),e,r)}function ln(t,e,r){rn.call(this,new Uint16Array(t),e,r)}function un(t,e,r){rn.call(this,new Int32Array(t),e,r)}function cn(t,e,r){rn.call(this,new Uint32Array(t),e,r)}function hn(t,e,r){rn.call(this,new Float32Array(t),e,r)}function pn(t,e,r){rn.call(this,new Float64Array(t),e,r)}function dn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function fn(t){if(0===t.length)return-1/0;for(var e=t[0],r=1,i=t.length;r<i;++r)t[r]>e&&(e=t[r]);return e}tn.prototype=Object.assign(Object.create(mr.prototype),{constructor:tn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var r=t[e];if(void 0!==r)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[e]=r:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===_;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var r in t){var i=t[r];delete i.metadata,e.push(i)}return e}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==E&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==v&&(r.side=this.side),this.vertexColors!==b&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.morphNormals&&(r.morphNormals=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),e){var n=i(t.textures),a=i(t.images);n.length>0&&(r.textures=n),a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexTangents=t.vertexTangents,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,r=null;if(null!==e){var i=e.length;r=new Array(i);for(var n=0;n!==i;++n)r[n]=e[n].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),en.prototype=Object.create(tn.prototype),en.prototype.constructor=en,en.prototype.isMeshBasicMaterial=!0,en.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.defineProperty(rn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(rn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,r){t*=this.itemSize,r*=e.itemSize;for(var i=0,n=this.itemSize;i<n;i++)this.array[t+i]=e.array[r+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,r=0,i=0,n=t.length;i<n;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new $i),e[r++]=a.r,e[r++]=a.g,e[r++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,r=0,i=0,n=t.length;i<n;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new _r),e[r++]=a.x,e[r++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,r=0,i=0,n=t.length;i<n;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Tr),e[r++]=a.x,e[r++]=a.y,e[r++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,r=0,i=0,n=t.length;i<n;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Lr),e[r++]=a.x,e[r++]=a.y,e[r++]=a.z,e[r++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this},setXYZ:function(t,e,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this},setXYZW:function(t,e,r,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this.array[t+3]=n,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),nn.prototype=Object.create(rn.prototype),nn.prototype.constructor=nn,an.prototype=Object.create(rn.prototype),an.prototype.constructor=an,on.prototype=Object.create(rn.prototype),on.prototype.constructor=on,sn.prototype=Object.create(rn.prototype),sn.prototype.constructor=sn,ln.prototype=Object.create(rn.prototype),ln.prototype.constructor=ln,un.prototype=Object.create(rn.prototype),un.prototype.constructor=un,cn.prototype=Object.create(rn.prototype),cn.prototype.constructor=cn,hn.prototype=Object.create(rn.prototype),hn.prototype.constructor=hn,pn.prototype=Object.create(rn.prototype),pn.prototype.constructor=pn,Object.assign(dn.prototype,{computeGroups:function(t){for(var e,r=[],i=void 0,n=t.faces,a=0;a<n.length;a++){var o=n[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,r.push(e)),e={start:3*a,materialIndex:i})}void 0!==e&&(e.count=3*a-e.start,r.push(e)),this.groups=r},fromGeometry:function(t){var e,r=t.faces,i=t.vertices,n=t.faceVertexUvs,a=n[0]&&n[0].length>0,o=n[1]&&n[1].length>0,s=t.morphTargets,l=s.length;if(l>0){e=[];for(var u=0;u<l;u++)e[u]={name:s[u].name,data:[]};this.morphTargets.position=e}var c,h=t.morphNormals,p=h.length;if(p>0){c=[];for(u=0;u<p;u++)c[u]={name:h[u].name,data:[]};this.morphTargets.normal=c}var d=t.skinIndices,f=t.skinWeights,m=d.length===i.length,v=f.length===i.length;i.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<r.length;u++){var g=r[u];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=g.normal;this.normals.push(_,_,_)}var x=g.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var b=g.color;this.colors.push(b,b,b)}if(!0===a){var w=n[0][u];void 0!==w?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new _r,new _r,new _r))}if(!0===o){w=n[1][u];void 0!==w?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new _r,new _r,new _r))}for(var T=0;T<l;T++){var S=s[T].vertices;e[T].data.push(S[g.a],S[g.b],S[g.c])}for(T=0;T<p;T++){var E=h[T].vertexNormals[u];c[T].data.push(E.a,E.b,E.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var mn=1,vn=new Ur,gn=new ni,yn=new Tr,_n=new yi,xn=new yi,bn=new Tr;function wn(){Object.defineProperty(this,"id",{value:mn+=2}),this.uuid=yr.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}wn.prototype=Object.assign(Object.create(mr.prototype),{constructor:wn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(fn(t)>65535?cn:ln)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,r){this.groups.push({start:t,count:e,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){var i=(new Mr).getNormalMatrix(t);i.applyToBufferAttribute(r),r.needsUpdate=!0}var n=this.attributes.tangent;if(void 0!==n){i=(new Mr).getNormalMatrix(t);i.applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return vn.makeRotationX(t),this.applyMatrix(vn),this},rotateY:function(t){return vn.makeRotationY(t),this.applyMatrix(vn),this},rotateZ:function(t){return vn.makeRotationZ(t),this.applyMatrix(vn),this},translate:function(t,e,r){return vn.makeTranslation(t,e,r),this.applyMatrix(vn),this},scale:function(t,e,r){return vn.makeScale(t,e,r),this.applyMatrix(vn),this},lookAt:function(t){return gn.lookAt(t),gn.updateMatrix(),this.applyMatrix(gn.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(yn).negate(),this.translate(yn.x,yn.y,yn.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var r=new hn(3*e.vertices.length,3),i=new hn(3*e.colors.length,3);if(this.setAttribute("position",r.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var n=new hn(e.lineDistances.length,1);this.setAttribute("lineDistance",n.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],r=0,i=t.length;r<i;r++){var n=t[r];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new hn(e,3)),this},updateFromObject:function(t){var e,r=t.geometry;if(t.isMesh){var i=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(i=void 0,r.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(r);i.verticesNeedUpdate=r.verticesNeedUpdate,i.normalsNeedUpdate=r.normalsNeedUpdate,i.colorsNeedUpdate=r.colorsNeedUpdate,i.uvsNeedUpdate=r.uvsNeedUpdate,i.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=i}return!0===r.verticesNeedUpdate&&(e=this.attributes.position,void 0!==e&&(e.copyVector3sArray(r.vertices),e.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(e=this.attributes.normal,void 0!==e&&(e.copyVector3sArray(r.normals),e.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(e=this.attributes.color,void 0!==e&&(e.copyColorsArray(r.colors),e.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(e=this.attributes.uv,void 0!==e&&(e.copyVector2sArray(r.uvs),e.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(e=this.attributes.lineDistance,void 0!==e&&(e.copyArray(r.lineDistances),e.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(t.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new dn).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new rn(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var r=new Float32Array(3*t.normals.length);this.setAttribute("normal",new rn(r,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.setAttribute("color",new rn(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var n=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new rn(n,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new rn(a,2).copyVector2sArray(t.uvs2))}for(var o in this.groups=t.groups,t.morphTargets){for(var s=[],l=t.morphTargets[o],u=0,c=l.length;u<c;u++){var h=l[u],p=new hn(3*h.data.length,3);p.name=h.name,s.push(p.copyVector3sArray(h.data))}this.morphAttributes[o]=s}if(t.skinIndices.length>0){var d=new hn(4*t.skinIndices.length,4);this.setAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new hn(4*t.skinWeights.length,4);this.setAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new yi);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var r=0,i=e.length;r<i;r++){var n=e[r];_n.setFromBufferAttribute(n),this.boundingBox.expandByPoint(_n.min),this.boundingBox.expandByPoint(_n.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new bi);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var r=this.boundingSphere.center;if(_n.setFromBufferAttribute(t),e)for(var i=0,n=e.length;i<n;i++){var a=e[i];xn.setFromBufferAttribute(a),_n.expandByPoint(xn.min),_n.expandByPoint(xn.max)}_n.getCenter(r);var o=0;for(i=0,n=t.count;i<n;i++)bn.fromBufferAttribute(t,i),o=Math.max(o,r.distanceToSquared(bn));if(e)for(i=0,n=e.length;i<n;i++){a=e[i];for(var s=0,l=a.count;s<l;s++)bn.fromBufferAttribute(a,s),o=Math.max(o,r.distanceToSquared(bn))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var r=e.position.array;if(void 0===e.normal)this.setAttribute("normal",new rn(new Float32Array(r.length),3));else for(var i=e.normal.array,n=0,a=i.length;n<a;n++)i[n]=0;var o,s,l,u=e.normal.array,c=new Tr,h=new Tr,p=new Tr,d=new Tr,f=new Tr;if(t){var m=t.array;for(n=0,a=t.count;n<a;n+=3)o=3*m[n+0],s=3*m[n+1],l=3*m[n+2],c.fromArray(r,o),h.fromArray(r,s),p.fromArray(r,l),d.subVectors(p,h),f.subVectors(c,h),d.cross(f),u[o]+=d.x,u[o+1]+=d.y,u[o+2]+=d.z,u[s]+=d.x,u[s+1]+=d.y,u[s+2]+=d.z,u[l]+=d.x,u[l+1]+=d.y,u[l+2]+=d.z}else for(n=0,a=r.length;n<a;n+=9)c.fromArray(r,n),h.fromArray(r,n+3),p.fromArray(r,n+6),d.subVectors(p,h),f.subVectors(c,h),d.cross(f),u[n]=d.x,u[n+1]=d.y,u[n+2]=d.z,u[n+3]=d.x,u[n+4]=d.y,u[n+5]=d.z,u[n+6]=d.x,u[n+7]=d.y,u[n+8]=d.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var i in r)if(void 0!==t.attributes[i])for(var n=r[i],a=n.array,o=t.attributes[i],s=o.array,l=o.itemSize*e,u=Math.min(s.length,a.length-l),c=0,h=l;c<u;c++,h++)a[h]=s[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,r=t.count;e<r;e++)bn.x=t.getX(e),bn.y=t.getY(e),bn.z=t.getZ(e),bn.normalize(),t.setXYZ(e,bn.x,bn.y,bn.z)},toNonIndexed:function(){function t(t,e){for(var r=t.array,i=t.itemSize,n=new r.constructor(e.length*i),a=0,o=0,s=0,l=e.length;s<l;s++){a=e[s]*i;for(var u=0;u<i;u++)n[o++]=r[a++]}return new rn(n,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new wn,r=this.index.array,i=this.attributes;for(var n in i){var a=i[n],o=t(a,r);e.setAttribute(n,o)}var s=this.morphAttributes;for(n in s){for(var l=[],u=s[n],c=0,h=u.length;c<h;c++){a=u[c],o=t(a,r);l.push(o)}e.morphAttributes[n]=l}for(var p=this.groups,d=(c=0,p.length);c<d;c++){var f=p[c];e.addGroup(f.start,f.count,f.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var r in e)void 0!==e[r]&&(t[r]=e[r]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var n=this.attributes;for(var r in n){var a=n[r],o=a.toJSON();""!==a.name&&(o.name=a.name),t.data.attributes[r]=o}var s={},l=!1;for(var r in this.morphAttributes){for(var u=this.morphAttributes[r],c=[],h=0,p=u.length;h<p;h++){a=u[h],o=a.toJSON();""!==a.name&&(o.name=a.name),c.push(o)}c.length>0&&(s[r]=c,l=!0)}l&&(t.data.morphAttributes=s);var d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));var f=this.boundingSphere;return null!==f&&(t.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),t},clone:function(){return(new wn).copy(this)},copy:function(t){var e,r,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone());var a=t.attributes;for(e in a){var o=a[e];this.setAttribute(e,o.clone())}var s=t.morphAttributes;for(e in s){var l=[],u=s[e];for(r=0,i=u.length;r<i;r++)l.push(u[r].clone());this.morphAttributes[e]=l}var c=t.groups;for(r=0,i=c.length;r<i;r++){var h=c[r];this.addGroup(h.start,h.count,h.materialIndex)}var p=t.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Tn=new Ur,Sn=new Pi,En=new bi,Mn=new Tr,An=new Tr,Cn=new Tr,Pn=new Tr,Ln=new Tr,In=new Tr,kn=new Tr,Rn=new Tr,On=new Tr,zn=new _r,Dn=new _r,Bn=new _r,Fn=new Tr,Nn=new Tr;function Un(t,e){ni.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new wn,this.material=void 0!==e?e:new en({color:16777215*Math.random()}),this.drawMode=Pe,this.updateMorphTargets()}function Vn(t,e,r,i,n,a,o,s){var l;if(l=e.side===g?i.intersectTriangle(o,a,n,!0,s):i.intersectTriangle(n,a,o,e.side!==y,s),null===l)return null;Nn.copy(s),Nn.applyMatrix4(t.matrixWorld);var u=r.ray.origin.distanceTo(Nn);return u<r.near||u>r.far?null:{distance:u,point:Nn.clone(),object:t}}function jn(t,e,r,i,n,a,o,s,l,u,c){Mn.fromBufferAttribute(n,l),An.fromBufferAttribute(n,u),Cn.fromBufferAttribute(n,c);var h=t.morphTargetInfluences;if(e.morphTargets&&a&&h){kn.set(0,0,0),Rn.set(0,0,0),On.set(0,0,0);for(var p=0,d=a.length;p<d;p++){var f=h[p],m=a[p];0!==f&&(Pn.fromBufferAttribute(m,l),Ln.fromBufferAttribute(m,u),In.fromBufferAttribute(m,c),kn.addScaledVector(Pn.sub(Mn),f),Rn.addScaledVector(Ln.sub(An),f),On.addScaledVector(In.sub(Cn),f))}Mn.add(kn),An.add(Rn),Cn.add(On)}var v=Vn(t,e,r,i,Mn,An,Cn,Fn);if(v){o&&(zn.fromBufferAttribute(o,l),Dn.fromBufferAttribute(o,u),Bn.fromBufferAttribute(o,c),v.uv=Hi.getUV(Fn,Mn,An,Cn,zn,Dn,Bn,new _r)),s&&(zn.fromBufferAttribute(s,l),Dn.fromBufferAttribute(s,u),Bn.fromBufferAttribute(s,c),v.uv2=Hi.getUV(Fn,Mn,An,Cn,zn,Dn,Bn,new _r));var g=new Ki(l,u,c);Hi.getNormal(Mn,An,Cn,g.normal),v.face=g}return v}Un.prototype=Object.assign(Object.create(ni.prototype),{constructor:Un,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return ni.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,r,i=this.geometry;if(i.isBufferGeometry){var n=i.morphAttributes,a=Object.keys(n);if(a.length>0){var o=n[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)r=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var r,i=this.geometry,n=this.material,a=this.matrixWorld;if(void 0!==n&&(null===i.boundingSphere&&i.computeBoundingSphere(),En.copy(i.boundingSphere),En.applyMatrix4(a),!1!==t.ray.intersectsSphere(En)&&(Tn.getInverse(a),Sn.copy(t.ray).applyMatrix4(Tn),null===i.boundingBox||!1!==Sn.intersectsBox(i.boundingBox))))if(this.drawMode===Pe){if(i.isBufferGeometry){var o,s,l,u,c,h,p,d,f,m,v,g=i.index,y=i.attributes.position,_=i.morphAttributes.position,x=i.attributes.uv,b=i.attributes.uv2,w=i.groups,T=i.drawRange;if(null!==g)if(Array.isArray(n))for(u=0,h=w.length;u<h;u++)for(d=w[u],f=n[d.materialIndex],m=Math.max(d.start,T.start),v=Math.min(d.start+d.count,T.start+T.count),c=m,p=v;c<p;c+=3)o=g.getX(c),s=g.getX(c+1),l=g.getX(c+2),r=jn(this,f,t,Sn,y,_,x,b,o,s,l),r&&(r.faceIndex=Math.floor(c/3),r.face.materialIndex=d.materialIndex,e.push(r));else for(m=Math.max(0,T.start),v=Math.min(g.count,T.start+T.count),u=m,h=v;u<h;u+=3)o=g.getX(u),s=g.getX(u+1),l=g.getX(u+2),r=jn(this,n,t,Sn,y,_,x,b,o,s,l),r&&(r.faceIndex=Math.floor(u/3),e.push(r));else if(void 0!==y)if(Array.isArray(n))for(u=0,h=w.length;u<h;u++)for(d=w[u],f=n[d.materialIndex],m=Math.max(d.start,T.start),v=Math.min(d.start+d.count,T.start+T.count),c=m,p=v;c<p;c+=3)o=c,s=c+1,l=c+2,r=jn(this,f,t,Sn,y,_,x,b,o,s,l),r&&(r.faceIndex=Math.floor(c/3),r.face.materialIndex=d.materialIndex,e.push(r));else for(m=Math.max(0,T.start),v=Math.min(y.count,T.start+T.count),u=m,h=v;u<h;u+=3)o=u,s=u+1,l=u+2,r=jn(this,n,t,Sn,y,_,x,b,o,s,l),r&&(r.faceIndex=Math.floor(u/3),e.push(r))}else if(i.isGeometry){var S,E,M,A,C=Array.isArray(n),P=i.vertices,L=i.faces,I=i.faceVertexUvs[0];I.length>0&&(A=I);for(var k=0,R=L.length;k<R;k++){var O=L[k],z=C?n[O.materialIndex]:n;if(void 0!==z&&(S=P[O.a],E=P[O.b],M=P[O.c],r=Vn(this,z,t,Sn,S,E,M,Fn),r)){if(A&&A[k]){var D=A[k];zn.copy(D[0]),Dn.copy(D[1]),Bn.copy(D[2]),r.uv=Hi.getUV(Fn,S,E,M,zn,Dn,Bn,new _r)}r.face=O,r.faceIndex=k,e.push(r)}}}}else console.warn("THREE.Mesh: TriangleStripDrawMode and TriangleFanDrawMode are not supported by .raycast().")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Gn=0,Hn=new Ur,Wn=new ni,qn=new Tr;function Xn(){Object.defineProperty(this,"id",{value:Gn+=2}),this.uuid=yr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Xn.prototype=Object.assign(Object.create(mr.prototype),{constructor:Xn,isGeometry:!0,applyMatrix:function(t){for(var e=(new Mr).getNormalMatrix(t),r=0,i=this.vertices.length;r<i;r++){var n=this.vertices[r];n.applyMatrix4(t)}for(r=0,i=this.faces.length;r<i;r++){var a=this.faces[r];a.normal.applyMatrix3(e).normalize();for(var o=0,s=a.vertexNormals.length;o<s;o++)a.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Hn.makeRotationX(t),this.applyMatrix(Hn),this},rotateY:function(t){return Hn.makeRotationY(t),this.applyMatrix(Hn),this},rotateZ:function(t){return Hn.makeRotationZ(t),this.applyMatrix(Hn),this},translate:function(t,e,r){return Hn.makeTranslation(t,e,r),this.applyMatrix(Hn),this},scale:function(t,e,r){return Hn.makeScale(t,e,r),this.applyMatrix(Hn),this},lookAt:function(t){return Wn.lookAt(t),Wn.updateMatrix(),this.applyMatrix(Wn.matrix),this},fromBufferGeometry:function(t){var e=this,r=null!==t.index?t.index.array:void 0,i=t.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var n=i.position.array,a=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=0;u<n.length;u+=3)e.vertices.push((new Tr).fromArray(n,u)),void 0!==o&&e.colors.push((new $i).fromArray(o,u));function c(t,r,i,n){var u=void 0===o?[]:[e.colors[t].clone(),e.colors[r].clone(),e.colors[i].clone()],c=void 0===a?[]:[(new Tr).fromArray(a,3*t),(new Tr).fromArray(a,3*r),(new Tr).fromArray(a,3*i)],h=new Ki(t,r,i,c,u,n);e.faces.push(h),void 0!==s&&e.faceVertexUvs[0].push([(new _r).fromArray(s,2*t),(new _r).fromArray(s,2*r),(new _r).fromArray(s,2*i)]),void 0!==l&&e.faceVertexUvs[1].push([(new _r).fromArray(l,2*t),(new _r).fromArray(l,2*r),(new _r).fromArray(l,2*i)])}var h=t.groups;if(h.length>0)for(u=0;u<h.length;u++)for(var p=h[u],d=p.start,f=p.count,m=d,v=d+f;m<v;m+=3)void 0!==r?c(r[m],r[m+1],r[m+2],p.materialIndex):c(m,m+1,m+2,p.materialIndex);else if(void 0!==r)for(u=0;u<r.length;u+=3)c(r[u],r[u+1],r[u+2]);else for(u=0;u<n.length/3;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(qn).negate(),this.translate(qn.x,qn.y,qn.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,r=0===e?1:1/e,i=new Ur;return i.set(r,0,0,-r*t.x,0,r,0,-r*t.y,0,0,r,-r*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new Tr,e=new Tr,r=0,i=this.faces.length;r<i;r++){var n=this.faces[r],a=this.vertices[n.a],o=this.vertices[n.b],s=this.vertices[n.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),n.normal.copy(t)}},computeVertexNormals:function(t){var e,r,i,n,a,o;for(void 0===t&&(t=!0),o=new Array(this.vertices.length),e=0,r=this.vertices.length;e<r;e++)o[e]=new Tr;if(t){var s,l,u,c=new Tr,h=new Tr;for(i=0,n=this.faces.length;i<n;i++)a=this.faces[i],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],c.subVectors(u,l),h.subVectors(s,l),c.cross(h),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(this.computeFaceNormals(),i=0,n=this.faces.length;i<n;i++)a=this.faces[i],o[a.a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(e=0,r=this.vertices.length;e<r;e++)o[e].normalize();for(i=0,n=this.faces.length;i<n;i++){a=this.faces[i];var p=a.vertexNormals;3===p.length?(p[0].copy(o[a.a]),p[1].copy(o[a.b]),p[2].copy(o[a.c])):(p[0]=o[a.a].clone(),p[1]=o[a.b].clone(),p[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,r;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){r=this.faces[t];var i=r.vertexNormals;3===i.length?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,r,i,n;for(r=0,i=this.faces.length;r<i;r++)for(n=this.faces[r],n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),t=0,e=n.vertexNormals.length;t<e;t++)n.__originalVertexNormals[t]?n.__originalVertexNormals[t].copy(n.vertexNormals[t]):n.__originalVertexNormals[t]=n.vertexNormals[t].clone();var a=new Xn;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(r=0,i=this.faces.length;r<i;r++)l=new Tr,u={a:new Tr,b:new Tr,c:new Tr},o.push(l),s.push(u)}var l,u,c=this.morphNormals[t];for(a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals(),r=0,i=this.faces.length;r<i;r++)n=this.faces[r],l=c.faceNormals[r],u=c.vertexNormals[r],l.copy(n.normal),u.a.copy(n.vertexNormals[0]),u.b.copy(n.vertexNormals[1]),u.c.copy(n.vertexNormals[2])}for(r=0,i=this.faces.length;r<i;r++)n=this.faces[r],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new yi),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new bi),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,r){if(t&&t.isGeometry){var i,n=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,l=t.faces,u=this.colors,c=t.colors;void 0===r&&(r=0),void 0!==e&&(i=(new Mr).getNormalMatrix(e));for(var h=0,p=o.length;h<p;h++){var d=o[h],f=d.clone();void 0!==e&&f.applyMatrix4(e),a.push(f)}for(h=0,p=c.length;h<p;h++)u.push(c[h].clone());for(h=0,p=l.length;h<p;h++){var m,v,g,y=l[h],_=y.vertexNormals,x=y.vertexColors;m=new Ki(y.a+n,y.b+n,y.c+n),m.normal.copy(y.normal),void 0!==i&&m.normal.applyMatrix3(i).normalize();for(var b=0,w=_.length;b<w;b++)v=_[b].clone(),void 0!==i&&v.applyMatrix3(i).normalize(),m.vertexNormals.push(v);m.color.copy(y.color);for(b=0,w=x.length;b<w;b++)g=x[b],m.vertexColors.push(g.clone());m.materialIndex=y.materialIndex+r,s.push(m)}for(h=0,p=t.faceVertexUvs.length;h<p;h++){var T=t.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(b=0,w=T.length;b<w;b++){for(var S=T[b],E=[],M=0,A=S.length;M<A;M++)E.push(S[M].clone());this.faceVertexUvs[h].push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,r,i,n,a,o,s,l={},u=[],c=[],h=4,p=Math.pow(10,h);for(r=0,i=this.vertices.length;r<i;r++)t=this.vertices[r],e=Math.round(t.x*p)+"_"+Math.round(t.y*p)+"_"+Math.round(t.z*p),void 0===l[e]?(l[e]=r,u.push(this.vertices[r]),c[r]=u.length-1):c[r]=c[l[e]];var d=[];for(r=0,i=this.faces.length;r<i;r++){n=this.faces[r],n.a=c[n.a],n.b=c[n.b],n.c=c[n.c],a=[n.a,n.b,n.c];for(var f=0;f<3;f++)if(a[f]===a[(f+1)%3]){d.push(r);break}}for(r=d.length-1;r>=0;r--){var m=d[r];for(this.faces.splice(m,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(m,1)}var v=this.vertices.length-u.length;return this.vertices=u,v},setFromPoints:function(t){this.vertices=[];for(var e=0,r=t.length;e<r;e++){var i=t[e];this.vertices.push(new Tr(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,r=0;r<e;r++)t[r]._id=r;function i(t,e){return t.materialIndex-e.materialIndex}t.sort(i);var n,a,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===e&&(n=[]),s&&s.length===e&&(a=[]);for(r=0;r<e;r++){var l=t[r]._id;n&&n.push(o[l]),a&&a.push(s[l])}n&&(this.faceVertexUvs[0]=n),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var r in e)void 0!==e[r]&&(t[r]=e[r]);return t}for(var i=[],n=0;n<this.vertices.length;n++){var a=this.vertices[n];i.push(a.x,a.y,a.z)}var o=[],s=[],l={},u=[],c={},h=[],p={};for(n=0;n<this.faces.length;n++){var d=this.faces[n],f=!0,m=!1,v=void 0!==this.faceVertexUvs[0][n],g=d.normal.length()>0,y=d.vertexNormals.length>0,_=1!==d.color.r||1!==d.color.g||1!==d.color.b,x=d.vertexColors.length>0,b=0;if(b=E(b,0,0),b=E(b,1,f),b=E(b,2,m),b=E(b,3,v),b=E(b,4,g),b=E(b,5,y),b=E(b,6,_),b=E(b,7,x),o.push(b),o.push(d.a,d.b,d.c),o.push(d.materialIndex),v){var w=this.faceVertexUvs[0][n];o.push(C(w[0]),C(w[1]),C(w[2]))}if(g&&o.push(M(d.normal)),y){var T=d.vertexNormals;o.push(M(T[0]),M(T[1]),M(T[2]))}if(_&&o.push(A(d.color)),x){var S=d.vertexColors;o.push(A(S[0]),A(S[1]),A(S[2]))}}function E(t,e,r){return r?t|1<<e:t&~(1<<e)}function M(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]?l[e]:(l[e]=s.length/3,s.push(t.x,t.y,t.z),l[e])}function A(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]?c[e]:(c[e]=u.length,u.push(t.getHex()),c[e])}function C(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]?p[e]:(p[e]=h.length/2,h.push(t.x,t.y),p[e])}return t.data={},t.data.vertices=i,t.data.normals=s,u.length>0&&(t.data.colors=u),h.length>0&&(t.data.uvs=[h]),t.data.faces=o,t},clone:function(){return(new Xn).copy(this)},copy:function(t){var e,r,i,n,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,r=s.length;e<r;e++)this.vertices.push(s[e].clone());var l=t.colors;for(e=0,r=l.length;e<r;e++)this.colors.push(l[e].clone());var u=t.faces;for(e=0,r=u.length;e<r;e++)this.faces.push(u[e].clone());for(e=0,r=t.faceVertexUvs.length;e<r;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,n=c.length;i<n;i++){var h=c[i],p=[];for(a=0,o=h.length;a<o;a++){var d=h[a];p.push(d.clone())}this.faceVertexUvs[e].push(p)}}var f=t.morphTargets;for(e=0,r=f.length;e<r;e++){var m={};if(m.name=f[e].name,void 0!==f[e].vertices)for(m.vertices=[],i=0,n=f[e].vertices.length;i<n;i++)m.vertices.push(f[e].vertices[i].clone());if(void 0!==f[e].normals)for(m.normals=[],i=0,n=f[e].normals.length;i<n;i++)m.normals.push(f[e].normals[i].clone());this.morphTargets.push(m)}var v=t.morphNormals;for(e=0,r=v.length;e<r;e++){var g={};if(void 0!==v[e].vertexNormals)for(g.vertexNormals=[],i=0,n=v[e].vertexNormals.length;i<n;i++){var y=v[e].vertexNormals[i],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),g.vertexNormals.push(_)}if(void 0!==v[e].faceNormals)for(g.faceNormals=[],i=0,n=v[e].faceNormals.length;i<n;i++)g.faceNormals.push(v[e].faceNormals[i].clone());this.morphNormals.push(g)}var x=t.skinWeights;for(e=0,r=x.length;e<r;e++)this.skinWeights.push(x[e].clone());var b=t.skinIndices;for(e=0,r=b.length;e<r;e++)this.skinIndices.push(b[e].clone());var w=t.lineDistances;for(e=0,r=w.length;e<r;e++)this.lineDistances.push(w[e]);var T=t.boundingBox;null!==T&&(this.boundingBox=T.clone());var S=t.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class $n extends Xn{constructor(t,e,r,i,n,a){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:i,heightSegments:n,depthSegments:a},this.fromBufferGeometry(new Yn(t,e,r,i,n,a)),this.mergeVertices()}}class Yn extends wn{constructor(t,e,r,i,n,a){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:i,heightSegments:n,depthSegments:a};var o=this;t=t||1,e=e||1,r=r||1,i=Math.floor(i)||1,n=Math.floor(n)||1,a=Math.floor(a)||1;var s=[],l=[],u=[],c=[],h=0,p=0;function d(t,e,r,i,n,a,d,f,m,v,g){var y,_,x=a/m,b=d/v,w=a/2,T=d/2,S=f/2,E=m+1,M=v+1,A=0,C=0,P=new Tr;for(_=0;_<M;_++){var L=_*b-T;for(y=0;y<E;y++){var I=y*x-w;P[t]=I*i,P[e]=L*n,P[r]=S,l.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[r]=f>0?1:-1,u.push(P.x,P.y,P.z),c.push(y/m),c.push(1-_/v),A+=1}}for(_=0;_<v;_++)for(y=0;y<m;y++){var k=h+y+E*_,R=h+y+E*(_+1),O=h+(y+1)+E*(_+1),z=h+(y+1)+E*_;s.push(k,R,z),s.push(R,O,z),C+=6}o.addGroup(p,C,g),p+=C,h+=A}d("z","y","x",-1,-1,r,e,t,a,n,0),d("z","y","x",1,-1,r,e,-t,a,n,1),d("x","z","y",1,1,t,r,e,i,a,2),d("x","z","y",1,-1,t,r,-e,i,a,3),d("x","y","z",1,-1,t,e,r,i,n,4),d("x","y","z",-1,-1,t,e,-r,i,n,5),this.setIndex(s),this.setAttribute("position",new hn(l,3)),this.setAttribute("normal",new hn(u,3)),this.setAttribute("uv",new hn(c,2))}}function Zn(t){var e={};for(var r in t)for(var i in e[r]={},t[r]){var n=t[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?e[r][i]=n.clone():Array.isArray(n)?e[r][i]=n.slice():e[r][i]=n}return e}function Jn(t){for(var e={},r=0;r<t.length;r++){var i=Zn(t[r]);for(var n in i)e[n]=i[n]}return e}var Kn={clone:Zn,merge:Jn},Qn="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",ta="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function ea(t){tn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Qn,this.fragmentShader=ta,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function ra(){ni.call(this),this.type="Camera",this.matrixWorldInverse=new Ur,this.projectionMatrix=new Ur,this.projectionMatrixInverse=new Ur}function ia(t,e,r,i){ra.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}ea.prototype=Object.create(tn.prototype),ea.prototype.constructor=ea,ea.prototype.isShaderMaterial=!0,ea.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Zn(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},ea.prototype.toJSON=function(t){var e=tn.prototype.toJSON.call(this,t);for(var r in e.uniforms={},this.uniforms){var i=this.uniforms[r],n=i.value;n&&n.isTexture?e.uniforms[r]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[r]={type:"m4",value:n.toArray()}:e.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(e.extensions=a),e},ra.prototype=Object.assign(Object.create(ni.prototype),{constructor:ra,isCamera:!0,copy:function(t,e){return ni.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Tr),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){ni.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),ia.prototype=Object.assign(Object.create(ra.prototype),{constructor:ia,isPerspectiveCamera:!0,copy:function(t,e){return ra.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*yr.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*yr.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*yr.RAD2DEG*Math.atan(Math.tan(.5*yr.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,r,i,n,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*yr.DEG2RAD*this.fov)/this.zoom,r=2*e,i=this.aspect*r,n=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;n+=a.offsetX*i/o,e-=a.offsetY*r/s,i*=a.width/o,r*=a.height/s}var l=this.filmOffset;0!==l&&(n+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,e,e-r,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=ni.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var na=90,aa=1;function oa(t,e,r,i){ni.call(this),this.type="CubeCamera";var n=new ia(na,aa,t,e);n.up.set(0,-1,0),n.lookAt(new Tr(1,0,0)),this.add(n);var a=new ia(na,aa,t,e);a.up.set(0,-1,0),a.lookAt(new Tr(-1,0,0)),this.add(a);var o=new ia(na,aa,t,e);o.up.set(0,0,1),o.lookAt(new Tr(0,1,0)),this.add(o);var s=new ia(na,aa,t,e);s.up.set(0,0,-1),s.lookAt(new Tr(0,-1,0)),this.add(s);var l=new ia(na,aa,t,e);l.up.set(0,-1,0),l.lookAt(new Tr(0,0,1)),this.add(l);var u=new ia(na,aa,t,e);u.up.set(0,-1,0),u.lookAt(new Tr(0,0,-1)),this.add(u),i=i||{format:Gt,magFilter:Et,minFilter:Et},this.renderTarget=new sa(r,r,i),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var r=t.getRenderTarget(),i=this.renderTarget,c=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,n),t.setRenderTarget(i,1),t.render(e,a),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,s),t.setRenderTarget(i,4),t.render(e,l),i.texture.generateMipmaps=c,t.setRenderTarget(i,5),t.render(e,u),t.setRenderTarget(r)},this.clear=function(t,e,r,i){for(var n=t.getRenderTarget(),a=this.renderTarget,o=0;o<6;o++)t.setRenderTarget(a,o),t.clear(e,r,i);t.setRenderTarget(n)}}function sa(t,e,r){Ir.call(this,t,e,r)}function la(t,e,r,i,n,a,o,s,l,u,c,h){Pr.call(this,null,a,o,s,l,u,i,n,c,h),this.image={data:t||null,width:e||1,height:r||1},this.magFilter=void 0!==l?l:xt,this.minFilter=void 0!==u?u:xt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}oa.prototype=Object.create(ni.prototype),oa.prototype.constructor=oa,sa.prototype=Object.create(Ir.prototype),sa.prototype.constructor=sa,sa.prototype.isWebGLRenderTargetCube=!0,sa.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var r=new ai,i={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},n=new ea({type:"CubemapFromEquirect",uniforms:Zn(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:g,blending:S});n.uniforms.tEquirect.value=e;var a=new Un(new Yn(5,5,5),n);r.add(a);var o=new oa(1,10,1);return o.renderTarget=this,o.renderTarget.texture.name="CubeCameraTexture",o.update(t,r),a.geometry.dispose(),a.material.dispose(),this},la.prototype=Object.create(Pr.prototype),la.prototype.constructor=la,la.prototype.isDataTexture=!0;var ua=new bi,ca=new Tr;function ha(t,e,r,i,n,a){this.planes=[void 0!==t?t:new Ri,void 0!==e?e:new Ri,void 0!==r?r:new Ri,void 0!==i?i:new Ri,void 0!==n?n:new Ri,void 0!==a?a:new Ri]}Object.assign(ha.prototype,{set:function(t,e,r,i,n,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(r),o[3].copy(i),o[4].copy(n),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,r=0;r<6;r++)e[r].copy(t.planes[r]);return this},setFromMatrix:function(t){var e=this.planes,r=t.elements,i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],h=r[8],p=r[9],d=r[10],f=r[11],m=r[12],v=r[13],g=r[14],y=r[15];return e[0].setComponents(o-i,c-s,f-h,y-m).normalize(),e[1].setComponents(o+i,c+s,f+h,y+m).normalize(),e[2].setComponents(o+n,c+l,f+p,y+v).normalize(),e[3].setComponents(o-n,c-l,f-p,y-v).normalize(),e[4].setComponents(o-a,c-u,f-d,y-g).normalize(),e[5].setComponents(o+a,c+u,f+d,y+g).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ua.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ua)},intersectsSprite:function(t){return ua.center.set(0,0,0),ua.radius=.7071067811865476,ua.applyMatrix4(t.matrixWorld),this.intersectsSphere(ua)},intersectsSphere:function(t){for(var e=this.planes,r=t.center,i=-t.radius,n=0;n<6;n++){var a=e[n].distanceToPoint(r);if(a<i)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,r=0;r<6;r++){var i=e[r];if(ca.x=i.normal.x>0?t.max.x:t.min.x,ca.y=i.normal.y>0?t.max.y:t.min.y,ca.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(ca)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,r=0;r<6;r++)if(e[r].distanceToPoint(t)<0)return!1;return!0}});var pa="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",da="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",fa="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",ma="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",va="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",ga="vec3 transformed = vec3( position );",ya="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",_a="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",xa="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",ba="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",wa="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",Ta="#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",Sa="#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",Ea="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",Ma="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Aa="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Ca="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",Pa="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",La="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",Ia="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",ka="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",Ra="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",Oa="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",za="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Da="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ba="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",Fa="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Na="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",Ua="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",Va="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",ja="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",Ga="#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",Ha="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",Wa="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",qa="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",Xa="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",$a="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",Ya="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Za="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",Ja="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",Ka="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",Qa="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",to="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",eo="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",ro="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",io="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",no="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",ao="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",oo="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",so="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",lo="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",uo="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",co="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",ho="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",po="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",fo="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",mo="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",vo="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",go="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",yo="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",_o="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",xo="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",bo="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",wo="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tbool frontFacing = dot( cross( S, T ), N ) > 0.0;\n\t\t\tmapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",To="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",So="#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = clearcoatNormalScale * mapN.xy;\n\t\tclearcoatNormal = normalize( vTBN * mapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\n\t#endif\n#endif",Eo="#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",Mo="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 encodeHalfRGBA ( vec2 v ) {\n\tvec4 encoded = vec4( 0.0 );\n\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\n\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\n\tencoded.xy = encoded.xy - ( encoded.yy * offset );\n\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\n\tencoded.zw = encoded.zw - ( encoded.ww * offset );\n\treturn encoded;\n}\nvec2 decodeHalfRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",Ao="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Co="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Po="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Lo="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Io="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",ko="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Ro="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",Oo="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",zo="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",Do="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",Bo="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Fo="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",No="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",Uo="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",Vo="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",jo="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Go="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Ho="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",Wo="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",qo="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",Xo="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",$o="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Yo="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",Zo="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",Jo="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",Ko="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Qo="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",ts="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",es="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",rs="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",is="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",ns="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",as="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",os="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ss="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",ls="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",us="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",cs="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",hs="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",ps="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ds="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",fs="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",ms="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",vs="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",gs="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ys="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",_s="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",xs="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",bs="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",ws="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Ts="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Ss="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",Es="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ms="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",As="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Cs={alphamap_fragment:pa,alphamap_pars_fragment:da,alphatest_fragment:fa,aomap_fragment:ma,aomap_pars_fragment:va,begin_vertex:ga,beginnormal_vertex:ya,bsdfs:_a,bumpmap_pars_fragment:xa,clipping_planes_fragment:ba,clipping_planes_pars_fragment:wa,clipping_planes_pars_vertex:Ta,clipping_planes_vertex:Sa,color_fragment:Ea,color_pars_fragment:Ma,color_pars_vertex:Aa,color_vertex:Ca,common:Pa,cube_uv_reflection_fragment:La,defaultnormal_vertex:Ia,displacementmap_pars_vertex:ka,displacementmap_vertex:Ra,emissivemap_fragment:Oa,emissivemap_pars_fragment:za,encodings_fragment:Da,encodings_pars_fragment:Ba,envmap_fragment:Fa,envmap_common_pars_fragment:Na,envmap_pars_fragment:Ua,envmap_pars_vertex:Va,envmap_physical_pars_fragment:Ka,envmap_vertex:ja,fog_vertex:Ga,fog_pars_vertex:Ha,fog_fragment:Wa,fog_pars_fragment:qa,gradientmap_pars_fragment:Xa,lightmap_fragment:$a,lightmap_pars_fragment:Ya,lights_lambert_vertex:Za,lights_pars_begin:Ja,lights_phong_fragment:Qa,lights_phong_pars_fragment:to,lights_physical_fragment:eo,lights_physical_pars_fragment:ro,lights_fragment_begin:io,lights_fragment_maps:no,lights_fragment_end:ao,logdepthbuf_fragment:oo,logdepthbuf_pars_fragment:so,logdepthbuf_pars_vertex:lo,logdepthbuf_vertex:uo,map_fragment:co,map_pars_fragment:ho,map_particle_fragment:po,map_particle_pars_fragment:fo,metalnessmap_fragment:mo,metalnessmap_pars_fragment:vo,morphnormal_vertex:go,morphtarget_pars_vertex:yo,morphtarget_vertex:_o,normal_fragment_begin:xo,normal_fragment_maps:bo,normalmap_pars_fragment:wo,clearcoat_normal_fragment_begin:To,clearcoat_normal_fragment_maps:So,clearcoat_normalmap_pars_fragment:Eo,packing:Mo,premultiplied_alpha_fragment:Ao,project_vertex:Co,dithering_fragment:Po,dithering_pars_fragment:Lo,roughnessmap_fragment:Io,roughnessmap_pars_fragment:ko,shadowmap_pars_fragment:Ro,shadowmap_pars_vertex:Oo,shadowmap_vertex:zo,shadowmask_pars_fragment:Do,skinbase_vertex:Bo,skinning_pars_vertex:Fo,skinning_vertex:No,skinnormal_vertex:Uo,specularmap_fragment:Vo,specularmap_pars_fragment:jo,tonemapping_fragment:Go,tonemapping_pars_fragment:Ho,uv_pars_fragment:Wo,uv_pars_vertex:qo,uv_vertex:Xo,uv2_pars_fragment:$o,uv2_pars_vertex:Yo,uv2_vertex:Zo,worldpos_vertex:Jo,background_frag:Ko,background_vert:Qo,cube_frag:ts,cube_vert:es,depth_frag:rs,depth_vert:is,distanceRGBA_frag:ns,distanceRGBA_vert:as,equirect_frag:os,equirect_vert:ss,linedashed_frag:ls,linedashed_vert:us,meshbasic_frag:cs,meshbasic_vert:hs,meshlambert_frag:ps,meshlambert_vert:ds,meshmatcap_frag:fs,meshmatcap_vert:ms,meshphong_frag:vs,meshphong_vert:gs,meshphysical_frag:ys,meshphysical_vert:_s,normal_frag:xs,normal_vert:bs,points_frag:ws,points_vert:Ts,shadow_frag:Ss,shadow_vert:Es,sprite_frag:Ms,sprite_vert:As},Ps={common:{diffuse:{value:new $i(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Mr},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _r(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $i(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new $i(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Mr}},sprite:{diffuse:{value:new $i(15658734)},opacity:{value:1},center:{value:new _r(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Mr}}},Ls={basic:{uniforms:Jn([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.fog]),vertexShader:Cs.meshbasic_vert,fragmentShader:Cs.meshbasic_frag},lambert:{uniforms:Jn([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.fog,Ps.lights,{emissive:{value:new $i(0)}}]),vertexShader:Cs.meshlambert_vert,fragmentShader:Cs.meshlambert_frag},phong:{uniforms:Jn([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.gradientmap,Ps.fog,Ps.lights,{emissive:{value:new $i(0)},specular:{value:new $i(1118481)},shininess:{value:30}}]),vertexShader:Cs.meshphong_vert,fragmentShader:Cs.meshphong_frag},standard:{uniforms:Jn([Ps.common,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.roughnessmap,Ps.metalnessmap,Ps.fog,Ps.lights,{emissive:{value:new $i(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Cs.meshphysical_vert,fragmentShader:Cs.meshphysical_frag},matcap:{uniforms:Jn([Ps.common,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.fog,{matcap:{value:null}}]),vertexShader:Cs.meshmatcap_vert,fragmentShader:Cs.meshmatcap_frag},points:{uniforms:Jn([Ps.points,Ps.fog]),vertexShader:Cs.points_vert,fragmentShader:Cs.points_frag},dashed:{uniforms:Jn([Ps.common,Ps.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cs.linedashed_vert,fragmentShader:Cs.linedashed_frag},depth:{uniforms:Jn([Ps.common,Ps.displacementmap]),vertexShader:Cs.depth_vert,fragmentShader:Cs.depth_frag},normal:{uniforms:Jn([Ps.common,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,{opacity:{value:1}}]),vertexShader:Cs.normal_vert,fragmentShader:Cs.normal_frag},sprite:{uniforms:Jn([Ps.sprite,Ps.fog]),vertexShader:Cs.sprite_vert,fragmentShader:Cs.sprite_frag},background:{uniforms:{uvTransform:{value:new Mr},t2D:{value:null}},vertexShader:Cs.background_vert,fragmentShader:Cs.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cs.cube_vert,fragmentShader:Cs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cs.equirect_vert,fragmentShader:Cs.equirect_frag},distanceRGBA:{uniforms:Jn([Ps.common,Ps.displacementmap,{referencePosition:{value:new Tr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cs.distanceRGBA_vert,fragmentShader:Cs.distanceRGBA_frag},shadow:{uniforms:Jn([Ps.lights,Ps.fog,{color:{value:new $i(0)},opacity:{value:1}}]),vertexShader:Cs.shadow_vert,fragmentShader:Cs.shadow_frag}};function Is(){var t=null,e=!1,r=null;function i(n,a){!1!==e&&(r(n,a),t.requestAnimationFrame(i))}return{start:function(){!0!==e&&null!==r&&(t.requestAnimationFrame(i),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){r=t},setContext:function(e){t=e}}}function ks(t){var e=new WeakMap;function r(e,r){var i=e.array,n=e.usage,a=t.createBuffer();t.bindBuffer(r,a),t.bufferData(r,i,n),e.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function i(e,r,i){var n=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,n):(t.bufferSubData(i,a.offset*n.BYTES_PER_ELEMENT,n.subarray(a.offset,a.offset+a.count)),a.count=-1)}function n(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)}function a(r){r.isInterleavedBufferAttribute&&(r=r.data);var i=e.get(r);i&&(t.deleteBuffer(i.buffer),e.delete(r))}function o(t,n){t.isInterleavedBufferAttribute&&(t=t.data);var a=e.get(t);void 0===a?e.set(t,r(t,n)):a.version<t.version&&(i(a.buffer,t,n),a.version=t.version)}return{get:n,remove:a,update:o}}function Rs(t,e,r,i){Xn.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:i},this.fromBufferGeometry(new Os(t,e,r,i)),this.mergeVertices()}function Os(t,e,r,i){wn.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:i},t=t||1,e=e||1;var n,a,o=t/2,s=e/2,l=Math.floor(r)||1,u=Math.floor(i)||1,c=l+1,h=u+1,p=t/l,d=e/u,f=[],m=[],v=[],g=[];for(a=0;a<h;a++){var y=a*d-s;for(n=0;n<c;n++){var _=n*p-o;m.push(_,-y,0),v.push(0,0,1),g.push(n/l),g.push(1-a/u)}}for(a=0;a<u;a++)for(n=0;n<l;n++){var x=n+c*a,b=n+c*(a+1),w=n+1+c*(a+1),T=n+1+c*a;f.push(x,b,T),f.push(b,w,T)}this.setIndex(f),this.setAttribute("position",new hn(m,3)),this.setAttribute("normal",new hn(v,3)),this.setAttribute("uv",new hn(g,2))}function zs(t,e,r,i){var n,a,o=new $i(0),s=0,l=null,u=0;function c(e,i,c,p){var d=i.background,f=t.vr,m=f.getSession&&f.getSession();if(m&&"additive"===m.environmentBlendMode&&(d=null),null===d?(h(o,s),l=null,u=0):d&&d.isColor&&(h(d,1),p=!0,l=null,u=0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void 0===a&&(a=new Un(new Yn(1,1,1),new ea({type:"BackgroundCubeMaterial",uniforms:Zn(Ls.cube.uniforms),vertexShader:Ls.cube.vertexShader,fragmentShader:Ls.cube.fragmentShader,side:g,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(t,e,r){this.matrixWorld.copyPosition(r.matrixWorld)},Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.tCube.value}}),r.update(a));var y=d.isWebGLRenderTargetCube?d.texture:d;a.material.uniforms.tCube.value=y,a.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1,l===d&&u===y.version||(a.material.needsUpdate=!0,l=d,u=y.version),e.unshift(a,a.geometry,a.material,0,0,null)}else d&&d.isTexture&&(void 0===n&&(n=new Un(new Os(2,2),new ea({type:"BackgroundMaterial",uniforms:Zn(Ls.background.uniforms),vertexShader:Ls.background.vertexShader,fragmentShader:Ls.background.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1})),n.geometry.deleteAttribute("normal"),Object.defineProperty(n.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(n)),n.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),n.material.uniforms.uvTransform.value.copy(d.matrix),l===d&&u===d.version||(n.material.needsUpdate=!0,l=d,u=d.version),e.unshift(n,n.geometry,n.material,0,0,null))}function h(t,r){e.buffers.color.setClear(t.r,t.g,t.b,r,i)}return{getClearColor:function(){return o},setClearColor:function(t,e){o.set(t),s=void 0!==e?e:1,h(o,s)},getClearAlpha:function(){return s},setClearAlpha:function(t){s=t,h(o,s)},render:c}}function Ds(t,e,r,i){var n,a=i.isWebGL2;function o(t){n=t}function s(e,i){t.drawArrays(n,e,i),r.update(i,n)}function l(i,o,s,l){if(0!==l){var u,c;if(a)u=t,c="drawArraysInstanced";else if(u=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===u)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](n,o,s,l),r.update(s,n,l)}}this.setMode=o,this.render=s,this.renderInstances=l}function Bs(t,e,r){var i;function n(){if(void 0!==i)return i;var r=e.get("EXT_texture_filter_anisotropic");return i=null!==r?t.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,i}function a(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,s=void 0!==r.precision?r.precision:"highp",l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);var u=!0===r.logarithmicDepthBuffer,c=t.getParameter(34930),h=t.getParameter(35660),p=t.getParameter(3379),d=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),v=t.getParameter(36348),g=t.getParameter(36349),y=h>0,_=o||!!e.get("OES_texture_float"),x=y&&_,b=o?t.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:n,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:x,maxSamples:b}}function Fs(){var t=this,e=null,r=0,i=!1,n=!1,a=new Ri,o=new Mr,s={value:null,needsUpdate:!1};function l(){s.value!==e&&(s.value=e,s.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,r,i,n){var l=null!==e?e.length:0,u=null;if(0!==l){if(u=s.value,!0!==n||null===u){var c=i+4*l,h=r.matrixWorldInverse;o.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var p=0,d=i;p!==l;++p,d+=4)a.copy(e[p]).applyMatrix4(h,o),a.normal.toArray(u,d),u[d+3]=a.constant}s.value=u,s.needsUpdate=!0}return t.numPlanes=l,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,n,a){var o=0!==t.length||n||0!==r||i;return i=n,e=u(t,a,0),r=t.length,o},this.beginShadows=function(){n=!0,u(null)},this.endShadows=function(){n=!1,l()},this.setState=function(t,a,o,c,h,p){if(!i||null===t||0===t.length||n&&!o)n?u(null):l();else{var d=n?0:r,f=4*d,m=h.clippingState||null;s.value=m,m=u(t,c,f,p);for(var v=0;v!==f;++v)m[v]=e[v];h.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=d}}}function Ns(t){var e={};return{get:function(r){if(void 0!==e[r])return e[r];var i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return null===i&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),e[r]=i,i}}}function Us(t,e,r){var i=new WeakMap,n=new WeakMap;function a(t){var o=t.target,s=i.get(o);for(var l in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[l]);o.removeEventListener("dispose",a),i.delete(o);var u=n.get(s);u&&(e.remove(u),n.delete(s)),r.memory.geometries--}function o(t,e){var n=i.get(e);return n||(e.addEventListener("dispose",a),e.isBufferGeometry?n=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new wn).setFromObject(t)),n=e._bufferGeometry),i.set(e,n),r.memory.geometries++,n)}function s(t){var r=t.index,i=t.attributes;for(var n in null!==r&&e.update(r,34963),i)e.update(i[n],34962);var a=t.morphAttributes;for(var n in a)for(var o=a[n],s=0,l=o.length;s<l;s++)e.update(o[s],34962)}function l(t){var r=[],i=t.index,a=t.attributes.position,o=0;if(null!==i){var s=i.array;o=i.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],p=s[l+2];r.push(c,h,h,p,p,c)}}else{s=a.array;o=a.version;for(l=0,u=s.length/3-1;l<u;l+=3){c=l+0,h=l+1,p=l+2;r.push(c,h,h,p,p,c)}}var d=new(fn(r)>65535?cn:ln)(r,1);d.version=o,e.update(d,34963);var f=n.get(t);f&&e.remove(f),n.set(t,d)}function u(t){var e=n.get(t);if(e){var r=t.index;null!==r&&e.version<r.version&&l(t)}else l(t);return n.get(t)}return{get:o,update:s,getWireframeAttribute:u}}function Vs(t,e,r,i){var n,a,o,s=i.isWebGL2;function l(t){n=t}function u(t){a=t.type,o=t.bytesPerElement}function c(e,i){t.drawElements(n,i,a,e*o),r.update(i,n)}function h(i,l,u,c){if(0!==c){var h,p;if(s)h=t,p="drawElementsInstanced";else if(h=e.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",null===h)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[p](n,u,a,l*o,c),r.update(u,n,c)}}this.setMode=l,this.setIndex=u,this.render=c,this.renderInstances=h}function js(t){var e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(t,e,i){switch(i=i||1,r.calls++,e){case 4:r.triangles+=i*(t/3);break;case 5:case 6:r.triangles+=i*(t-2);break;case 1:r.lines+=i*(t/2);break;case 3:r.lines+=i*(t-1);break;case 2:r.lines+=i*t;break;case 0:r.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e);break}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:n,update:i}}function Gs(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Hs(t){var e={},r=new Float32Array(8);function i(i,n,a,o){var s=i.morphTargetInfluences,l=s.length,u=e[n.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];e[n.id]=u}var h=a.morphTargets&&n.morphAttributes.position,p=a.morphNormals&&n.morphAttributes.normal;for(c=0;c<l;c++){var d=u[c];0!==d[1]&&(h&&n.deleteAttribute("morphTarget"+c),p&&n.deleteAttribute("morphNormal"+c))}for(c=0;c<l;c++){d=u[c];d[0]=c,d[1]=s[c]}u.sort(Gs);for(c=0;c<8;c++){d=u[c];if(d){var f=d[0],m=d[1];if(m){h&&n.setAttribute("morphTarget"+c,h[f]),p&&n.setAttribute("morphNormal"+c,p[f]),r[c]=m;continue}}r[c]=0}o.getUniforms().setValue(t,"morphTargetInfluences",r)}return{update:i}}function Ws(t,e,r,i){var n={};function a(t){var a=i.render.frame,o=t.geometry,s=e.get(t,o);return n[s.id]!==a&&(o.isGeometry&&s.updateFromObject(t),e.update(s),n[s.id]=a),t.isInstancedMesh&&r.update(t.instanceMatrix,34962),s}function o(){n={}}return{update:a,dispose:o}}function qs(t,e,r,i,n,a,o,s,l,u){t=void 0!==t?t:[],e=void 0!==e?e:ct,o=void 0!==o?o:Gt,Pr.call(this,t,e,r,i,n,a,o,s,l,u),this.flipY=!1}function Xs(t,e,r,i){Pr.call(this,null),this.image={data:t||null,width:e||1,height:r||1,depth:i||1},this.magFilter=xt,this.minFilter=xt,this.wrapR=yt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function $s(t,e,r,i){Pr.call(this,null),this.image={data:t||null,width:e||1,height:r||1,depth:i||1},this.magFilter=xt,this.minFilter=xt,this.wrapR=yt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Ls.physical={uniforms:Jn([Ls.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new $i(0)},clearcoatNormalScale:{value:new _r(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:Cs.meshphysical_vert,fragmentShader:Cs.meshphysical_frag},Rs.prototype=Object.create(Xn.prototype),Rs.prototype.constructor=Rs,Os.prototype=Object.create(wn.prototype),Os.prototype.constructor=Os,qs.prototype=Object.create(Pr.prototype),qs.prototype.constructor=qs,qs.prototype.isCubeTexture=!0,Object.defineProperty(qs.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),Xs.prototype=Object.create(Pr.prototype),Xs.prototype.constructor=Xs,Xs.prototype.isDataTexture2DArray=!0,$s.prototype=Object.create(Pr.prototype),$s.prototype.constructor=$s,$s.prototype.isDataTexture3D=!0;var Ys=new Pr,Zs=new Xs,Js=new $s,Ks=new qs,Qs=[],tl=[],el=new Float32Array(16),rl=new Float32Array(9),il=new Float32Array(4);function nl(t,e,r){var i=t[0];if(i<=0||i>0)return t;var n=e*r,a=Qs[n];if(void 0===a&&(a=new Float32Array(n),Qs[n]=a),0!==e){i.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=r,t[o].toArray(a,s)}return a}function al(t,e){if(t.length!==e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0}function ol(t,e){for(var r=0,i=e.length;r<i;r++)t[r]=e[r]}function sl(t,e){var r=tl[e];void 0===r&&(r=new Int32Array(e),tl[e]=r);for(var i=0;i!==e;++i)r[i]=t.allocateTextureUnit();return r}function ll(t,e){var r=this.cache;r[0]!==e&&(t.uniform1f(this.addr,e),r[0]=e)}function ul(t,e){var r=this.cache;if(void 0!==e.x)r[0]===e.x&&r[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(al(r,e))return;t.uniform2fv(this.addr,e),ol(r,e)}}function cl(t,e){var r=this.cache;if(void 0!==e.x)r[0]===e.x&&r[1]===e.y&&r[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(void 0!==e.r)r[0]===e.r&&r[1]===e.g&&r[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(al(r,e))return;t.uniform3fv(this.addr,e),ol(r,e)}}function hl(t,e){var r=this.cache;if(void 0!==e.x)r[0]===e.x&&r[1]===e.y&&r[2]===e.z&&r[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(al(r,e))return;t.uniform4fv(this.addr,e),ol(r,e)}}function pl(t,e){var r=this.cache,i=e.elements;if(void 0===i){if(al(r,e))return;t.uniformMatrix2fv(this.addr,!1,e),ol(r,e)}else{if(al(r,i))return;il.set(i),t.uniformMatrix2fv(this.addr,!1,il),ol(r,i)}}function dl(t,e){var r=this.cache,i=e.elements;if(void 0===i){if(al(r,e))return;t.uniformMatrix3fv(this.addr,!1,e),ol(r,e)}else{if(al(r,i))return;rl.set(i),t.uniformMatrix3fv(this.addr,!1,rl),ol(r,i)}}function fl(t,e){var r=this.cache,i=e.elements;if(void 0===i){if(al(r,e))return;t.uniformMatrix4fv(this.addr,!1,e),ol(r,e)}else{if(al(r,i))return;el.set(i),t.uniformMatrix4fv(this.addr,!1,el),ol(r,i)}}function ml(t,e,r){var i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(t.uniform1i(this.addr,n),i[0]=n),r.safeSetTexture2D(e||Ys,n)}function vl(t,e,r){var i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(t.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(e||Zs,n)}function gl(t,e,r){var i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(t.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(e||Js,n)}function yl(t,e,r){var i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(t.uniform1i(this.addr,n),i[0]=n),r.safeSetTextureCube(e||Ks,n)}function _l(t,e){var r=this.cache;r[0]!==e&&(t.uniform1i(this.addr,e),r[0]=e)}function xl(t,e){var r=this.cache;al(r,e)||(t.uniform2iv(this.addr,e),ol(r,e))}function bl(t,e){var r=this.cache;al(r,e)||(t.uniform3iv(this.addr,e),ol(r,e))}function wl(t,e){var r=this.cache;al(r,e)||(t.uniform4iv(this.addr,e),ol(r,e))}function Tl(t){switch(t){case 5126:return ll;case 35664:return ul;case 35665:return cl;case 35666:return hl;case 35674:return pl;case 35675:return dl;case 35676:return fl;case 35678:case 36198:return ml;case 35679:return gl;case 35680:return yl;case 36289:return vl;case 5124:case 35670:return _l;case 35667:case 35671:return xl;case 35668:case 35672:return bl;case 35669:case 35673:return wl}}function Sl(t,e){t.uniform1fv(this.addr,e)}function El(t,e){t.uniform1iv(this.addr,e)}function Ml(t,e){t.uniform2iv(this.addr,e)}function Al(t,e){t.uniform3iv(this.addr,e)}function Cl(t,e){t.uniform4iv(this.addr,e)}function Pl(t,e){var r=nl(e,this.size,2);t.uniform2fv(this.addr,r)}function Ll(t,e){var r=nl(e,this.size,3);t.uniform3fv(this.addr,r)}function Il(t,e){var r=nl(e,this.size,4);t.uniform4fv(this.addr,r)}function kl(t,e){var r=nl(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,r)}function Rl(t,e){var r=nl(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,r)}function Ol(t,e){var r=nl(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,r)}function zl(t,e,r){var i=e.length,n=sl(r,i);t.uniform1iv(this.addr,n);for(var a=0;a!==i;++a)r.safeSetTexture2D(e[a]||Ys,n[a])}function Dl(t,e,r){var i=e.length,n=sl(r,i);t.uniform1iv(this.addr,n);for(var a=0;a!==i;++a)r.safeSetTextureCube(e[a]||Ks,n[a])}function Bl(t){switch(t){case 5126:return Sl;case 35664:return Pl;case 35665:return Ll;case 35666:return Il;case 35674:return kl;case 35675:return Rl;case 35676:return Ol;case 35678:return zl;case 35680:return Dl;case 5124:case 35670:return El;case 35667:case 35671:return Ml;case 35668:case 35672:return Al;case 35669:case 35673:return Cl}}function Fl(t,e,r){this.id=t,this.addr=r,this.cache=[],this.setValue=Tl(e.type)}function Nl(t,e,r){this.id=t,this.addr=r,this.cache=[],this.size=e.size,this.setValue=Bl(e.type)}function Ul(t){this.id=t,this.seq=[],this.map={}}Nl.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),ol(e,t)},Ul.prototype.setValue=function(t,e,r){for(var i=this.seq,n=0,a=i.length;n!==a;++n){var o=i[n];o.setValue(t,e[o.id],r)}};var Vl=/([\w\d_]+)(\])?(\[|\.)?/g;function jl(t,e){t.seq.push(e),t.map[e.id]=e}function Gl(t,e,r){var i=t.name,n=i.length;Vl.lastIndex=0;while(1){var a=Vl.exec(i),o=Vl.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===n){jl(r,void 0===u?new Fl(s,t,e):new Nl(s,t,e));break}var c=r.map,h=c[s];void 0===h&&(h=new Ul(s),jl(r,h)),r=h}}function Hl(t,e){this.seq=[],this.map={};for(var r=t.getProgramParameter(e,35718),i=0;i<r;++i){var n=t.getActiveUniform(e,i),a=t.getUniformLocation(e,n.name);Gl(n,a,this)}}function Wl(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}Hl.prototype.setValue=function(t,e,r,i){var n=this.map[e];void 0!==n&&n.setValue(t,r,i)},Hl.prototype.setOptional=function(t,e,r){var i=e[r];void 0!==i&&this.setValue(t,r,i)},Hl.upload=function(t,e,r,i){for(var n=0,a=e.length;n!==a;++n){var o=e[n],s=r[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,i)}},Hl.seqWithValue=function(t,e){for(var r=[],i=0,n=t.length;i!==n;++i){var a=t[i];a.id in e&&r.push(a)}return r};var ql=0;function Xl(t){for(var e=t.split("\n"),r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join("\n")}function $l(t){switch(t){case ke:return["Linear","( value )"];case Re:return["sRGB","( value )"];case ze:return["RGBE","( value )"];case Be:return["RGBM","( value, 7.0 )"];case Fe:return["RGBM","( value, 16.0 )"];case Ne:return["RGBD","( value, 256.0 )"];case Oe:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case De:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+t)}}function Yl(t,e,r){var i=t.getShaderParameter(e,35713),n=t.getShaderInfoLog(e).trim();if(i&&""===n)return"";var a=t.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+r+"\n"+n+Xl(a)}function Zl(t,e){var r=$l(e);return"vec4 "+t+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function Jl(t,e){var r=$l(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function Kl(t,e){var r;switch(e){case nt:r="Linear";break;case at:r="Reinhard";break;case ot:r="Uncharted2";break;case st:r="OptimizedCineon";break;case lt:r="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Ql(t,e,r){t=t||{};var i=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return i.filter(ru).join("\n")}function tu(t){var e=[];for(var r in t){var i=t[r];!1!==i&&e.push("#define "+r+" "+i)}return e.join("\n")}function eu(t,e){for(var r={},i=t.getProgramParameter(e,35721),n=0;n<i;n++){var a=t.getActiveAttrib(e,n),o=a.name;r[o]=t.getAttribLocation(e,o)}return r}function ru(t){return""!==t}function iu(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function nu(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var au=/^[ \t]*#include +<([\w\d./]+)>/gm;function ou(t){return t.replace(au,su)}function su(t,e){var r=Cs[e];if(void 0===r)throw new Error("Can not resolve #include <"+e+">");return ou(r)}var lu=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function uu(t){return t.replace(lu,cu)}function cu(t,e,r,i){for(var n="",a=parseInt(e);a<parseInt(r);a++)n+=i.replace(/\[ i \]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return n}function hu(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function pu(t){var e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===d?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===f?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===m&&(e="SHADOWMAP_TYPE_VSM"),e}function du(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ct:case ht:e="ENVMAP_TYPE_CUBE";break;case mt:case vt:e="ENVMAP_TYPE_CUBE_UV";break;case pt:case dt:e="ENVMAP_TYPE_EQUIREC";break;case ft:e="ENVMAP_TYPE_SPHERE";break}return e}function fu(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case ht:case dt:e="ENVMAP_MODE_REFRACTION";break}return e}function mu(t){var e="ENVMAP_BLENDING_MULTIPLY";if(t.envMap)switch(t.combine){case tt:e="ENVMAP_BLENDING_MULTIPLY";break;case et:e="ENVMAP_BLENDING_MIX";break;case rt:e="ENVMAP_BLENDING_ADD";break}return e}function vu(t,e,r,i,n,a){var o,s,l=t.getContext(),u=i.defines,c=n.vertexShader,h=n.fragmentShader,p=pu(a),d=du(a),f=fu(a),m=mu(a),v=t.gammaFactor>0?t.gammaFactor:1,g=a.isWebGL2?"":Ql(i.extensions,a,e),y=tu(u),_=l.createProgram(),x=a.numMultiviewViews;if(i.isRawShaderMaterial?(o=[y].filter(ru).join("\n"),o.length>0&&(o+="\n"),s=[g,y].filter(ru).join("\n"),s.length>0&&(s+="\n")):(o=[hu(a),"#define SHADER_NAME "+n.name,y,a.instancing?"#define USE_INSTANCING":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+p:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ru).join("\n"),s=[g,hu(a),"#define SHADER_NAME "+n.name,y,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+v,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.envMap?"#define "+f:"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.sheen?"#define USE_SHEEN":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+p:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensions&&i.extensions.shaderTextureLOD||a.envMap)&&(a.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",a.toneMapping!==it?"#define TONE_MAPPING":"",a.toneMapping!==it?Cs["tonemapping_pars_fragment"]:"",a.toneMapping!==it?Kl("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Cs["encodings_pars_fragment"]:"",a.mapEncoding?Zl("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?Zl("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?Zl("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Zl("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?Jl("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(ru).join("\n")),c=ou(c),c=iu(c,a),c=nu(c,a),h=ou(h),h=iu(h,a),h=nu(h,a),c=uu(c),h=uu(h),a.isWebGL2&&!i.isRawShaderMaterial){var b=!1,w=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==c.match(w)&&null!==h.match(w)&&(b=!0,c=c.replace(w,""),h=h.replace(w,"")),o=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+o,s=["#version 300 es\n","#define varying in",b?"":"out highp vec4 pc_fragColor;",b?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+s,x>0&&(o=o.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","layout(num_views = "+x+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n")),o=o.replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\n"),["uniform mat4 modelViewMatrices["+x+"];","uniform mat4 projectionMatrices["+x+"];","uniform mat4 viewMatrices["+x+"];","uniform mat3 normalMatrices["+x+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),s=s.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join("\n")),s=s.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+x+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")))}var T,S,E=o+c,M=s+h,A=Wl(l,35633,E),C=Wl(l,35632,M);if(l.attachShader(_,A),l.attachShader(_,C),void 0!==i.index0AttributeName?l.bindAttribLocation(_,0,i.index0AttributeName):!0===a.morphTargets&&l.bindAttribLocation(_,0,"position"),l.linkProgram(_),t.debug.checkShaderErrors){var P=l.getProgramInfoLog(_).trim(),L=l.getShaderInfoLog(A).trim(),I=l.getShaderInfoLog(C).trim(),k=!0,R=!0;if(!1===l.getProgramParameter(_,35714)){k=!1;var O=Yl(l,A,"vertex"),z=Yl(l,C,"fragment");console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(_,35715),"gl.getProgramInfoLog",P,O,z)}else""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==L&&""!==I||(R=!1);R&&(this.diagnostics={runnable:k,material:i,programLog:P,vertexShader:{log:L,prefix:o},fragmentShader:{log:I,prefix:s}})}return l.deleteShader(A),l.deleteShader(C),this.getUniforms=function(){return void 0===T&&(T=new Hl(l,_)),T},this.getAttributes=function(){return void 0===S&&(S=eu(l,_)),S},this.destroy=function(){l.deleteProgram(_),this.program=void 0},this.name=n.name,this.id=ql++,this.cacheKey=r,this.usedTimes=1,this.program=_,this.vertexShader=A,this.fragmentShader=C,this.numMultiviewViews=x,this}function gu(t,e,r){var i=[],n=r.isWebGL2,a=r.logarithmicDepthBuffer,o=r.floatVertexTextures,s=r.precision,l=r.maxVertexUniforms,u=r.vertexTextures,c={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},h=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function p(t){var e=t.skeleton,r=e.bones;if(o)return 1024;var i=l,n=Math.floor((i-20)/4),a=Math.min(n,r.length);return a<r.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+a+"."),0):a}function d(t,e){var r;return t?t.isTexture?r=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=t.texture.encoding):r=ke,r===ke&&e&&(r=Oe),r}this.getParameters=function(e,i,l,h,f,m,v){var _=c[e.type],x=v.isSkinnedMesh?p(v):0;null!==e.precision&&(s=r.getMaxPrecision(e.precision),s!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",s,"instead."));var b=t.getRenderTarget(),w=b&&b.isWebGLMultiviewRenderTarget?b.numViews:0,T={isWebGL2:n,shaderID:_,precision:s,instancing:!0===v.isInstancedMesh,supportsVertexTextures:u,numMultiviewViews:w,outputEncoding:d(b?b.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:d(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:d(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:d(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===mt||e.envMap.mapping===vt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:d(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Ge,tangentSpaceNormalMap:e.normalMapType===je,clearcoatNormalMap:!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,sheen:!!e.sheen,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,vertexUvs:!!e.map||!!e.bumpMap||!!e.normalMap||!!e.specularMap||!!e.alphaMap||!!e.emissiveMap||!!e.roughnessMap||!!e.metalnessMap||!!e.clearcoatNormalMap||!!e.displacementMap,uvsVertexOnly:!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap)&&!!e.displacementMap,fog:!!h,useFog:e.fog,fogExp2:h&&h.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:a,skinning:e.skinning&&x>0,maxBones:x,useVertexTexture:o,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numDirLightShadows:i.directionalShadowMap.length,numPointLightShadows:i.pointShadowMap.length,numSpotLightShadows:i.spotShadowMap.length,numClippingPlanes:f,numClipIntersection:m,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&l.length>0,shadowMapType:t.shadowMap.type,toneMapping:e.toneMapped?t.toneMapping:it,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===y,flipSided:e.side===g,depthPacking:void 0!==e.depthPacking&&e.depthPacking};return T},this.getProgramCacheKey=function(e,r){var i=[];if(r.shaderID?i.push(r.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var n in e.defines)i.push(n),i.push(e.defines[n]);for(var a=0;a<h.length;a++)i.push(r[h[a]]);return i.push(e.onBeforeCompile.toString()),i.push(t.gammaOutput),i.push(t.gammaFactor),i.join()},this.acquireProgram=function(r,n,a,o){for(var s,l=0,u=i.length;l<u;l++){var c=i[l];if(c.cacheKey===o){s=c,++s.usedTimes;break}}return void 0===s&&(s=new vu(t,e,o,r,n,a),i.push(s)),s},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}function yu(){var t=new WeakMap;function e(e){var r=t.get(e);return void 0===r&&(r={},t.set(e,r)),r}function r(e){t.delete(e)}function i(e,r,i){t.get(e)[r]=i}function n(){t=new WeakMap}return{get:e,remove:r,update:i,dispose:n}}function _u(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function xu(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function bu(){var t=[],e=0,r=[],i=[],n={id:-1};function a(){e=0,r.length=0,i.length=0}function o(r,i,a,o,s,l){var u=t[e];return void 0===u?(u={id:r.id,object:r,geometry:i,material:a,program:a.program||n,groupOrder:o,renderOrder:r.renderOrder,z:s,group:l},t[e]=u):(u.id=r.id,u.object=r,u.geometry=i,u.material=a,u.program=a.program||n,u.groupOrder=o,u.renderOrder=r.renderOrder,u.z=s,u.group=l),e++,u}function s(t,e,n,a,s,l){var u=o(t,e,n,a,s,l);(!0===n.transparent?i:r).push(u)}function l(t,e,n,a,s,l){var u=o(t,e,n,a,s,l);(!0===n.transparent?i:r).unshift(u)}function u(){r.length>1&&r.sort(_u),i.length>1&&i.sort(xu)}return{opaque:r,transparent:i,init:a,push:s,unshift:l,sort:u}}function wu(){var t=new WeakMap;function e(r){var i=r.target;i.removeEventListener("dispose",e),t.delete(i)}function r(r,i){var n,a=t.get(r);return void 0===a?(n=new bu,t.set(r,new WeakMap),t.get(r).set(i,n),r.addEventListener("dispose",e)):(n=a.get(i),void 0===n&&(n=new bu,a.set(i,n))),n}function i(){t=new WeakMap}return{get:r,dispose:i}}function Tu(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var r;switch(e.type){case"DirectionalLight":r={direction:new Tr,color:new $i,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _r};break;case"SpotLight":r={position:new Tr,direction:new Tr,color:new $i,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _r};break;case"PointLight":r={position:new Tr,color:new $i,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _r,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new Tr,skyColor:new $i,groundColor:new $i};break;case"RectAreaLight":r={color:new $i,position:new Tr,halfWidth:new Tr,halfHeight:new Tr};break}return t[e.id]=r,r}}}var Su=0;function Eu(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Mu(){for(var t=new Tu,e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},r=0;r<9;r++)e.probe.push(new Tr);var i=new Tr,n=new Ur,a=new Ur;function o(r,o,s){for(var l=0,u=0,c=0,h=0;h<9;h++)e.probe[h].set(0,0,0);var p=0,d=0,f=0,m=0,v=0,g=0,y=0,_=0,x=s.matrixWorldInverse;r.sort(Eu);h=0;for(var b=r.length;h<b;h++){var w=r[h],T=w.color,S=w.intensity,E=w.distance,M=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)l+=T.r*S,u+=T.g*S,c+=T.b*S;else if(w.isLightProbe)for(var A=0;A<9;A++)e.probe[A].addScaledVector(w.sh.coefficients[A],S);else if(w.isDirectionalLight){var C=t.get(w);if(C.color.copy(w.color).multiplyScalar(w.intensity),C.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(x),C.shadow=w.castShadow,w.castShadow){var P=w.shadow;C.shadowBias=P.bias,C.shadowRadius=P.radius,C.shadowMapSize=P.mapSize,e.directionalShadowMap[p]=M,e.directionalShadowMatrix[p]=w.shadow.matrix,g++}e.directional[p]=C,p++}else if(w.isSpotLight){C=t.get(w);if(C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(x),C.color.copy(T).multiplyScalar(S),C.distance=E,C.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(x),C.coneCos=Math.cos(w.angle),C.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),C.decay=w.decay,C.shadow=w.castShadow,w.castShadow){P=w.shadow;C.shadowBias=P.bias,C.shadowRadius=P.radius,C.shadowMapSize=P.mapSize,e.spotShadowMap[f]=M,e.spotShadowMatrix[f]=w.shadow.matrix,_++}e.spot[f]=C,f++}else if(w.isRectAreaLight){C=t.get(w);C.color.copy(T).multiplyScalar(S),C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(x),a.identity(),n.copy(w.matrixWorld),n.premultiply(x),a.extractRotation(n),C.halfWidth.set(.5*w.width,0,0),C.halfHeight.set(0,.5*w.height,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),e.rectArea[m]=C,m++}else if(w.isPointLight){C=t.get(w);if(C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(x),C.color.copy(w.color).multiplyScalar(w.intensity),C.distance=w.distance,C.decay=w.decay,C.shadow=w.castShadow,w.castShadow){P=w.shadow;C.shadowBias=P.bias,C.shadowRadius=P.radius,C.shadowMapSize=P.mapSize,C.shadowCameraNear=P.camera.near,C.shadowCameraFar=P.camera.far,e.pointShadowMap[d]=M,e.pointShadowMatrix[d]=w.shadow.matrix,y++}e.point[d]=C,d++}else if(w.isHemisphereLight){C=t.get(w);C.direction.setFromMatrixPosition(w.matrixWorld),C.direction.transformDirection(x),C.direction.normalize(),C.skyColor.copy(w.color).multiplyScalar(S),C.groundColor.copy(w.groundColor).multiplyScalar(S),e.hemi[v]=C,v++}}e.ambient[0]=l,e.ambient[1]=u,e.ambient[2]=c;var L=e.hash;L.directionalLength===p&&L.pointLength===d&&L.spotLength===f&&L.rectAreaLength===m&&L.hemiLength===v&&L.numDirectionalShadows===g&&L.numPointShadows===y&&L.numSpotShadows===_||(e.directional.length=p,e.spot.length=f,e.rectArea.length=m,e.point.length=d,e.hemi.length=v,e.directionalShadowMap.length=g,e.pointShadowMap.length=y,e.spotShadowMap.length=_,e.directionalShadowMatrix.length=g,e.pointShadowMatrix.length=y,e.spotShadowMatrix.length=_,L.directionalLength=p,L.pointLength=d,L.spotLength=f,L.rectAreaLength=m,L.hemiLength=v,L.numDirectionalShadows=g,L.numPointShadows=y,L.numSpotShadows=_,e.version=Su++)}return{setup:o,state:e}}function Au(){var t=new Mu,e=[],r=[];function i(){e.length=0,r.length=0}function n(t){e.push(t)}function a(t){r.push(t)}function o(i){t.setup(e,r,i)}var s={lightsArray:e,shadowsArray:r,lights:t};return{init:i,state:s,setupLights:o,pushLight:n,pushShadow:a}}function Cu(){var t=new WeakMap;function e(r){var i=r.target;i.removeEventListener("dispose",e),t.delete(i)}function r(r,i){var n;return!1===t.has(r)?(n=new Au,t.set(r,new WeakMap),t.get(r).set(i,n),r.addEventListener("dispose",e)):!1===t.get(r).has(i)?(n=new Au,t.get(r).set(i,n)):n=t.get(r).get(i),n}function i(){t=new WeakMap}return{get:r,dispose:i}}function Pu(t){tn.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ue,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Lu(t){tn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Tr,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Pu.prototype=Object.create(tn.prototype),Pu.prototype.constructor=Pu,Pu.prototype.isMeshDepthMaterial=!0,Pu.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Lu.prototype=Object.create(tn.prototype),Lu.prototype.constructor=Lu,Lu.prototype.isMeshDistanceMaterial=!0,Lu.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var Iu="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n  \n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\n}",ku="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function Ru(t,e,r){var i=new ha,n=new _r,a=new _r,o=new Lr,s=[],l=[],u={},c={0:g,1:v,2:y},h=new ea({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new _r},radius:{value:4}},vertexShader:ku,fragmentShader:Iu}),p=h.clone();p.defines.HORIZONAL_PASS=1;var f=new wn;f.setAttribute("position",new rn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var _=new Un(f,h),x=this;function b(r,i){var n=e.update(_);h.uniforms.shadow_pass.value=r.map.texture,h.uniforms.resolution.value=r.mapSize,h.uniforms.radius.value=r.radius,t.setRenderTarget(r.mapPass),t.clear(),t.renderBufferDirect(i,null,n,h,_,null),p.uniforms.shadow_pass.value=r.mapPass.texture,p.uniforms.resolution.value=r.mapSize,p.uniforms.radius.value=r.radius,t.setRenderTarget(r.map),t.clear(),t.renderBufferDirect(i,null,n,p,_,null)}function w(t,e,r){var i=t<<0|e<<1|r<<2,n=s[i];return void 0===n&&(n=new Pu({depthPacking:Ve,morphTargets:t,skinning:e}),s[i]=n),n}function T(t,e,r){var i=t<<0|e<<1|r<<2,n=l[i];return void 0===n&&(n=new Lu({morphTargets:t,skinning:e}),l[i]=n),n}function E(e,r,i,n,a,o){var s=e.geometry,l=null,h=w,p=e.customDepthMaterial;if(!0===i.isPointLight&&(h=T,p=e.customDistanceMaterial),void 0===p){var d=!1;!0===r.morphTargets&&(!0===s.isBufferGeometry?d=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:!0===s.isGeometry&&(d=s.morphTargets&&s.morphTargets.length>0));var f=!1;!0===e.isSkinnedMesh&&(!0===r.skinning?f=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e));var v=!0===e.isInstancedMesh;l=h(d,f,v)}else l=p;if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var g=l.uuid,y=r.uuid,_=u[g];void 0===_&&(_={},u[g]=_);var x=_[y];void 0===x&&(x=l.clone(),_[y]=x),l=x}return l.visible=r.visible,l.wireframe=r.wireframe,l.side=o===m?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:c[r.side],l.clipShadows=r.clipShadows,l.clippingPlanes=r.clippingPlanes,l.clipIntersection=r.clipIntersection,l.wireframeLinewidth=r.wireframeLinewidth,l.linewidth=r.linewidth,!0===i.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(i.matrixWorld),l.nearDistance=n,l.farDistance=a),l}function M(r,n,a,o,s){if(!1!==r.visible){var l=r.layers.test(n.layers);if(l&&(r.isMesh||r.isLine||r.isPoints)&&(r.castShadow||r.receiveShadow&&s===m)&&(!r.frustumCulled||i.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,r.matrixWorld);var u=e.update(r),c=r.material;if(Array.isArray(c))for(var h=u.groups,p=0,d=h.length;p<d;p++){var f=h[p],v=c[f.materialIndex];if(v&&v.visible){var g=E(r,v,o,a.near,a.far,s);t.renderBufferDirect(a,null,u,g,r,f)}}else if(c.visible){g=E(r,c,o,a.near,a.far,s);t.renderBufferDirect(a,null,u,g,r,null)}}for(var y=r.children,_=0,x=y.length;_<x;_++)M(y[_],n,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=d,this.render=function(e,s,l){if(!1!==x.enabled&&(!1!==x.autoUpdate||!1!==x.needsUpdate)&&0!==e.length){var u=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),p=t.state;p.setBlending(S),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var d=0,f=e.length;d<f;d++){var v=e[d],g=v.shadow;if(void 0!==g){n.copy(g.mapSize);var y=g.getFrameExtents();if(n.multiply(y),a.copy(g.mapSize),(n.x>r||n.y>r)&&(console.warn("THREE.WebGLShadowMap:",v,"has shadow exceeding max texture size, reducing"),n.x>r&&(a.x=Math.floor(r/y.x),n.x=a.x*y.x,g.mapSize.x=a.x),n.y>r&&(a.y=Math.floor(r/y.y),n.y=a.y*y.y,g.mapSize.y=a.y)),null===g.map&&!g.isPointLightShadow&&this.type===m){var _={minFilter:Et,magFilter:Et,format:Ht};g.map=new Ir(n.x,n.y,_),g.map.texture.name=v.name+".shadowMap",g.mapPass=new Ir(n.x,n.y,_),g.camera.updateProjectionMatrix()}if(null===g.map){_={minFilter:xt,magFilter:xt,format:Ht};g.map=new Ir(n.x,n.y,_),g.map.texture.name=v.name+".shadowMap",g.camera.updateProjectionMatrix()}t.setRenderTarget(g.map),t.clear();for(var w=g.getViewportCount(),T=0;T<w;T++){var E=g.getViewport(T);o.set(a.x*E.x,a.y*E.y,a.x*E.z,a.y*E.w),p.viewport(o),g.updateMatrices(v,T),i=g.getFrustum(),M(s,l,g.camera,v,this.type)}g.isPointLightShadow||this.type!==m||b(g,l)}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}x.needsUpdate=!1,t.setRenderTarget(u,c,h)}}}function Ou(t,e,r){var i=r.isWebGL2;function n(){var e=!1,r=new Lr,i=null,n=new Lr(0,0,0,0);return{setMask:function(r){i===r||e||(t.colorMask(r,r,r,r),i=r)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){!0===s&&(e*=o,i*=o,a*=o),r.set(e,i,a,o),!1===n.equals(r)&&(t.clearColor(e,i,a,o),n.copy(r))},reset:function(){e=!1,i=null,n.set(-1,0,0,0)}}}function a(){var e=!1,r=null,i=null,n=null;return{setTest:function(t){t?Et(2929):Mt(2929)},setMask:function(i){r===i||e||(t.depthMask(i),r=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case q:t.depthFunc(512);break;case X:t.depthFunc(519);break;case $:t.depthFunc(513);break;case Y:t.depthFunc(515);break;case Z:t.depthFunc(514);break;case J:t.depthFunc(518);break;case K:t.depthFunc(516);break;case Q:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){n!==e&&(t.clearDepth(e),n=e)},reset:function(){e=!1,r=null,i=null,n=null}}}function u(){var e=!1,r=null,i=null,n=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(t){e||(t?Et(2960):Mt(2960))},setMask:function(i){r===i||e||(t.stencilMask(i),r=i)},setFunc:function(e,r,o){i===e&&n===r&&a===o||(t.stencilFunc(e,r,o),i=e,n=r,a=o)},setOp:function(e,r,i){o===e&&s===r&&l===i||(t.stencilOp(e,r,i),o=e,s=r,l=i)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,r=null,i=null,n=null,a=null,o=null,s=null,l=null,u=null}}}var c=new n,h=new a,p=new u,d=t.getParameter(34921),f=new Uint8Array(d),m=new Uint8Array(d),v=new Uint8Array(d),_={},x=null,b=null,w=null,T=null,tt=null,et=null,rt=null,it=null,nt=null,at=!1,ot=null,st=null,lt=null,ut=null,ct=null,ht=t.getParameter(35661),pt=!1,dt=0,ft=t.getParameter(7938);-1!==ft.indexOf("WebGL")?(dt=parseFloat(/^WebGL\ ([0-9])/.exec(ft)[1]),pt=dt>=1):-1!==ft.indexOf("OpenGL ES")&&(dt=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ft)[1]),pt=dt>=2);var mt=null,vt={},gt=new Lr,yt=new Lr;function _t(e,r,i){var n=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<i;o++)t.texImage2D(r+o,0,6408,1,1,0,6408,5121,n);return a}var xt={};function bt(){for(var t=0,e=f.length;t<e;t++)f[t]=0}function wt(t){Tt(t,0)}function Tt(r,n){if(f[r]=1,0===m[r]&&(t.enableVertexAttribArray(r),m[r]=1),v[r]!==n){var a=i?t:e.get("ANGLE_instanced_arrays");a[i?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,n),v[r]=n}}function St(){for(var e=0,r=m.length;e!==r;++e)m[e]!==f[e]&&(t.disableVertexAttribArray(e),m[e]=0)}function Et(e){!0!==_[e]&&(t.enable(e),_[e]=!0)}function Mt(e){!1!==_[e]&&(t.disable(e),_[e]=!1)}function At(e){return x!==e&&(t.useProgram(e),x=e,!0)}xt[3553]=_t(3553,3553,1),xt[34067]=_t(34067,34069,6),c.setClear(0,0,0,1),h.setClear(1),p.setClear(0),Et(2929),h.setFunc(Y),Rt(!1),Ot(s),Et(2884),It(S);var Ct={[L]:32774,[I]:32778,[k]:32779};if(i)Ct[R]=32775,Ct[O]=32776;else{var Pt=e.get("EXT_blend_minmax");null!==Pt&&(Ct[R]=Pt.MIN_EXT,Ct[O]=Pt.MIN_EXT)}var Lt={[z]:0,[D]:1,[B]:768,[N]:770,[W]:776,[G]:774,[V]:772,[F]:769,[U]:771,[H]:775,[j]:773};function It(e,r,i,n,a,o,s,l){if(e!==S){if(b||(Et(3042),b=!0),e===P)a=a||r,o=o||i,s=s||n,r===T&&a===rt||(t.blendEquationSeparate(Ct[r],Ct[a]),T=r,rt=a),i===tt&&n===et&&o===it&&s===nt||(t.blendFuncSeparate(Lt[i],Lt[n],Lt[o],Lt[s]),tt=i,et=n,it=o,nt=s),w=e,at=null;else if(e!==w||l!==at){if(T===L&&rt===L||(t.blendEquation(32774),T=L,rt=L),l)switch(e){case E:t.blendFuncSeparate(1,771,1,771);break;case M:t.blendFunc(1,1);break;case A:t.blendFuncSeparate(0,0,769,771);break;case C:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case E:t.blendFuncSeparate(770,771,1,771);break;case M:t.blendFunc(770,1);break;case A:t.blendFunc(0,769);break;case C:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}tt=null,et=null,it=null,nt=null,w=e,at=l}}else b&&(Mt(3042),b=!1)}function kt(t,e){t.side===y?Mt(2884):Et(2884);var r=t.side===g;e&&(r=!r),Rt(r),t.blending===E&&!1===t.transparent?It(S):It(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),h.setFunc(t.depthFunc),h.setTest(t.depthTest),h.setMask(t.depthWrite),c.setMask(t.colorWrite);var i=t.stencilWrite;p.setTest(i),i&&(p.setMask(t.stencilWriteMask),p.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),p.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Dt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function Rt(e){ot!==e&&(e?t.frontFace(2304):t.frontFace(2305),ot=e)}function Ot(e){e!==o?(Et(2884),e!==st&&(e===s?t.cullFace(1029):e===l?t.cullFace(1028):t.cullFace(1032))):Mt(2884),st=e}function zt(e){e!==lt&&(pt&&t.lineWidth(e),lt=e)}function Dt(e,r,i){e?(Et(32823),ut===r&&ct===i||(t.polygonOffset(r,i),ut=r,ct=i)):Mt(32823)}function Bt(t){t?Et(3089):Mt(3089)}function Ft(e){void 0===e&&(e=33984+ht-1),mt!==e&&(t.activeTexture(e),mt=e)}function Nt(e,r){null===mt&&Ft();var i=vt[mt];void 0===i&&(i={type:void 0,texture:void 0},vt[mt]=i),i.type===e&&i.texture===r||(t.bindTexture(e,r||xt[e]),i.type=e,i.texture=r)}function Ut(){var e=vt[mt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function Vt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function jt(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Gt(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Ht(e){!1===gt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),gt.copy(e))}function Wt(e){!1===yt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),yt.copy(e))}function qt(){for(var e=0;e<m.length;e++)1===m[e]&&(t.disableVertexAttribArray(e),m[e]=0);_={},mt=null,vt={},x=null,w=null,ot=null,st=null,c.reset(),h.reset(),p.reset()}return{buffers:{color:c,depth:h,stencil:p},initAttributes:bt,enableAttribute:wt,enableAttributeAndDivisor:Tt,disableUnusedAttributes:St,enable:Et,disable:Mt,useProgram:At,setBlending:It,setMaterial:kt,setFlipSided:Rt,setCullFace:Ot,setLineWidth:zt,setPolygonOffset:Dt,setScissorTest:Bt,activeTexture:Ft,bindTexture:Nt,unbindTexture:Ut,compressedTexImage2D:Vt,texImage2D:jt,texImage3D:Gt,scissor:Ht,viewport:Wt,reset:qt}}function zu(t,e,r,i,n,a,o){var s,l=n.isWebGL2,u=n.maxTextures,c=n.maxCubemapSize,h=n.maxTextureSize,p=n.maxSamples,d=new WeakMap,f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d");function m(t,e){return f?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(t,e,r,i){var n=1;if((t.width>i||t.height>i)&&(n=i/Math.max(t.width,t.height)),n<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?yr.floorPowerOfTwo:Math.floor,o=a(n*t.width),l=a(n*t.height);void 0===s&&(s=m(o,l));var u=r?m(o,l):s;u.width=o,u.height=l;var c=u.getContext("2d");return c.drawImage(t,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+l+")."),u}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function g(t){return yr.isPowerOfTwo(t.width)&&yr.isPowerOfTwo(t.height)}function y(t){return!l&&(t.wrapS!==yt||t.wrapT!==yt||t.minFilter!==xt&&t.minFilter!==Et)}function _(t,e){return t.generateMipmaps&&e&&t.minFilter!==xt&&t.minFilter!==Et}function x(e,r,n,a){t.generateMipmap(e);var o=i.get(r);o.__maxMipLevel=Math.log(Math.max(n,a))*Math.LOG2E}function b(t,r){if(!1===l)return t;var i=t;return 6403===t&&(5126===r&&(i=33326),5131===r&&(i=33325),5121===r&&(i=33321)),6407===t&&(5126===r&&(i=34837),5131===r&&(i=34843),5121===r&&(i=32849)),6408===t&&(5126===r&&(i=34836),5131===r&&(i=34842),5121===r&&(i=32856)),33325===i||33326===i||34842===i||34836===i?e.get("EXT_color_buffer_float"):34843!==i&&34837!==i||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function w(t){return t===xt||t===bt||t===Tt?9728:9729}function T(t){var e=t.target;e.removeEventListener("dispose",T),E(e),e.isVideoTexture&&d.delete(e),o.memory.textures--}function S(t){var e=t.target;e.removeEventListener("dispose",S),M(e),o.memory.textures--}function E(e){var r=i.get(e);void 0!==r.__webglInit&&(t.deleteTexture(r.__webglTexture),i.remove(e))}function M(e){var r=i.get(e),n=i.get(e.texture);if(e){if(void 0!==n.__webglTexture&&t.deleteTexture(n.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var a=0;a<6;a++)t.deleteFramebuffer(r.__webglFramebuffer[a]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[a]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer);if(e.isWebGLMultiviewRenderTarget){t.deleteTexture(r.__webglColorTexture),t.deleteTexture(r.__webglDepthStencilTexture),o.memory.textures-=2;a=0;for(var s=r.__webglViewFramebuffers.length;a<s;a++)t.deleteFramebuffer(r.__webglViewFramebuffers[a])}i.remove(e.texture),i.remove(e)}}var A=0;function C(){A=0}function P(){var t=A;return t>=u&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+u),A+=1,t}function L(t,e){var n=i.get(t);if(t.isVideoTexture&&$(t),t.version>0&&n.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void N(n,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.activeTexture(33984+e),r.bindTexture(3553,n.__webglTexture)}function I(t,e){var n=i.get(t);t.version>0&&n.__version!==t.version?N(n,t,e):(r.activeTexture(33984+e),r.bindTexture(35866,n.__webglTexture))}function k(t,e){var n=i.get(t);t.version>0&&n.__version!==t.version?N(n,t,e):(r.activeTexture(33984+e),r.bindTexture(32879,n.__webglTexture))}function R(e,n){if(6===e.image.length){var o=i.get(e);if(e.version>0&&o.__version!==e.version){F(o,e),r.activeTexture(33984+n),r.bindTexture(34067,o.__webglTexture),t.pixelStorei(37440,e.flipY);for(var s=e&&e.isCompressedTexture,u=e.image[0]&&e.image[0].isDataTexture,h=[],p=0;p<6;p++)h[p]=s||u?u?e.image[p].image:e.image[p]:v(e.image[p],!1,!0,c);var d,f=h[0],m=g(f)||l,y=a.convert(e.format),w=a.convert(e.type),T=b(y,w);if(B(34067,e,m),s){for(p=0;p<6;p++){d=h[p].mipmaps;for(var S=0;S<d.length;S++){var E=d[S];e.format!==Ht&&e.format!==Gt?null!==y?r.compressedTexImage2D(34069+p,S,T,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+p,S,T,E.width,E.height,0,y,w,E.data)}}o.__maxMipLevel=d.length-1}else{d=e.mipmaps;for(p=0;p<6;p++)if(u){r.texImage2D(34069+p,0,T,h[p].width,h[p].height,0,y,w,h[p].data);for(S=0;S<d.length;S++){E=d[S];var M=E.image[p].image;r.texImage2D(34069+p,S+1,T,M.width,M.height,0,y,w,M.data)}}else{r.texImage2D(34069+p,0,T,y,w,h[p]);for(S=0;S<d.length;S++){E=d[S];r.texImage2D(34069+p,S+1,T,y,w,E.image[p])}}o.__maxMipLevel=d.length}_(e,m)&&x(34067,e,f.width,f.height),o.__version=e.version,e.onUpdate&&e.onUpdate(e)}else r.activeTexture(33984+n),r.bindTexture(34067,o.__webglTexture)}}function O(t,e){r.activeTexture(33984+e),r.bindTexture(34067,i.get(t).__webglTexture)}var z={[gt]:10497,[yt]:33071,[_t]:33648},D={[xt]:9728,[bt]:9984,[Tt]:9986,[Et]:9729,[Mt]:9985,[Ct]:9987};function B(r,a,o){o?(t.texParameteri(r,10242,z[a.wrapS]),t.texParameteri(r,10243,z[a.wrapT]),32879!==r&&35866!==r||t.texParameteri(r,32882,z[a.wrapR]),t.texParameteri(r,10240,D[a.magFilter]),t.texParameteri(r,10241,D[a.minFilter])):(t.texParameteri(r,10242,33071),t.texParameteri(r,10243,33071),32879!==r&&35866!==r||t.texParameteri(r,32882,33071),a.wrapS===yt&&a.wrapT===yt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(r,10240,w(a.magFilter)),t.texParameteri(r,10241,w(a.minFilter)),a.minFilter!==xt&&a.minFilter!==Et&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=e.get("EXT_texture_filter_anisotropic");if(s){if(a.type===Dt&&null===e.get("OES_texture_float_linear"))return;if(a.type===Bt&&null===(l||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(r,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,n.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function F(e,r){void 0===e.__webglInit&&(e.__webglInit=!0,r.addEventListener("dispose",T),e.__webglTexture=t.createTexture(),o.memory.textures++)}function N(e,i,n){var o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),F(e,i),r.activeTexture(33984+n),r.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);var s=y(i)&&!1===g(i.image),u=v(i.image,s,!1,h),c=g(u)||l,p=a.convert(i.format),d=a.convert(i.type),f=b(p,d);B(o,i,c);var m,w=i.mipmaps;if(i.isDepthTexture){if(f=6402,i.type===Dt){if(!1===l)throw new Error("Float Depth Texture only supported in WebGL2.0");f=36012}else l&&(f=33189);i.format===$t&&6402===f&&i.type!==Rt&&i.type!==zt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Rt,d=a.convert(i.type)),i.format===Yt&&(f=34041,i.type!==Vt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Vt,d=a.convert(i.type))),r.texImage2D(3553,0,f,u.width,u.height,0,p,d,null)}else if(i.isDataTexture)if(w.length>0&&c){for(var T=0,S=w.length;T<S;T++)m=w[T],r.texImage2D(3553,T,f,m.width,m.height,0,p,d,m.data);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else r.texImage2D(3553,0,f,u.width,u.height,0,p,d,u.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(T=0,S=w.length;T<S;T++)m=w[T],i.format!==Ht&&i.format!==Gt?null!==p?r.compressedTexImage2D(3553,T,f,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,T,f,m.width,m.height,0,p,d,m.data);e.__maxMipLevel=w.length-1}else if(i.isDataTexture2DArray)r.texImage3D(35866,0,f,u.width,u.height,u.depth,0,p,d,u.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)r.texImage3D(32879,0,f,u.width,u.height,u.depth,0,p,d,u.data),e.__maxMipLevel=0;else if(w.length>0&&c){for(T=0,S=w.length;T<S;T++)m=w[T],r.texImage2D(3553,T,f,p,d,m);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else r.texImage2D(3553,0,f,p,d,u),e.__maxMipLevel=0;_(i,c)&&x(3553,i,u.width,u.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function U(e,n,o,s){var l=a.convert(n.texture.format),u=a.convert(n.texture.type),c=b(l,u);r.texImage2D(s,0,c,n.width,n.height,0,l,u,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,i.get(n.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function V(e,r,i){if(t.bindRenderbuffer(36161,e),r.depthBuffer&&!r.stencilBuffer){if(i){var n=X(r);t.renderbufferStorageMultisample(36161,n,33189,r.width,r.height)}else t.renderbufferStorage(36161,33189,r.width,r.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(r.depthBuffer&&r.stencilBuffer){if(i){n=X(r);t.renderbufferStorageMultisample(36161,n,35056,r.width,r.height)}else t.renderbufferStorage(36161,34041,r.width,r.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var o=a.convert(r.texture.format),s=a.convert(r.texture.type),l=b(o,s);if(i){n=X(r);t.renderbufferStorageMultisample(36161,n,l,r.width,r.height)}else t.renderbufferStorage(36161,l,r.width,r.height)}t.bindRenderbuffer(36161,null)}function j(e,r){var n=r&&r.isWebGLRenderTargetCube;if(n)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),L(r.depthTexture,0);var a=i.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===$t)t.framebufferTexture2D(36160,36096,3553,a,0);else{if(r.depthTexture.format!==Yt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,a,0)}}function G(e){var r=i.get(e),n=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");j(r.__webglFramebuffer,e)}else if(n){r.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(36160,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=t.createRenderbuffer(),V(r.__webglDepthbuffer[a],e)}else t.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),V(r.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}function H(n){var s=i.get(n),u=i.get(n.texture);n.addEventListener("dispose",S),u.__webglTexture=t.createTexture(),o.memory.textures++;var c=!0===n.isWebGLRenderTargetCube,h=!0===n.isWebGLMultisampleRenderTarget,p=!0===n.isWebGLMultiviewRenderTarget,d=g(n)||l;if(c){s.__webglFramebuffer=[];for(var f=0;f<6;f++)s.__webglFramebuffer[f]=t.createFramebuffer()}else if(s.__webglFramebuffer=t.createFramebuffer(),h)if(l){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var m=a.convert(n.texture.format),v=a.convert(n.texture.type),y=b(m,v),w=X(n);t.renderbufferStorageMultisample(36161,w,y,n.width,n.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),n.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),V(s.__webglDepthRenderbuffer,n,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(p){var T=n.width,E=n.height,M=n.numViews;t.bindFramebuffer(36160,s.__webglFramebuffer);var A=e.get("OVR_multiview2");o.memory.textures+=2;var C=t.createTexture();t.bindTexture(35866,C),t.texParameteri(35866,10240,9728),t.texParameteri(35866,10241,9728),t.texImage3D(35866,0,32856,T,E,M,0,6408,5121,null),A.framebufferTextureMultiviewOVR(36160,36064,C,0,0,M);var P=t.createTexture();t.bindTexture(35866,P),t.texParameteri(35866,10240,9728),t.texParameteri(35866,10241,9728),t.texImage3D(35866,0,35056,T,E,M,0,34041,34042,null),A.framebufferTextureMultiviewOVR(36160,33306,P,0,0,M);var L=new Array(M);for(f=0;f<M;++f)L[f]=t.createFramebuffer(),t.bindFramebuffer(36160,L[f]),t.framebufferTextureLayer(36160,36064,C,0,f);s.__webglColorTexture=C,s.__webglDepthStencilTexture=P,s.__webglViewFramebuffers=L,t.bindFramebuffer(36160,null),t.bindTexture(35866,null)}if(c){r.bindTexture(34067,u.__webglTexture),B(34067,n.texture,d);for(f=0;f<6;f++)U(s.__webglFramebuffer[f],n,36064,34069+f);_(n.texture,d)&&x(34067,n.texture,n.width,n.height),r.bindTexture(34067,null)}else p||(r.bindTexture(3553,u.__webglTexture),B(3553,n.texture,d),U(s.__webglFramebuffer,n,36064,3553),_(n.texture,d)&&x(3553,n.texture,n.width,n.height),r.bindTexture(3553,null));n.depthBuffer&&G(n)}function W(t){var e=t.texture,n=g(t)||l;if(_(e,n)){var a=t.isWebGLRenderTargetCube?34067:3553,o=i.get(e).__webglTexture;r.bindTexture(a,o),x(a,e,t.width,t.height),r.bindTexture(a,null)}}function q(e){if(e.isWebGLMultisampleRenderTarget)if(l){var r=i.get(e);t.bindFramebuffer(36008,r.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,r.__webglFramebuffer);var n=e.width,a=e.height,o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024),t.blitFramebuffer(0,0,n,a,0,0,n,a,o,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function X(t){return l&&t.isWebGLMultisampleRenderTarget?Math.min(p,t.samples):0}function $(t){var e=o.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}var Y=!1,Z=!1;function J(t,e){t&&t.isWebGLRenderTarget&&(!1===Y&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Y=!0),t=t.texture),L(t,e)}function K(t,e){t&&t.isWebGLRenderTargetCube&&(!1===Z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Z=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?R(t,e):O(t,e)}this.allocateTextureUnit=P,this.resetTextureUnits=C,this.setTexture2D=L,this.setTexture2DArray=I,this.setTexture3D=k,this.setTextureCube=R,this.setTextureCubeDynamic=O,this.setupRenderTarget=H,this.updateRenderTargetMipmap=W,this.updateMultisampleRenderTarget=q,this.safeSetTexture2D=J,this.safeSetTextureCube=K}function Du(t,e,r){var i=r.isWebGL2;function n(t){var r;if(t===Lt)return 5121;if(t===Ft)return 32819;if(t===Nt)return 32820;if(t===Ut)return 33635;if(t===It)return 5120;if(t===kt)return 5122;if(t===Rt)return 5123;if(t===Ot)return 5124;if(t===zt)return 5125;if(t===Dt)return 5126;if(t===Bt)return i?5131:(r=e.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(t===jt)return 6406;if(t===Gt)return 6407;if(t===Ht)return 6408;if(t===Wt)return 6409;if(t===qt)return 6410;if(t===$t)return 6402;if(t===Yt)return 34041;if(t===Zt)return 6403;if(t===Jt||t===Kt||t===Qt||t===te){if(r=e.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(t===Jt)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Kt)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Qt)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===te)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===ee||t===re||t===ie||t===ne){if(r=e.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(t===ee)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===re)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ie)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ne)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return t===ae?(r=e.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null):t===oe||t===se||t===le||t===ue||t===ce||t===he||t===pe||t===de||t===fe||t===me||t===ve||t===ge||t===ye||t===_e?(r=e.get("WEBGL_compressed_texture_astc"),null!==r?t:null):t===Vt?i?34042:(r=e.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0}return{convert:n}}function Bu(t,e,r,i){Ir.call(this,t,e,i),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=r}function Fu(t,e){var r,i,n,a,o,s,l,u=2,c=t.extensions,h=t.properties,p=0;function d(){if(void 0===l){var t=c.get("OVR_multiview2");if(l=null!==t&&!1===e.getContextAttributes().antialias,l){p=e.getParameter(t.MAX_VIEWS_OVR),r=new Bu(0,0,u),s=new _r,a=[],n=[],o=[];for(var i=0;i<p;i++)a[i]=new Ur,n[i]=new Mr}}return l}function f(t){return t.isArrayCamera?t.cameras:(o[0]=t,o)}function m(t,r){for(var i=f(t),n=0;n<i.length;n++)a[n].copy(i[n].projectionMatrix);r.setValue(e,"projectionMatrices",a)}function v(t,r){for(var i=f(t),n=0;n<i.length;n++)a[n].copy(i[n].matrixWorldInverse);r.setValue(e,"viewMatrices",a)}function g(t,r,i){for(var o=f(r),s=0;s<o.length;s++)a[s].multiplyMatrices(o[s].matrixWorldInverse,t.matrixWorld),n[s].getNormalMatrix(a[s]);i.setValue(e,"modelViewMatrices",a),i.setValue(e,"normalMatrices",n)}function y(t){if(void 0===t.isArrayCamera)return!0;var e=t.cameras;if(e.length>p)return!1;for(var r=1,i=e.length;r<i;r++)if(e[0].viewport.z!==e[r].viewport.z||e[0].viewport.w!==e[r].viewport.w)return!1;return!0}function _(e){if(i?s.set(i.width,i.height):t.getDrawingBufferSize(s),e.isArrayCamera){var n=e.cameras[0].viewport;r.setSize(n.z,n.w),r.setNumViews(e.cameras.length)}else r.setSize(s.x,s.y),r.setNumViews(u)}function x(e){!1!==y(e)&&(i=t.getRenderTarget(),_(e),t.setRenderTarget(r))}function b(e){r===t.getRenderTarget()&&(t.setRenderTarget(i),w(e))}function w(t){var i=r,n=i.numViews,a=h.get(i).__webglViewFramebuffers,o=i.width,l=i.height;if(t.isArrayCamera)for(var u=0;u<n;u++){var c=t.cameras[u].viewport,p=c.x,d=c.y,f=p+c.z,m=d+c.w;e.bindFramebuffer(36008,a[u]),e.blitFramebuffer(0,0,o,l,p,d,f,m,16384,9728)}else e.bindFramebuffer(36008,a[0]),e.blitFramebuffer(0,0,o,l,0,0,s.x,s.y,16384,9728)}this.isAvailable=d,this.attachCamera=x,this.detachCamera=b,this.updateCameraProjectionMatricesUniform=m,this.updateCameraViewMatricesUniform=v,this.updateObjectMatricesUniforms=g}function Nu(){ni.call(this),this.type="Group"}function Uu(t){ia.call(this),this.cameras=t||[]}Bu.prototype=Object.assign(Object.create(Ir.prototype),{constructor:Bu,isWebGLMultiviewRenderTarget:!0,copy:function(t){return Ir.prototype.copy.call(this,t),this.numViews=t.numViews,this},setNumViews:function(t){return this.numViews!==t&&(this.numViews=t,this.dispose()),this}}),Nu.prototype=Object.assign(Object.create(ni.prototype),{constructor:Nu,isGroup:!0}),Uu.prototype=Object.assign(Object.create(ia.prototype),{constructor:Uu,isArrayCamera:!0});var Vu,ju=new Tr,Gu=new Tr;function Hu(t,e,r){ju.setFromMatrixPosition(e.matrixWorld),Gu.setFromMatrixPosition(r.matrixWorld);var i=ju.distanceTo(Gu),n=e.projectionMatrix.elements,a=r.projectionMatrix.elements,o=n[14]/(n[10]-1),s=n[14]/(n[10]+1),l=(n[9]+1)/n[5],u=(n[9]-1)/n[5],c=(n[8]-1)/n[0],h=(a[8]+1)/a[0],p=o*c,d=o*h,f=i/(-c+h),m=f*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var v=o+f,g=s+f,y=p-m,_=d+(i-m),x=l*s/g*v,b=u*s/g*v;t.projectionMatrix.makePerspective(y,_,x,b,v,g)}function Wu(t){var e,r,i=this,n=null,a=null,o=null,s=[],l=new Ur,u=new Ur,c=1,h="local-floor";"undefined"!==typeof window&&"VRFrameData"in window&&(a=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",b,!1));var p=new Ur,d=new xr,f=new Tr,m=new ia;m.viewport=new Lr,m.layers.enable(1);var v=new ia;v.viewport=new Lr,v.layers.enable(2);var g=new Uu([m,v]);function y(){return null!==n&&!0===n.isPresenting}g.layers.enable(1),g.layers.enable(2);var _,x=new _r;function b(){if(y()){var a=n.getEyeParameters("left");e=2*a.renderWidth*c,r=a.renderHeight*c,_=t.getPixelRatio(),t.getSize(x),t.setDrawingBufferSize(e,r,1),m.viewport.set(0,0,e/2,r),v.viewport.set(e/2,0,e/2,r),M.start(),i.dispatchEvent({type:"sessionstart"})}else i.enabled&&t.setDrawingBufferSize(x.width,x.height,_),M.stop(),i.dispatchEvent({type:"sessionend"})}var w=[];function T(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),r=0,i=e.length;r<i;r++){var n=e[r];if(n&&("Daydream Controller"===n.id||"Gear VR Controller"===n.id||"Oculus Go Controller"===n.id||"OpenVR Gamepad"===n.id||n.id.startsWith("Oculus Touch")||n.id.startsWith("HTC Vive Focus")||n.id.startsWith("Spatial Controller"))){var a=n.hand;if(0===t&&(""===a||"right"===a))return n;if(1===t&&"left"===a)return n}}}function S(){for(var t=0;t<s.length;t++){var e=s[t],r=T(t);if(void 0!==r&&void 0!==r.pose){if(null===r.pose)return;var i=r.pose;!1===i.hasPosition&&e.position.set(.2,-.6,-.05),null!==i.position&&e.position.fromArray(i.position),null!==i.orientation&&e.quaternion.fromArray(i.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(l),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var n="Daydream Controller"===r.id?0:1;void 0===w[t]&&(w[t]=!1),w[t]!==r.buttons[n].pressed&&(w[t]=r.buttons[n].pressed,!0===w[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}function E(t,i){null!==i&&4===i.length&&t.set(i[0]*e,i[1]*r,i[2]*e,i[3]*r)}this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&(e=new Nu,e.matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.getDevice=function(){return n},this.setDevice=function(t){void 0!==t&&(n=t),M.setContext(t)},this.setFramebufferScaleFactor=function(t){c=t},this.setReferenceSpaceType=function(t){h=t},this.setPoseTarget=function(t){void 0!==t&&(o=t)},this.getCamera=function(t){var e="local-floor"===h?1.6:0;if(!1===y())return t.position.set(0,e,0),t.rotation.set(0,0,0),t;if(n.depthNear=t.near,n.depthFar=t.far,n.getFrameData(a),"local-floor"===h){var r=n.stageParameters;r?l.fromArray(r.sittingToStandingTransform):l.makeTranslation(0,e,0)}var i=a.pose,s=null!==o?o:t;s.matrix.copy(l),s.matrix.decompose(s.position,s.quaternion,s.scale),null!==i.orientation&&(d.fromArray(i.orientation),s.quaternion.multiply(d)),null!==i.position&&(d.setFromRotationMatrix(l),f.fromArray(i.position),f.applyQuaternion(d),s.position.add(f)),s.updateMatrixWorld(),m.near=t.near,v.near=t.near,m.far=t.far,v.far=t.far,m.matrixWorldInverse.fromArray(a.leftViewMatrix),v.matrixWorldInverse.fromArray(a.rightViewMatrix),u.getInverse(l),"local-floor"===h&&(m.matrixWorldInverse.multiply(u),v.matrixWorldInverse.multiply(u));var c=s.parent;null!==c&&(p.getInverse(c.matrixWorld),m.matrixWorldInverse.multiply(p),v.matrixWorldInverse.multiply(p)),m.matrixWorld.getInverse(m.matrixWorldInverse),v.matrixWorld.getInverse(v.matrixWorldInverse),m.projectionMatrix.fromArray(a.leftProjectionMatrix),v.projectionMatrix.fromArray(a.rightProjectionMatrix),Hu(g,m,v);var _=n.getLayers();if(_.length){var x=_[0];E(m.viewport,x.leftBounds),E(v.viewport,x.rightBounds)}return S(),g},this.getStandingMatrix=function(){return l},this.isPresenting=y;var M=new Is;this.setAnimationLoop=function(t){M.setAnimationLoop(t),y()&&M.start()},this.submitFrame=function(){y()&&n.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",b)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function qu(t,e){var r=this,i=null,n=null,a="local-floor",o=null,s=[],l=[];function u(){return null!==i&&null!==n}var c=new ia;c.layers.enable(1),c.viewport=new Lr;var h=new ia;h.layers.enable(2),h.viewport=new Lr;var p=new Uu([c,h]);function d(t){for(var e=0;e<s.length;e++)l[e]===t.inputSource&&s[e].dispatchEvent({type:t.type})}function f(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),b.stop(),r.dispatchEvent({type:"sessionend"})}function m(t){n=t,b.setContext(i),b.start(),r.dispatchEvent({type:"sessionstart"})}function v(){for(var t=0;t<s.length;t++)l[t]=g(t)}function g(t){for(var e=i.inputSources,r=0;r<e.length;r++){var n=e[r],a=n.handedness;if(0===t&&("none"===a||"right"===a))return n;if(1===t&&"left"===a)return n}}function y(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}p.layers.enable(1),p.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&(e=new Nu,e.matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(t){a=t},this.getSession=function(){return i},this.setSession=function(t){i=t,null!==i&&(i.addEventListener("select",d),i.addEventListener("selectstart",d),i.addEventListener("selectend",d),i.addEventListener("end",f),i.updateRenderState({baseLayer:new XRWebGLLayer(i,e)}),i.requestReferenceSpace(a).then(m),i.addEventListener("inputsourceschange",v),v())},this.getCamera=function(t){if(u()){var e=t.parent,r=p.cameras;y(p,e);for(var i=0;i<r.length;i++)y(r[i],e);t.matrixWorld.copy(p.matrixWorld);for(var n=t.children,a=(i=0,n.length);i<a;i++)n[i].updateMatrixWorld(!0);return Hu(p,c,h),p}return t},this.isPresenting=u;var _=null;function x(e,r){if(o=r.getViewerPose(n),null!==o){var a=o.views,u=i.renderState.baseLayer;t.setFramebuffer(u.framebuffer);for(var c=0;c<a.length;c++){var h=a[c],d=u.getViewport(h),f=h.transform.inverse.matrix,m=p.cameras[c];m.matrix.fromArray(f).getInverse(m.matrix),m.projectionMatrix.fromArray(h.projectionMatrix),m.viewport.set(d.x,d.y,d.width,d.height),0===c&&p.matrix.copy(m.matrix)}}for(c=0;c<s.length;c++){var v=s[c],g=l[c];if(g){var y=r.getPose(g.targetRaySpace,n);if(null!==y){v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.visible=!0;continue}}v.visible=!1}_&&_(e)}var b=new Is;b.setAnimationLoop(x),this.setAnimationLoop=function(t){_=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Ur},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Xu(t){t=t||{};var e=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,n=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,u=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,h=null,p=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=nt,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d,f,m,v,y,_,x,b,w,T,S,E,M,A,C,P,L,I,k=this,R=!1,O=null,z=0,D=0,B=null,F=null,N=-1,U={geometry:null,program:null,wireframe:!1},V=null,j=null,G=new Lr,H=new Lr,W=null,q=e.width,X=e.height,$=1,Y=new Lr(0,0,q,X),Z=new Lr(0,0,q,X),J=!1,K=new ha,Q=new Fs,tt=!1,et=!1,rt=new Ur,it=new Tr;function at(){return null===B?$:1}try{var ot={alpha:i,depth:n,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c,xrCompatible:!0};if(e.addEventListener("webglcontextlost",ht,!1),e.addEventListener("webglcontextrestored",pt,!1),d=r||e.getContext("webgl",ot)||e.getContext("experimental-webgl",ot),null===d)throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===d.getShaderPrecisionFormat&&(d.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Xt){throw console.error("THREE.WebGLRenderer: "+Xt.message),Xt}function st(){f=new Ns(d),m=new Bs(d,f,t),!1===m.isWebGL2&&(f.get("WEBGL_depth_texture"),f.get("OES_texture_float"),f.get("OES_texture_half_float"),f.get("OES_texture_half_float_linear"),f.get("OES_standard_derivatives"),f.get("OES_element_index_uint"),f.get("ANGLE_instanced_arrays")),f.get("OES_texture_float_linear"),I=new Du(d,f,m),v=new Ou(d,f,m),v.scissor(H.copy(Z).multiplyScalar($).floor()),v.viewport(G.copy(Y).multiplyScalar($).floor()),y=new js(d),_=new yu,x=new zu(d,f,v,_,m,I,y),b=new ks(d),w=new Us(d,b,y),T=new Ws(d,w,b,y),C=new Hs(d),S=new gu(k,f,m),E=new wu,M=new Cu,A=new zs(k,v,T,s),P=new Ds(d,f,y,m),L=new Vs(d,f,y,m),y.programs=S.programs,k.capabilities=m,k.extensions=f,k.properties=_,k.renderLists=E,k.state=v,k.info=y}st();var lt="undefined"!==typeof navigator&&"xr"in navigator&&"isSessionSupported"in navigator.xr?new qu(k,d):new Wu(k);this.vr=lt;var ut=new Fu(k,d),ct=new Ru(k,T,m.maxTextureSize);function ht(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function pt(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1,st()}function dt(t){var e=t.target;e.removeEventListener("dispose",dt),ft(e)}function ft(t){mt(t),_.remove(t)}function mt(t){var e=_.get(t).program;t.program=void 0,void 0!==e&&S.releaseProgram(e)}function vt(t,e){t.render((function(t){k.renderBufferImmediate(t,e)}))}function gt(t,e,r,i){if(!1!==m.isWebGL2||!t.isInstancedMesh&&!e.isInstancedBufferGeometry||null!==f.get("ANGLE_instanced_arrays")){v.initAttributes();var n=e.attributes,a=i.getAttributes(),o=r.defaultAttributeValues;for(var s in a){var l=a[s];if(l>=0){var u=n[s];if(void 0!==u){var c=u.normalized,h=u.itemSize,p=b.get(u);if(void 0===p)continue;var g=p.buffer,y=p.type,_=p.bytesPerElement;if(u.isInterleavedBufferAttribute){var x=u.data,w=x.stride,T=u.offset;x&&x.isInstancedInterleavedBuffer?(v.enableAttributeAndDivisor(l,x.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=x.meshPerAttribute*x.count)):v.enableAttribute(l),d.bindBuffer(34962,g),d.vertexAttribPointer(l,h,y,c,w*_,T*_)}else u.isInstancedBufferAttribute?(v.enableAttributeAndDivisor(l,u.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=u.meshPerAttribute*u.count)):v.enableAttribute(l),d.bindBuffer(34962,g),d.vertexAttribPointer(l,h,y,c,0,0)}else if("instanceMatrix"===s){p=b.get(t.instanceMatrix);if(void 0===p)continue;g=p.buffer,y=p.type;v.enableAttributeAndDivisor(l+0,1),v.enableAttributeAndDivisor(l+1,1),v.enableAttributeAndDivisor(l+2,1),v.enableAttributeAndDivisor(l+3,1),d.bindBuffer(34962,g),d.vertexAttribPointer(l+0,4,y,!1,64,0),d.vertexAttribPointer(l+1,4,y,!1,64,16),d.vertexAttribPointer(l+2,4,y,!1,64,32),d.vertexAttribPointer(l+3,4,y,!1,64,48)}else if(void 0!==o){var S=o[s];if(void 0!==S)switch(S.length){case 2:d.vertexAttrib2fv(l,S);break;case 3:d.vertexAttrib3fv(l,S);break;case 4:d.vertexAttrib4fv(l,S);break;default:d.vertexAttrib1fv(l,S)}}}}v.disableUnusedAttributes()}}this.shadowMap=ct,this.getContext=function(){return d},this.getContextAttributes=function(){return d.getContextAttributes()},this.forceContextLoss=function(){var t=f.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=f.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(t){void 0!==t&&($=t,this.setSize(q,X,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new _r),t.set(q,X)},this.setSize=function(t,r,i){lt.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(q=t,X=r,e.width=Math.floor(t*$),e.height=Math.floor(r*$),!1!==i&&(e.style.width=t+"px",e.style.height=r+"px"),this.setViewport(0,0,t,r))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new _r),t.set(q*$,X*$).floor()},this.setDrawingBufferSize=function(t,r,i){q=t,X=r,$=i,e.width=Math.floor(t*i),e.height=Math.floor(r*i),this.setViewport(0,0,t,r)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new Lr),t.copy(G)},this.getViewport=function(t){return t.copy(Y)},this.setViewport=function(t,e,r,i){t.isVector4?Y.set(t.x,t.y,t.z,t.w):Y.set(t,e,r,i),v.viewport(G.copy(Y).multiplyScalar($).floor())},this.getScissor=function(t){return t.copy(Z)},this.setScissor=function(t,e,r,i){t.isVector4?Z.set(t.x,t.y,t.z,t.w):Z.set(t,e,r,i),v.scissor(H.copy(Z).multiplyScalar($).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(t){v.setScissorTest(J=t)},this.getClearColor=function(){return A.getClearColor()},this.setClearColor=function(){A.setClearColor.apply(A,arguments)},this.getClearAlpha=function(){return A.getClearAlpha()},this.setClearAlpha=function(){A.setClearAlpha.apply(A,arguments)},this.clear=function(t,e,r){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===r||r)&&(i|=1024),d.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ht,!1),e.removeEventListener("webglcontextrestored",pt,!1),E.dispose(),M.dispose(),_.dispose(),T.dispose(),lt.dispose(),xt.stop()},this.renderBufferImmediate=function(t,e){v.initAttributes();var r=_.get(t);t.hasPositions&&!r.position&&(r.position=d.createBuffer()),t.hasNormals&&!r.normal&&(r.normal=d.createBuffer()),t.hasUvs&&!r.uv&&(r.uv=d.createBuffer()),t.hasColors&&!r.color&&(r.color=d.createBuffer());var i=e.getAttributes();t.hasPositions&&(d.bindBuffer(34962,r.position),d.bufferData(34962,t.positionArray,35048),v.enableAttribute(i.position),d.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(d.bindBuffer(34962,r.normal),d.bufferData(34962,t.normalArray,35048),v.enableAttribute(i.normal),d.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(d.bindBuffer(34962,r.uv),d.bufferData(34962,t.uvArray,35048),v.enableAttribute(i.uv),d.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(d.bindBuffer(34962,r.color),d.bufferData(34962,t.colorArray,35048),v.enableAttribute(i.color),d.vertexAttribPointer(i.color,3,5126,!1,0,0)),v.disableUnusedAttributes(),d.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,r,i,n,a){var o=n.isMesh&&n.matrixWorld.determinant()<0;v.setMaterial(i,o);var s=Et(t,e,i,n),l=!1;U.geometry===r.id&&U.program===s.id&&U.wireframe===(!0===i.wireframe)||(U.geometry=r.id,U.program=s.id,U.wireframe=!0===i.wireframe,l=!0),n.morphTargetInfluences&&(C.update(n,r,i,s),l=!0);var u,c=r.index,h=r.attributes.position,p=1;!0===i.wireframe&&(c=w.getWireframeAttribute(r),p=2);var f=P;null!==c&&(u=b.get(c),f=L,f.setIndex(u)),l&&(gt(n,r,i,s),null!==c&&d.bindBuffer(34963,u.buffer));var m=1/0;null!==c?m=c.count:void 0!==h&&(m=h.count);var g=r.drawRange.start*p,y=r.drawRange.count*p,_=null!==a?a.start*p:0,x=null!==a?a.count*p:1/0,T=Math.max(g,_),S=Math.min(m,g+y,_+x)-1,E=Math.max(0,S-T+1);if(0!==E){if(n.isMesh)if(!0===i.wireframe)v.setLineWidth(i.wireframeLinewidth*at()),f.setMode(1);else switch(n.drawMode){case Pe:f.setMode(4);break;case Le:f.setMode(5);break;case Ie:f.setMode(6);break}else if(n.isLine){var M=i.linewidth;void 0===M&&(M=1),v.setLineWidth(M*at()),n.isLineSegments?f.setMode(1):n.isLineLoop?f.setMode(2):f.setMode(3)}else n.isPoints?f.setMode(0):n.isSprite&&f.setMode(4);n.isInstancedMesh?f.renderInstances(r,T,E,n.count):r.isInstancedBufferGeometry?f.renderInstances(r,T,E,r.maxInstancedCount):f.render(T,E)}},this.compile=function(t,e){p=M.get(t,e),p.init(),t.traverse((function(t){t.isLight&&(p.pushLight(t),t.castShadow&&p.pushShadow(t))})),p.setupLights(e),t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var r=0;r<e.material.length;r++)St(e.material[r],t.fog,e);else St(e.material,t.fog,e)}))};var yt=null;function _t(t){lt.isPresenting()||yt&&yt(t)}var xt=new Is;function bt(t,e,r,i){if(!1!==t.visible){var n=t.layers.test(e.layers);if(n)if(t.isGroup)r=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)p.pushLight(t),t.castShadow&&p.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||K.intersectsSprite(t)){i&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt);var a=T.update(t),o=t.material;o.visible&&h.push(t,a,o,r,it.z,null)}}else if(t.isImmediateRenderObject)i&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt),h.push(t,null,t.material,r,it.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==y.render.frame&&(t.skeleton.update(),t.skeleton.frame=y.render.frame),!t.frustumCulled||K.intersectsObject(t))){i&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt);a=T.update(t),o=t.material;if(Array.isArray(o))for(var s=a.groups,l=0,u=s.length;l<u;l++){var c=s[l],d=o[c.materialIndex];d&&d.visible&&h.push(t,a,d,r,it.z,c)}else o.visible&&h.push(t,a,o,r,it.z,null)}var f=t.children;for(l=0,u=f.length;l<u;l++)bt(f[l],e,r,i)}}function wt(t,e,r,i){for(var n=0,a=t.length;n<a;n++){var o=t[n],s=o.object,l=o.geometry,u=void 0===i?o.material:i,c=o.group;if(r.isArrayCamera)if(j=r,lt.enabled&&ut.isAvailable())Tt(s,e,r,l,u,c);else for(var h=r.cameras,d=0,f=h.length;d<f;d++){var m=h[d];s.layers.test(m.layers)&&(v.viewport(G.copy(m.viewport)),p.setupLights(m),Tt(s,e,m,l,u,c))}else j=null,Tt(s,e,r,l,u,c)}}function Tt(t,e,r,i,n,a){if(t.onBeforeRender(k,e,r,i,n,a),p=M.get(e,j||r),t.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){v.setMaterial(n);var o=Et(r,e.fog,n,t);U.geometry=null,U.program=null,U.wireframe=!1,vt(t,o)}else k.renderBufferDirect(r,e.fog,i,n,t,a);t.onAfterRender(k,e,r,i,n,a),p=M.get(e,j||r)}function St(t,e,r){var i=_.get(t),n=p.state.lights,a=p.state.shadowsArray,o=n.state.version,s=S.getParameters(t,n.state,a,e,Q.numPlanes,Q.numIntersection,r),l=S.getProgramCacheKey(t,s),u=i.program,c=!0;if(void 0===u)t.addEventListener("dispose",dt);else if(u.cacheKey!==l)mt(t);else if(i.lightsStateVersion!==o)i.lightsStateVersion=o,c=!1;else{if(void 0!==s.shaderID)return;c=!1}if(c){if(s.shaderID){var h=Ls[s.shaderID];i.shader={name:t.type,uniforms:Zn(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader,k),l=S.getProgramCacheKey(t,s),u=S.acquireProgram(t,i.shader,s,l),i.program=u,t.program=u}var d=u.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var f=0;f<k.maxMorphTargets;f++)d["morphTarget"+f]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(f=0;f<k.maxMorphNormals;f++)d["morphNormal"+f]>=0&&t.numSupportedMorphNormals++}var m=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=Q.numPlanes,i.numIntersection=Q.numIntersection,m.clippingPlanes=Q.uniform),i.fog=e,i.needsLights=qt(t),i.lightsStateVersion=o,i.needsLights&&(m.ambientLightColor.value=n.state.ambient,m.lightProbe.value=n.state.probe,m.directionalLights.value=n.state.directional,m.spotLights.value=n.state.spot,m.rectAreaLights.value=n.state.rectArea,m.pointLights.value=n.state.point,m.hemisphereLights.value=n.state.hemi,m.directionalShadowMap.value=n.state.directionalShadowMap,m.directionalShadowMatrix.value=n.state.directionalShadowMatrix,m.spotShadowMap.value=n.state.spotShadowMap,m.spotShadowMatrix.value=n.state.spotShadowMatrix,m.pointShadowMap.value=n.state.pointShadowMap,m.pointShadowMatrix.value=n.state.pointShadowMatrix);var v=i.program.getUniforms(),g=Hl.seqWithValue(v.seq,m);i.uniformsList=g}function Et(t,e,r,i){x.resetTextureUnits();var n=_.get(r),a=p.state.lights;if(tt&&(et||t!==V)){var o=t===V&&r.id===N;Q.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,t,n,o)}!1===r.needsUpdate&&(void 0===n.program?r.needsUpdate=!0:r.fog&&n.fog!==e?r.needsUpdate=!0:n.needsLights&&n.lightsStateVersion!==a.state.version?r.needsUpdate=!0:void 0===n.numClippingPlanes||n.numClippingPlanes===Q.numPlanes&&n.numIntersection===Q.numIntersection||(r.needsUpdate=!0)),r.needsUpdate&&(St(r,e,i),r.needsUpdate=!1);var s=!1,l=!1,u=!1,c=n.program,h=c.getUniforms(),f=n.shader.uniforms;if(v.useProgram(c.program)&&(s=!0,l=!0,u=!0),r.id!==N&&(N=r.id,l=!0),s||V!==t){if(c.numMultiviewViews>0?ut.updateCameraProjectionMatricesUniform(t,h):h.setValue(d,"projectionMatrix",t.projectionMatrix),m.logarithmicDepthBuffer&&h.setValue(d,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),V!==t&&(V=t,l=!0,u=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var g=h.map.cameraPosition;void 0!==g&&g.setValue(d,it.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&h.setValue(d,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&(c.numMultiviewViews>0?ut.updateCameraViewMatricesUniform(t,h):h.setValue(d,"viewMatrix",t.matrixWorldInverse))}if(r.skinning){h.setOptional(d,i,"bindMatrix"),h.setOptional(d,i,"bindMatrixInverse");var y=i.skeleton;if(y){var b=y.bones;if(m.floatVertexTextures){if(void 0===y.boneTexture){var w=Math.sqrt(4*b.length);w=yr.ceilPowerOfTwo(w),w=Math.max(w,4);var T=new Float32Array(w*w*4);T.set(y.boneMatrices);var S=new la(T,w,w,Ht,Dt);y.boneMatrices=T,y.boneTexture=S,y.boneTextureSize=w}h.setValue(d,"boneTexture",y.boneTexture,x),h.setValue(d,"boneTextureSize",y.boneTextureSize)}else h.setOptional(d,y,"boneMatrices")}}return(l||n.receiveShadow!==i.receiveShadow)&&(n.receiveShadow=i.receiveShadow,h.setValue(d,"receiveShadow",i.receiveShadow)),l&&(h.setValue(d,"toneMappingExposure",k.toneMappingExposure),h.setValue(d,"toneMappingWhitePoint",k.toneMappingWhitePoint),n.needsLights&&Wt(f,u),e&&r.fog&&kt(f,e),r.isMeshBasicMaterial?Mt(f,r):r.isMeshLambertMaterial?(Mt(f,r),Rt(f,r)):r.isMeshPhongMaterial?(Mt(f,r),r.isMeshToonMaterial?zt(f,r):Ot(f,r)):r.isMeshStandardMaterial?(Mt(f,r),r.isMeshPhysicalMaterial?Nt(f,r):Ft(f,r)):r.isMeshMatcapMaterial?(Mt(f,r),Ut(f,r)):r.isMeshDepthMaterial?(Mt(f,r),Vt(f,r)):r.isMeshDistanceMaterial?(Mt(f,r),jt(f,r)):r.isMeshNormalMaterial?(Mt(f,r),Gt(f,r)):r.isLineBasicMaterial?(At(f,r),r.isLineDashedMaterial&&Ct(f,r)):r.isPointsMaterial?Pt(f,r):r.isSpriteMaterial?It(f,r):r.isShadowMaterial&&(f.color.value.copy(r.color),f.opacity.value=r.opacity),void 0!==f.ltc_1&&(f.ltc_1.value=Ps.LTC_1),void 0!==f.ltc_2&&(f.ltc_2.value=Ps.LTC_2),Hl.upload(d,n.uniformsList,f,x),r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Hl.upload(d,n.uniformsList,f,x),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&h.setValue(d,"center",i.center),c.numMultiviewViews>0?ut.updateObjectMatricesUniforms(i,t,h):(h.setValue(d,"modelViewMatrix",i.modelViewMatrix),h.setValue(d,"normalMatrix",i.normalMatrix)),h.setValue(d,"modelMatrix",i.matrixWorld),c}function Mt(t,e){var r;t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=_.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?r=e.map:e.specularMap?r=e.specularMap:e.displacementMap?r=e.displacementMap:e.normalMap?r=e.normalMap:e.bumpMap?r=e.bumpMap:e.roughnessMap?r=e.roughnessMap:e.metalnessMap?r=e.metalnessMap:e.alphaMap?r=e.alphaMap:e.emissiveMap&&(r=e.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}function At(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function Ct(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function Pt(t,e){var r;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*$,t.scale.value=.5*X,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}function It(t,e){var r;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}function kt(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function Rt(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function Ot(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===g&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===g&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function zt(t,e){Ot(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function Ft(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===g&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===g&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function Nt(t,e){Ft(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===g&&t.clearcoatNormalScale.value.negate()),t.transparency.value=e.transparency}function Ut(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===g&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===g&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Vt(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function jt(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function Gt(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===g&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===g&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Wt(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function qt(t){return t.isMeshLambertMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}xt.setAnimationLoop(_t),"undefined"!==typeof window&&xt.setContext(window),this.setAnimationLoop=function(t){yt=t,lt.setAnimationLoop(t),xt.start()},this.render=function(t,e){var r,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),r=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),e&&e.isCamera){if(!R){U.geometry=null,U.program=null,U.wireframe=!1,N=-1,V=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),lt.enabled&&(e=lt.getCamera(e)),p=M.get(t,e),p.init(),t.onBeforeRender(k,t,e,r||B),rt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),K.setFromMatrix(rt),et=this.localClippingEnabled,tt=Q.init(this.clippingPlanes,et,e),h=E.get(t,e),h.init(),bt(t,e,0,k.sortObjects),!0===k.sortObjects&&h.sort(),tt&&Q.beginShadows();var n=p.state.shadowsArray;ct.render(n,t,e),p.setupLights(e),tt&&Q.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==r&&this.setRenderTarget(r),lt.enabled&&ut.isAvailable()&&ut.attachCamera(e),A.render(h,t,e,i);var a=h.opaque,o=h.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;a.length&&wt(a,t,e,s),o.length&&wt(o,t,e,s)}else a.length&&wt(a,t,e),o.length&&wt(o,t,e);t.onAfterRender(k,t,e),null!==B&&(x.updateRenderTargetMipmap(B),x.updateMultisampleRenderTarget(B)),v.buffers.depth.setTest(!0),v.buffers.depth.setMask(!0),v.buffers.color.setMask(!0),v.setPolygonOffset(!1),lt.enabled&&(ut.isAvailable()&&ut.detachCamera(e),lt.submitFrame()),h=null,p=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){O!==t&&null===B&&d.bindFramebuffer(36160,t),O=t},this.getActiveCubeFace=function(){return z},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return B},this.setRenderTarget=function(t,e,r){B=t,z=e,D=r,t&&void 0===_.get(t).__webglFramebuffer&&x.setupRenderTarget(t);var i=O,n=!1;if(t){var a=_.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(i=a[e||0],n=!0):i=t.isWebGLMultisampleRenderTarget?_.get(t).__webglMultisampledFramebuffer:a,G.copy(t.viewport),H.copy(t.scissor),W=t.scissorTest}else G.copy(Y).multiplyScalar($).floor(),H.copy(Z).multiplyScalar($).floor(),W=J;if(F!==i&&(d.bindFramebuffer(36160,i),F=i),v.viewport(G),v.scissor(H),v.setScissorTest(W),n){var o=_.get(t.texture);d.framebufferTexture2D(36160,36064,34069+(e||0),o.__webglTexture,r||0)}},this.readRenderTargetPixels=function(t,e,r,i,n,a,o){if(t&&t.isWebGLRenderTarget){var s=_.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==o&&(s=s[o]),s){var l=!1;s!==F&&(d.bindFramebuffer(36160,s),l=!0);try{var u=t.texture,c=u.format,h=u.type;if(c!==Ht&&I.convert(c)!==d.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(h!==Lt&&I.convert(h)!==d.getParameter(35738)&&(h!==Dt||!(m.isWebGL2||f.get("OES_texture_float")||f.get("WEBGL_color_buffer_float")))&&(h!==Bt||(m.isWebGL2?!f.get("EXT_color_buffer_float"):!f.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===d.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&r>=0&&r<=t.height-n&&d.readPixels(e,r,i,n,I.convert(c),I.convert(h),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&d.bindFramebuffer(36160,F)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,r){void 0===r&&(r=0);var i=Math.pow(2,-r),n=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i),o=I.convert(e.format);x.setTexture2D(e,0),d.copyTexImage2D(3553,r,o,t.x,t.y,n,a,0),v.unbindTexture()},this.copyTextureToTexture=function(t,e,r,i){var n=e.image.width,a=e.image.height,o=I.convert(r.format),s=I.convert(r.type);x.setTexture2D(r,0),e.isDataTexture?d.texSubImage2D(3553,i||0,t.x,t.y,n,a,o,s,e.image.data):d.texSubImage2D(3553,i||0,t.x,t.y,o,s,e.image),v.unbindTexture()},this.initTexture=function(t){x.setTexture2D(t,0),v.unbindTexture()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function $u(t,e){this.name="",this.color=new $i(t),this.density=void 0!==e?e:25e-5}function Yu(t,e,r){this.name="",this.color=new $i(t),this.near=void 0!==e?e:1,this.far=void 0!==r?r:1e3}function Zu(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=or,this.updateRange={offset:0,count:-1},this.version=0}function Ju(t,e,r,i){this.data=t,this.itemSize=e,this.offset=r,this.normalized=!0===i}function Ku(t){tn.call(this),this.type="SpriteMaterial",this.color=new $i(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Object.assign(Wu.prototype,mr.prototype),Object.assign(qu.prototype,mr.prototype),Object.assign($u.prototype,{isFogExp2:!0,clone:function(){return new $u(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Yu.prototype,{isFog:!0,clone:function(){return new Yu(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Zu.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Zu.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,r){t*=this.stride,r*=e.stride;for(var i=0,n=this.stride;i<n;i++)this.array[t+i]=e.array[r+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(Ju.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Ju.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this},setXYZ:function(t,e,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=i,this},setXYZW:function(t,e,r,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=i,this.data.array[t+3]=n,this}}),Ku.prototype=Object.create(tn.prototype),Ku.prototype.constructor=Ku,Ku.prototype.isSpriteMaterial=!0,Ku.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var Qu=new Tr,tc=new Tr,ec=new Tr,rc=new _r,ic=new _r,nc=new Ur,ac=new Tr,oc=new Tr,sc=new Tr,lc=new _r,uc=new _r,cc=new _r;function hc(t){if(ni.call(this),this.type="Sprite",void 0===Vu){Vu=new wn;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Zu(e,5);Vu.setIndex([0,1,2,0,2,3]),Vu.setAttribute("position",new Ju(r,3,0,!1)),Vu.setAttribute("uv",new Ju(r,2,3,!1))}this.geometry=Vu,this.material=void 0!==t?t:new Ku,this.center=new _r(.5,.5)}function pc(t,e,r,i,n,a){rc.subVectors(t,r).addScalar(.5).multiply(i),void 0!==n?(ic.x=a*rc.x-n*rc.y,ic.y=n*rc.x+a*rc.y):ic.copy(rc),t.copy(e),t.x+=ic.x,t.y+=ic.y,t.applyMatrix4(nc)}hc.prototype=Object.assign(Object.create(ni.prototype),{constructor:hc,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),tc.setFromMatrixScale(this.matrixWorld),nc.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ec.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&tc.multiplyScalar(-ec.z);var r,i,n=this.material.rotation;0!==n&&(i=Math.cos(n),r=Math.sin(n));var a=this.center;pc(ac.set(-.5,-.5,0),ec,a,tc,r,i),pc(oc.set(.5,-.5,0),ec,a,tc,r,i),pc(sc.set(.5,.5,0),ec,a,tc,r,i),lc.set(0,0),uc.set(1,0),cc.set(1,1);var o=t.ray.intersectTriangle(ac,oc,sc,!1,Qu);if(null!==o||(pc(oc.set(-.5,.5,0),ec,a,tc,r,i),uc.set(0,1),o=t.ray.intersectTriangle(ac,sc,oc,!1,Qu),null!==o)){var s=t.ray.origin.distanceTo(Qu);s<t.near||s>t.far||e.push({distance:s,point:Qu.clone(),uv:Hi.getUV(Qu,ac,oc,sc,lc,uc,cc,new _r),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return ni.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var dc=new Tr,fc=new Tr;function mc(){ni.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function vc(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Un.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ur,this.bindMatrixInverse=new Ur}mc.prototype=Object.assign(Object.create(ni.prototype),{constructor:mc,isLOD:!0,copy:function(t){ni.prototype.copy.call(this,t,!1);for(var e=t.levels,r=0,i=e.length;r<i;r++){var n=e[r];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var r=this.levels,i=0;i<r.length;i++)if(e<r[i].distance)break;return r.splice(i,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,r=1,i=e.length;r<i;r++)if(t<e[r].distance)break;return e[r-1].object},raycast:function(t,e){dc.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(dc);this.getObjectForDistance(r).raycast(t,e)},update:function(t){var e=this.levels;if(e.length>1){dc.setFromMatrixPosition(t.matrixWorld),fc.setFromMatrixPosition(this.matrixWorld);var r=dc.distanceTo(fc);e[0].object.visible=!0;for(var i=1,n=e.length;i<n;i++){if(!(r>=e[i].distance))break;e[i-1].object.visible=!1,e[i].object.visible=!0}for(;i<n;i++)e[i].object.visible=!1}},toJSON:function(t){var e=ni.prototype.toJSON.call(this,t);e.object.levels=[];for(var r=this.levels,i=0,n=r.length;i<n;i++){var a=r[i];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),vc.prototype=Object.assign(Object.create(Un.prototype),{constructor:vc,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Lr,e=this.geometry.attributes.skinWeight,r=0,i=e.count;r<i;r++){t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.w=e.getW(r);var n=1/t.manhattanLength();n!==1/0?t.multiplyScalar(n):t.set(1,0,0,0),e.setXYZW(r,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Un.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var gc=new Ur,yc=new Ur;function _c(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ur)}}function xc(){ni.call(this),this.type="Bone"}function bc(t,e,r){Un.call(this,t,e),this.instanceMatrix=new rn(new Float32Array(16*r),16),this.count=r}function wc(t){tn.call(this),this.type="LineBasicMaterial",this.color=new $i(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}Object.assign(_c.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var r=new Ur;this.bones[t]&&r.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(r)}},pose:function(){var t,e,r;for(e=0,r=this.bones.length;e<r;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,r=this.bones.length;e<r;e++)t=this.bones[e],t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,r=this.boneMatrices,i=this.boneTexture,n=0,a=t.length;n<a;n++){var o=t[n]?t[n].matrixWorld:yc;gc.multiplyMatrices(o,e[n]),gc.toArray(r,16*n)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new _c(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,r=this.bones.length;e<r;e++){var i=this.bones[e];if(i.name===t)return i}}}),xc.prototype=Object.assign(Object.create(ni.prototype),{constructor:xc,isBone:!0}),bc.prototype=Object.assign(Object.create(Un.prototype),{constructor:bc,isInstancedMesh:!0,raycast:function(){},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),wc.prototype=Object.create(tn.prototype),wc.prototype.constructor=wc,wc.prototype.isLineBasicMaterial=!0,wc.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var Tc=new Tr,Sc=new Tr,Ec=new Ur,Mc=new Pi,Ac=new bi;function Cc(t,e,r){1===r&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),ni.call(this),this.type="Line",this.geometry=void 0!==t?t:new wn,this.material=void 0!==e?e:new wc({color:16777215*Math.random()})}Cc.prototype=Object.assign(Object.create(ni.prototype),{constructor:Cc,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,r=[0],i=1,n=e.count;i<n;i++)Tc.fromBufferAttribute(e,i-1),Sc.fromBufferAttribute(e,i),r[i]=r[i-1],r[i]+=Tc.distanceTo(Sc);t.setAttribute("lineDistance",new hn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var a=t.vertices;r=t.lineDistances;r[0]=0;for(i=1,n=a.length;i<n;i++)r[i]=r[i-1],r[i]+=a[i-1].distanceTo(a[i])}return this},raycast:function(t,e){var r=t.linePrecision,i=this.geometry,n=this.matrixWorld;if(null===i.boundingSphere&&i.computeBoundingSphere(),Ac.copy(i.boundingSphere),Ac.applyMatrix4(n),Ac.radius+=r,!1!==t.ray.intersectsSphere(Ac)){Ec.getInverse(n),Mc.copy(t.ray).applyMatrix4(Ec);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new Tr,l=new Tr,u=new Tr,c=new Tr,h=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){var p=i.index,d=i.attributes,f=d.position.array;if(null!==p)for(var m=p.array,v=0,g=m.length-1;v<g;v+=h){var y=m[v],_=m[v+1];s.fromArray(f,3*y),l.fromArray(f,3*_);var x=Mc.distanceSqToSegment(s,l,c,u);if(!(x>o)){c.applyMatrix4(this.matrixWorld);var b=t.ray.origin.distanceTo(c);b<t.near||b>t.far||e.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(v=0,g=f.length/3-1;v<g;v+=h){s.fromArray(f,3*v),l.fromArray(f,3*v+3);x=Mc.distanceSqToSegment(s,l,c,u);if(!(x>o)){c.applyMatrix4(this.matrixWorld);b=t.ray.origin.distanceTo(c);b<t.near||b>t.far||e.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}else if(i.isGeometry){var w=i.vertices,T=w.length;for(v=0;v<T-1;v+=h){x=Mc.distanceSqToSegment(w[v],w[v+1],c,u);if(!(x>o)){c.applyMatrix4(this.matrixWorld);b=t.ray.origin.distanceTo(c);b<t.near||b>t.far||e.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Pc=new Tr,Lc=new Tr;function Ic(t,e){Cc.call(this,t,e),this.type="LineSegments"}function kc(t,e){Cc.call(this,t,e),this.type="LineLoop"}function Rc(t){tn.call(this),this.type="PointsMaterial",this.color=new $i(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Ic.prototype=Object.assign(Object.create(Cc.prototype),{constructor:Ic,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,r=[],i=0,n=e.count;i<n;i+=2)Pc.fromBufferAttribute(e,i),Lc.fromBufferAttribute(e,i+1),r[i]=0===i?0:r[i-1],r[i+1]=r[i]+Pc.distanceTo(Lc);t.setAttribute("lineDistance",new hn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var a=t.vertices;for(r=t.lineDistances,i=0,n=a.length;i<n;i+=2)Pc.copy(a[i]),Lc.copy(a[i+1]),r[i]=0===i?0:r[i-1],r[i+1]=r[i]+Pc.distanceTo(Lc)}return this}}),kc.prototype=Object.assign(Object.create(Cc.prototype),{constructor:kc,isLineLoop:!0}),Rc.prototype=Object.create(tn.prototype),Rc.prototype.constructor=Rc,Rc.prototype.isPointsMaterial=!0,Rc.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Oc=new Ur,zc=new Pi,Dc=new bi,Bc=new Tr;function Fc(t,e){ni.call(this),this.type="Points",this.geometry=void 0!==t?t:new wn,this.material=void 0!==e?e:new Rc({color:16777215*Math.random()}),this.updateMorphTargets()}function Nc(t,e,r,i,n,a,o){var s=zc.distanceSqToPoint(t);if(s<r){var l=new Tr;zc.closestPointToPoint(t,l),l.applyMatrix4(i);var u=n.ray.origin.distanceTo(l);if(u<n.near||u>n.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:o})}}function Uc(t,e,r,i,n,a,o,s,l){Pr.call(this,t,e,r,i,n,a,o,s,l),this.format=void 0!==o?o:Gt,this.minFilter=void 0!==a?a:Et,this.magFilter=void 0!==n?n:Et,this.generateMipmaps=!1}function Vc(t,e,r,i,n,a,o,s,l,u,c,h){Pr.call(this,null,a,o,s,l,u,i,n,c,h),this.image={width:e,height:r},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function jc(t,e,r,i,n,a,o,s,l){Pr.call(this,t,e,r,i,n,a,o,s,l),this.needsUpdate=!0}function Gc(t,e,r,i,n,a,o,s,l,u){if(u=void 0!==u?u:$t,u!==$t&&u!==Yt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&u===$t&&(r=Rt),void 0===r&&u===Yt&&(r=Vt),Pr.call(this,null,i,n,a,o,s,u,r,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:xt,this.minFilter=void 0!==s?s:xt,this.flipY=!1,this.generateMipmaps=!1}function Hc(t){wn.call(this),this.type="WireframeGeometry";var e,r,i,n,a,o,s,l,u,c,h=[],p=[0,0],d={},f=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,i=m.length;e<i;e++){var v=m[e];for(r=0;r<3;r++)s=v[f[r]],l=v[f[(r+1)%3]],p[0]=Math.min(s,l),p[1]=Math.max(s,l),u=p[0]+","+p[1],void 0===d[u]&&(d[u]={index1:p[0],index2:p[1]})}for(u in d)o=d[u],c=t.vertices[o.index1],h.push(c.x,c.y,c.z),c=t.vertices[o.index2],h.push(c.x,c.y,c.z)}else if(t&&t.isBufferGeometry){var g,y,_,x,b,w,T,S;if(c=new Tr,null!==t.index){for(g=t.attributes.position,y=t.index,_=t.groups,0===_.length&&(_=[{start:0,count:y.count,materialIndex:0}]),n=0,a=_.length;n<a;++n)for(x=_[n],b=x.start,w=x.count,e=b,i=b+w;e<i;e+=3)for(r=0;r<3;r++)s=y.getX(e+r),l=y.getX(e+(r+1)%3),p[0]=Math.min(s,l),p[1]=Math.max(s,l),u=p[0]+","+p[1],void 0===d[u]&&(d[u]={index1:p[0],index2:p[1]});for(u in d)o=d[u],c.fromBufferAttribute(g,o.index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,o.index2),h.push(c.x,c.y,c.z)}else for(g=t.attributes.position,e=0,i=g.count/3;e<i;e++)for(r=0;r<3;r++)T=3*e+r,c.fromBufferAttribute(g,T),h.push(c.x,c.y,c.z),S=3*e+(r+1)%3,c.fromBufferAttribute(g,S),h.push(c.x,c.y,c.z)}this.setAttribute("position",new hn(h,3))}function Wc(t,e,r){Xn.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:r},this.fromBufferGeometry(new qc(t,e,r)),this.mergeVertices()}function qc(t,e,r){wn.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:r};var i,n,a=[],o=[],s=[],l=[],u=1e-5,c=new Tr,h=new Tr,p=new Tr,d=new Tr,f=new Tr;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(i=0;i<=r;i++){var v=i/r;for(n=0;n<=e;n++){var g=n/e;t(g,v,h),o.push(h.x,h.y,h.z),g-u>=0?(t(g-u,v,p),d.subVectors(h,p)):(t(g+u,v,p),d.subVectors(p,h)),v-u>=0?(t(g,v-u,p),f.subVectors(h,p)):(t(g,v+u,p),f.subVectors(p,h)),c.crossVectors(d,f).normalize(),s.push(c.x,c.y,c.z),l.push(g,v)}}for(i=0;i<r;i++)for(n=0;n<e;n++){var y=i*m+n,_=i*m+n+1,x=(i+1)*m+n+1,b=(i+1)*m+n;a.push(y,_,b),a.push(_,x,b)}this.setIndex(a),this.setAttribute("position",new hn(o,3)),this.setAttribute("normal",new hn(s,3)),this.setAttribute("uv",new hn(l,2))}function Xc(t,e,r,i){Xn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:r,detail:i},this.fromBufferGeometry(new $c(t,e,r,i)),this.mergeVertices()}function $c(t,e,r,i){wn.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:r,detail:i},r=r||1,i=i||0;var n=[],a=[];function o(t){for(var r=new Tr,i=new Tr,n=new Tr,a=0;a<e.length;a+=3)p(e[a+0],r),p(e[a+1],i),p(e[a+2],n),s(r,i,n,t)}function s(t,e,r,i){var n,a,o=Math.pow(2,i),s=[];for(n=0;n<=o;n++){s[n]=[];var l=t.clone().lerp(r,n/o),u=e.clone().lerp(r,n/o),c=o-n;for(a=0;a<=c;a++)s[n][a]=0===a&&n===o?l:l.clone().lerp(u,a/c)}for(n=0;n<o;n++)for(a=0;a<2*(o-n)-1;a++){var p=Math.floor(a/2);a%2===0?(h(s[n][p+1]),h(s[n+1][p]),h(s[n][p])):(h(s[n][p+1]),h(s[n+1][p+1]),h(s[n+1][p]))}}function l(t){for(var e=new Tr,r=0;r<n.length;r+=3)e.x=n[r+0],e.y=n[r+1],e.z=n[r+2],e.normalize().multiplyScalar(t),n[r+0]=e.x,n[r+1]=e.y,n[r+2]=e.z}function u(){for(var t=new Tr,e=0;e<n.length;e+=3){t.x=n[e+0],t.y=n[e+1],t.z=n[e+2];var r=m(t)/2/Math.PI+.5,i=v(t)/Math.PI+.5;a.push(r,1-i)}d(),c()}function c(){for(var t=0;t<a.length;t+=6){var e=a[t+0],r=a[t+2],i=a[t+4],n=Math.max(e,r,i),o=Math.min(e,r,i);n>.9&&o<.1&&(e<.2&&(a[t+0]+=1),r<.2&&(a[t+2]+=1),i<.2&&(a[t+4]+=1))}}function h(t){n.push(t.x,t.y,t.z)}function p(e,r){var i=3*e;r.x=t[i+0],r.y=t[i+1],r.z=t[i+2]}function d(){for(var t=new Tr,e=new Tr,r=new Tr,i=new Tr,o=new _r,s=new _r,l=new _r,u=0,c=0;u<n.length;u+=9,c+=6){t.set(n[u+0],n[u+1],n[u+2]),e.set(n[u+3],n[u+4],n[u+5]),r.set(n[u+6],n[u+7],n[u+8]),o.set(a[c+0],a[c+1]),s.set(a[c+2],a[c+3]),l.set(a[c+4],a[c+5]),i.copy(t).add(e).add(r).divideScalar(3);var h=m(i);f(o,c+0,t,h),f(s,c+2,e,h),f(l,c+4,r,h)}}function f(t,e,r,i){i<0&&1===t.x&&(a[e]=t.x-1),0===r.x&&0===r.z&&(a[e]=i/2/Math.PI+.5)}function m(t){return Math.atan2(t.z,-t.x)}function v(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}o(i),l(r),u(),this.setAttribute("position",new hn(n,3)),this.setAttribute("normal",new hn(n.slice(),3)),this.setAttribute("uv",new hn(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Yc(t,e){Xn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Zc(t,e)),this.mergeVertices()}function Zc(t,e){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];$c.call(this,r,i,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Jc(t,e){Xn.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Kc(t,e)),this.mergeVertices()}function Kc(t,e){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];$c.call(this,r,i,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Qc(t,e){Xn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new th(t,e)),this.mergeVertices()}function th(t,e){var r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];$c.call(this,i,n,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function eh(t,e){Xn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new rh(t,e)),this.mergeVertices()}function rh(t,e){var r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];$c.call(this,n,a,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ih(t,e,r,i,n,a){Xn.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:i,closed:n},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new nh(t,e,r,i,n);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function nh(t,e,r,i,n){wn.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:i,closed:n},e=e||64,r=r||1,i=i||8,n=n||!1;var a=t.computeFrenetFrames(e,n);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,l=new Tr,u=new Tr,c=new _r,h=new Tr,p=[],d=[],f=[],m=[];function v(){for(o=0;o<e;o++)g(o);g(!1===n?e:0),_(),y()}function g(n){h=t.getPointAt(n/e,h);var o=a.normals[n],c=a.binormals[n];for(s=0;s<=i;s++){var f=s/i*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);u.x=v*o.x+m*c.x,u.y=v*o.y+m*c.y,u.z=v*o.z+m*c.z,u.normalize(),d.push(u.x,u.y,u.z),l.x=h.x+r*u.x,l.y=h.y+r*u.y,l.z=h.z+r*u.z,p.push(l.x,l.y,l.z)}}function y(){for(s=1;s<=e;s++)for(o=1;o<=i;o++){var t=(i+1)*(s-1)+(o-1),r=(i+1)*s+(o-1),n=(i+1)*s+o,a=(i+1)*(s-1)+o;m.push(t,r,a),m.push(r,n,a)}}function _(){for(o=0;o<=e;o++)for(s=0;s<=i;s++)c.x=o/e,c.y=s/i,f.push(c.x,c.y)}v(),this.setIndex(m),this.setAttribute("position",new hn(p,3)),this.setAttribute("normal",new hn(d,3)),this.setAttribute("uv",new hn(f,2))}function ah(t,e,r,i,n,a,o){Xn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:i,p:n,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new oh(t,e,r,i,n,a)),this.mergeVertices()}function oh(t,e,r,i,n,a){wn.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:i,p:n,q:a},t=t||1,e=e||.4,r=Math.floor(r)||64,i=Math.floor(i)||8,n=n||2,a=a||3;var o,s,l=[],u=[],c=[],h=[],p=new Tr,d=new Tr,f=new Tr,m=new Tr,v=new Tr,g=new Tr,y=new Tr;for(o=0;o<=r;++o){var _=o/r*n*Math.PI*2;for(A(_,n,a,t,f),A(_+.01,n,a,t,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=i;++s){var x=s/i*Math.PI*2,b=-e*Math.cos(x),w=e*Math.sin(x);p.x=f.x+(b*y.x+w*v.x),p.y=f.y+(b*y.y+w*v.y),p.z=f.z+(b*y.z+w*v.z),u.push(p.x,p.y,p.z),d.subVectors(p,f).normalize(),c.push(d.x,d.y,d.z),h.push(o/r),h.push(s/i)}}for(s=1;s<=r;s++)for(o=1;o<=i;o++){var T=(i+1)*(s-1)+(o-1),S=(i+1)*s+(o-1),E=(i+1)*s+o,M=(i+1)*(s-1)+o;l.push(T,S,M),l.push(S,E,M)}function A(t,e,r,i,n){var a=Math.cos(t),o=Math.sin(t),s=r/e*t,l=Math.cos(s);n.x=i*(2+l)*.5*a,n.y=i*(2+l)*o*.5,n.z=i*Math.sin(s)*.5}this.setIndex(l),this.setAttribute("position",new hn(u,3)),this.setAttribute("normal",new hn(c,3)),this.setAttribute("uv",new hn(h,2))}function sh(t,e,r,i,n){Xn.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:i,arc:n},this.fromBufferGeometry(new lh(t,e,r,i,n)),this.mergeVertices()}function lh(t,e,r,i,n){wn.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:i,arc:n},t=t||1,e=e||.4,r=Math.floor(r)||8,i=Math.floor(i)||6,n=n||2*Math.PI;var a,o,s=[],l=[],u=[],c=[],h=new Tr,p=new Tr,d=new Tr;for(a=0;a<=r;a++)for(o=0;o<=i;o++){var f=o/i*n,m=a/r*Math.PI*2;p.x=(t+e*Math.cos(m))*Math.cos(f),p.y=(t+e*Math.cos(m))*Math.sin(f),p.z=e*Math.sin(m),l.push(p.x,p.y,p.z),h.x=t*Math.cos(f),h.y=t*Math.sin(f),d.subVectors(p,h).normalize(),u.push(d.x,d.y,d.z),c.push(o/i),c.push(a/r)}for(a=1;a<=r;a++)for(o=1;o<=i;o++){var v=(i+1)*a+o-1,g=(i+1)*(a-1)+o-1,y=(i+1)*(a-1)+o,_=(i+1)*a+o;s.push(v,g,_),s.push(g,y,_)}this.setIndex(s),this.setAttribute("position",new hn(l,3)),this.setAttribute("normal",new hn(u,3)),this.setAttribute("uv",new hn(c,2))}Fc.prototype=Object.assign(Object.create(ni.prototype),{constructor:Fc,isPoints:!0,raycast:function(t,e){var r=this.geometry,i=this.matrixWorld,n=t.params.Points.threshold;if(null===r.boundingSphere&&r.computeBoundingSphere(),Dc.copy(r.boundingSphere),Dc.applyMatrix4(i),Dc.radius+=n,!1!==t.ray.intersectsSphere(Dc)){Oc.getInverse(i),zc.copy(t.ray).applyMatrix4(Oc);var a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(r.isBufferGeometry){var s=r.index,l=r.attributes,u=l.position.array;if(null!==s)for(var c=s.array,h=0,p=c.length;h<p;h++){var d=c[h];Bc.fromArray(u,3*d),Nc(Bc,d,o,i,t,e,this)}else{h=0;for(var f=u.length/3;h<f;h++)Bc.fromArray(u,3*h),Nc(Bc,h,o,i,t,e,this)}}else{var m=r.vertices;for(h=0,f=m.length;h<f;h++)Nc(m[h],h,o,i,t,e,this)}}},updateMorphTargets:function(){var t,e,r,i=this.geometry;if(i.isBufferGeometry){var n=i.morphAttributes,a=Object.keys(n);if(a.length>0){var o=n[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)r=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Uc.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Uc,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Vc.prototype=Object.create(Pr.prototype),Vc.prototype.constructor=Vc,Vc.prototype.isCompressedTexture=!0,jc.prototype=Object.create(Pr.prototype),jc.prototype.constructor=jc,jc.prototype.isCanvasTexture=!0,Gc.prototype=Object.create(Pr.prototype),Gc.prototype.constructor=Gc,Gc.prototype.isDepthTexture=!0,Hc.prototype=Object.create(wn.prototype),Hc.prototype.constructor=Hc,Wc.prototype=Object.create(Xn.prototype),Wc.prototype.constructor=Wc,qc.prototype=Object.create(wn.prototype),qc.prototype.constructor=qc,Xc.prototype=Object.create(Xn.prototype),Xc.prototype.constructor=Xc,$c.prototype=Object.create(wn.prototype),$c.prototype.constructor=$c,Yc.prototype=Object.create(Xn.prototype),Yc.prototype.constructor=Yc,Zc.prototype=Object.create($c.prototype),Zc.prototype.constructor=Zc,Jc.prototype=Object.create(Xn.prototype),Jc.prototype.constructor=Jc,Kc.prototype=Object.create($c.prototype),Kc.prototype.constructor=Kc,Qc.prototype=Object.create(Xn.prototype),Qc.prototype.constructor=Qc,th.prototype=Object.create($c.prototype),th.prototype.constructor=th,eh.prototype=Object.create(Xn.prototype),eh.prototype.constructor=eh,rh.prototype=Object.create($c.prototype),rh.prototype.constructor=rh,ih.prototype=Object.create(Xn.prototype),ih.prototype.constructor=ih,nh.prototype=Object.create(wn.prototype),nh.prototype.constructor=nh,nh.prototype.toJSON=function(){var t=wn.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},ah.prototype=Object.create(Xn.prototype),ah.prototype.constructor=ah,oh.prototype=Object.create(wn.prototype),oh.prototype.constructor=oh,sh.prototype=Object.create(Xn.prototype),sh.prototype.constructor=sh,lh.prototype=Object.create(wn.prototype),lh.prototype.constructor=lh;var uh={triangulate:function(t,e,r){r=r||2;var i,n,a,o,s,l,u,c=e&&e.length,h=c?e[0]*r:t.length,p=ch(t,0,h,r,!0),d=[];if(!p||p.next===p.prev)return d;if(c&&(p=gh(t,e,p,r)),t.length>80*r){i=a=t[0],n=o=t[1];for(var f=r;f<h;f+=r)s=t[f],l=t[f+1],s<i&&(i=s),l<n&&(n=l),s>a&&(a=s),l>o&&(o=l);u=Math.max(a-i,o-n),u=0!==u?1/u:0}return ph(p,d,r,i,n,u),d}};function ch(t,e,r,i,n){var a,o;if(n===Bh(t,e,r,i)>0)for(a=e;a<r;a+=i)o=Oh(a,t[a],t[a+1],o);else for(a=r-i;a>=e;a-=i)o=Oh(a,t[a],t[a+1],o);return o&&Ch(o,o.next)&&(zh(o),o=o.next),o}function hh(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!Ch(i,i.next)&&0!==Ah(i.prev,i,i.next))i=i.next;else{if(zh(i),i=e=i.prev,i===i.next)break;r=!0}}while(r||i!==e);return e}function ph(t,e,r,i,n,a,o){if(t){!o&&a&&bh(t,i,n,a);var s,l,u=t;while(t.prev!==t.next)if(s=t.prev,l=t.next,a?fh(t,i,n,a):dh(t))e.push(s.i/r),e.push(t.i/r),e.push(l.i/r),zh(t),t=l.next,u=l.next;else if(t=l,t===u){o?1===o?(t=mh(t,e,r),ph(t,e,r,i,n,a,2)):2===o&&vh(t,e,r,i,n,a):ph(hh(t),e,r,i,n,a,1);break}}}function dh(t){var e=t.prev,r=t,i=t.next;if(Ah(e,r,i)>=0)return!1;var n=t.next.next;while(n!==t.prev){if(Eh(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&Ah(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function fh(t,e,r,i){var n=t.prev,a=t,o=t.next;if(Ah(n,a,o)>=0)return!1;var s=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,l=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,u=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,c=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y,h=Th(s,l,e,r,i),p=Th(u,c,e,r,i),d=t.prevZ,f=t.nextZ;while(d&&d.z>=h&&f&&f.z<=p){if(d!==t.prev&&d!==t.next&&Eh(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Ah(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,f!==t.prev&&f!==t.next&&Eh(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Ah(f.prev,f,f.next)>=0)return!1;f=f.nextZ}while(d&&d.z>=h){if(d!==t.prev&&d!==t.next&&Eh(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Ah(d.prev,d,d.next)>=0)return!1;d=d.prevZ}while(f&&f.z<=p){if(f!==t.prev&&f!==t.next&&Eh(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Ah(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function mh(t,e,r){var i=t;do{var n=i.prev,a=i.next.next;!Ch(n,a)&&Ph(n,i,i.next,a)&&Ih(n,a)&&Ih(a,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(a.i/r),zh(i),zh(i.next),i=t=a),i=i.next}while(i!==t);return i}function vh(t,e,r,i,n,a){var o=t;do{var s=o.next.next;while(s!==o.prev){if(o.i!==s.i&&Mh(o,s)){var l=Rh(o,s);return o=hh(o,o.next),l=hh(l,l.next),ph(o,e,r,i,n,a),void ph(l,e,r,i,n,a)}s=s.next}o=o.next}while(o!==t)}function gh(t,e,r,i){var n,a,o,s,l,u=[];for(n=0,a=e.length;n<a;n++)o=e[n]*i,s=n<a-1?e[n+1]*i:t.length,l=ch(t,o,s,i,!1),l===l.next&&(l.steiner=!0),u.push(Sh(l));for(u.sort(yh),n=0;n<u.length;n++)_h(u[n],r),r=hh(r,r.next);return r}function yh(t,e){return t.x-e.x}function _h(t,e){if(e=xh(t,e),e){var r=Rh(e,t);hh(r,r.next)}}function xh(t,e){var r,i=e,n=t.x,a=t.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>o){if(o=s,s===n){if(a===i.y)return i;if(a===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===o)return r.prev;var l,u=r,c=r.x,h=r.y,p=1/0;i=r.next;while(i!==u)n>=i.x&&i.x>=c&&n!==i.x&&Eh(a<h?n:o,a,c,h,a<h?o:n,a,i.x,i.y)&&(l=Math.abs(a-i.y)/(n-i.x),(l<p||l===p&&i.x>r.x)&&Ih(i,t)&&(r=i,p=l)),i=i.next;return r}function bh(t,e,r,i){var n=t;do{null===n.z&&(n.z=Th(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,wh(n)}function wh(t){var e,r,i,n,a,o,s,l,u=1;do{r=t,t=null,a=null,o=0;while(r){for(o++,i=r,s=0,e=0;e<u;e++)if(s++,i=i.nextZ,!i)break;l=u;while(s>0||l>0&&i)0!==s&&(0===l||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,l--),a?a.nextZ=n:t=n,n.prevZ=a,a=n;r=i}a.nextZ=null,u*=2}while(o>1);return t}function Th(t,e,r,i,n){return t=32767*(t-r)*n,e=32767*(e-i)*n,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Sh(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Eh(t,e,r,i,n,a,o,s){return(n-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(r-o)*(e-s)>=0&&(r-o)*(a-s)-(n-o)*(i-s)>=0}function Mh(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Lh(t,e)&&Ih(t,e)&&Ih(e,t)&&kh(t,e)}function Ah(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Ch(t,e){return t.x===e.x&&t.y===e.y}function Ph(t,e,r,i){return!!(Ch(t,r)&&Ch(e,i)||Ch(t,i)&&Ch(r,e))||Ah(t,e,r)>0!==Ah(t,e,i)>0&&Ah(r,i,t)>0!==Ah(r,i,e)>0}function Lh(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Ph(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Ih(t,e){return Ah(t.prev,t,t.next)<0?Ah(t,e,t.next)>=0&&Ah(t,t.prev,e)>=0:Ah(t,e,t.prev)<0||Ah(t,t.next,e)<0}function kh(t,e){var r=t,i=!1,n=(t.x+e.x)/2,a=(t.y+e.y)/2;do{r.y>a!==r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}function Rh(t,e){var r=new Dh(t.i,t.x,t.y),i=new Dh(e.i,e.x,e.y),n=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function Oh(t,e,r,i){var n=new Dh(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function zh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Dh(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Bh(t,e,r,i){for(var n=0,a=e,o=r-i;a<r;a+=i)n+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return n}var Fh={area:function(t){for(var e=t.length,r=0,i=e-1,n=0;n<e;i=n++)r+=t[i].x*t[n].y-t[n].x*t[i].y;return.5*r},isClockWise:function(t){return Fh.area(t)<0},triangulateShape:function(t,e){var r=[],i=[],n=[];Nh(t),Uh(r,t);var a=t.length;e.forEach(Nh);for(var o=0;o<e.length;o++)i.push(a),a+=e[o].length,Uh(r,e[o]);var s=uh.triangulate(r,i);for(o=0;o<s.length;o+=3)n.push(s.slice(o,o+3));return n}};function Nh(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Uh(t,e){for(var r=0;r<e.length;r++)t.push(e[r].x),t.push(e[r].y)}function Vh(t,e){Xn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new jh(t,e)),this.mergeVertices()}function jh(t,e){wn.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var r=this,i=[],n=[],a=0,o=t.length;a<o;a++){var s=t[a];l(s)}function l(t){var a=[],o=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:100,u=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:c-2,p=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3,f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Gh;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);var v,g,y,_,x,b,w,T,S=!1;f&&(v=f.getSpacedPoints(s),S=!0,u=!1,g=f.computeFrenetFrames(s,!1),y=new Tr,_=new Tr,x=new Tr),u||(d=0,c=0,h=0,p=0);var E=t.extractPoints(o),M=E.shape,A=E.holes,C=!Fh.isClockWise(M);if(C)for(M=M.reverse(),w=0,T=A.length;w<T;w++)b=A[w],Fh.isClockWise(b)&&(A[w]=b.reverse());var P=Fh.triangulateShape(M,A),L=M;for(w=0,T=A.length;w<T;w++)b=A[w],M=M.concat(b);function I(t,e,r){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(r).add(t)}var k,R,O,z,D,B,F=M.length,N=P.length;function U(t,e,r){var i,n,a,o=t.x-e.x,s=t.y-e.y,l=r.x-t.x,u=r.y-t.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var p=Math.sqrt(c),d=Math.sqrt(l*l+u*u),f=e.x-s/p,m=e.y+o/p,v=r.x-u/d,g=r.y+l/d,y=((v-f)*u-(g-m)*l)/(o*u-s*l);i=f+o*y-t.x,n=m+s*y-t.y;var _=i*i+n*n;if(_<=2)return new _r(i,n);a=Math.sqrt(_/2)}else{var x=!1;o>Number.EPSILON?l>Number.EPSILON&&(x=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(s)===Math.sign(u)&&(x=!0),x?(i=-s,n=o,a=Math.sqrt(c)):(i=o,n=s,a=Math.sqrt(c/2))}return new _r(i/a,n/a)}for(var V=[],j=0,G=L.length,H=G-1,W=j+1;j<G;j++,H++,W++)H===G&&(H=0),W===G&&(W=0),V[j]=U(L[j],L[H],L[W]);var q,X,$=[],Y=V.concat();for(w=0,T=A.length;w<T;w++){for(b=A[w],q=[],j=0,G=b.length,H=G-1,W=j+1;j<G;j++,H++,W++)H===G&&(H=0),W===G&&(W=0),q[j]=U(b[j],b[H],b[W]);$.push(q),Y=Y.concat(q)}for(k=0;k<d;k++){for(O=k/d,z=c*Math.cos(O*Math.PI/2),R=h*Math.sin(O*Math.PI/2)+p,j=0,G=L.length;j<G;j++)D=I(L[j],V[j],R),Q(D.x,D.y,-z);for(w=0,T=A.length;w<T;w++)for(b=A[w],q=$[w],j=0,G=b.length;j<G;j++)D=I(b[j],q[j],R),Q(D.x,D.y,-z)}for(R=h+p,j=0;j<F;j++)D=u?I(M[j],Y[j],R):M[j],S?(_.copy(g.normals[0]).multiplyScalar(D.x),y.copy(g.binormals[0]).multiplyScalar(D.y),x.copy(v[0]).add(_).add(y),Q(x.x,x.y,x.z)):Q(D.x,D.y,0);for(X=1;X<=s;X++)for(j=0;j<F;j++)D=u?I(M[j],Y[j],R):M[j],S?(_.copy(g.normals[X]).multiplyScalar(D.x),y.copy(g.binormals[X]).multiplyScalar(D.y),x.copy(v[X]).add(_).add(y),Q(x.x,x.y,x.z)):Q(D.x,D.y,l/s*X);for(k=d-1;k>=0;k--){for(O=k/d,z=c*Math.cos(O*Math.PI/2),R=h*Math.sin(O*Math.PI/2)+p,j=0,G=L.length;j<G;j++)D=I(L[j],V[j],R),Q(D.x,D.y,l+z);for(w=0,T=A.length;w<T;w++)for(b=A[w],q=$[w],j=0,G=b.length;j<G;j++)D=I(b[j],q[j],R),S?Q(D.x,D.y+v[s-1].y,v[s-1].x+z):Q(D.x,D.y,l+z)}function Z(){var t=i.length/3;if(u){var e=0,n=F*e;for(j=0;j<N;j++)B=P[j],tt(B[2]+n,B[1]+n,B[0]+n);for(e=s+2*d,n=F*e,j=0;j<N;j++)B=P[j],tt(B[0]+n,B[1]+n,B[2]+n)}else{for(j=0;j<N;j++)B=P[j],tt(B[2],B[1],B[0]);for(j=0;j<N;j++)B=P[j],tt(B[0]+F*s,B[1]+F*s,B[2]+F*s)}r.addGroup(t,i.length/3-t,0)}function J(){var t=i.length/3,e=0;for(K(L,e),e+=L.length,w=0,T=A.length;w<T;w++)b=A[w],K(b,e),e+=b.length;r.addGroup(t,i.length/3-t,1)}function K(t,e){var r,i;j=t.length;while(--j>=0){r=j,i=j-1,i<0&&(i=t.length-1);var n=0,a=s+2*d;for(n=0;n<a;n++){var o=F*n,l=F*(n+1),u=e+r+o,c=e+i+o,h=e+i+l,p=e+r+l;et(u,c,h,p)}}}function Q(t,e,r){a.push(t),a.push(e),a.push(r)}function tt(t,e,n){rt(t),rt(e),rt(n);var a=i.length/3,o=m.generateTopUV(r,i,a-3,a-2,a-1);it(o[0]),it(o[1]),it(o[2])}function et(t,e,n,a){rt(t),rt(e),rt(a),rt(e),rt(n),rt(a);var o=i.length/3,s=m.generateSideWallUV(r,i,o-6,o-3,o-2,o-1);it(s[0]),it(s[1]),it(s[3]),it(s[1]),it(s[2]),it(s[3])}function rt(t){i.push(a[3*t+0]),i.push(a[3*t+1]),i.push(a[3*t+2])}function it(t){n.push(t.x),n.push(t.y)}Z(),J()}this.setAttribute("position",new hn(i,3)),this.setAttribute("uv",new hn(n,2)),this.computeVertexNormals()}Vh.prototype=Object.create(Xn.prototype),Vh.prototype.constructor=Vh,Vh.prototype.toJSON=function(){var t=Xn.prototype.toJSON.call(this),e=this.parameters.shapes,r=this.parameters.options;return Hh(e,r,t)},jh.prototype=Object.create(wn.prototype),jh.prototype.constructor=jh,jh.prototype.toJSON=function(){var t=wn.prototype.toJSON.call(this),e=this.parameters.shapes,r=this.parameters.options;return Hh(e,r,t)};var Gh={generateTopUV:function(t,e,r,i,n){var a=e[3*r],o=e[3*r+1],s=e[3*i],l=e[3*i+1],u=e[3*n],c=e[3*n+1];return[new _r(a,o),new _r(s,l),new _r(u,c)]},generateSideWallUV:function(t,e,r,i,n,a){var o=e[3*r],s=e[3*r+1],l=e[3*r+2],u=e[3*i],c=e[3*i+1],h=e[3*i+2],p=e[3*n],d=e[3*n+1],f=e[3*n+2],m=e[3*a],v=e[3*a+1],g=e[3*a+2];return Math.abs(s-c)<.01?[new _r(o,1-l),new _r(u,1-h),new _r(p,1-f),new _r(m,1-g)]:[new _r(s,1-l),new _r(c,1-h),new _r(d,1-f),new _r(v,1-g)]}};function Hh(t,e,r){if(r.shapes=[],Array.isArray(t))for(var i=0,n=t.length;i<n;i++){var a=t[i];r.shapes.push(a.uuid)}else r.shapes.push(t.uuid);return void 0!==e.extrudePath&&(r.options.extrudePath=e.extrudePath.toJSON()),r}function Wh(t,e){Xn.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new qh(t,e)),this.mergeVertices()}function qh(t,e){e=e||{};var r=e.font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Xn;var i=r.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),jh.call(this,i,e),this.type="TextBufferGeometry"}function Xh(t,e,r,i,n,a,o){Xn.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new $h(t,e,r,i,n,a,o)),this.mergeVertices()}function $h(t,e,r,i,n,a,o){wn.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),r=Math.max(2,Math.floor(r)||6),i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,l,u=Math.min(a+o,Math.PI),c=0,h=[],p=new Tr,d=new Tr,f=[],m=[],v=[],g=[];for(l=0;l<=r;l++){var y=[],_=l/r,x=0;for(0==l&&0==a?x=.5/e:l==r&&u==Math.PI&&(x=-.5/e),s=0;s<=e;s++){var b=s/e;p.x=-t*Math.cos(i+b*n)*Math.sin(a+_*o),p.y=t*Math.cos(a+_*o),p.z=t*Math.sin(i+b*n)*Math.sin(a+_*o),m.push(p.x,p.y,p.z),d.copy(p).normalize(),v.push(d.x,d.y,d.z),g.push(b+x,1-_),y.push(c++)}h.push(y)}for(l=0;l<r;l++)for(s=0;s<e;s++){var w=h[l][s+1],T=h[l][s],S=h[l+1][s],E=h[l+1][s+1];(0!==l||a>0)&&f.push(w,T,E),(l!==r-1||u<Math.PI)&&f.push(T,S,E)}this.setIndex(f),this.setAttribute("position",new hn(m,3)),this.setAttribute("normal",new hn(v,3)),this.setAttribute("uv",new hn(g,2))}function Yh(t,e,r,i,n,a){Xn.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:i,thetaStart:n,thetaLength:a},this.fromBufferGeometry(new Zh(t,e,r,i,n,a)),this.mergeVertices()}function Zh(t,e,r,i,n,a){wn.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:i,thetaStart:n,thetaLength:a},t=t||.5,e=e||1,n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI,r=void 0!==r?Math.max(3,r):8,i=void 0!==i?Math.max(1,i):1;var o,s,l,u=[],c=[],h=[],p=[],d=t,f=(e-t)/i,m=new Tr,v=new _r;for(s=0;s<=i;s++){for(l=0;l<=r;l++)o=n+l/r*a,m.x=d*Math.cos(o),m.y=d*Math.sin(o),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/e+1)/2,v.y=(m.y/e+1)/2,p.push(v.x,v.y);d+=f}for(s=0;s<i;s++){var g=s*(r+1);for(l=0;l<r;l++){o=l+g;var y=o,_=o+r+1,x=o+r+2,b=o+1;u.push(y,_,b),u.push(_,x,b)}}this.setIndex(u),this.setAttribute("position",new hn(c,3)),this.setAttribute("normal",new hn(h,3)),this.setAttribute("uv",new hn(p,2))}function Jh(t,e,r,i){Xn.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:r,phiLength:i},this.fromBufferGeometry(new Kh(t,e,r,i)),this.mergeVertices()}function Kh(t,e,r,i){wn.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:r,phiLength:i},e=Math.floor(e)||12,r=r||0,i=i||2*Math.PI,i=yr.clamp(i,0,2*Math.PI);var n,a,o,s=[],l=[],u=[],c=1/e,h=new Tr,p=new _r;for(a=0;a<=e;a++){var d=r+a*c*i,f=Math.sin(d),m=Math.cos(d);for(o=0;o<=t.length-1;o++)h.x=t[o].x*f,h.y=t[o].y,h.z=t[o].x*m,l.push(h.x,h.y,h.z),p.x=a/e,p.y=o/(t.length-1),u.push(p.x,p.y)}for(a=0;a<e;a++)for(o=0;o<t.length-1;o++){n=o+a*t.length;var v=n,g=n+t.length,y=n+t.length+1,_=n+1;s.push(v,g,_),s.push(g,y,_)}if(this.setIndex(s),this.setAttribute("position",new hn(l,3)),this.setAttribute("uv",new hn(u,2)),this.computeVertexNormals(),i===2*Math.PI){var x=this.attributes.normal.array,b=new Tr,w=new Tr,T=new Tr;for(n=e*t.length*3,a=0,o=0;a<t.length;a++,o+=3)b.x=x[o+0],b.y=x[o+1],b.z=x[o+2],w.x=x[n+o+0],w.y=x[n+o+1],w.z=x[n+o+2],T.addVectors(b,w).normalize(),x[o+0]=x[n+o+0]=T.x,x[o+1]=x[n+o+1]=T.y,x[o+2]=x[n+o+2]=T.z}}function Qh(t,e){Xn.call(this),this.type="ShapeGeometry","object"===typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new tp(t,e)),this.mergeVertices()}function tp(t,e){wn.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var r=[],i=[],n=[],a=[],o=0,s=0;if(!1===Array.isArray(t))u(t);else for(var l=0;l<t.length;l++)u(t[l]),this.addGroup(o,s,l),o+=s,s=0;function u(t){var o,l,u,c=i.length/3,h=t.extractPoints(e),p=h.shape,d=h.holes;for(!1===Fh.isClockWise(p)&&(p=p.reverse()),o=0,l=d.length;o<l;o++)u=d[o],!0===Fh.isClockWise(u)&&(d[o]=u.reverse());var f=Fh.triangulateShape(p,d);for(o=0,l=d.length;o<l;o++)u=d[o],p=p.concat(u);for(o=0,l=p.length;o<l;o++){var m=p[o];i.push(m.x,m.y,0),n.push(0,0,1),a.push(m.x,m.y)}for(o=0,l=f.length;o<l;o++){var v=f[o],g=v[0]+c,y=v[1]+c,_=v[2]+c;r.push(g,y,_),s+=3}}this.setIndex(r),this.setAttribute("position",new hn(i,3)),this.setAttribute("normal",new hn(n,3)),this.setAttribute("uv",new hn(a,2))}function ep(t,e){if(e.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var n=t[r];e.shapes.push(n.uuid)}else e.shapes.push(t.uuid);return e}function rp(t,e){wn.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var r,i,n,a,o=[],s=Math.cos(yr.DEG2RAD*e),l=[0,0],u={},c=["a","b","c"];t.isBufferGeometry?(a=new Xn,a.fromBufferGeometry(t)):a=t.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,p=a.faces,d=0,f=p.length;d<f;d++)for(var m=p[d],v=0;v<3;v++)r=m[c[v]],i=m[c[(v+1)%3]],l[0]=Math.min(r,i),l[1]=Math.max(r,i),n=l[0]+","+l[1],void 0===u[n]?u[n]={index1:l[0],index2:l[1],face1:d,face2:void 0}:u[n].face2=d;for(n in u){var g=u[n];if(void 0===g.face2||p[g.face1].normal.dot(p[g.face2].normal)<=s){var y=h[g.index1];o.push(y.x,y.y,y.z),y=h[g.index2],o.push(y.x,y.y,y.z)}}this.setAttribute("position",new hn(o,3))}function ip(t,e,r,i,n,a,o,s){Xn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new np(t,e,r,i,n,a,o,s)),this.mergeVertices()}function np(t,e,r,i,n,a,o,s){wn.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s};var l=this;t=void 0!==t?t:1,e=void 0!==e?e:1,r=r||1,i=Math.floor(i)||8,n=Math.floor(n)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var u=[],c=[],h=[],p=[],d=0,f=[],m=r/2,v=0;function g(){var a,g,y=new Tr,_=new Tr,x=0,b=(e-t)/r;for(g=0;g<=n;g++){var w=[],T=g/n,S=T*(e-t)+t;for(a=0;a<=i;a++){var E=a/i,M=E*s+o,A=Math.sin(M),C=Math.cos(M);_.x=S*A,_.y=-T*r+m,_.z=S*C,c.push(_.x,_.y,_.z),y.set(A,b,C).normalize(),h.push(y.x,y.y,y.z),p.push(E,1-T),w.push(d++)}f.push(w)}for(a=0;a<i;a++)for(g=0;g<n;g++){var P=f[g][a],L=f[g+1][a],I=f[g+1][a+1],k=f[g][a+1];u.push(P,L,k),u.push(L,I,k),x+=6}l.addGroup(v,x,0),v+=x}function y(r){var n,a,f,g=new _r,y=new Tr,_=0,x=!0===r?t:e,b=!0===r?1:-1;for(a=d,n=1;n<=i;n++)c.push(0,m*b,0),h.push(0,b,0),p.push(.5,.5),d++;for(f=d,n=0;n<=i;n++){var w=n/i,T=w*s+o,S=Math.cos(T),E=Math.sin(T);y.x=x*E,y.y=m*b,y.z=x*S,c.push(y.x,y.y,y.z),h.push(0,b,0),g.x=.5*S+.5,g.y=.5*E*b+.5,p.push(g.x,g.y),d++}for(n=0;n<i;n++){var M=a+n,A=f+n;!0===r?u.push(A,A+1,M):u.push(A+1,A,M),_+=3}l.addGroup(v,_,!0===r?1:2),v+=_}g(),!1===a&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new hn(c,3)),this.setAttribute("normal",new hn(h,3)),this.setAttribute("uv",new hn(p,2))}function ap(t,e,r,i,n,a,o){ip.call(this,0,t,e,r,i,n,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:a,thetaLength:o}}function op(t,e,r,i,n,a,o){np.call(this,0,t,e,r,i,n,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:a,thetaLength:o}}function sp(t,e,r,i){Xn.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:i},this.fromBufferGeometry(new lp(t,e,r,i)),this.mergeVertices()}function lp(t,e,r,i){wn.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var n,a,o=[],s=[],l=[],u=[],c=new Tr,h=new _r;for(s.push(0,0,0),l.push(0,0,1),u.push(.5,.5),a=0,n=3;a<=e;a++,n+=3){var p=r+a/e*i;c.x=t*Math.cos(p),c.y=t*Math.sin(p),s.push(c.x,c.y,c.z),l.push(0,0,1),h.x=(s[n]/t+1)/2,h.y=(s[n+1]/t+1)/2,u.push(h.x,h.y)}for(n=1;n<=e;n++)o.push(n,n+1,0);this.setIndex(o),this.setAttribute("position",new hn(s,3)),this.setAttribute("normal",new hn(l,3)),this.setAttribute("uv",new hn(u,2))}Wh.prototype=Object.create(Xn.prototype),Wh.prototype.constructor=Wh,qh.prototype=Object.create(jh.prototype),qh.prototype.constructor=qh,Xh.prototype=Object.create(Xn.prototype),Xh.prototype.constructor=Xh,$h.prototype=Object.create(wn.prototype),$h.prototype.constructor=$h,Yh.prototype=Object.create(Xn.prototype),Yh.prototype.constructor=Yh,Zh.prototype=Object.create(wn.prototype),Zh.prototype.constructor=Zh,Jh.prototype=Object.create(Xn.prototype),Jh.prototype.constructor=Jh,Kh.prototype=Object.create(wn.prototype),Kh.prototype.constructor=Kh,Qh.prototype=Object.create(Xn.prototype),Qh.prototype.constructor=Qh,Qh.prototype.toJSON=function(){var t=Xn.prototype.toJSON.call(this),e=this.parameters.shapes;return ep(e,t)},tp.prototype=Object.create(wn.prototype),tp.prototype.constructor=tp,tp.prototype.toJSON=function(){var t=wn.prototype.toJSON.call(this),e=this.parameters.shapes;return ep(e,t)},rp.prototype=Object.create(wn.prototype),rp.prototype.constructor=rp,ip.prototype=Object.create(Xn.prototype),ip.prototype.constructor=ip,np.prototype=Object.create(wn.prototype),np.prototype.constructor=np,ap.prototype=Object.create(ip.prototype),ap.prototype.constructor=ap,op.prototype=Object.create(np.prototype),op.prototype.constructor=op,sp.prototype=Object.create(Xn.prototype),sp.prototype.constructor=sp,lp.prototype=Object.create(wn.prototype),lp.prototype.constructor=lp;var up=Object.freeze({__proto__:null,WireframeGeometry:Hc,ParametricGeometry:Wc,ParametricBufferGeometry:qc,TetrahedronGeometry:Yc,TetrahedronBufferGeometry:Zc,OctahedronGeometry:Jc,OctahedronBufferGeometry:Kc,IcosahedronGeometry:Qc,IcosahedronBufferGeometry:th,DodecahedronGeometry:eh,DodecahedronBufferGeometry:rh,PolyhedronGeometry:Xc,PolyhedronBufferGeometry:$c,TubeGeometry:ih,TubeBufferGeometry:nh,TorusKnotGeometry:ah,TorusKnotBufferGeometry:oh,TorusGeometry:sh,TorusBufferGeometry:lh,TextGeometry:Wh,TextBufferGeometry:qh,SphereGeometry:Xh,SphereBufferGeometry:$h,RingGeometry:Yh,RingBufferGeometry:Zh,PlaneGeometry:Rs,PlaneBufferGeometry:Os,LatheGeometry:Jh,LatheBufferGeometry:Kh,ShapeGeometry:Qh,ShapeBufferGeometry:tp,ExtrudeGeometry:Vh,ExtrudeBufferGeometry:jh,EdgesGeometry:rp,ConeGeometry:ap,ConeBufferGeometry:op,CylinderGeometry:ip,CylinderBufferGeometry:np,CircleGeometry:sp,CircleBufferGeometry:lp,BoxGeometry:$n,BoxBufferGeometry:Yn});function cp(t){tn.call(this),this.type="ShadowMaterial",this.color=new $i(0),this.transparent=!0,this.setValues(t)}function hp(t){ea.call(this,t),this.type="RawShaderMaterial"}function pp(t){tn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new $i(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=je,this.normalScale=new _r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function dp(t){pp.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new _r(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(t)}function fp(t){tn.call(this),this.type="MeshPhongMaterial",this.color=new $i(16777215),this.specular=new $i(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=je,this.normalScale=new _r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function mp(t){fp.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function vp(t){tn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=je,this.normalScale=new _r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function gp(t){tn.call(this),this.type="MeshLambertMaterial",this.color=new $i(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function yp(t){tn.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new $i(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=je,this.normalScale=new _r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function _p(t){wc.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}cp.prototype=Object.create(tn.prototype),cp.prototype.constructor=cp,cp.prototype.isShadowMaterial=!0,cp.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.color.copy(t.color),this},hp.prototype=Object.create(ea.prototype),hp.prototype.constructor=hp,hp.prototype.isRawShaderMaterial=!0,pp.prototype=Object.create(tn.prototype),pp.prototype.constructor=pp,pp.prototype.isMeshStandardMaterial=!0,pp.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},dp.prototype=Object.create(pp.prototype),dp.prototype.constructor=dp,dp.prototype.isMeshPhysicalMaterial=!0,dp.prototype.copy=function(t){return pp.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearcoat=t.clearcoat,this.clearcoatRoughness=t.clearcoatRoughness,t.sheen?this.sheen=(this.sheen||new $i).copy(t.sheen):this.sheen=null,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.transparency=t.transparency,this},fp.prototype=Object.create(tn.prototype),fp.prototype.constructor=fp,fp.prototype.isMeshPhongMaterial=!0,fp.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},mp.prototype=Object.create(fp.prototype),mp.prototype.constructor=mp,mp.prototype.isMeshToonMaterial=!0,mp.prototype.copy=function(t){return fp.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},vp.prototype=Object.create(tn.prototype),vp.prototype.constructor=vp,vp.prototype.isMeshNormalMaterial=!0,vp.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},gp.prototype=Object.create(tn.prototype),gp.prototype.constructor=gp,gp.prototype.isMeshLambertMaterial=!0,gp.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},yp.prototype=Object.create(tn.prototype),yp.prototype.constructor=yp,yp.prototype.isMeshMatcapMaterial=!0,yp.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},_p.prototype=Object.create(wc.prototype),_p.prototype.constructor=_p,_p.prototype.isLineDashedMaterial=!0,_p.prototype.copy=function(t){return wc.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var xp=Object.freeze({__proto__:null,ShadowMaterial:cp,SpriteMaterial:Ku,RawShaderMaterial:hp,ShaderMaterial:ea,PointsMaterial:Rc,MeshPhysicalMaterial:dp,MeshStandardMaterial:pp,MeshPhongMaterial:fp,MeshToonMaterial:mp,MeshNormalMaterial:vp,MeshLambertMaterial:gp,MeshDepthMaterial:Pu,MeshDistanceMaterial:Lu,MeshBasicMaterial:en,MeshMatcapMaterial:yp,LineDashedMaterial:_p,LineBasicMaterial:wc,Material:tn}),bp={arraySlice:function(t,e,r){return bp.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==r?r:t.length)):t.slice(e,r)},convertArray:function(t,e,r){return!t||!r&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,r){return t[e]-t[r]}for(var r=t.length,i=new Array(r),n=0;n!==r;++n)i[n]=n;return i.sort(e),i},sortedArray:function(t,e,r){for(var i=t.length,n=new t.constructor(i),a=0,o=0;o!==i;++a)for(var s=r[a]*e,l=0;l!==e;++l)n[o++]=t[s+l];return n},flattenJSON:function(t,e,r,i){var n=1,a=t[0];while(void 0!==a&&void 0===a[i])a=t[n++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{o=a[i],void 0!==o&&(e.push(a.time),r.push.apply(r,o)),a=t[n++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[i],void 0!==o&&(e.push(a.time),o.toArray(r,r.length)),a=t[n++]}while(void 0!==a);else do{o=a[i],void 0!==o&&(e.push(a.time),r.push(o)),a=t[n++]}while(void 0!==a)}},subclip:function(t,e,r,i,n){n=n||30;var a=t.clone();a.name=e;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],u=l.getValueSize(),c=[],h=[],p=0;p<l.times.length;++p){var d=l.times[p]*n;if(!(d<r||d>=i)){c.push(l.times[p]);for(var f=0;f<u;++f)h.push(l.values[p*u+f])}}0!==c.length&&(l.times=bp.convertArray(c,l.times.constructor),l.values=bp.convertArray(h,l.values.constructor),o.push(l))}a.tracks=o;var m=1/0;for(s=0;s<a.tracks.length;++s)m>a.tracks[s].times[0]&&(m=a.tracks[s].times[0]);for(s=0;s<a.tracks.length;++s)a.tracks[s].shift(-1*m);return a.resetDuration(),a}};function wp(t,e,r,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(r),this.sampleValues=e,this.valueSize=r}function Tp(t,e,r,i){wp.call(this,t,e,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Sp(t,e,r,i){wp.call(this,t,e,r,i)}function Ep(t,e,r,i){wp.call(this,t,e,r,i)}function Mp(t,e,r,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=bp.convertArray(e,this.TimeBufferType),this.values=bp.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Ap(t,e,r){Mp.call(this,t,e,r)}function Cp(t,e,r,i){Mp.call(this,t,e,r,i)}function Pp(t,e,r,i){Mp.call(this,t,e,r,i)}function Lp(t,e,r,i){wp.call(this,t,e,r,i)}function Ip(t,e,r,i){Mp.call(this,t,e,r,i)}function kp(t,e,r,i){Mp.call(this,t,e,r,i)}function Rp(t,e,r,i){Mp.call(this,t,e,r,i)}function Op(t,e,r){this.name=t,this.tracks=r,this.duration=void 0!==e?e:-1,this.uuid=yr.generateUUID(),this.duration<0&&this.resetDuration()}function zp(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pp;case"vector":case"vector2":case"vector3":case"vector4":return Rp;case"color":return Cp;case"quaternion":return Ip;case"bool":case"boolean":return Ap;case"string":return kp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Dp(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=zp(t.type);if(void 0===t.times){var r=[],i=[];bp.flattenJSON(t.keys,r,i,"value"),t.times=r,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(wp.prototype,{evaluate:function(t){var e=this.parameterPositions,r=this._cachedIndex,i=e[r],n=e[r-1];t:{e:{var a;r:{i:if(!(t<i)){for(var o=r+2;;){if(void 0===i){if(t<n)break i;return r=e.length,this._cachedIndex=r,this.afterEnd_(r-1,t,n)}if(r===o)break;if(n=i,i=e[++r],t<i)break e}a=e.length;break r}if(t>=n)break t;var s=e[1];t<s&&(r=2,n=s);for(o=r-2;;){if(void 0===n)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(r===o)break;if(i=n,n=e[--r-1],t>=n)break e}a=r,r=0}while(r<a){var l=r+a>>>1;t<e[l]?a=l:r=l+1}if(i=e[r],n=e[r-1],void 0===n)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return r=e.length,this._cachedIndex=r,this.afterEnd_(r-1,n,t)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=t*i,a=0;a!==i;++a)e[a]=r[n+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(wp.prototype,{beforeStart_:wp.prototype.copySampleValue_,afterEnd_:wp.prototype.copySampleValue_}),Tp.prototype=Object.assign(Object.create(wp.prototype),{constructor:Tp,DefaultSettings_:{endingStart:Me,endingEnd:Me},intervalChanged_:function(t,e,r){var i=this.parameterPositions,n=t-2,a=t+1,o=i[n],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case Ae:n=t,o=2*e-r;break;case Ce:n=i.length-2,o=e+i[n]-i[n+1];break;default:n=t,o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case Ae:a=t,s=2*r-e;break;case Ce:a=1,s=r+i[1]-i[0];break;default:a=t-1,s=e}var l=.5*(r-e),u=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(s-r),this._offsetPrev=n*u,this._offsetNext=a*u},interpolate_:function(t,e,r,i){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(r-e)/(i-e),f=d*d,m=f*d,v=-h*m+2*h*f-h*d,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,_=p*m-p*f,x=0;x!==o;++x)n[x]=v*a[u+x]+g*a[l+x]+y*a[s+x]+_*a[c+x];return n}}),Sp.prototype=Object.assign(Object.create(wp.prototype),{constructor:Sp,interpolate_:function(t,e,r,i){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,u=(r-e)/(i-e),c=1-u,h=0;h!==o;++h)n[h]=a[l+h]*c+a[s+h]*u;return n}}),Ep.prototype=Object.assign(Object.create(wp.prototype),{constructor:Ep,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Mp,{toJSON:function(t){var e,r=t.constructor;if(void 0!==r.toJSON)e=r.toJSON(t);else{e={name:t.name,times:bp.convertArray(t.times,Array),values:bp.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(Mp.prototype,{constructor:Mp,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Se,InterpolantFactoryMethodDiscrete:function(t){return new Ep(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Sp(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Tp(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Te:e=this.InterpolantFactoryMethodDiscrete;break;case Se:e=this.InterpolantFactoryMethodLinear;break;case Ee:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Te;case this.InterpolantFactoryMethodLinear:return Se;case this.InterpolantFactoryMethodSmooth:return Ee}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,r=0,i=e.length;r!==i;++r)e[r]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,r=0,i=e.length;r!==i;++r)e[r]*=t;return this},trim:function(t,e){var r=this.times,i=r.length,n=0,a=i-1;while(n!==i&&r[n]<t)++n;while(-1!==a&&r[a]>e)--a;if(++a,0!==n||a!==i){n>=a&&(a=Math.max(a,1),n=a-1);var o=this.getValueSize();this.times=bp.arraySlice(r,n,a),this.values=bp.arraySlice(this.values,n*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var r=this.times,i=this.values,n=r.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var a=null,o=0;o!==n;o++){var s=r[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),t=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),t=!1;break}a=s}if(void 0!==i&&bp.isTypedArray(i)){o=0;for(var l=i.length;o!==l;++o){var u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,r=this.getValueSize(),i=this.getInterpolation()===Ee,n=1,a=t.length-1,o=1;o<a;++o){var s=!1,l=t[o],u=t[o+1];if(l!==u&&(1!==o||l!==l[0]))if(i)s=!0;else for(var c=o*r,h=c-r,p=c+r,d=0;d!==r;++d){var f=e[c+d];if(f!==e[h+d]||f!==e[p+d]){s=!0;break}}if(s){if(o!==n){t[n]=t[o];var m=o*r,v=n*r;for(d=0;d!==r;++d)e[v+d]=e[m+d]}++n}}if(a>0){t[n]=t[a];for(m=a*r,v=n*r,d=0;d!==r;++d)e[v+d]=e[m+d];++n}return n!==t.length&&(this.times=bp.arraySlice(t,0,n),this.values=bp.arraySlice(e,0,n*r)),this},clone:function(){var t=bp.arraySlice(this.times,0),e=bp.arraySlice(this.values,0),r=this.constructor,i=new r(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}),Ap.prototype=Object.assign(Object.create(Mp.prototype),{constructor:Ap,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Te,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Cp.prototype=Object.assign(Object.create(Mp.prototype),{constructor:Cp,ValueTypeName:"color"}),Pp.prototype=Object.assign(Object.create(Mp.prototype),{constructor:Pp,ValueTypeName:"number"}),Lp.prototype=Object.assign(Object.create(wp.prototype),{constructor:Lp,interpolate_:function(t,e,r,i){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=(r-e)/(i-e),u=s+o;s!==u;s+=4)xr.slerpFlat(n,0,a,s-o,a,s,l);return n}}),Ip.prototype=Object.assign(Object.create(Mp.prototype),{constructor:Ip,ValueTypeName:"quaternion",DefaultInterpolation:Se,InterpolantFactoryMethodLinear:function(t){return new Lp(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),kp.prototype=Object.assign(Object.create(Mp.prototype),{constructor:kp,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Te,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Rp.prototype=Object.assign(Object.create(Mp.prototype),{constructor:Rp,ValueTypeName:"vector"}),Object.assign(Op,{parse:function(t){for(var e=[],r=t.tracks,i=1/(t.fps||1),n=0,a=r.length;n!==a;++n)e.push(Dp(r[n]).scale(i));return new Op(t.name,t.duration,e)},toJSON:function(t){for(var e=[],r=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},n=0,a=r.length;n!==a;++n)e.push(Mp.toJSON(r[n]));return i},CreateFromMorphTargetSequence:function(t,e,r,i){for(var n=e.length,a=[],o=0;o<n;o++){var s=[],l=[];s.push((o+n-1)%n,o,(o+1)%n),l.push(0,1,0);var u=bp.getKeyframeOrder(s);s=bp.sortedArray(s,1,u),l=bp.sortedArray(l,1,u),i||0!==s[0]||(s.push(n),l.push(l[0])),a.push(new Pp(".morphTargetInfluences["+e[o].name+"]",s,l).scale(1/r))}return new Op(t,-1,a)},findByName:function(t,e){var r=t;if(!Array.isArray(t)){var i=t;r=i.geometry&&i.geometry.animations||i.animations}for(var n=0;n<r.length;n++)if(r[n].name===e)return r[n];return null},CreateClipsFromMorphTargetSequences:function(t,e,r){for(var i={},n=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],l=s.name.match(n);if(l&&l.length>1){var u=l[1],c=i[u];c||(i[u]=c=[]),c.push(s)}}var h=[];for(var u in i)h.push(Op.CreateFromMorphTargetSequence(u,i[u],e,r));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(t,e,r,i,n){if(0!==r.length){var a=[],o=[];bp.flattenJSON(r,a,o,i),0!==a.length&&n.push(new t(e,a,o))}},i=[],n=t.name||"default",a=t.length||-1,o=t.fps||30,s=t.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var p=0;p<u[h].morphTargets.length;p++)c[u[h].morphTargets[p]]=-1;for(var d in c){var f=[],m=[];for(p=0;p!==u[h].morphTargets.length;++p){var v=u[h];f.push(v.time),m.push(v.morphTarget===d?1:0)}i.push(new Pp(".morphTargetInfluence["+d+"]",f,m))}a=c.length*(o||1)}else{var g=".bones["+e[l].name+"]";r(Rp,g+".position",u,"pos",i),r(Ip,g+".quaternion",u,"rot",i),r(Rp,g+".scale",u,"scl",i)}}if(0===i.length)return null;var y=new Op(n,a,i);return y}}),Object.assign(Op.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,r=0,i=t.length;r!==i;++r){var n=this.tracks[r];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Op(this.name,this.duration,t)}});var Bp={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Fp(t,e,r){var i=this,n=!1,a=0,o=0,s=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=r,this.itemStart=function(t){o++,!1===n&&void 0!==i.onStart&&i.onStart(t,a,o),n=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(n=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){var e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(var e=0,r=l.length;e<r;e+=2){var i=l[e],n=l[e+1];if(i.test(t))return n}return null}}var Np=new Fp;function Up(t){this.manager=void 0!==t?t:Np,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(Up.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}});var Vp={};function jp(t){Up.call(this,t)}function Gp(t){Up.call(this,t)}function Hp(t){Up.call(this,t)}function Wp(t){Up.call(this,t)}function qp(t){Up.call(this,t)}function Xp(t){Up.call(this,t)}function $p(t){Up.call(this,t)}function Yp(){this.type="Curve",this.arcLengthDivisions=200}function Zp(t,e,r,i,n,a,o,s){Yp.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=r||1,this.yRadius=i||1,this.aStartAngle=n||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Jp(t,e,r,i,n,a){Zp.call(this,t,e,r,r,i,n,a),this.type="ArcCurve"}function Kp(){var t=0,e=0,r=0,i=0;function n(n,a,o,s){t=n,e=o,r=-3*n+3*a-2*o-s,i=2*n-2*a+o+s}return{initCatmullRom:function(t,e,r,i,a){n(e,r,a*(r-t),a*(i-e))},initNonuniformCatmullRom:function(t,e,r,i,a,o,s){var l=(e-t)/a-(r-t)/(a+o)+(r-e)/o,u=(r-e)/o-(i-e)/(o+s)+(i-r)/s;l*=o,u*=o,n(e,r,l,u)},calc:function(n){var a=n*n,o=a*n;return t+e*n+r*a+i*o}}}jp.prototype=Object.assign(Object.create(Up.prototype),{constructor:jp,load:function(t,e,r,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var n=this,a=Bp.get(t);if(void 0!==a)return n.manager.itemStart(t),setTimeout((function(){e&&e(a),n.manager.itemEnd(t)}),0),a;if(void 0===Vp[t]){var o=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(o);if(s){var l=s[1],u=!!s[2],c=s[3];c=decodeURIComponent(c),u&&(c=atob(c));try{var h,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),f=0;f<c.length;f++)d[f]=c.charCodeAt(f);h="blob"===p?new Blob([d.buffer],{type:l}):d.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(c,l);break;case"json":h=JSON.parse(c);break;default:h=c;break}setTimeout((function(){e&&e(h),n.manager.itemEnd(t)}),0)}catch(y){setTimeout((function(){i&&i(y),n.manager.itemError(t),n.manager.itemEnd(t)}),0)}}else{Vp[t]=[],Vp[t].push({onLoad:e,onProgress:r,onError:i});var v=new XMLHttpRequest;for(var g in v.open("GET",t,!0),v.addEventListener("load",(function(e){var r=this.response,i=Vp[t];if(delete Vp[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Bp.add(t,r);for(var a=0,o=i.length;a<o;a++){var s=i[a];s.onLoad&&s.onLoad(r)}n.manager.itemEnd(t)}else{for(a=0,o=i.length;a<o;a++){s=i[a];s.onError&&s.onError(e)}n.manager.itemError(t),n.manager.itemEnd(t)}}),!1),v.addEventListener("progress",(function(e){for(var r=Vp[t],i=0,n=r.length;i<n;i++){var a=r[i];a.onProgress&&a.onProgress(e)}}),!1),v.addEventListener("error",(function(e){var r=Vp[t];delete Vp[t];for(var i=0,a=r.length;i<a;i++){var o=r[i];o.onError&&o.onError(e)}n.manager.itemError(t),n.manager.itemEnd(t)}),!1),v.addEventListener("abort",(function(e){var r=Vp[t];delete Vp[t];for(var i=0,a=r.length;i<a;i++){var o=r[i];o.onError&&o.onError(e)}n.manager.itemError(t),n.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)v.setRequestHeader(g,this.requestHeader[g]);v.send(null)}return n.manager.itemStart(t),v}Vp[t].push({onLoad:e,onProgress:r,onError:i})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Gp.prototype=Object.assign(Object.create(Up.prototype),{constructor:Gp,load:function(t,e,r,i){var n=this,a=new jp(n.manager);a.setPath(n.path),a.load(t,(function(t){e(n.parse(JSON.parse(t)))}),r,i)},parse:function(t){for(var e=[],r=0;r<t.length;r++){var i=Op.parse(t[r]);e.push(i)}return e}}),Hp.prototype=Object.assign(Object.create(Up.prototype),{constructor:Hp,load:function(t,e,r,i){var n=this,a=[],o=new Vc;o.image=a;var s=new jp(this.manager);function l(l){s.load(t[l],(function(t){var r=n.parse(t,!0);a[l]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},u+=1,6===u&&(1===r.mipmapCount&&(o.minFilter=Et),o.format=r.format,o.needsUpdate=!0,e&&e(o))}),r,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var u=0,c=0,h=t.length;c<h;++c)l(c);else s.load(t,(function(t){var r=n.parse(t,!0);if(r.isCubemap)for(var i=r.mipmaps.length/r.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var l=0;l<r.mipmapCount;l++)a[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+l]),a[s].format=r.format,a[s].width=r.width,a[s].height=r.height}else o.image.width=r.width,o.image.height=r.height,o.mipmaps=r.mipmaps;1===r.mipmapCount&&(o.minFilter=Et),o.format=r.format,o.needsUpdate=!0,e&&e(o)}),r,i);return o}}),Wp.prototype=Object.assign(Object.create(Up.prototype),{constructor:Wp,load:function(t,e,r,i){var n=this,a=new la,o=new jp(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,(function(t){var r=n.parse(t);r&&(void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:yt,a.wrapT=void 0!==r.wrapT?r.wrapT:yt,a.magFilter=void 0!==r.magFilter?r.magFilter:Et,a.minFilter=void 0!==r.minFilter?r.minFilter:Et,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps,a.minFilter=Ct),1===r.mipmapCount&&(a.minFilter=Et),a.needsUpdate=!0,e&&e(a,r))}),r,i),a}}),qp.prototype=Object.assign(Object.create(Up.prototype),{constructor:qp,load:function(t,e,r,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var n=this,a=Bp.get(t);if(void 0!==a)return n.manager.itemStart(t),setTimeout((function(){e&&e(a),n.manager.itemEnd(t)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),Bp.add(t,this),e&&e(this),n.manager.itemEnd(t)}function l(e){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),i&&i(e),n.manager.itemError(t),n.manager.itemEnd(t)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),n.manager.itemStart(t),o.src=t,o}}),Xp.prototype=Object.assign(Object.create(Up.prototype),{constructor:Xp,load:function(t,e,r,i){var n=new qs,a=new qp(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(r){a.load(t[r],(function(t){n.images[r]=t,o++,6===o&&(n.needsUpdate=!0,e&&e(n))}),void 0,i)}for(var l=0;l<t.length;++l)s(l);return n}}),$p.prototype=Object.assign(Object.create(Up.prototype),{constructor:$p,load:function(t,e,r,i){var n=new Pr,a=new qp(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(r){n.image=r;var i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);n.format=i?Gt:Ht,n.needsUpdate=!0,void 0!==e&&e(n)}),r,i),n}}),Object.assign(Yp.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var r=this.getUtoTmapping(t);return this.getPoint(r,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],r=0;r<=t;r++)e.push(this.getPoint(r/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],r=0;r<=t;r++)e.push(this.getPointAt(r/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,r,i=[],n=this.getPoint(0),a=0;for(i.push(0),r=1;r<=t;r++)e=this.getPoint(r/t),a+=e.distanceTo(n),i.push(a),n=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var r,i=this.getLengths(),n=0,a=i.length;r=e||t*i[a-1];var o,s=0,l=a-1;while(s<=l)if(n=Math.floor(s+(l-s)/2),o=i[n]-r,o<0)s=n+1;else{if(!(o>0)){l=n;break}l=n-1}if(n=l,i[n]===r)return n/(a-1);var u=i[n],c=i[n+1],h=c-u,p=(r-u)/h,d=(n+p)/(a-1);return d},getTangent:function(t){var e=1e-4,r=t-e,i=t+e;r<0&&(r=0),i>1&&(i=1);var n=this.getPoint(r),a=this.getPoint(i),o=a.clone().sub(n);return o.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var r,i,n,a=new Tr,o=[],s=[],l=[],u=new Tr,c=new Ur;for(r=0;r<=t;r++)i=r/t,o[r]=this.getTangentAt(i),o[r].normalize();s[0]=new Tr,l[0]=new Tr;var h=Number.MAX_VALUE,p=Math.abs(o[0].x),d=Math.abs(o[0].y),f=Math.abs(o[0].z);for(p<=h&&(h=p,a.set(1,0,0)),d<=h&&(h=d,a.set(0,1,0)),f<=h&&a.set(0,0,1),u.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],u),l[0].crossVectors(o[0],s[0]),r=1;r<=t;r++)s[r]=s[r-1].clone(),l[r]=l[r-1].clone(),u.crossVectors(o[r-1],o[r]),u.length()>Number.EPSILON&&(u.normalize(),n=Math.acos(yr.clamp(o[r-1].dot(o[r]),-1,1)),s[r].applyMatrix4(c.makeRotationAxis(u,n))),l[r].crossVectors(o[r],s[r]);if(!0===e)for(n=Math.acos(yr.clamp(s[0].dot(s[t]),-1,1)),n/=t,o[0].dot(u.crossVectors(s[0],s[t]))>0&&(n=-n),r=1;r<=t;r++)s[r].applyMatrix4(c.makeRotationAxis(o[r],n*r)),l[r].crossVectors(o[r],s[r]);return{tangents:o,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Zp.prototype=Object.create(Yp.prototype),Zp.prototype.constructor=Zp,Zp.prototype.isEllipseCurve=!0,Zp.prototype.getPoint=function(t,e){var r=e||new _r,i=2*Math.PI,n=this.aEndAngle-this.aStartAngle,a=Math.abs(n)<Number.EPSILON;while(n<0)n+=i;while(n>i)n-=i;n<Number.EPSILON&&(n=a?0:i),!0!==this.aClockwise||a||(n===i?n=-i:n-=i);var o=this.aStartAngle+t*n,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,p=l-this.aY;s=h*u-p*c+this.aX,l=h*c+p*u+this.aY}return r.set(s,l)},Zp.prototype.copy=function(t){return Yp.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Zp.prototype.toJSON=function(){var t=Yp.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Zp.prototype.fromJSON=function(t){return Yp.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Jp.prototype=Object.create(Zp.prototype),Jp.prototype.constructor=Jp,Jp.prototype.isArcCurve=!0;var Qp=new Tr,td=new Kp,ed=new Kp,rd=new Kp;function id(t,e,r,i){Yp.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=r||"centripetal",this.tension=i||.5}function nd(t,e,r,i,n){var a=.5*(i-e),o=.5*(n-r),s=t*t,l=t*s;return(2*r-2*i+a+o)*l+(-3*r+3*i-2*a-o)*s+a*t+r}function ad(t,e){var r=1-t;return r*r*e}function od(t,e){return 2*(1-t)*t*e}function sd(t,e){return t*t*e}function ld(t,e,r,i){return ad(t,e)+od(t,r)+sd(t,i)}function ud(t,e){var r=1-t;return r*r*r*e}function cd(t,e){var r=1-t;return 3*r*r*t*e}function hd(t,e){return 3*(1-t)*t*t*e}function pd(t,e){return t*t*t*e}function dd(t,e,r,i,n){return ud(t,e)+cd(t,r)+hd(t,i)+pd(t,n)}function fd(t,e,r,i){Yp.call(this),this.type="CubicBezierCurve",this.v0=t||new _r,this.v1=e||new _r,this.v2=r||new _r,this.v3=i||new _r}function md(t,e,r,i){Yp.call(this),this.type="CubicBezierCurve3",this.v0=t||new Tr,this.v1=e||new Tr,this.v2=r||new Tr,this.v3=i||new Tr}function vd(t,e){Yp.call(this),this.type="LineCurve",this.v1=t||new _r,this.v2=e||new _r}function gd(t,e){Yp.call(this),this.type="LineCurve3",this.v1=t||new Tr,this.v2=e||new Tr}function yd(t,e,r){Yp.call(this),this.type="QuadraticBezierCurve",this.v0=t||new _r,this.v1=e||new _r,this.v2=r||new _r}function _d(t,e,r){Yp.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new Tr,this.v1=e||new Tr,this.v2=r||new Tr}function xd(t){Yp.call(this),this.type="SplineCurve",this.points=t||[]}id.prototype=Object.create(Yp.prototype),id.prototype.constructor=id,id.prototype.isCatmullRomCurve3=!0,id.prototype.getPoint=function(t,e){var r,i,n,a,o=e||new Tr,s=this.points,l=s.length,u=(l-(this.closed?0:1))*t,c=Math.floor(u),h=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===h&&c===l-1&&(c=l-2,h=1),this.closed||c>0?r=s[(c-1)%l]:(Qp.subVectors(s[0],s[1]).add(s[0]),r=Qp),i=s[c%l],n=s[(c+1)%l],this.closed||c+2<l?a=s[(c+2)%l]:(Qp.subVectors(s[l-1],s[l-2]).add(s[l-1]),a=Qp),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(r.distanceToSquared(i),p),f=Math.pow(i.distanceToSquared(n),p),m=Math.pow(n.distanceToSquared(a),p);f<1e-4&&(f=1),d<1e-4&&(d=f),m<1e-4&&(m=f),td.initNonuniformCatmullRom(r.x,i.x,n.x,a.x,d,f,m),ed.initNonuniformCatmullRom(r.y,i.y,n.y,a.y,d,f,m),rd.initNonuniformCatmullRom(r.z,i.z,n.z,a.z,d,f,m)}else"catmullrom"===this.curveType&&(td.initCatmullRom(r.x,i.x,n.x,a.x,this.tension),ed.initCatmullRom(r.y,i.y,n.y,a.y,this.tension),rd.initCatmullRom(r.z,i.z,n.z,a.z,this.tension));return o.set(td.calc(h),ed.calc(h),rd.calc(h)),o},id.prototype.copy=function(t){Yp.prototype.copy.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},id.prototype.toJSON=function(){var t=Yp.prototype.toJSON.call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},id.prototype.fromJSON=function(t){Yp.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push((new Tr).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},fd.prototype=Object.create(Yp.prototype),fd.prototype.constructor=fd,fd.prototype.isCubicBezierCurve=!0,fd.prototype.getPoint=function(t,e){var r=e||new _r,i=this.v0,n=this.v1,a=this.v2,o=this.v3;return r.set(dd(t,i.x,n.x,a.x,o.x),dd(t,i.y,n.y,a.y,o.y)),r},fd.prototype.copy=function(t){return Yp.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},fd.prototype.toJSON=function(){var t=Yp.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},fd.prototype.fromJSON=function(t){return Yp.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},md.prototype=Object.create(Yp.prototype),md.prototype.constructor=md,md.prototype.isCubicBezierCurve3=!0,md.prototype.getPoint=function(t,e){var r=e||new Tr,i=this.v0,n=this.v1,a=this.v2,o=this.v3;return r.set(dd(t,i.x,n.x,a.x,o.x),dd(t,i.y,n.y,a.y,o.y),dd(t,i.z,n.z,a.z,o.z)),r},md.prototype.copy=function(t){return Yp.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},md.prototype.toJSON=function(){var t=Yp.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},md.prototype.fromJSON=function(t){return Yp.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},vd.prototype=Object.create(Yp.prototype),vd.prototype.constructor=vd,vd.prototype.isLineCurve=!0,vd.prototype.getPoint=function(t,e){var r=e||new _r;return 1===t?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r},vd.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},vd.prototype.getTangent=function(){var t=this.v2.clone().sub(this.v1);return t.normalize()},vd.prototype.copy=function(t){return Yp.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},vd.prototype.toJSON=function(){var t=Yp.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},vd.prototype.fromJSON=function(t){return Yp.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},gd.prototype=Object.create(Yp.prototype),gd.prototype.constructor=gd,gd.prototype.isLineCurve3=!0,gd.prototype.getPoint=function(t,e){var r=e||new Tr;return 1===t?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r},gd.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},gd.prototype.copy=function(t){return Yp.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},gd.prototype.toJSON=function(){var t=Yp.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},gd.prototype.fromJSON=function(t){return Yp.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},yd.prototype=Object.create(Yp.prototype),yd.prototype.constructor=yd,yd.prototype.isQuadraticBezierCurve=!0,yd.prototype.getPoint=function(t,e){var r=e||new _r,i=this.v0,n=this.v1,a=this.v2;return r.set(ld(t,i.x,n.x,a.x),ld(t,i.y,n.y,a.y)),r},yd.prototype.copy=function(t){return Yp.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},yd.prototype.toJSON=function(){var t=Yp.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},yd.prototype.fromJSON=function(t){return Yp.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},_d.prototype=Object.create(Yp.prototype),_d.prototype.constructor=_d,_d.prototype.isQuadraticBezierCurve3=!0,_d.prototype.getPoint=function(t,e){var r=e||new Tr,i=this.v0,n=this.v1,a=this.v2;return r.set(ld(t,i.x,n.x,a.x),ld(t,i.y,n.y,a.y),ld(t,i.z,n.z,a.z)),r},_d.prototype.copy=function(t){return Yp.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},_d.prototype.toJSON=function(){var t=Yp.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},_d.prototype.fromJSON=function(t){return Yp.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},xd.prototype=Object.create(Yp.prototype),xd.prototype.constructor=xd,xd.prototype.isSplineCurve=!0,xd.prototype.getPoint=function(t,e){var r=e||new _r,i=this.points,n=(i.length-1)*t,a=Math.floor(n),o=n-a,s=i[0===a?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return r.set(nd(o,s.x,l.x,u.x,c.x),nd(o,s.y,l.y,u.y,c.y)),r},xd.prototype.copy=function(t){Yp.prototype.copy.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push(i.clone())}return this},xd.prototype.toJSON=function(){var t=Yp.prototype.toJSON.call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var i=this.points[e];t.points.push(i.toArray())}return t},xd.prototype.fromJSON=function(t){Yp.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push((new _r).fromArray(i))}return this};var bd=Object.freeze({__proto__:null,ArcCurve:Jp,CatmullRomCurve3:id,CubicBezierCurve:fd,CubicBezierCurve3:md,EllipseCurve:Zp,LineCurve:vd,LineCurve3:gd,QuadraticBezierCurve:yd,QuadraticBezierCurve3:_d,SplineCurve:xd});function wd(){Yp.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Td(t){wd.call(this),this.type="Path",this.currentPoint=new _r,t&&this.setFromPoints(t)}function Sd(t){Td.call(this,t),this.uuid=yr.generateUUID(),this.type="Shape",this.holes=[]}function Ed(t,e){ni.call(this),this.type="Light",this.color=new $i(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Md(t,e,r){Ed.call(this,t,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ni.DefaultUp),this.updateMatrix(),this.groundColor=new $i(e)}function Ad(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new _r(512,512),this.map=null,this.mapPass=null,this.matrix=new Ur,this._frustum=new ha,this._frameExtents=new _r(1,1),this._viewportCount=1,this._viewports=[new Lr(0,0,1,1)]}function Cd(){Ad.call(this,new ia(50,1,.5,500))}function Pd(t,e,r,i,n,a){Ed.call(this,t,e),this.type="SpotLight",this.position.copy(ni.DefaultUp),this.updateMatrix(),this.target=new ni,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==n?n:0,this.decay=void 0!==a?a:1,this.shadow=new Cd}function Ld(){Ad.call(this,new ia(90,1,.5,500)),this._frameExtents=new _r(4,2),this._viewportCount=6,this._viewports=[new Lr(2,1,1,1),new Lr(0,1,1,1),new Lr(3,1,1,1),new Lr(1,1,1,1),new Lr(3,0,1,1),new Lr(1,0,1,1)],this._cubeDirections=[new Tr(1,0,0),new Tr(-1,0,0),new Tr(0,0,1),new Tr(0,0,-1),new Tr(0,1,0),new Tr(0,-1,0)],this._cubeUps=[new Tr(0,1,0),new Tr(0,1,0),new Tr(0,1,0),new Tr(0,1,0),new Tr(0,0,1),new Tr(0,0,-1)]}function Id(t,e,r,i){Ed.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==i?i:1,this.shadow=new Ld}function kd(t,e,r,i,n,a){ra.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==r?r:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==n?n:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Rd(){Ad.call(this,new kd(-5,5,5,-5,.5,500))}function Od(t,e){Ed.call(this,t,e),this.type="DirectionalLight",this.position.copy(ni.DefaultUp),this.updateMatrix(),this.target=new ni,this.shadow=new Rd}function zd(t,e){Ed.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Dd(t,e,r,i){Ed.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==r?r:10,this.height=void 0!==i?i:10}function Bd(t){Up.call(this,t),this.textures={}}wd.prototype=Object.assign(Object.create(Yp.prototype),{constructor:wd,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new vd(e,t))},getPoint:function(t){var e=t*this.getLength(),r=this.getCurveLengths(),i=0;while(i<r.length){if(r[i]>=e){var n=r[i]-e,a=this.curves[i],o=a.getLength(),s=0===o?0:1-n/o;return a.getPointAt(s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,r=0,i=this.curves.length;r<i;r++)e+=this.curves[r].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],r=0;r<=t;r++)e.push(this.getPoint(r/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,r=[],i=0,n=this.curves;i<n.length;i++)for(var a=n[i],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];e&&e.equals(u)||(r.push(u),e=u)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(t){Yp.prototype.copy.call(this,t),this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Yp.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,r=this.curves.length;e<r;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){Yp.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var i=t.curves[e];this.curves.push((new bd[i.type]).fromJSON(i))}return this}}),Td.prototype=Object.assign(Object.create(wd.prototype),{constructor:Td,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,r=t.length;e<r;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var r=new vd(this.currentPoint.clone(),new _r(t,e));return this.curves.push(r),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,r,i){var n=new yd(this.currentPoint.clone(),new _r(t,e),new _r(r,i));return this.curves.push(n),this.currentPoint.set(r,i),this},bezierCurveTo:function(t,e,r,i,n,a){var o=new fd(this.currentPoint.clone(),new _r(t,e),new _r(r,i),new _r(n,a));return this.curves.push(o),this.currentPoint.set(n,a),this},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),r=new xd(e);return this.curves.push(r),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,r,i,n,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+o,e+s,r,i,n,a),this},absarc:function(t,e,r,i,n,a){return this.absellipse(t,e,r,r,i,n,a),this},ellipse:function(t,e,r,i,n,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(t+l,e+u,r,i,n,a,o,s),this},absellipse:function(t,e,r,i,n,a,o,s){var l=new Zp(t,e,r,i,n,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(t){return wd.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=wd.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return wd.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Sd.prototype=Object.assign(Object.create(Td.prototype),{constructor:Sd,getPointsHoles:function(t){for(var e=[],r=0,i=this.holes.length;r<i;r++)e[r]=this.holes[r].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Td.prototype.copy.call(this,t),this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=Td.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,r=this.holes.length;e<r;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Td.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var i=t.holes[e];this.holes.push((new Td).fromJSON(i))}return this}}),Ed.prototype=Object.assign(Object.create(ni.prototype),{constructor:Ed,isLight:!0,copy:function(t){return ni.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=ni.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Md.prototype=Object.assign(Object.create(Ed.prototype),{constructor:Md,isHemisphereLight:!0,copy:function(t){return Ed.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Ad.prototype,{_projScreenMatrix:new Ur,_lightPositionWorld:new Tr,_lookTarget:new Tr,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,r=this.matrix,i=this._projScreenMatrix,n=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),n.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(n),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromMatrix(i),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(e.projectionMatrix),r.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Cd.prototype=Object.assign(Object.create(Ad.prototype),{constructor:Cd,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,r=2*yr.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,n=t.distance||e.far;r===e.fov&&i===e.aspect&&n===e.far||(e.fov=r,e.aspect=i,e.far=n,e.updateProjectionMatrix()),Ad.prototype.updateMatrices.call(this,t)}}),Pd.prototype=Object.assign(Object.create(Ed.prototype),{constructor:Pd,isSpotLight:!0,copy:function(t){return Ed.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ld.prototype=Object.assign(Object.create(Ad.prototype),{constructor:Ld,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var r=this.camera,i=this.matrix,n=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;n.setFromMatrixPosition(t.matrixWorld),r.position.copy(n),a.copy(r.position),a.add(this._cubeDirections[e]),r.up.copy(this._cubeUps[e]),r.lookAt(a),r.updateMatrixWorld(),i.makeTranslation(-n.x,-n.y,-n.z),o.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromMatrix(o)}}),Id.prototype=Object.assign(Object.create(Ed.prototype),{constructor:Id,isPointLight:!0,copy:function(t){return Ed.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),kd.prototype=Object.assign(Object.create(ra.prototype),{constructor:kd,isOrthographicCamera:!0,copy:function(t,e){return ra.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,r,i,n,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-t,a=r+t,o=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;n+=c*(this.view.offsetX/l),a=n+c*(this.view.width/l),o-=h*(this.view.offsetY/u),s=o-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(n,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=ni.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Rd.prototype=Object.assign(Object.create(Ad.prototype),{constructor:Rd,isDirectionalLightShadow:!0,updateMatrices:function(t){Ad.prototype.updateMatrices.call(this,t)}}),Od.prototype=Object.assign(Object.create(Ed.prototype),{constructor:Od,isDirectionalLight:!0,copy:function(t){return Ed.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),zd.prototype=Object.assign(Object.create(Ed.prototype),{constructor:zd,isAmbientLight:!0}),Dd.prototype=Object.assign(Object.create(Ed.prototype),{constructor:Dd,isRectAreaLight:!0,copy:function(t){return Ed.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Ed.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Bd.prototype=Object.assign(Object.create(Up.prototype),{constructor:Bd,load:function(t,e,r,i){var n=this,a=new jp(n.manager);a.setPath(n.path),a.load(t,(function(t){e(n.parse(JSON.parse(t)))}),r,i)},parse:function(t){var e=this.textures;function r(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var i=new xp[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=(new $i).setHex(t.sheen)),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(i.morphNormals=t.morphNormals),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.uniforms)for(var n in t.uniforms){var a=t.uniforms[n];switch(i.uniforms[n]={},a.type){case"t":i.uniforms[n].value=r(a.value);break;case"c":i.uniforms[n].value=(new $i).setHex(a.value);break;case"v2":i.uniforms[n].value=(new _r).fromArray(a.value);break;case"v3":i.uniforms[n].value=(new Tr).fromArray(a.value);break;case"v4":i.uniforms[n].value=(new Lr).fromArray(a.value);break;case"m3":i.uniforms[n].value=(new Mr).fromArray(a.value);case"m4":i.uniforms[n].value=(new Ur).fromArray(a.value);break;default:i.uniforms[n].value=a.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var o in t.extensions)i.extensions[o]=t.extensions[o];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=r(t.map)),void 0!==t.matcap&&(i.matcap=r(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=r(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=r(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=r(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),i.normalScale=(new _r).fromArray(s)}return void 0!==t.displacementMap&&(i.displacementMap=r(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=r(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=r(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=r(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=r(t.specularMap)),void 0!==t.envMap&&(i.envMap=r(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=r(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=r(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=r(t.gradientMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=r(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new _r).fromArray(t.clearcoatNormalScale)),i},setTextures:function(t){return this.textures=t,this}});var Fd={decodeText:function(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",r=0,i=t.length;r<i;r++)e+=String.fromCharCode(t[r]);try{return decodeURIComponent(escape(e))}catch(n){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Nd(){wn.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ud(t,e,r,i){"number"===typeof r&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),rn.call(this,t,e,r),this.meshPerAttribute=i||1}function Vd(t){Up.call(this,t)}Nd.prototype=Object.assign(Object.create(wn.prototype),{constructor:Nd,isInstancedBufferGeometry:!0,copy:function(t){return wn.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=wn.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),Ud.prototype=Object.assign(Object.create(rn.prototype),{constructor:Ud,isInstancedBufferAttribute:!0,copy:function(t){return rn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=rn.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Vd.prototype=Object.assign(Object.create(Up.prototype),{constructor:Vd,load:function(t,e,r,i){var n=this,a=new jp(n.manager);a.setPath(n.path),a.load(t,(function(t){e(n.parse(JSON.parse(t)))}),r,i)},parse:function(t){var e=t.isInstancedBufferGeometry?new Nd:new wn,r=t.data.index;if(void 0!==r){var i=new jd[r.type](r.array);e.setIndex(new rn(i,1))}var n=t.data.attributes;for(var a in n){var o=n[a],s=(i=new jd[o.type](o.array),o.isInstancedBufferAttribute?Ud:rn),l=new s(i,o.itemSize,o.normalized);void 0!==o.name&&(l.name=o.name),e.setAttribute(a,l)}var u=t.data.morphAttributes;if(u)for(var a in u){for(var c=u[a],h=[],p=0,d=c.length;p<d;p++){o=c[p],i=new jd[o.type](o.array),l=new rn(i,o.itemSize,o.normalized);void 0!==o.name&&(l.name=o.name),h.push(l)}e.morphAttributes[a]=h}var f=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==f){p=0;for(var m=f.length;p!==m;++p){var v=f[p];e.addGroup(v.start,v.count,v.materialIndex)}}var g=t.data.boundingSphere;if(void 0!==g){var y=new Tr;void 0!==g.center&&y.fromArray(g.center),e.boundingSphere=new bi(y,g.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var jd={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Gd(t){Up.call(this,t)}Gd.prototype=Object.assign(Object.create(Up.prototype),{constructor:Gd,load:function(t,e,r,i){var n=this,a=""===this.path?Fd.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;var o=new jp(n.manager);o.setPath(this.path),o.load(t,(function(r){var a=null;try{a=JSON.parse(r)}catch(s){return void 0!==i&&i(s),void console.error("THREE:ObjectLoader: Can't parse "+t+".",s.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?n.parse(a,e):console.error("THREE.ObjectLoader: Can't load "+t)}),r,i)},parse:function(t,e){var r=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,r),n=this.parseImages(t.images,(function(){void 0!==e&&e(s)})),a=this.parseTextures(t.textures,n),o=this.parseMaterials(t.materials,a),s=this.parseObject(t.object,i,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var r=0,i=t.length;r<i;r++){var n=(new Sd).fromJSON(t[r]);e[n.uuid]=n}return e},parseGeometries:function(t,e){var r={};if(void 0!==t)for(var i=new Vd,n=0,a=t.length;n<a;n++){var o,s=t[n];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new up[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new up[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new up[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new up[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new up[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new up[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new up[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new up[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new up[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new up[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new up[s.type]((new bd[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new up[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new up[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],u=0,c=s.shapes.length;u<c;u++){var h=e[s.shapes[u]];l.push(h)}o=new up[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],u=0,c=s.shapes.length;u<c;u++){h=e[s.shapes[u]];l.push(h)}var p=s.options.extrudePath;void 0!==p&&(s.options.extrudePath=(new bd[p.type]).fromJSON(p)),o=new up[s.type](l,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var d=new THREE.LegacyJSONLoader;o=d.parse(s,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),r[s.uuid]=o}return r},parseMaterials:function(t,e){var r={},i={};if(void 0!==t){var n=new Bd;n.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if("MultiMaterial"===s.type){for(var l=[],u=0;u<s.materials.length;u++){var c=s.materials[u];void 0===r[c.uuid]&&(r[c.uuid]=n.parse(c)),l.push(r[c.uuid])}i[s.uuid]=l}else void 0===r[s.uuid]&&(r[s.uuid]=n.parse(s)),i[s.uuid]=r[s.uuid]}}return i},parseAnimations:function(t){for(var e=[],r=0;r<t.length;r++){var i=t[r],n=Op.parse(i);void 0!==i.uuid&&(n.uuid=i.uuid),e.push(n)}return e},parseImages:function(t,e){var r=this,i={};function n(t){return r.manager.itemStart(t),o.load(t,(function(){r.manager.itemEnd(t)}),void 0,(function(){r.manager.itemError(t),r.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){var a=new Fp(e),o=new qp(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,l=t.length;s<l;s++){var u=t[s],c=u.url;if(Array.isArray(c)){i[u.uuid]=[];for(var h=0,p=c.length;h<p;h++){var d=c[h],f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:r.resourcePath+d;i[u.uuid].push(n(f))}}else{f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:r.resourcePath+u.url;i[u.uuid]=n(f)}}}return i},parseTextures:function(t,e){function r(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var n=0,a=t.length;n<a;n++){var o,s=t[n];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),o=Array.isArray(e[s.image])?new qs(e[s.image]):new Pr(e[s.image]),o.needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=r(s.mapping,Wd)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=r(s.wrap[0],qd),o.wrapT=r(s.wrap[1],qd)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=r(s.minFilter,Xd)),void 0!==s.magFilter&&(o.magFilter=r(s.magFilter,Xd)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),i[s.uuid]=o}return i},parseObject:function(t,e,r){var i;function n(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function a(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,n=t.length;i<n;i++){var a=t[i];void 0===r[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(r[a])}return e}return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),r[t]}}switch(t.type){case"Scene":i=new ai,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new $i(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new Yu(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new $u(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new ia(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new kd(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new zd(t.color,t.intensity);break;case"DirectionalLight":i=new Od(t.color,t.intensity);break;case"PointLight":i=new Id(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new Dd(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new Pd(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new Md(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=n(t.geometry),s=a(t.material);i=o.bones&&o.bones.length>0?new vc(o,s):new Un(o,s);break;case"InstancedMesh":o=n(t.geometry),s=a(t.material);var l=t.count,u=t.instanceMatrix;i=new bc(o,s,l),i.instanceMatrix=new rn(new Float32Array(u.array),16);break;case"LOD":i=new mc;break;case"Line":i=new Cc(n(t.geometry),a(t.material),t.mode);break;case"LineLoop":i=new kc(n(t.geometry),a(t.material));break;case"LineSegments":i=new Ic(n(t.geometry),a(t.material));break;case"PointCloud":case"Points":i=new Fc(n(t.geometry),a(t.material));break;case"Sprite":i=new hc(a(t.material));break;case"Group":i=new Nu;break;default:i=new ni}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.drawMode&&i.setDrawMode(t.drawMode),void 0!==t.children)for(var c=t.children,h=0;h<c.length;h++)i.add(this.parseObject(c[h],e,r));if("LOD"===t.type)for(var p=t.levels,d=0;d<p.length;d++){var f=p[d],m=i.getObjectByProperty("uuid",f.object);void 0!==m&&i.addLevel(m,f.distance)}return i}});var Hd,Wd={UVMapping:ut,CubeReflectionMapping:ct,CubeRefractionMapping:ht,EquirectangularReflectionMapping:pt,EquirectangularRefractionMapping:dt,SphericalReflectionMapping:ft,CubeUVReflectionMapping:mt,CubeUVRefractionMapping:vt},qd={RepeatWrapping:gt,ClampToEdgeWrapping:yt,MirroredRepeatWrapping:_t},Xd={NearestFilter:xt,NearestMipmapNearestFilter:bt,NearestMipmapLinearFilter:Tt,LinearFilter:Et,LinearMipmapNearestFilter:Mt,LinearMipmapLinearFilter:Ct};function $d(t){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Up.call(this,t),this.options=void 0}function Yd(){this.type="ShapePath",this.color=new $i,this.subPaths=[],this.currentPath=null}function Zd(t){this.type="Font",this.data=t}function Jd(t,e,r){for(var i=Array.from?Array.from(t):String(t).split(""),n=e/r.resolution,a=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*n,o=[],s=0,l=0,u=0;u<i.length;u++){var c=i[u];if("\n"===c)s=0,l-=a;else{var h=Kd(c,n,s,l,r);s+=h.offsetX,o.push(h.path)}}return o}function Kd(t,e,r,i,n){var a=n.glyphs[t]||n.glyphs["?"];if(a){var o,s,l,u,c,h,p,d,f=new Yd;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,g=m.length;v<g;){var y=m[v++];switch(y){case"m":o=m[v++]*e+r,s=m[v++]*e+i,f.moveTo(o,s);break;case"l":o=m[v++]*e+r,s=m[v++]*e+i,f.lineTo(o,s);break;case"q":l=m[v++]*e+r,u=m[v++]*e+i,c=m[v++]*e+r,h=m[v++]*e+i,f.quadraticCurveTo(c,h,l,u);break;case"b":l=m[v++]*e+r,u=m[v++]*e+i,c=m[v++]*e+r,h=m[v++]*e+i,p=m[v++]*e+r,d=m[v++]*e+i,f.bezierCurveTo(c,h,p,d,l,u);break}}return{offsetX:a.ha*e,path:f}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+n.familyName+".")}function Qd(t){Up.call(this,t)}$d.prototype=Object.assign(Object.create(Up.prototype),{constructor:$d,setOptions:function(t){return this.options=t,this},load:function(t,e,r,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var n=this,a=Bp.get(t);if(void 0!==a)return n.manager.itemStart(t),setTimeout((function(){e&&e(a),n.manager.itemEnd(t)}),0),a;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===n.options?createImageBitmap(t):createImageBitmap(t,n.options)})).then((function(r){Bp.add(t,r),e&&e(r),n.manager.itemEnd(t)})).catch((function(e){i&&i(e),n.manager.itemError(t),n.manager.itemEnd(t)})),n.manager.itemStart(t)}}),Object.assign(Yd.prototype,{moveTo:function(t,e){return this.currentPath=new Td,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,r,i){return this.currentPath.quadraticCurveTo(t,e,r,i),this},bezierCurveTo:function(t,e,r,i,n,a){return this.currentPath.bezierCurveTo(t,e,r,i,n,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function r(t){for(var e=[],r=0,i=t.length;r<i;r++){var n=t[r],a=new Sd;a.curves=n.curves,e.push(a)}return e}function i(t,e){for(var r=e.length,i=!1,n=r-1,a=0;a<r;n=a++){var o=e[n],s=e[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=e[a],l=-l,s=e[n],u=-u),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var c=u*(t.x-o.x)-l*(t.y-o.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return i}var n=Fh.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return r(a);var o,s,l,u=[];if(1===a.length)return s=a[0],l=new Sd,l.curves=s.curves,u.push(l),u;var c=!n(a[0].getPoints());c=t?!c:c;var h,p,d=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)s=a[g],h=s.getPoints(),o=n(h),o=t?!o:o,o?(!c&&f[v]&&v++,f[v]={s:new Sd,p:h},f[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return r(a);if(f.length>1){for(var _=!1,x=[],b=0,w=f.length;b<w;b++)d[b]=[];for(b=0,w=f.length;b<w;b++)for(var T=m[b],S=0;S<T.length;S++){for(var E=T[S],M=!0,A=0;A<f.length;A++)i(E.p,f[A].p)&&(b!==A&&x.push({froms:b,tos:A,hole:S}),M?(M=!1,d[A].push(E)):_=!0);M&&d[b].push(E)}x.length>0&&(_||(m=d))}g=0;for(var C=f.length;g<C;g++){l=f[g].s,u.push(l),p=m[g];for(var P=0,L=p.length;P<L;P++)l.holes.push(p[P].h)}return u}}),Object.assign(Zd.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var r=[],i=Jd(t,e,this.data),n=0,a=i.length;n<a;n++)Array.prototype.push.apply(r,i[n].toShapes());return r}}),Qd.prototype=Object.assign(Object.create(Up.prototype),{constructor:Qd,load:function(t,e,r,i){var n=this,a=new jp(this.manager);a.setPath(this.path),a.load(t,(function(t){var r;try{r=JSON.parse(t)}catch(a){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(t.substring(65,t.length-2))}var i=n.parse(r);e&&e(i)}),r,i)},parse:function(t){return new Zd(t)}});var tf={getContext:function(){return void 0===Hd&&(Hd=new(window.AudioContext||window.webkitAudioContext)),Hd},setContext:function(t){Hd=t}};function ef(t){Up.call(this,t)}function rf(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Tr)}function nf(t,e){Ed.call(this,void 0,e),this.sh=void 0!==t?t:new rf}function af(t,e,r){nf.call(this,void 0,r);var i=(new $i).set(t),n=(new $i).set(e),a=new Tr(i.r,i.g,i.b),o=new Tr(n.r,n.g,n.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}function of(t,e){nf.call(this,void 0,e);var r=(new $i).set(t);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}ef.prototype=Object.assign(Object.create(Up.prototype),{constructor:ef,load:function(t,e,r,i){var n=new jp(this.manager);n.setResponseType("arraybuffer"),n.setPath(this.path),n.load(t,(function(t){var r=t.slice(0),i=tf.getContext();i.decodeAudioData(r,(function(t){e(t)}))}),r,i)}}),Object.assign(rf.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var r=t.x,i=t.y,n=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScale(a[1],.488603*i),e.addScale(a[2],.488603*n),e.addScale(a[3],.488603*r),e.addScale(a[4],r*i*1.092548),e.addScale(a[5],i*n*1.092548),e.addScale(a[6],.315392*(3*n*n-1)),e.addScale(a[7],r*n*1.092548),e.addScale(a[8],.546274*(r*r-i*i)),e},getIrradianceAt:function(t,e){var r=t.x,i=t.y,n=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScale(a[1],1.023328*i),e.addScale(a[2],1.023328*n),e.addScale(a[3],1.023328*r),e.addScale(a[4],.858086*r*i),e.addScale(a[5],.858086*i*n),e.addScale(a[6],.743125*n*n-.247708),e.addScale(a[7],.858086*r*n),e.addScale(a[8],.429043*(r*r-i*i)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var r=0;r<9;r++)this.coefficients[r].lerp(t.coefficients[r],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var r=this.coefficients,i=0;i<9;i++)r[i].fromArray(t,e+3*i);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var r=this.coefficients,i=0;i<9;i++)r[i].toArray(t,e+3*i);return t}}),Object.assign(rf,{getBasisAt:function(t,e){var r=t.x,i=t.y,n=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*n,e[3]=.488603*r,e[4]=1.092548*r*i,e[5]=1.092548*i*n,e[6]=.315392*(3*n*n-1),e[7]=1.092548*r*n,e[8]=.546274*(r*r-i*i)}}),nf.prototype=Object.assign(Object.create(Ed.prototype),{constructor:nf,isLightProbe:!0,copy:function(t){return Ed.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){var e=Ed.prototype.toJSON.call(this,t);return e}}),af.prototype=Object.assign(Object.create(nf.prototype),{constructor:af,isHemisphereLightProbe:!0,copy:function(t){return nf.prototype.copy.call(this,t),this},toJSON:function(t){var e=nf.prototype.toJSON.call(this,t);return e}}),of.prototype=Object.assign(Object.create(nf.prototype),{constructor:of,isAmbientLightProbe:!0,copy:function(t){return nf.prototype.copy.call(this,t),this},toJSON:function(t){var e=nf.prototype.toJSON.call(this,t);return e}});var sf=new Ur,lf=new Ur;function uf(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ia,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ia,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function cf(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(uf.prototype,{update:function(t){var e=this._cache,r=e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep;if(r){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var i,n,a=t.projectionMatrix.clone(),o=e.eyeSep/2,s=o*e.near/e.focus,l=e.near*Math.tan(yr.DEG2RAD*e.fov*.5)/e.zoom;lf.elements[12]=-o,sf.elements[12]=o,i=-l*e.aspect+s,n=l*e.aspect+s,a.elements[0]=2*e.near/(n-i),a.elements[8]=(n+i)/(n-i),this.cameraL.projectionMatrix.copy(a),i=-l*e.aspect-s,n=l*e.aspect-s,a.elements[0]=2*e.near/(n-i),a.elements[8]=(n+i)/(n-i),this.cameraR.projectionMatrix.copy(a)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(lf),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(sf)}}),Object.assign(cf.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var hf=new Tr,pf=new xr,df=new Tr,ff=new Tr;function mf(){ni.call(this),this.type="AudioListener",this.context=tf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new cf}function vf(t){ni.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}mf.prototype=Object.assign(Object.create(ni.prototype),{constructor:mf,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){ni.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(hf,pf,df),ff.set(0,0,-1).applyQuaternion(pf),e.positionX){var i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(hf.x,i),e.positionY.linearRampToValueAtTime(hf.y,i),e.positionZ.linearRampToValueAtTime(hf.z,i),e.forwardX.linearRampToValueAtTime(ff.x,i),e.forwardY.linearRampToValueAtTime(ff.y,i),e.forwardZ.linearRampToValueAtTime(ff.z,i),e.upX.linearRampToValueAtTime(r.x,i),e.upY.linearRampToValueAtTime(r.y,i),e.upZ.linearRampToValueAtTime(r.z,i)}else e.setPosition(hf.x,hf.y,hf.z),e.setOrientation(ff.x,ff.y,ff.z,r.x,r.y,r.z)}}),vf.prototype=Object.assign(Object.create(ni.prototype),{constructor:vf,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(void 0===t&&(t=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var gf=new Tr,yf=new xr,_f=new Tr,xf=new Tr;function bf(t){vf.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function wf(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Tf(t,e,r){this.binding=t,this.valueSize=r;var i,n=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":n=Array,i=this._select;break;default:i=this._lerp}this.buffer=new n(4*r),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}bf.prototype=Object.assign(Object.create(vf.prototype),{constructor:bf,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,r){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=r,this},updateMatrixWorld:function(t){if(ni.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(gf,yf,_f),xf.set(0,0,1).applyQuaternion(yf);var e=this.panner;if(e.positionX){var r=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(gf.x,r),e.positionY.linearRampToValueAtTime(gf.y,r),e.positionZ.linearRampToValueAtTime(gf.z,r),e.orientationX.linearRampToValueAtTime(xf.x,r),e.orientationY.linearRampToValueAtTime(xf.y,r),e.orientationZ.linearRampToValueAtTime(xf.z,r)}else e.setPosition(gf.x,gf.y,gf.z),e.setOrientation(xf.x,xf.y,xf.z)}}}),Object.assign(wf.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),r=0;r<e.length;r++)t+=e[r];return t/e.length}}),Object.assign(Tf.prototype,{accumulate:function(t,e){var r=this.buffer,i=this.valueSize,n=t*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)r[n+o]=r[o];a=e}else{a+=e;var s=e/a;this._mixBufferRegion(r,n,0,s,i)}this.cumulativeWeight=a},apply:function(t){var e=this.valueSize,r=this.buffer,i=t*e+e,n=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,n<1){var o=3*e;this._mixBufferRegion(r,i,o,1-n,e)}for(var s=e,l=e+e;s!==l;++s)if(r[s]!==r[s+e]){a.setValue(r,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,r=this.valueSize,i=3*r;t.getValue(e,i);for(var n=r,a=i;n!==a;++n)e[n]=e[i+n%r];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,r,i,n){if(i>=.5)for(var a=0;a!==n;++a)t[e+a]=t[r+a]},_slerp:function(t,e,r,i){xr.slerpFlat(t,e,t,e,t,r,i)},_lerp:function(t,e,r,i,n){for(var a=1-i,o=0;o!==n;++o){var s=e+o;t[s]=t[s]*a+t[r+o]*i}}});var Sf="\\[\\]\\.:\\/",Ef=new RegExp("["+Sf+"]","g"),Mf="[^"+Sf+"]",Af="[^"+Sf.replace("\\.","")+"]",Cf=/((?:WC+[\/:])*)/.source.replace("WC",Mf),Pf=/(WCOD+)?/.source.replace("WCOD",Af),Lf=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Mf),If=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Mf),kf=new RegExp("^"+Cf+Pf+Lf+If+"$"),Rf=["material","materials","bones"];function Of(t,e,r){var i=r||zf.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function zf(t,e,r){this.path=e,this.parsedPath=r||zf.parseTrackName(e),this.node=zf.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Df(){this.uuid=yr.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,r=arguments.length;e!==r;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Bf(t,e,r){this._mixer=t,this._clip=e,this._localRoot=r||null;for(var i=e.tracks,n=i.length,a=new Array(n),o={endingStart:Me,endingEnd:Me},s=0;s!==n;++s){var l=i[s].createInterpolant(null);a[s]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=be,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ff(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Nf(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Uf(t,e,r){Zu.call(this,t,e),this.meshPerAttribute=r||1}function Vf(t,e,r,i){this.ray=new Pi(t,e),this.near=r||0,this.far=i||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function jf(t,e){return t.distance-e.distance}function Gf(t,e,r,i){if(!1!==t.visible&&(t.raycast(e,r),!0===i))for(var n=t.children,a=0,o=n.length;a<o;a++)Gf(n[a],e,r,!0)}function Hf(t,e,r){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==r?r:0,this}function Wf(t,e,r){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==r?r:0,this}Object.assign(Of.prototype,{getValue:function(t,e){this.bind();var r=this._targetGroup.nCachedObjects_,i=this._bindings[r];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var r=this._bindings,i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].unbind()}}),Object.assign(zf,{Composite:Of,create:function(t,e,r){return t&&t.isAnimationObjectGroup?new zf.Composite(t,e,r):new zf(t,e,r)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Ef,"")},parseTrackName:function(t){var e=kf.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var r={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=r.nodeName.substring(i+1);-1!==Rf.indexOf(n)&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=n)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r},findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var r=t.skeleton.getBoneByName(e);if(void 0!==r)return r}if(t.children){var i=function(t){for(var r=0;r<t.length;r++){var n=t[r];if(n.name===e||n.uuid===e)return n;var a=i(n.children);if(a)return a}return null},n=i(t.children);if(n)return n}return null}}),Object.assign(zf.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)t[e++]=r[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=t[e++]},function(t,e){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,r=e.objectName,i=e.propertyName,n=e.propertyIndex;if(t||(t=zf.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var a=e.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}var s=t[i];if(void 0!==s){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(t.geometry.morphAttributes.position[o].name===n){n=o;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===n){n=o;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(zf.prototype,{_getValue_unbound:zf.prototype.getValue,_setValue_unbound:zf.prototype.setValue}),Object.assign(Df.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,n=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],p=h.uuid,d=i[p];if(void 0===d){d=e++,i[p]=d,t.push(h);for(var f=0,m=s;f!==m;++f)o[f].push(new zf(h,n[f],a[f]))}else if(d<r){l=t[d];var v=--r,g=t[v];i[g.uuid]=d,t[d]=g,i[p]=v,t[v]=h;for(f=0,m=s;f!==m;++f){var y=o[f],_=y[v],x=y[d];y[d]=_,void 0===x&&(x=new zf(h,n[f],a[f])),y[v]=x}}else t[d]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,n=i.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=r[l];if(void 0!==u&&u>=e){var c=e++,h=t[c];r[h.uuid]=u,t[u]=h,r[l]=c,t[c]=s;for(var p=0,d=n;p!==d;++p){var f=i[p],m=f[c],v=f[u];f[u]=m,f[c]=v}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,a=n.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=i[u];if(void 0!==c)if(delete i[u],c<r){var h=--r,p=t[h],d=--e,f=t[d];i[p.uuid]=c,t[c]=p,i[f.uuid]=h,t[h]=f,t.pop();for(var m=0,v=a;m!==v;++m){var g=n[m],y=g[h],_=g[d];g[c]=y,g[h]=_,g.pop()}}else{d=--e,f=t[d];i[f.uuid]=c,t[c]=f,t.pop();for(m=0,v=a;m!==v;++m){g=n[m];g[c]=g[d],g.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var r=this._bindingsIndicesByPath,i=r[t],n=this._bindings;if(void 0!==i)return n[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);i=n.length,r[t]=i,a.push(t),o.push(e),n.push(c);for(var h=u,p=s.length;h!==p;++h){var d=s[h];c[h]=new zf(d,t,e)}return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,r=e[t];if(void 0!==r){var i=this._paths,n=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],l=t[o];e[l]=r,a[r]=s,a.pop(),n[r]=n[o],n.pop(),i[r]=i[o],i.pop()}}}),Object.assign(Bf.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,r){if(t.fadeOut(e),this.fadeIn(e),r){var i=this._clip.duration,n=t._clip.duration,a=n/i,o=i/n;t.warp(1,a,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,r){return t.crossFadeFrom(this,e,r)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,r){var i=this._mixer,n=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=n,s[1]=n+r,l[0]=t/o,l[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,r,i){if(this.enabled){var n=this._startTime;if(null!==n){var a=(t-n)*r;if(a<0||0===r)return;this._startTime=null,e=r*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var r=this._weightInterpolant;if(null!==r){var i=r.evaluate(t)[0];e*=i,t>r.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r){var i=r.evaluate(t)[0];e*=i,t>r.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,r=this._clip.duration,i=this.loop,n=this._loopCount,a=i===we;if(0===t)return-1===n?e:a&&1===(1&n)?r-e:e;if(i===xe){-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=r)e=r;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===n&&(t>=0?(n=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=r||e<0){var o=Math.floor(e/r);e-=r*o,n+=Math.abs(o);var s=this.repetitions-n;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?r:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var l=t<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=e;if(a&&1===(1&n))return r-e}return e},_setEndings:function(t,e,r){var i=this._interpolantSettings;r?(i.endingStart=Ae,i.endingEnd=Ae):(i.endingStart=t?this.zeroSlopeAtStart?Ae:Me:Ce,i.endingEnd=e?this.zeroSlopeAtEnd?Ae:Me:Ce)},_scheduleFading:function(t,e,r){var i=this._mixer,n=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=n,s[0]=e,o[1]=n+t,s[1]=r,this}}),Ff.prototype=Object.assign(Object.create(mr.prototype),{constructor:Ff,_bindAction:function(t,e){var r=t._localRoot||this._root,i=t._clip.tracks,n=i.length,a=t._propertyBindings,o=t._interpolants,s=r.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==n;++c){var h=i[c],p=h.name,d=u[p];if(void 0!==d)a[c]=d;else{if(d=a[c],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=e&&e._propertyBindings[c].binding.parsedPath;d=new Tf(zf.create(r,p,f),h.ValueTypeName,h.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,s,p),a[c]=d}o[c].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,r=t._clip.uuid,i=this._actionsByClip[r];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,r,e)}for(var n=t._propertyBindings,a=0,o=n.length;a!==o;++a){var s=n[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,r=0,i=e.length;r!==i;++r){var n=e[r];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,r){var i=this._actions,n=this._actionsByClip,a=n[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,n[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[r]=t},_removeInactiveAction:function(t){var e=this._actions,r=e[e.length-1],i=t._cacheIndex;r._cacheIndex=i,e[i]=r,e.pop(),t._cacheIndex=null;var n=t._clip.uuid,a=this._actionsByClip,o=a[n],s=o.knownActions,l=s[s.length-1],u=t._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),t._byClipCacheIndex=null;var c=o.actionByRoot,h=(t._localRoot||this._root).uuid;delete c[h],0===s.length&&delete a[n],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,r=0,i=e.length;r!==i;++r){var n=e[r];0===--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){var e=this._actions,r=t._cacheIndex,i=this._nActiveActions++,n=e[i];t._cacheIndex=i,e[i]=t,n._cacheIndex=r,e[r]=n},_takeBackAction:function(t){var e=this._actions,r=t._cacheIndex,i=--this._nActiveActions,n=e[i];t._cacheIndex=i,e[i]=t,n._cacheIndex=r,e[r]=n},_addInactiveBinding:function(t,e,r){var i=this._bindingsByRootAndName,n=i[e],a=this._bindings;void 0===n&&(n={},i[e]=n),n[r]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,r=t.binding,i=r.rootNode.uuid,n=r.path,a=this._bindingsByRootAndName,o=a[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete o[n],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(t){var e=this._bindings,r=t._cacheIndex,i=this._nActiveBindings++,n=e[i];t._cacheIndex=i,e[i]=t,n._cacheIndex=r,e[r]=n},_takeBackBinding:function(t){var e=this._bindings,r=t._cacheIndex,i=--this._nActiveBindings,n=e[i];t._cacheIndex=i,e[i]=t,n._cacheIndex=r,e[r]=n},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,r=t[e];return void 0===r&&(r=new Sp(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=e,t[e]=r),r},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,r=t.__cacheIndex,i=--this._nActiveControlInterpolants,n=e[i];t.__cacheIndex=i,e[i]=t,n.__cacheIndex=r,e[r]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var r=e||this._root,i=r.uuid,n="string"===typeof t?Op.findByName(r,t):t,a=null!==n?n.uuid:t,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[i];if(void 0!==l)return l;s=o.knownActions[0],null===n&&(n=s._clip)}if(null===n)return null;var u=new Bf(this,n,e);return this._bindAction(u,s),this._addInactiveAction(u,a,i),u},existingAction:function(t,e){var r=e||this._root,i=r.uuid,n="string"===typeof t?Op.findByName(r,t):t,a=n?n.uuid:t,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,r=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var n=0;n!==e;++n)t[n].reset();for(n=0;n!==i;++n)r[n].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,r=this._nActiveActions,i=this.time+=t,n=Math.sign(t),a=this._accuIndex^=1,o=0;o!==r;++o){var s=e[o];s._update(i,t,n,a)}var l=this._bindings,u=this._nActiveBindings;for(o=0;o!==u;++o)l[o].apply(a);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,r=t.uuid,i=this._actionsByClip,n=i[r];if(void 0!==n){for(var a=n.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,e[u]=c,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}},uncacheRoot:function(t){var e=t.uuid,r=this._actionsByClip;for(var i in r){var n=r[i].actionByRoot,a=n[e];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[e];if(void 0!==s)for(var l in s){var u=s[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}},uncacheAction:function(t,e){var r=this.existingAction(t,e);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),Nf.prototype.clone=function(){return new Nf(void 0===this.value.clone?this.value:this.value.clone())},Uf.prototype=Object.assign(Object.create(Zu.prototype),{constructor:Uf,isInstancedInterleavedBuffer:!0,copy:function(t){return Zu.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Vf.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,r){var i=r||[];return Gf(t,this,i,e),i.sort(jf),i},intersectObjects:function(t,e,r){var i=r||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,a=t.length;n<a;n++)Gf(t[n],this,i,e);return i.sort(jf),i}}),Object.assign(Hf.prototype,{set:function(t,e,r){return this.radius=t,this.phi=e,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,r){return this.radius=Math.sqrt(t*t+e*e+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,r),this.phi=Math.acos(yr.clamp(e/this.radius,-1,1))),this}}),Object.assign(Wf.prototype,{set:function(t,e,r){return this.radius=t,this.theta=e,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,r){return this.radius=Math.sqrt(t*t+r*r),this.theta=Math.atan2(t,r),this.y=e,this}});var qf=new _r;function Xf(t,e){this.min=void 0!==t?t:new _r(1/0,1/0),this.max=void 0!==e?e:new _r(-1/0,-1/0)}Object.assign(Xf.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var r=qf.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new _r),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new _r),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new _r),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new _r),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){var e=qf.copy(t).clamp(this.min,this.max);return e.sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var $f=new Tr,Yf=new Tr;function Zf(t,e){this.start=void 0!==t?t:new Tr,this.end=void 0!==e?e:new Tr}function Jf(t){ni.call(this),this.material=t,this.render=function(){}}Object.assign(Zf.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Tr),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Tr),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Tr),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){$f.subVectors(t,this.start),Yf.subVectors(this.end,this.start);var r=Yf.dot(Yf),i=Yf.dot($f),n=i/r;return e&&(n=yr.clamp(n,0,1)),n},closestPointToPoint:function(t,e,r){var i=this.closestPointToPointParameter(t,e);return void 0===r&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),r=new Tr),this.delta(r).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Jf.prototype=Object.create(ni.prototype),Jf.prototype.constructor=Jf,Jf.prototype.isImmediateRenderObject=!0;var Kf=new Tr,Qf=new Tr,tm=new Mr,em=["a","b","c"];function rm(t,e,r,i){this.object=t,this.size=void 0!==e?e:1;var n=void 0!==r?r:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new wn,u=new hn(2*o*3,3);l.setAttribute("position",u),Ic.call(this,l,new wc({color:n,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}rm.prototype=Object.create(Ic.prototype),rm.prototype.constructor=rm,rm.prototype.update=function(){this.object.updateMatrixWorld(!0),tm.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,e=this.geometry.attributes.position,r=this.object.geometry;if(r&&r.isGeometry)for(var i=r.vertices,n=r.faces,a=0,o=0,s=n.length;o<s;o++)for(var l=n[o],u=0,c=l.vertexNormals.length;u<c;u++){var h=i[l[em[u]]],p=l.vertexNormals[u];Kf.copy(h).applyMatrix4(t),Qf.copy(p).applyMatrix3(tm).normalize().multiplyScalar(this.size).add(Kf),e.setXYZ(a,Kf.x,Kf.y,Kf.z),a+=1,e.setXYZ(a,Qf.x,Qf.y,Qf.z),a+=1}else if(r&&r.isBufferGeometry){var d=r.attributes.position,f=r.attributes.normal;for(a=0,u=0,c=d.count;u<c;u++)Kf.set(d.getX(u),d.getY(u),d.getZ(u)).applyMatrix4(t),Qf.set(f.getX(u),f.getY(u),f.getZ(u)),Qf.applyMatrix3(tm).normalize().multiplyScalar(this.size).add(Kf),e.setXYZ(a,Kf.x,Kf.y,Kf.z),a+=1,e.setXYZ(a,Qf.x,Qf.y,Qf.z),a+=1}e.needsUpdate=!0};var im=new Tr;function nm(t,e){ni.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var r=new wn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,a=1,o=32;n<o;n++,a++){var s=n/o*Math.PI*2,l=a/o*Math.PI*2;i.push(Math.cos(s),Math.sin(s),1,Math.cos(l),Math.sin(l),1)}r.setAttribute("position",new hn(i,3));var u=new wc({fog:!1});this.cone=new Ic(r,u),this.add(this.cone),this.update()}nm.prototype=Object.create(ni.prototype),nm.prototype.constructor=nm,nm.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},nm.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),im.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(im),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var am=new Tr,om=new Ur,sm=new Ur;function lm(t){var e=[];t&&t.isBone&&e.push(t);for(var r=0;r<t.children.length;r++)e.push.apply(e,lm(t.children[r]));return e}function um(t){for(var e=lm(t),r=new wn,i=[],n=[],a=new $i(0,0,1),o=new $i(0,1,0),s=0;s<e.length;s++){var l=e[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),n.push(a.r,a.g,a.b),n.push(o.r,o.g,o.b))}r.setAttribute("position",new hn(i,3)),r.setAttribute("color",new hn(n,3));var u=new wc({vertexColors:T,depthTest:!1,depthWrite:!1,transparent:!0});Ic.call(this,r,u),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function cm(t,e,r){this.light=t,this.light.updateMatrixWorld(),this.color=r;var i=new $h(e,4,2),n=new en({wireframe:!0,fog:!1});Un.call(this,i,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function hm(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e;var r=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],i=new wn;i.setAttribute("position",new hn(r,3)),i.computeBoundingSphere();var n=new wc({fog:!1});Cc.call(this,i,n);var a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],o=new wn;o.setAttribute("position",new hn(a,3)),o.computeBoundingSphere(),this.add(new Un(o,new en({side:g,fog:!1}))),this.update()}um.prototype=Object.create(Ic.prototype),um.prototype.constructor=um,um.prototype.updateMatrixWorld=function(t){var e=this.bones,r=this.geometry,i=r.getAttribute("position");sm.getInverse(this.root.matrixWorld);for(var n=0,a=0;n<e.length;n++){var o=e[n];o.parent&&o.parent.isBone&&(om.multiplyMatrices(sm,o.matrixWorld),am.setFromMatrixPosition(om),i.setXYZ(a,am.x,am.y,am.z),om.multiplyMatrices(sm,o.parent.matrixWorld),am.setFromMatrixPosition(om),i.setXYZ(a+1,am.x,am.y,am.z),a+=2)}r.getAttribute("position").needsUpdate=!0,ni.prototype.updateMatrixWorld.call(this,t)},cm.prototype=Object.create(Un.prototype),cm.prototype.constructor=cm,cm.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},cm.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},hm.prototype=Object.create(Cc.prototype),hm.prototype.constructor=hm,hm.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},hm.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var pm=new Tr,dm=new $i,fm=new $i;function mm(t,e,r){ni.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var i=new Kc(e);i.rotateY(.5*Math.PI),this.material=new en({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=T);var n=i.getAttribute("position"),a=new Float32Array(3*n.count);i.setAttribute("color",new rn(a,3)),this.add(new Un(i,this.material)),this.update()}function vm(t,e){this.lightProbe=t,this.size=e;var r={GAMMA_OUTPUT:""},i=new ea({defines:r,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),n=new $h(1,32,16);Un.call(this,n,i),this.onBeforeRender()}function gm(t,e,r,i){t=t||10,e=e||10,r=new $i(void 0!==r?r:4473924),i=new $i(void 0!==i?i:8947848);for(var n=e/2,a=t/e,o=t/2,s=[],l=[],u=0,c=0,h=-o;u<=e;u++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var p=u===n?r:i;p.toArray(l,c),c+=3,p.toArray(l,c),c+=3,p.toArray(l,c),c+=3,p.toArray(l,c),c+=3}var d=new wn;d.setAttribute("position",new hn(s,3)),d.setAttribute("color",new hn(l,3));var f=new wc({vertexColors:T});Ic.call(this,d,f)}function ym(t,e,r,i,n,a){t=t||10,e=e||16,r=r||8,i=i||64,n=new $i(void 0!==n?n:4473924),a=new $i(void 0!==a?a:8947848);var o,s,l,u,c,h,p,d=[],f=[];for(u=0;u<=e;u++)l=u/e*(2*Math.PI),o=Math.sin(l)*t,s=Math.cos(l)*t,d.push(0,0,0),d.push(o,0,s),p=1&u?n:a,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(u=0;u<=r;u++)for(p=1&u?n:a,h=t-t/r*u,c=0;c<i;c++)l=c/i*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,d.push(o,0,s),f.push(p.r,p.g,p.b),l=(c+1)/i*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,d.push(o,0,s),f.push(p.r,p.g,p.b);var m=new wn;m.setAttribute("position",new hn(d,3)),m.setAttribute("color",new hn(f,3));var v=new wc({vertexColors:T});Ic.call(this,m,v)}function _m(t,e,r,i){this.audio=t,this.range=e||1,this.divisionsInnerAngle=r||16,this.divisionsOuterAngle=i||2;var n=new wn,a=this.divisionsInnerAngle+2*this.divisionsOuterAngle,o=new Float32Array(3*(3*a+3));n.setAttribute("position",new rn(o,3));var s=new wc({color:65280}),l=new wc({color:16776960});Cc.call(this,n,[l,s]),this.update()}mm.prototype=Object.create(ni.prototype),mm.prototype.constructor=mm,mm.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},mm.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");dm.copy(this.light.color),fm.copy(this.light.groundColor);for(var r=0,i=e.count;r<i;r++){var n=r<i/2?dm:fm;e.setXYZ(r,n.r,n.g,n.b)}e.needsUpdate=!0}t.lookAt(pm.setFromMatrixPosition(this.light.matrixWorld).negate())},vm.prototype=Object.create(Un.prototype),vm.prototype.constructor=vm,vm.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},vm.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},gm.prototype=Object.assign(Object.create(Ic.prototype),{constructor:gm,copy:function(t){return Ic.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),ym.prototype=Object.create(Ic.prototype),ym.prototype.constructor=ym,_m.prototype=Object.create(Cc.prototype),_m.prototype.constructor=_m,_m.prototype.update=function(){var t,e,r=this.audio,i=this.range,n=this.divisionsInnerAngle,a=this.divisionsOuterAngle,o=yr.degToRad(r.panner.coneInnerAngle),s=yr.degToRad(r.panner.coneOuterAngle),l=o/2,u=s/2,c=0,h=0,p=this.geometry,d=p.attributes.position;function f(r,n,a,o){var s=(n-r)/a;for(d.setXYZ(c,0,0,0),h++,t=r;t<n;t+=s)e=c+h,d.setXYZ(e,Math.sin(t)*i,0,Math.cos(t)*i),d.setXYZ(e+1,Math.sin(Math.min(t+s,n))*i,0,Math.cos(Math.min(t+s,n))*i),d.setXYZ(e+2,0,0,0),h+=3;p.addGroup(c,h,o),c+=h,h=0}p.clearGroups(),f(-u,-l,a,0),f(-l,l,n,1),f(l,u,a,0),d.needsUpdate=!0,o===s&&(this.material[0].visible=!1)},_m.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var xm=new Tr,bm=new Tr,wm=new Mr;function Tm(t,e,r,i){this.object=t,this.size=void 0!==e?e:1;var n=void 0!==r?r:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new wn,u=new hn(2*o*3,3);l.setAttribute("position",u),Ic.call(this,l,new wc({color:n,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}Tm.prototype=Object.create(Ic.prototype),Tm.prototype.constructor=Tm,Tm.prototype.update=function(){this.object.updateMatrixWorld(!0),wm.getNormalMatrix(this.object.matrixWorld);for(var t=this.object.matrixWorld,e=this.geometry.attributes.position,r=this.object.geometry,i=r.vertices,n=r.faces,a=0,o=0,s=n.length;o<s;o++){var l=n[o],u=l.normal;xm.copy(i[l.a]).add(i[l.b]).add(i[l.c]).divideScalar(3).applyMatrix4(t),bm.copy(u).applyMatrix3(wm).normalize().multiplyScalar(this.size).add(xm),e.setXYZ(a,xm.x,xm.y,xm.z),a+=1,e.setXYZ(a,bm.x,bm.y,bm.z),a+=1}e.needsUpdate=!0};var Sm=new Tr,Em=new Tr,Mm=new Tr;function Am(t,e,r){ni.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===e&&(e=1);var i=new wn;i.setAttribute("position",new hn([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var n=new wc({fog:!1});this.lightPlane=new Cc(i,n),this.add(this.lightPlane),i=new wn,i.setAttribute("position",new hn([0,0,0,0,0,1],3)),this.targetLine=new Cc(i,n),this.add(this.targetLine),this.update()}Am.prototype=Object.create(ni.prototype),Am.prototype.constructor=Am,Am.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Am.prototype.update=function(){Sm.setFromMatrixPosition(this.light.matrixWorld),Em.setFromMatrixPosition(this.light.target.matrixWorld),Mm.subVectors(Em,Sm),this.lightPlane.lookAt(Em),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Em),this.targetLine.scale.z=Mm.length()};var Cm=new Tr,Pm=new ra;function Lm(t){var e=new wn,r=new wc({color:16777215,vertexColors:w}),i=[],n=[],a={},o=new $i(16755200),s=new $i(16711680),l=new $i(43775),u=new $i(16777215),c=new $i(3355443);function h(t,e,r){p(t,r),p(e,r)}function p(t,e){i.push(0,0,0),n.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(i.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),e.setAttribute("position",new hn(i,3)),e.setAttribute("color",new hn(n,3)),Ic.call(this,e,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Im(t,e,r,i,n,a,o){Cm.set(n,a,o).unproject(i);var s=e[t];if(void 0!==s)for(var l=r.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],Cm.x,Cm.y,Cm.z)}Lm.prototype=Object.create(Ic.prototype),Lm.prototype.constructor=Lm,Lm.prototype.update=function(){var t=this.geometry,e=this.pointMap,r=1,i=1;Pm.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Im("c",e,t,Pm,0,0,-1),Im("t",e,t,Pm,0,0,1),Im("n1",e,t,Pm,-r,-i,-1),Im("n2",e,t,Pm,r,-i,-1),Im("n3",e,t,Pm,-r,i,-1),Im("n4",e,t,Pm,r,i,-1),Im("f1",e,t,Pm,-r,-i,1),Im("f2",e,t,Pm,r,-i,1),Im("f3",e,t,Pm,-r,i,1),Im("f4",e,t,Pm,r,i,1),Im("u1",e,t,Pm,.7*r,1.1*i,-1),Im("u2",e,t,Pm,.7*-r,1.1*i,-1),Im("u3",e,t,Pm,0,2*i,-1),Im("cf1",e,t,Pm,-r,0,1),Im("cf2",e,t,Pm,r,0,1),Im("cf3",e,t,Pm,0,-i,1),Im("cf4",e,t,Pm,0,i,1),Im("cn1",e,t,Pm,-r,0,-1),Im("cn2",e,t,Pm,r,0,-1),Im("cn3",e,t,Pm,0,-i,-1),Im("cn4",e,t,Pm,0,i,-1),t.getAttribute("position").needsUpdate=!0};var km=new yi;function Rm(t,e){this.object=t,void 0===e&&(e=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),n=new wn;n.setIndex(new rn(r,1)),n.setAttribute("position",new rn(i,3)),Ic.call(this,n,new wc({color:e})),this.matrixAutoUpdate=!1,this.update()}function Om(t,e){this.type="Box3Helper",this.box=t,e=e||16776960;var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new wn;n.setIndex(new rn(r,1)),n.setAttribute("position",new hn(i,3)),Ic.call(this,n,new wc({color:e})),this.geometry.computeBoundingSphere()}function zm(t,e,r){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var i=void 0!==r?r:16776960,n=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],a=new wn;a.setAttribute("position",new hn(n,3)),a.computeBoundingSphere(),Cc.call(this,a,new wc({color:i}));var o=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new wn;s.setAttribute("position",new hn(o,3)),s.computeBoundingSphere(),this.add(new Un(s,new en({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}Rm.prototype=Object.create(Ic.prototype),Rm.prototype.constructor=Rm,Rm.prototype.update=function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&km.setFromObject(this.object),!km.isEmpty()){var e=km.min,r=km.max,i=this.geometry.attributes.position,n=i.array;n[0]=r.x,n[1]=r.y,n[2]=r.z,n[3]=e.x,n[4]=r.y,n[5]=r.z,n[6]=e.x,n[7]=e.y,n[8]=r.z,n[9]=r.x,n[10]=e.y,n[11]=r.z,n[12]=r.x,n[13]=r.y,n[14]=e.z,n[15]=e.x,n[16]=r.y,n[17]=e.z,n[18]=e.x,n[19]=e.y,n[20]=e.z,n[21]=r.x,n[22]=e.y,n[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Rm.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Rm.prototype.copy=function(t){return Ic.prototype.copy.call(this,t),this.object=t.object,this},Rm.prototype.clone=function(){return(new this.constructor).copy(this)},Om.prototype=Object.create(Ic.prototype),Om.prototype.constructor=Om,Om.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),ni.prototype.updateMatrixWorld.call(this,t))},zm.prototype=Object.create(Cc.prototype),zm.prototype.constructor=zm,zm.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?g:v,this.lookAt(this.plane.normal),ni.prototype.updateMatrixWorld.call(this,t)};var Dm,Bm,Fm=new Tr;function Nm(t,e,r,i,n,a){ni.call(this),void 0===t&&(t=new Tr(0,0,1)),void 0===e&&(e=new Tr(0,0,0)),void 0===r&&(r=1),void 0===i&&(i=16776960),void 0===n&&(n=.2*r),void 0===a&&(a=.2*n),void 0===Dm&&(Dm=new wn,Dm.setAttribute("position",new hn([0,0,0,0,1,0],3)),Bm=new np(0,.5,1,5,1),Bm.translate(0,-.5,0)),this.position.copy(e),this.line=new Cc(Dm,new wc({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Un(Bm,new en({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(r,n,a)}function Um(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new wn;i.setAttribute("position",new hn(e,3)),i.setAttribute("color",new hn(r,3));var n=new wc({vertexColors:T});Ic.call(this,i,n)}function Vm(t,e,r,i,n,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Ki(t,e,r,n,a,o)}Nm.prototype=Object.create(ni.prototype),Nm.prototype.constructor=Nm,Nm.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Fm.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Fm,e)}},Nm.prototype.setLength=function(t,e,r){void 0===e&&(e=.2*t),void 0===r&&(r=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(r,e,r),this.cone.position.y=t,this.cone.updateMatrix()},Nm.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},Nm.prototype.copy=function(t){return ni.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},Nm.prototype.clone=function(){return(new this.constructor).copy(this)},Um.prototype=Object.create(Ic.prototype),Um.prototype.constructor=Um;var jm=0,Gm=1;function Hm(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Wm(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function qm(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Fc(t,e)}function Xm(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new hc(t)}function $m(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Fc(t,e)}function Ym(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Rc(t)}function Zm(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Rc(t)}function Jm(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Rc(t)}function Km(t,e,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Tr(t,e,r)}function Qm(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new rn(t,e).setDynamic(!0)}function tv(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new nn(t,e)}function ev(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new an(t,e)}function rv(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new on(t,e)}function iv(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new sn(t,e)}function nv(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ln(t,e)}function av(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new un(t,e)}function ov(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new cn(t,e)}function sv(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new hn(t,e)}function lv(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new pn(t,e)}function uv(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),id.call(this,t),this.type="catmullrom",this.closed=!0}function cv(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),id.call(this,t),this.type="catmullrom"}function hv(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),id.call(this,t),this.type="catmullrom"}function pv(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Um(t)}function dv(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Rm(t,e)}function fv(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ic(new rp(t.geometry),new wc({color:void 0!==e?e:16777215}))}function mv(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ic(new Hc(t.geometry),new wc({color:void 0!==e?e:16777215}))}function vv(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new jp(t)}function gv(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Wp(t)}Yp.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Yp.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(wd.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Xn,r=0,i=t.length;r<i;r++){var n=t[r];e.vertices.push(new Tr(n.x,n.y,n.z||0))}return e}}),Object.assign(Td.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),uv.prototype=Object.create(id.prototype),cv.prototype=Object.create(id.prototype),hv.prototype=Object.create(id.prototype),Object.assign(hv.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),gm.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},um.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Up.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Fd.extractUrlBase(t)}}),Up.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Gd.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(Xf.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(yi.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Zf.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(yr,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),yr.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),yr.ceilPowerOfTwo(t)}}),Object.assign(Mr.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ur.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Tr).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,r,i,n,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,r,n,a)}}),Ri.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},xr.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(Pi.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Hi.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Hi,{barycoordFromPoint:function(t,e,r,i,n){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Hi.getBarycoord(t,e,r,i,n)},normal:function(t,e,r,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Hi.getNormal(t,e,r,i)}}),Object.assign(Sd.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Vh(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Qh(this,t)}}),Object.assign(_r.prototype,{fromAttribute:function(t,e,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Tr.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Lr.prototype,{fromAttribute:function(t,e,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Xn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(ni.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(ni.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(mc.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(_c.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),vc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Yp.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),ia.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Ed.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(rn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===sr},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(sr)}}}),Object.assign(rn.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?sr:or),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(wn.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new rn(arguments[1],arguments[2])))},addDrawCall:function(t,e,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)}}),Object.defineProperties(wn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Zu.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===sr},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(Zu.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?sr:or),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(jh.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Nf.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(tn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new $i}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===_}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(fp.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(ea.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Xu.prototype,{clearTarget:function(t,e,r,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,r,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Xu.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(Ru.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(sa.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Ir.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Wu.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Object.defineProperties(vf.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this,r=new ef;return r.load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),wf.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},oa.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var yv={merge:function(t,e,r){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,r)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function _v(){console.error("THREE.CanvasRenderer has been removed")}function xv(){console.error("THREE.JSONLoader has been removed.")}Ar.crossOrigin=void 0,Ar.loadTexture=function(t,e,r,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var n=new $p;n.setCrossOrigin(this.crossOrigin);var a=n.load(t,r,void 0,i);return e&&(a.mapping=e),a},Ar.loadTextureCube=function(t,e,r,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var n=new Xp;n.setCrossOrigin(this.crossOrigin);var a=n.load(t,r,void 0,i);return e&&(a.mapping=e),a},Ar.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ar.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var bv={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function wv(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}}))},"5b4e":function(t,e,r){var i=r("36c3"),n=r("b447"),a=r("0fc9");t.exports=function(t){return function(e,r,o){var s,l=i(e),u=n(l.length),c=a(o,u);if(t&&r!=r){while(u>c)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===r)return t||c||0;return!t&&-1}}},"5ca1":function(t,e,r){var i=r("7726"),n=r("8378"),a=r("32e9"),o=r("2aba"),s=r("9b43"),l="prototype",u=function(t,e,r){var c,h,p,d,f=t&u.F,m=t&u.G,v=t&u.S,g=t&u.P,y=t&u.B,_=m?i:v?i[e]||(i[e]={}):(i[e]||{})[l],x=m?n:n[e]||(n[e]={}),b=x[l]||(x[l]={});for(c in m&&(r=e),r)h=!f&&_&&void 0!==_[c],p=(h?_:r)[c],d=y&&h?s(p,i):g&&"function"==typeof p?s(Function.call,p):p,_&&o(_,c,p,t&u.U),x[c]!=p&&a(x,c,d),g&&b[c]!=p&&(b[c]=p)};i.core=n,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},"5cc5":function(t,e,r){var i=r("2b4c")("iterator"),n=!1;try{var a=[7][i]();a["return"]=function(){n=!0},Array.from(a,(function(){throw 2}))}catch(o){}t.exports=function(t,e){if(!e&&!n)return!1;var r=!1;try{var a=[7],s=a[i]();s.next=function(){return{done:r=!0}},a[i]=function(){return s},t(a)}catch(o){}return r}},"5dbc":function(t,e,r){var i=r("d3f4"),n=r("8b97").set;t.exports=function(t,e,r){var a,o=e.constructor;return o!==r&&"function"==typeof o&&(a=o.prototype)!==r.prototype&&i(a)&&n&&n(t,a),t}},"5df3":function(t,e,r){"use strict";var i=r("02f4")(!0);r("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=i(e,r),this._i+=t.length,{value:t,done:!1})}))},"5eda":function(t,e,r){var i=r("5ca1"),n=r("8378"),a=r("79e5");t.exports=function(t,e){var r=(n.Object||{})[t]||Object[t],o={};o[t]=e(r),i(i.S+i.F*a((function(){r(1)})),"Object",o)}},"5f1b":function(t,e,r){"use strict";var i=r("23c6"),n=RegExp.prototype.exec;t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var a=r.call(t,e);if("object"!==typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"613b":function(t,e,r){var i=r("5537")("keys"),n=r("ca5a");t.exports=function(t){return i[t]||(i[t]=n(t))}},"626a":function(t,e,r){var i=r("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},"62a0":function(t,e){var r=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+i).toString(36))}},"63b6":function(t,e,r){var i=r("e53d"),n=r("584a"),a=r("d864"),o=r("35e8"),s=r("07e3"),l="prototype",u=function(t,e,r){var c,h,p,d=t&u.F,f=t&u.G,m=t&u.S,v=t&u.P,g=t&u.B,y=t&u.W,_=f?n:n[e]||(n[e]={}),x=_[l],b=f?i:m?i[e]:(i[e]||{})[l];for(c in f&&(r=e),r)h=!d&&b&&void 0!==b[c],h&&s(_,c)||(p=h?b[c]:r[c],_[c]=f&&"function"!=typeof b[c]?r[c]:g&&h?a(p,i):y&&b[c]==p?function(t){var e=function(e,r,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,i)}return t.apply(this,arguments)};return e[l]=t[l],e}(p):v&&"function"==typeof p?a(Function.call,p):p,v&&((_.virtual||(_.virtual={}))[c]=p,t&u.R&&x&&!x[c]&&o(x,c,p)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},"673e":function(t,e,r){"use strict";r("386b")("sub",(function(t){return function(){return t(this,"sub","","")}}))},6762:function(t,e,r){"use strict";var i=r("5ca1"),n=r("c366")(!0);i(i.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")("includes")},6821:function(t,e,r){var i=r("626a"),n=r("be13");t.exports=function(t){return i(n(t))}},"69a8":function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},"6a99":function(t,e,r){var i=r("d3f4");t.exports=function(t,e){if(!i(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!i(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},"6b4c":function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},"6b54":function(t,e,r){"use strict";r("3846");var i=r("cb7c"),n=r("0bfb"),a=r("9e1e"),o="toString",s=/./[o],l=function(t){r("2aba")(RegExp.prototype,o,t,!0)};r("79e5")((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?l((function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?n.call(t):void 0)})):s.name!=o&&l((function(){return s.call(this)}))},"6c1c":function(t,e,r){r("c367");for(var i=r("e53d"),n=r("35e8"),a=r("481b"),o=r("5168")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=i[u],h=c&&c.prototype;h&&!h[o]&&n(h,o,u),a[u]=a.Array}},"71c1":function(t,e,r){var i=r("3a38"),n=r("25eb");t.exports=function(t){return function(e,r){var a,o,s=String(n(e)),l=i(r),u=s.length;return l<0||l>=u?t?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?t?s.charAt(l):a:t?s.slice(l,l+2):o-56320+(a-55296<<10)+65536)}}},7212:function(t,e,r){!function(e,i){t.exports=i(r("d090"))}(0,(function(t){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=4)}([function(e,r){e.exports=t},function(t,e){t.exports=function(t,e,r,i,n,a){var o,s=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(o=t,s=t.default);var u,c="function"==typeof s?s.options:s;if(e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),r&&(c.functional=!0),n&&(c._scopeId=n),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=i),u){var h=c.functional,p=h?c.render:c.beforeCreate;h?(c._injectStyles=u,c.render=function(t,e){return u.call(e),p(t,e)}):c.beforeCreate=p?[].concat(p,u):[u]}return{esModule:o,exports:s,options:c}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5),n=r.n(i),a=r(8),o=r(1),s=o(n.a,a.a,!1,null,null,null);e.default=s.exports},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6),n=r.n(i),a=r(7),o=r(1),s=o(n.a,a.a,!1,null,null,null);e.default=s.exports},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.install=e.swiperSlide=e.swiper=e.Swiper=void 0;var n=r(0),a=i(n),o=r(2),s=i(o),l=r(3),u=i(l),c=window.Swiper||a.default,h=u.default,p=s.default,d=function(t,e){e&&(u.default.props.globalOptions.default=function(){return e}),t.component(u.default.name,u.default),t.component(s.default.name,s.default)},f={Swiper:c,swiper:h,swiperSlide:p,install:d};e.default=f,e.Swiper=c,e.swiper=h,e.swiperSlide=p,e.install=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"swiper-slide",data:function(){return{slideClass:"swiper-slide"}},ready:function(){this.update()},mounted:function(){this.update(),this.$parent&&this.$parent.options&&this.$parent.options.slideClass&&(this.slideClass=this.$parent.options.slideClass)},updated:function(){this.update()},attached:function(){this.update()},methods:{update:function(){this.$parent&&this.$parent.swiper&&this.$parent.update()}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=function(t){return t&&t.__esModule?t:{default:t}}(i),a=window.Swiper||n.default;"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},writable:!0,configurable:!0});var o=["beforeDestroy","slideChange","slideChangeTransitionStart","slideChangeTransitionEnd","slideNextTransitionStart","slideNextTransitionEnd","slidePrevTransitionStart","slidePrevTransitionEnd","transitionStart","transitionEnd","touchStart","touchMove","touchMoveOpposite","sliderMove","touchEnd","click","tap","doubleTap","imagesReady","progress","reachBeginning","reachEnd","fromEdge","setTranslate","setTransition","resize"];e.default={name:"swiper",props:{options:{type:Object,default:function(){return{}}},globalOptions:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{swiper:null,classes:{wrapperClass:"swiper-wrapper"}}},ready:function(){this.swiper||this.mountInstance()},mounted:function(){if(!this.swiper){var t=!1;for(var e in this.classes)this.classes.hasOwnProperty(e)&&this.options[e]&&(t=!0,this.classes[e]=this.options[e]);t?this.$nextTick(this.mountInstance):this.mountInstance()}},activated:function(){this.update()},updated:function(){this.update()},beforeDestroy:function(){this.$nextTick((function(){this.swiper&&(this.swiper.destroy&&this.swiper.destroy(),delete this.swiper)}))},methods:{update:function(){this.swiper&&(this.swiper.update&&this.swiper.update(),this.swiper.navigation&&this.swiper.navigation.update(),this.swiper.pagination&&this.swiper.pagination.render(),this.swiper.pagination&&this.swiper.pagination.update())},mountInstance:function(){var t=Object.assign({},this.globalOptions,this.options);this.swiper=new a(this.$el,t),this.bindEvents(),this.$emit("ready",this.swiper)},bindEvents:function(){var t=this,e=this;o.forEach((function(r){t.swiper.on(r,(function(){e.$emit.apply(e,[r].concat(Array.prototype.slice.call(arguments))),e.$emit.apply(e,[r.replace(/([A-Z])/g,"-$1").toLowerCase()].concat(Array.prototype.slice.call(arguments)))}))}))}}}},function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"swiper-container"},[t._t("parallax-bg"),t._v(" "),r("div",{class:t.classes.wrapperClass},[t._t("default")],2),t._v(" "),t._t("pagination"),t._v(" "),t._t("button-prev"),t._v(" "),t._t("button-next"),t._v(" "),t._t("scrollbar")],2)},n=[],a={render:i,staticRenderFns:n};e.a=a},function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.slideClass},[t._t("default")],2)},n=[],a={render:i,staticRenderFns:n};e.a=a}])}))},7333:function(t,e,r){"use strict";var i=r("9e1e"),n=r("0d58"),a=r("2621"),o=r("52a7"),s=r("4bf8"),l=r("626a"),u=Object.assign;t.exports=!u||r("79e5")((function(){var t={},e={},r=Symbol(),i="abcdefghijklmnopqrst";return t[r]=7,i.split("").forEach((function(t){e[t]=t})),7!=u({},t)[r]||Object.keys(u({},e)).join("")!=i}))?function(t,e){var r=s(t),u=arguments.length,c=1,h=a.f,p=o.f;while(u>c){var d,f=l(arguments[c++]),m=h?n(f).concat(h(f)):n(f),v=m.length,g=0;while(v>g)d=m[g++],i&&!p.call(f,d)||(r[d]=f[d])}return r}:u},"75fc":function(t,e,r){"use strict";var i=r("a745"),n=r.n(i);function a(t){if(n()(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var o=r("774e"),s=r.n(o),l=r("c8bb"),u=r.n(l);function c(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return s()(t)}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return a(t)||c(t)||h()}r.d(e,"a",(function(){return p}))},7726:function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},"774e":function(t,e,r){t.exports=r("d2d5")},"77f1":function(t,e,r){var i=r("4588"),n=Math.max,a=Math.min;t.exports=function(t,e){return t=i(t),t<0?n(t+e,0):a(t,e)}},"782d":function(t,e,r){(function(){var t;t=null!==e?e:this,t.Lethargy=function(){function t(t,e,r,i){this.stability=null!=t?Math.abs(t):8,this.sensitivity=null!=e?1+Math.abs(e):100,this.tolerance=null!=r?1+Math.abs(r):1.1,this.delay=null!=i?i:150,this.lastUpDeltas=function(){var t,e,r;for(r=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)r.push(null);return r}.call(this),this.lastDownDeltas=function(){var t,e,r;for(r=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)r.push(null);return r}.call(this),this.deltasTimestamp=function(){var t,e,r;for(r=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)r.push(null);return r}.call(this)}return t.prototype.check=function(t){var e;return t=t.originalEvent||t,null!=t.wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=-40*t.deltaY:null==t.detail&&0!==t.detail||(e=-40*t.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),e>0?(this.lastUpDeltas.push(e),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(e),this.lastDownDeltas.shift(),this.isInertia(-1))},t.prototype.isInertia=function(t){var e,r,i,n,a,o,s;return e=-1===t?this.lastDownDeltas:this.lastUpDeltas,null===e[0]?t:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&e[0]===e[2*this.stability-1])&&(i=e.slice(0,this.stability),r=e.slice(this.stability,2*this.stability),s=i.reduce((function(t,e){return t+e})),a=r.reduce((function(t,e){return t+e})),o=s/i.length,n=a/r.length,Math.abs(o)<Math.abs(n*this.tolerance)&&this.sensitivity<Math.abs(n)&&t)},t.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},t.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},t}()}).call(this)},"794b":function(t,e,r){t.exports=!r("8e60")&&!r("294c")((function(){return 7!=Object.defineProperty(r("1ec9")("div"),"a",{get:function(){return 7}}).a}))},"79aa":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7a32":function(t,e,r){"use strict";var i=r("320c"),n=r("c0e2"),a=r("782d").Lethargy,o=r("2ea2"),s=(r("9cf7"),r("bf54")),l="virtualscroll";t.exports=c;var u={LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32};function c(t){s(this,"_onWheel","_onMouseWheel","_onTouchStart","_onTouchMove","_onKeyDown"),this.el=window,t&&t.el&&(this.el=t.el,delete t.el),this.options=i({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",limitInertia:!1,useKeyboard:!0,useTouch:!0},t),this.options.limitInertia&&(this._lethargy=new a),this._emitter=new n,this._event={y:0,x:0,deltaX:0,deltaY:0},this.touchStartX=null,this.touchStartY=null,this.bodyTouchAction=null,void 0!==this.options.passive&&(this.listenerOptions={passive:this.options.passive})}c.prototype._notify=function(t){var e=this._event;e.x+=e.deltaX,e.y+=e.deltaY,this._emitter.emit(l,{x:e.x,y:e.y,deltaX:e.deltaX,deltaY:e.deltaY,originalEvent:t})},c.prototype._onWheel=function(t){var e=this.options;if(!this._lethargy||!1!==this._lethargy.check(t)){var r=this._event;r.deltaX=t.wheelDeltaX||-1*t.deltaX,r.deltaY=t.wheelDeltaY||-1*t.deltaY,o.isFirefox&&1==t.deltaMode&&(r.deltaX*=e.firefoxMultiplier,r.deltaY*=e.firefoxMultiplier),r.deltaX*=e.mouseMultiplier,r.deltaY*=e.mouseMultiplier,this._notify(t)}},c.prototype._onMouseWheel=function(t){if(!this.options.limitInertia||!1!==this._lethargy.check(t)){var e=this._event;e.deltaX=t.wheelDeltaX?t.wheelDeltaX:0,e.deltaY=t.wheelDeltaY?t.wheelDeltaY:t.wheelDelta,this._notify(t)}},c.prototype._onTouchStart=function(t){var e=t.targetTouches?t.targetTouches[0]:t;this.touchStartX=e.pageX,this.touchStartY=e.pageY},c.prototype._onTouchMove=function(t){var e=this.options;e.preventTouch&&!t.target.classList.contains(e.unpreventTouchClass)&&t.preventDefault();var r=this._event,i=t.targetTouches?t.targetTouches[0]:t;r.deltaX=(i.pageX-this.touchStartX)*e.touchMultiplier,r.deltaY=(i.pageY-this.touchStartY)*e.touchMultiplier,this.touchStartX=i.pageX,this.touchStartY=i.pageY,this._notify(t)},c.prototype._onKeyDown=function(t){var e=this._event;e.deltaX=e.deltaY=0;var r=window.innerHeight-40;switch(t.keyCode){case u.LEFT:case u.UP:e.deltaY=this.options.keyStep;break;case u.RIGHT:case u.DOWN:e.deltaY=-this.options.keyStep;break;case u.SPACE&&t.shiftKey:e.deltaY=r;break;case u.SPACE:e.deltaY=-r;break;default:return}this._notify(t)},c.prototype._bind=function(){o.hasWheelEvent&&this.el.addEventListener("wheel",this._onWheel,this.listenerOptions),o.hasMouseWheelEvent&&this.el.addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),o.hasTouch&&this.options.useTouch&&(this.el.addEventListener("touchstart",this._onTouchStart,this.listenerOptions),this.el.addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),o.hasPointer&&o.hasTouchWin&&(this.bodyTouchAction=document.body.style.msTouchAction,document.body.style.msTouchAction="none",this.el.addEventListener("MSPointerDown",this._onTouchStart,!0),this.el.addEventListener("MSPointerMove",this._onTouchMove,!0)),o.hasKeyDown&&this.options.useKeyboard&&document.addEventListener("keydown",this._onKeyDown)},c.prototype._unbind=function(){o.hasWheelEvent&&this.el.removeEventListener("wheel",this._onWheel),o.hasMouseWheelEvent&&this.el.removeEventListener("mousewheel",this._onMouseWheel),o.hasTouch&&(this.el.removeEventListener("touchstart",this._onTouchStart),this.el.removeEventListener("touchmove",this._onTouchMove)),o.hasPointer&&o.hasTouchWin&&(document.body.style.msTouchAction=this.bodyTouchAction,this.el.removeEventListener("MSPointerDown",this._onTouchStart,!0),this.el.removeEventListener("MSPointerMove",this._onTouchMove,!0)),o.hasKeyDown&&this.options.useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)},c.prototype.on=function(t,e){this._emitter.on(l,t,e);var r=this._emitter.e;r&&r[l]&&1===r[l].length&&this._bind()},c.prototype.off=function(t,e){this._emitter.off(l,t,e);var r=this._emitter.e;(!r[l]||r[l].length<=0)&&this._unbind()},c.prototype.reset=function(){var t=this._event;t.x=0,t.y=0},c.prototype.destroy=function(){this._emitter.off(),this._unbind()}},"7a56":function(t,e,r){"use strict";var i=r("7726"),n=r("86cc"),a=r("9e1e"),o=r("2b4c")("species");t.exports=function(t){var e=i[t];a&&e&&!e[o]&&n.f(e,o,{configurable:!0,get:function(){return this}})}},"7cd6":function(t,e,r){var i=r("40c3"),n=r("5168")("iterator"),a=r("481b");t.exports=r("584a").getIteratorMethod=function(t){if(void 0!=t)return t[n]||t["@@iterator"]||a[i(t)]}},"7e90":function(t,e,r){var i=r("d9f6"),n=r("e4ae"),a=r("c3a1");t.exports=r("8e60")?Object.defineProperties:function(t,e){n(t);var r,o=a(e),s=o.length,l=0;while(s>l)i.f(t,r=o[l++],e[r]);return t}},"7f20":function(t,e,r){var i=r("86cc").f,n=r("69a8"),a=r("2b4c")("toStringTag");t.exports=function(t,e,r){t&&!n(t=r?t:t.prototype,a)&&i(t,a,{configurable:!0,value:e})}},"7f7f":function(t,e,r){var i=r("86cc").f,n=Function.prototype,a=/^\s*function ([^ (]*)/,o="name";o in n||r("9e1e")&&i(n,o,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},"7f84":function(t,e,r){(function(e,r){t.exports=r()})(window,(function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";r.r(e);var i=[{name:"moveend",check:function(t,e){return e.center&&t.isMoving()}},{name:"zoomend",check:function(t,e){return void 0!==e.zoom&&null!==e.zoom&&t.isZooming()}},{name:"rotateend",check:function(t,e){return void 0!==e.bearing&&null!==e.bearing&&t.isRotating()}},{name:"pitchend",check:function(t,e){return void 0!==e.pitch&&null!==e.bearing&&t.isMoving()}}],n=function(t){return{center:t.getCenter(),zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch()}},a={events:i,getter:n},o={events:[{name:"moveend",check:function(t){return t.isMoving()}}],getter:function(t){return{center:t.getCenter()}}},s={events:[{name:"zoomend",check:function(t){return t.isZooming()}}],getter:function(t){return{zoom:t.getZoom()}}},l={events:[{name:"rotateend",check:function(t){return t.isRotating()}}],getter:function(t){return{bearing:t.getBearing()}}},u={setCenter:o,panBy:o,panTo:o,setZoom:s,zoomTo:s,zoomIn:s,zoomOut:s,setBearing:l,rotateTo:l,resetNorth:l,snapToNorth:l,setPitch:{events:[{name:"pitchend",check:function(t){return!0}}],getter:function(t){return{pitch:t.getPitch()}}},fitBounds:{events:[{name:"zoomend",check:function(t){return t.isZooming()}},{name:"moveend",check:function(t){return t.isMoving()}},{name:"rotateend",check:function(t){return t.isRotating()}}],getter:function(t){return{zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),center:t.getCenter()}}},fitScreenCoordinates:{events:[{name:"zoomend",check:function(t,e){return t.isZooming()}},{name:"moveend",check:function(t,e){return t.isMoving()}},{name:"rotateend",check:function(t,e){return e.bearing&&t.isRotating()}}],getter:function(t){return{zoom:t.getZoom(),center:t.getCenter(),bearing:t.getBearing(),pitch:t.getPitch()}}},jumpTo:a,easeTo:a,flyTo:a};function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},i=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),i.forEach((function(e){p(t,e,r[e])}))}return t}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){return"".concat(t,"-").concat((""+Math.random()).split(".")[1])}function f(t,e,r,i){var n=function n(a){a.type===e&&a.eventId===r&&(t.off(e,n),i(a))};return n}function m(t,e){var r=t[e],i=r.length;return function(){for(var n=[],a={eventId:d(e)},o=u[e].events.map((function(e,r){return{event:e,func:new Promise((function(i,o){n[r]={event:e,func:f(t,e.name,a.eventId,i)},t.on(e.name,n[r].func)}))}})),s=[],l=0;l<i;l++)l===i-1?s.push(h({},a,(l<0||arguments.length<=l?void 0:arguments[l])||{})):s.push((l<0||arguments.length<=l?void 0:arguments[l])||null);var p=[],m=(arguments.length<=0?void 0:arguments[0])||{};try{r.apply(t,s),"fitBounds"===e&&(m={}),"fitScreenCoordinates"===e&&(m={bearing:null},m.bearing=null,"number"===typeof(arguments.length<=2?void 0:arguments[2])&&(m.bearing=arguments.length<=2?void 0:arguments[2]),(arguments.length<=3?void 0:arguments[3])&&"object"===c(arguments.length<=3?void 0:arguments[3])&&(m=h({},m,arguments.length<=3?void 0:arguments[3]))),p=o.map((function(e){var r=e.event,i=e.func;return r.check(t,m)?i:(t.off(r.name,i),Promise.resolve())}))}catch(v){throw n.forEach((function(e){var r=e.event,i=e.func;t.off(r.name,i)})),v}return Promise.all(p).then((function(){return u[e].getter(t)}))}}var v=m,g=function(t){var e=Object.keys(u),r={};return e.forEach((function(i){-1!==e.indexOf(i)&&(r[i]=v(t,i))})),r};function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?v(t,e):g(t)}r.d(e,"default",(function(){return y}))}])["default"]}))},8079:function(t,e,r){var i=r("7726"),n=r("1991").set,a=i.MutationObserver||i.WebKitMutationObserver,o=i.process,s=i.Promise,l="process"==r("2d95")(o);t.exports=function(){var t,e,r,u=function(){var i,n;l&&(i=o.domain)&&i.exit();while(t){n=t.fn,t=t.next;try{n()}catch(a){throw t?r():e=void 0,a}}e=void 0,i&&i.enter()};if(l)r=function(){o.nextTick(u)};else if(!a||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);r=function(){c.then(u)}}else r=function(){n.call(i,u)};else{var h=!0,p=document.createTextNode("");new a(u).observe(p,{characterData:!0}),r=function(){p.data=h=!h}}return function(i){var n={fn:i,next:void 0};e&&(e.next=n),t||(t=n,r()),e=n}}},8378:function(t,e){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},8436:function(t,e){t.exports=function(){}},8460:function(t,e,r){"use strict";var i=r("ce52"),n=r.n(i);n.a},"84f2":function(t,e){t.exports={}},"85f2":function(t,e,r){t.exports=r("454f")},8615:function(t,e,r){var i=r("5ca1"),n=r("504c")(!1);i(i.S,"Object",{values:function(t){return n(t)}})},"86cc":function(t,e,r){var i=r("cb7c"),n=r("c69a"),a=r("6a99"),o=Object.defineProperty;e.f=r("9e1e")?Object.defineProperty:function(t,e,r){if(i(t),e=a(e,!0),i(r),n)try{return o(t,e,r)}catch(s){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},"8b97":function(t,e,r){var i=r("d3f4"),n=r("cb7c"),a=function(t,e){if(n(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,r){return a(t,r),e?t.__proto__=r:i(t,r),t}}({},!1):void 0),check:a}},"8c4f":function(t,e,r){"use strict";
/*!
  * vue-router v3.1.3
  * (c) 2019 Evan You
  * @license MIT
  */function i(t,e){0}function n(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function a(t,e){return e instanceof t||e&&(e.name===t.name||e._name===t._name)}function o(t,e){for(var r in e)t[r]=e[r];return t}var s={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var r=e.props,i=e.children,n=e.parent,a=e.data;a.routerView=!0;var s=n.$createElement,u=r.name,c=n.$route,h=n._routerViewCache||(n._routerViewCache={}),p=0,d=!1;while(n&&n._routerRoot!==n){var f=n.$vnode&&n.$vnode.data;f&&(f.routerView&&p++,f.keepAlive&&n._inactive&&(d=!0)),n=n.$parent}if(a.routerViewDepth=p,d)return s(h[u],a,i);var m=c.matched[p];if(!m)return h[u]=null,s();var v=h[u]=m.components[u];a.registerRouteInstance=function(t,e){var r=m.instances[u];(e&&r!==t||!e&&r===t)&&(m.instances[u]=e)},(a.hook||(a.hook={})).prepatch=function(t,e){m.instances[u]=e.componentInstance},a.hook.init=function(t){t.data.keepAlive&&t.componentInstance&&t.componentInstance!==m.instances[u]&&(m.instances[u]=t.componentInstance)};var g=a.props=l(c,m.props&&m.props[u]);if(g){g=a.props=o({},g);var y=a.attrs=a.attrs||{};for(var _ in g)v.props&&_ in v.props||(y[_]=g[_],delete g[_])}return s(v,a,i)}};function l(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0;default:0}}var u=/[!'()*]/g,c=function(t){return"%"+t.charCodeAt(0).toString(16)},h=/%2C/g,p=function(t){return encodeURIComponent(t).replace(u,c).replace(h,",")},d=decodeURIComponent;function f(t,e,r){void 0===e&&(e={});var i,n=r||m;try{i=n(t||"")}catch(o){i={}}for(var a in e)i[a]=e[a];return i}function m(t){var e={};return t=t.trim().replace(/^(\?|#|&)/,""),t?(t.split("&").forEach((function(t){var r=t.replace(/\+/g," ").split("="),i=d(r.shift()),n=r.length>0?d(r.join("=")):null;void 0===e[i]?e[i]=n:Array.isArray(e[i])?e[i].push(n):e[i]=[e[i],n]})),e):e}function v(t){var e=t?Object.keys(t).map((function(e){var r=t[e];if(void 0===r)return"";if(null===r)return p(e);if(Array.isArray(r)){var i=[];return r.forEach((function(t){void 0!==t&&(null===t?i.push(p(e)):i.push(p(e)+"="+p(t)))})),i.join("&")}return p(e)+"="+p(r)})).filter((function(t){return t.length>0})).join("&"):null;return e?"?"+e:""}var g=/\/?$/;function y(t,e,r,i){var n=i&&i.options.stringifyQuery,a=e.query||{};try{a=_(a)}catch(s){}var o={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:a,params:e.params||{},fullPath:w(e,n),matched:t?b(t):[]};return r&&(o.redirectedFrom=w(r,n)),Object.freeze(o)}function _(t){if(Array.isArray(t))return t.map(_);if(t&&"object"===typeof t){var e={};for(var r in t)e[r]=_(t[r]);return e}return t}var x=y(null,{path:"/"});function b(t){var e=[];while(t)e.unshift(t),t=t.parent;return e}function w(t,e){var r=t.path,i=t.query;void 0===i&&(i={});var n=t.hash;void 0===n&&(n="");var a=e||v;return(r||"/")+a(i)+n}function T(t,e){return e===x?t===e:!!e&&(t.path&&e.path?t.path.replace(g,"")===e.path.replace(g,"")&&t.hash===e.hash&&S(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&S(t.query,e.query)&&S(t.params,e.params)))}function S(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var r=Object.keys(t),i=Object.keys(e);return r.length===i.length&&r.every((function(r){var i=t[r],n=e[r];return"object"===typeof i&&"object"===typeof n?S(i,n):String(i)===String(n)}))}function E(t,e){return 0===t.path.replace(g,"/").indexOf(e.path.replace(g,"/"))&&(!e.hash||t.hash===e.hash)&&M(t.query,e.query)}function M(t,e){for(var r in e)if(!(r in t))return!1;return!0}function A(t,e,r){var i=t.charAt(0);if("/"===i)return t;if("?"===i||"#"===i)return e+t;var n=e.split("/");r&&n[n.length-1]||n.pop();for(var a=t.replace(/^\//,"").split("/"),o=0;o<a.length;o++){var s=a[o];".."===s?n.pop():"."!==s&&n.push(s)}return""!==n[0]&&n.unshift(""),n.join("/")}function C(t){var e="",r="",i=t.indexOf("#");i>=0&&(e=t.slice(i),t=t.slice(0,i));var n=t.indexOf("?");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{path:t,query:r,hash:e}}function P(t){return t.replace(/\/\//g,"/")}var L=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},I=Z,k=B,R=F,O=V,z=Y,D=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function B(t,e){var r,i=[],n=0,a=0,o="",s=e&&e.delimiter||"/";while(null!=(r=D.exec(t))){var l=r[0],u=r[1],c=r.index;if(o+=t.slice(a,c),a=c+l.length,u)o+=u[1];else{var h=t[a],p=r[2],d=r[3],f=r[4],m=r[5],v=r[6],g=r[7];o&&(i.push(o),o="");var y=null!=p&&null!=h&&h!==p,_="+"===v||"*"===v,x="?"===v||"*"===v,b=r[2]||s,w=f||m;i.push({name:d||n++,prefix:p||"",delimiter:b,optional:x,repeat:_,partial:y,asterisk:!!g,pattern:w?G(w):g?".*":"[^"+j(b)+"]+?"})}}return a<t.length&&(o+=t.substr(a)),o&&i.push(o),i}function F(t,e){return V(B(t,e))}function N(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function U(t){return encodeURI(t).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function V(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"===typeof t[r]&&(e[r]=new RegExp("^(?:"+t[r].pattern+")$"));return function(r,i){for(var n="",a=r||{},o=i||{},s=o.pretty?N:encodeURIComponent,l=0;l<t.length;l++){var u=t[l];if("string"!==typeof u){var c,h=a[u.name];if(null==h){if(u.optional){u.partial&&(n+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(L(h)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<h.length;p++){if(c=s(h[p]),!e[l].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(c)+"`");n+=(0===p?u.prefix:u.delimiter)+c}}else{if(c=u.asterisk?U(h):s(h),!e[l].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+c+'"');n+=u.prefix+c}}else n+=u}return n}}function j(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function G(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function H(t,e){return t.keys=e,t}function W(t){return t.sensitive?"":"i"}function q(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var i=0;i<r.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return H(t,e)}function X(t,e,r){for(var i=[],n=0;n<t.length;n++)i.push(Z(t[n],e,r).source);var a=new RegExp("(?:"+i.join("|")+")",W(r));return H(a,e)}function $(t,e,r){return Y(B(t,r),e,r)}function Y(t,e,r){L(e)||(r=e||r,e=[]),r=r||{};for(var i=r.strict,n=!1!==r.end,a="",o=0;o<t.length;o++){var s=t[o];if("string"===typeof s)a+=j(s);else{var l=j(s.prefix),u="(?:"+s.pattern+")";e.push(s),s.repeat&&(u+="(?:"+l+u+")*"),u=s.optional?s.partial?l+"("+u+")?":"(?:"+l+"("+u+"))?":l+"("+u+")",a+=u}}var c=j(r.delimiter||"/"),h=a.slice(-c.length)===c;return i||(a=(h?a.slice(0,-c.length):a)+"(?:"+c+"(?=$))?"),a+=n?"$":i&&h?"":"(?="+c+"|$)",H(new RegExp("^"+a,W(r)),e)}function Z(t,e,r){return L(e)||(r=e||r,e=[]),r=r||{},t instanceof RegExp?q(t,e):L(t)?X(t,e,r):$(t,e,r)}I.parse=k,I.compile=R,I.tokensToFunction=O,I.tokensToRegExp=z;var J=Object.create(null);function K(t,e,r){e=e||{};try{var i=J[t]||(J[t]=I.compile(t));return e.pathMatch&&(e[0]=e.pathMatch),i(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function Q(t,e,r,i){var n="string"===typeof t?{path:t}:t;if(n._normalized)return n;if(n.name)return o({},t);if(!n.path&&n.params&&e){n=o({},n),n._normalized=!0;var a=o(o({},e.params),n.params);if(e.name)n.name=e.name,n.params=a;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;n.path=K(s,a,"path "+e.path)}else 0;return n}var l=C(n.path||""),u=e&&e.path||"/",c=l.path?A(l.path,u,r||n.append):u,h=f(l.query,n.query,i&&i.options.parseQuery),p=n.hash||l.hash;return p&&"#"!==p.charAt(0)&&(p="#"+p),{_normalized:!0,path:c,query:h,hash:p}}var tt,et=[String,Object],rt=[String,Array],it=function(){},nt={name:"RouterLink",props:{to:{type:et,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:rt,default:"click"}},render:function(t){var e=this,r=this.$router,i=this.$route,n=r.resolve(this.to,i,this.append),a=n.location,s=n.route,l=n.href,u={},c=r.options.linkActiveClass,h=r.options.linkExactActiveClass,p=null==c?"router-link-active":c,d=null==h?"router-link-exact-active":h,f=null==this.activeClass?p:this.activeClass,m=null==this.exactActiveClass?d:this.exactActiveClass,v=s.redirectedFrom?y(null,Q(s.redirectedFrom),null,r):s;u[m]=T(i,v),u[f]=this.exact?u[m]:E(i,v);var g=function(t){at(t)&&(e.replace?r.replace(a,it):r.push(a,it))},_={click:at};Array.isArray(this.event)?this.event.forEach((function(t){_[t]=g})):_[this.event]=g;var x={class:u},b=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:l,route:s,navigate:g,isActive:u[f],isExactActive:u[m]});if(b){if(1===b.length)return b[0];if(b.length>1||!b.length)return 0===b.length?t():t("span",{},b)}if("a"===this.tag)x.on=_,x.attrs={href:l};else{var w=ot(this.$slots.default);if(w){w.isStatic=!1;var S=w.data=o({},w.data);for(var M in S.on=S.on||{},S.on){var A=S.on[M];M in _&&(S.on[M]=Array.isArray(A)?A:[A])}for(var C in _)C in S.on?S.on[C].push(_[C]):S.on[C]=g;var P=w.data.attrs=o({},w.data.attrs);P.href=l}else x.on=_}return t(this.tag,x,this.$slots.default)}};function at(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ot(t){if(t)for(var e,r=0;r<t.length;r++){if(e=t[r],"a"===e.tag)return e;if(e.children&&(e=ot(e.children)))return e}}function st(t){if(!st.installed||tt!==t){st.installed=!0,tt=t;var e=function(t){return void 0!==t},r=function(t,r){var i=t.$options._parentVnode;e(i)&&e(i=i.data)&&e(i=i.registerRouteInstance)&&i(t,r)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",s),t.component("RouterLink",nt);var i=t.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}}var lt="undefined"!==typeof window;function ut(t,e,r,i){var n=e||[],a=r||Object.create(null),o=i||Object.create(null);t.forEach((function(t){ct(n,a,o,t)}));for(var s=0,l=n.length;s<l;s++)"*"===n[s]&&(n.push(n.splice(s,1)[0]),l--,s--);return{pathList:n,pathMap:a,nameMap:o}}function ct(t,e,r,i,n,a){var o=i.path,s=i.name;var l=i.pathToRegexpOptions||{},u=pt(o,n,l.strict);"boolean"===typeof i.caseSensitive&&(l.sensitive=i.caseSensitive);var c={path:u,regex:ht(u,l),components:i.components||{default:i.component},instances:{},name:s,parent:n,matchAs:a,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};if(i.children&&i.children.forEach((function(i){var n=a?P(a+"/"+i.path):void 0;ct(t,e,r,i,c,n)})),e[c.path]||(t.push(c.path),e[c.path]=c),void 0!==i.alias)for(var h=Array.isArray(i.alias)?i.alias:[i.alias],p=0;p<h.length;++p){var d=h[p];0;var f={path:d,children:i.children};ct(t,e,r,f,n,c.path||"/")}s&&(r[s]||(r[s]=c))}function ht(t,e){var r=I(t,[],e);return r}function pt(t,e,r){return r||(t=t.replace(/\/$/,"")),"/"===t[0]?t:null==e?t:P(e.path+"/"+t)}function dt(t,e){var r=ut(t),i=r.pathList,n=r.pathMap,a=r.nameMap;function o(t){ut(t,i,n,a)}function s(t,r,o){var s=Q(t,r,!1,e),l=s.name;if(l){var u=a[l];if(!u)return c(null,s);var h=u.regex.keys.filter((function(t){return!t.optional})).map((function(t){return t.name}));if("object"!==typeof s.params&&(s.params={}),r&&"object"===typeof r.params)for(var p in r.params)!(p in s.params)&&h.indexOf(p)>-1&&(s.params[p]=r.params[p]);return s.path=K(u.path,s.params,'named route "'+l+'"'),c(u,s,o)}if(s.path){s.params={};for(var d=0;d<i.length;d++){var f=i[d],m=n[f];if(ft(m.regex,s.path,s.params))return c(m,s,o)}}return c(null,s)}function l(t,r){var i=t.redirect,n="function"===typeof i?i(y(t,r,null,e)):i;if("string"===typeof n&&(n={path:n}),!n||"object"!==typeof n)return c(null,r);var o=n,l=o.name,u=o.path,h=r.query,p=r.hash,d=r.params;if(h=o.hasOwnProperty("query")?o.query:h,p=o.hasOwnProperty("hash")?o.hash:p,d=o.hasOwnProperty("params")?o.params:d,l){a[l];return s({_normalized:!0,name:l,query:h,hash:p,params:d},void 0,r)}if(u){var f=mt(u,t),m=K(f,d,'redirect route with path "'+f+'"');return s({_normalized:!0,path:m,query:h,hash:p},void 0,r)}return c(null,r)}function u(t,e,r){var i=K(r,e.params,'aliased route with path "'+r+'"'),n=s({_normalized:!0,path:i});if(n){var a=n.matched,o=a[a.length-1];return e.params=n.params,c(o,e)}return c(null,e)}function c(t,r,i){return t&&t.redirect?l(t,i||r):t&&t.matchAs?u(t,r,t.matchAs):y(t,r,i,e)}return{match:s,addRoutes:o}}function ft(t,e,r){var i=e.match(t);if(!i)return!1;if(!r)return!0;for(var n=1,a=i.length;n<a;++n){var o=t.keys[n-1],s="string"===typeof i[n]?decodeURIComponent(i[n]):i[n];o&&(r[o.name||"pathMatch"]=s)}return!0}function mt(t,e){return A(t,e.parent?e.parent.path:"/",!0)}var vt=lt&&window.performance&&window.performance.now?window.performance:Date;function gt(){return vt.now().toFixed(3)}var yt=gt();function _t(){return yt}function xt(t){return yt=t}var bt=Object.create(null);function wt(){var t=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(t,"");window.history.replaceState({key:_t()},"",e),window.addEventListener("popstate",(function(t){St(),t.state&&t.state.key&&xt(t.state.key)}))}function Tt(t,e,r,i){if(t.app){var n=t.options.scrollBehavior;n&&t.app.$nextTick((function(){var a=Et(),o=n.call(t,e,r,i?a:null);o&&("function"===typeof o.then?o.then((function(t){kt(t,a)})).catch((function(t){0})):kt(o,a))}))}}function St(){var t=_t();t&&(bt[t]={x:window.pageXOffset,y:window.pageYOffset})}function Et(){var t=_t();if(t)return bt[t]}function Mt(t,e){var r=document.documentElement,i=r.getBoundingClientRect(),n=t.getBoundingClientRect();return{x:n.left-i.left-e.x,y:n.top-i.top-e.y}}function At(t){return Lt(t.x)||Lt(t.y)}function Ct(t){return{x:Lt(t.x)?t.x:window.pageXOffset,y:Lt(t.y)?t.y:window.pageYOffset}}function Pt(t){return{x:Lt(t.x)?t.x:0,y:Lt(t.y)?t.y:0}}function Lt(t){return"number"===typeof t}var It=/^#\d/;function kt(t,e){var r="object"===typeof t;if(r&&"string"===typeof t.selector){var i=It.test(t.selector)?document.getElementById(t.selector.slice(1)):document.querySelector(t.selector);if(i){var n=t.offset&&"object"===typeof t.offset?t.offset:{};n=Pt(n),e=Mt(i,n)}else At(t)&&(e=Ct(t))}else r&&At(t)&&(e=Ct(t));e&&window.scrollTo(e.x,e.y)}var Rt=lt&&function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}();function Ot(t,e){St();var r=window.history;try{e?r.replaceState({key:_t()},"",t):r.pushState({key:xt(gt())},"",t)}catch(i){window.location[e?"replace":"assign"](t)}}function zt(t){Ot(t,!0)}function Dt(t,e,r){var i=function(n){n>=t.length?r():t[n]?e(t[n],(function(){i(n+1)})):i(n+1)};i(0)}function Bt(t){return function(e,r,i){var a=!1,o=0,s=null;Ft(t,(function(t,e,r,l){if("function"===typeof t&&void 0===t.cid){a=!0,o++;var u,c=jt((function(e){Vt(e)&&(e=e.default),t.resolved="function"===typeof e?e:tt.extend(e),r.components[l]=e,o--,o<=0&&i()})),h=jt((function(t){var e="Failed to resolve async component "+l+": "+t;s||(s=n(t)?t:new Error(e),i(s))}));try{u=t(c,h)}catch(d){h(d)}if(u)if("function"===typeof u.then)u.then(c,h);else{var p=u.component;p&&"function"===typeof p.then&&p.then(c,h)}}})),a||i()}}function Ft(t,e){return Nt(t.map((function(t){return Object.keys(t.components).map((function(r){return e(t.components[r],t.instances[r],t,r)}))})))}function Nt(t){return Array.prototype.concat.apply([],t)}var Ut="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Vt(t){return t.__esModule||Ut&&"Module"===t[Symbol.toStringTag]}function jt(t){var e=!1;return function(){var r=[],i=arguments.length;while(i--)r[i]=arguments[i];if(!e)return e=!0,t.apply(this,r)}}var Gt=function(t){function e(e){t.call(this),this.name=this._name="NavigationDuplicated",this.message='Navigating to current location ("'+e.fullPath+'") is not allowed',Object.defineProperty(this,"stack",{value:(new t).stack,writable:!0,configurable:!0})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);Gt._name="NavigationDuplicated";var Ht=function(t,e){this.router=t,this.base=Wt(e),this.current=x,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function Wt(t){if(!t)if(lt){var e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}function qt(t,e){var r,i=Math.max(t.length,e.length);for(r=0;r<i;r++)if(t[r]!==e[r])break;return{updated:e.slice(0,r),activated:e.slice(r),deactivated:t.slice(r)}}function Xt(t,e,r,i){var n=Ft(t,(function(t,i,n,a){var o=$t(t,e);if(o)return Array.isArray(o)?o.map((function(t){return r(t,i,n,a)})):r(o,i,n,a)}));return Nt(i?n.reverse():n)}function $t(t,e){return"function"!==typeof t&&(t=tt.extend(t)),t.options[e]}function Yt(t){return Xt(t,"beforeRouteLeave",Jt,!0)}function Zt(t){return Xt(t,"beforeRouteUpdate",Jt)}function Jt(t,e){if(e)return function(){return t.apply(e,arguments)}}function Kt(t,e,r){return Xt(t,"beforeRouteEnter",(function(t,i,n,a){return Qt(t,n,a,e,r)}))}function Qt(t,e,r,i,n){return function(a,o,s){return t(a,o,(function(t){"function"===typeof t&&i.push((function(){te(t,e.instances,r,n)})),s(t)}))}}function te(t,e,r,i){e[r]&&!e[r]._isBeingDestroyed?t(e[r]):i()&&setTimeout((function(){te(t,e,r,i)}),16)}Ht.prototype.listen=function(t){this.cb=t},Ht.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},Ht.prototype.onError=function(t){this.errorCbs.push(t)},Ht.prototype.transitionTo=function(t,e,r){var i=this,n=this.router.match(t,this.current);this.confirmTransition(n,(function(){i.updateRoute(n),e&&e(n),i.ensureURL(),i.ready||(i.ready=!0,i.readyCbs.forEach((function(t){t(n)})))}),(function(t){r&&r(t),t&&!i.ready&&(i.ready=!0,i.readyErrorCbs.forEach((function(e){e(t)})))}))},Ht.prototype.confirmTransition=function(t,e,r){var o=this,s=this.current,l=function(t){!a(Gt,t)&&n(t)&&(o.errorCbs.length?o.errorCbs.forEach((function(e){e(t)})):(i(!1,"uncaught error during route navigation:"),console.error(t))),r&&r(t)};if(T(t,s)&&t.matched.length===s.matched.length)return this.ensureURL(),l(new Gt(t));var u=qt(this.current.matched,t.matched),c=u.updated,h=u.deactivated,p=u.activated,d=[].concat(Yt(h),this.router.beforeHooks,Zt(c),p.map((function(t){return t.beforeEnter})),Bt(p));this.pending=t;var f=function(e,r){if(o.pending!==t)return l();try{e(t,s,(function(t){!1===t||n(t)?(o.ensureURL(!0),l(t)):"string"===typeof t||"object"===typeof t&&("string"===typeof t.path||"string"===typeof t.name)?(l(),"object"===typeof t&&t.replace?o.replace(t):o.push(t)):r(t)}))}catch(i){l(i)}};Dt(d,f,(function(){var r=[],i=function(){return o.current===t},n=Kt(p,r,i),a=n.concat(o.router.resolveHooks);Dt(a,f,(function(){if(o.pending!==t)return l();o.pending=null,e(t),o.router.app&&o.router.app.$nextTick((function(){r.forEach((function(t){t()}))}))}))}))},Ht.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach((function(r){r&&r(t,e)}))};var ee=function(t){function e(e,r){var i=this;t.call(this,e,r);var n=e.options.scrollBehavior,a=Rt&&n;a&&wt();var o=re(this.base);window.addEventListener("popstate",(function(t){var r=i.current,n=re(i.base);i.current===x&&n===o||i.transitionTo(n,(function(t){a&&Tt(e,t,r,!0)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,r){var i=this,n=this,a=n.current;this.transitionTo(t,(function(t){Ot(P(i.base+t.fullPath)),Tt(i.router,t,a,!1),e&&e(t)}),r)},e.prototype.replace=function(t,e,r){var i=this,n=this,a=n.current;this.transitionTo(t,(function(t){zt(P(i.base+t.fullPath)),Tt(i.router,t,a,!1),e&&e(t)}),r)},e.prototype.ensureURL=function(t){if(re(this.base)!==this.current.fullPath){var e=P(this.base+this.current.fullPath);t?Ot(e):zt(e)}},e.prototype.getCurrentLocation=function(){return re(this.base)},e}(Ht);function re(t){var e=decodeURI(window.location.pathname);return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}var ie=function(t){function e(e,r,i){t.call(this,e,r),i&&ne(this.base)||ae()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this,e=this.router,r=e.options.scrollBehavior,i=Rt&&r;i&&wt(),window.addEventListener(Rt?"popstate":"hashchange",(function(){var e=t.current;ae()&&t.transitionTo(oe(),(function(r){i&&Tt(t.router,r,e,!0),Rt||ue(r.fullPath)}))}))},e.prototype.push=function(t,e,r){var i=this,n=this,a=n.current;this.transitionTo(t,(function(t){le(t.fullPath),Tt(i.router,t,a,!1),e&&e(t)}),r)},e.prototype.replace=function(t,e,r){var i=this,n=this,a=n.current;this.transitionTo(t,(function(t){ue(t.fullPath),Tt(i.router,t,a,!1),e&&e(t)}),r)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;oe()!==e&&(t?le(e):ue(e))},e.prototype.getCurrentLocation=function(){return oe()},e}(Ht);function ne(t){var e=re(t);if(!/^\/#/.test(e))return window.location.replace(P(t+"/#"+e)),!0}function ae(){var t=oe();return"/"===t.charAt(0)||(ue("/"+t),!1)}function oe(){var t=window.location.href,e=t.indexOf("#");if(e<0)return"";t=t.slice(e+1);var r=t.indexOf("?");if(r<0){var i=t.indexOf("#");t=i>-1?decodeURI(t.slice(0,i))+t.slice(i):decodeURI(t)}else r>-1&&(t=decodeURI(t.slice(0,r))+t.slice(r));return t}function se(t){var e=window.location.href,r=e.indexOf("#"),i=r>=0?e.slice(0,r):e;return i+"#"+t}function le(t){Rt?Ot(se(t)):window.location.hash=t}function ue(t){Rt?zt(se(t)):window.location.replace(se(t))}var ce=function(t){function e(e,r){t.call(this,e,r),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,r){var i=this;this.transitionTo(t,(function(t){i.stack=i.stack.slice(0,i.index+1).concat(t),i.index++,e&&e(t)}),r)},e.prototype.replace=function(t,e,r){var i=this;this.transitionTo(t,(function(t){i.stack=i.stack.slice(0,i.index).concat(t),e&&e(t)}),r)},e.prototype.go=function(t){var e=this,r=this.index+t;if(!(r<0||r>=this.stack.length)){var i=this.stack[r];this.confirmTransition(i,(function(){e.index=r,e.updateRoute(i)}),(function(t){a(Gt,t)&&(e.index=r)}))}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(Ht),he=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=dt(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!Rt&&!1!==t.fallback,this.fallback&&(e="hash"),lt||(e="abstract"),this.mode=e,e){case"history":this.history=new ee(this,t.base);break;case"hash":this.history=new ie(this,t.base,this.fallback);break;case"abstract":this.history=new ce(this,t.base);break;default:0}},pe={currentRoute:{configurable:!0}};function de(t,e){return t.push(e),function(){var r=t.indexOf(e);r>-1&&t.splice(r,1)}}function fe(t,e,r){var i="hash"===r?"#"+e:e;return t?P(t+"/"+i):i}he.prototype.match=function(t,e,r){return this.matcher.match(t,e,r)},pe.currentRoute.get=function(){return this.history&&this.history.current},he.prototype.init=function(t){var e=this;if(this.apps.push(t),t.$once("hook:destroyed",(function(){var r=e.apps.indexOf(t);r>-1&&e.apps.splice(r,1),e.app===t&&(e.app=e.apps[0]||null)})),!this.app){this.app=t;var r=this.history;if(r instanceof ee)r.transitionTo(r.getCurrentLocation());else if(r instanceof ie){var i=function(){r.setupListeners()};r.transitionTo(r.getCurrentLocation(),i,i)}r.listen((function(t){e.apps.forEach((function(e){e._route=t}))}))}},he.prototype.beforeEach=function(t){return de(this.beforeHooks,t)},he.prototype.beforeResolve=function(t){return de(this.resolveHooks,t)},he.prototype.afterEach=function(t){return de(this.afterHooks,t)},he.prototype.onReady=function(t,e){this.history.onReady(t,e)},he.prototype.onError=function(t){this.history.onError(t)},he.prototype.push=function(t,e,r){var i=this;if(!e&&!r&&"undefined"!==typeof Promise)return new Promise((function(e,r){i.history.push(t,e,r)}));this.history.push(t,e,r)},he.prototype.replace=function(t,e,r){var i=this;if(!e&&!r&&"undefined"!==typeof Promise)return new Promise((function(e,r){i.history.replace(t,e,r)}));this.history.replace(t,e,r)},he.prototype.go=function(t){this.history.go(t)},he.prototype.back=function(){this.go(-1)},he.prototype.forward=function(){this.go(1)},he.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(t){return Object.keys(t.components).map((function(e){return t.components[e]}))}))):[]},he.prototype.resolve=function(t,e,r){e=e||this.history.current;var i=Q(t,e,r,this),n=this.match(i,e),a=n.redirectedFrom||n.fullPath,o=this.history.base,s=fe(o,a,this.mode);return{location:i,route:n,href:s,normalizedTo:i,resolved:n}},he.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==x&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(he.prototype,pe),he.install=st,he.version="3.1.3",lt&&window.Vue&&window.Vue.use(he),e["a"]=he},"8e60":function(t,e,r){t.exports=!r("294c")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"8e6e":function(t,e,r){var i=r("5ca1"),n=r("990b"),a=r("6821"),o=r("11e9"),s=r("f1ae");i(i.S,"Object",{getOwnPropertyDescriptors:function(t){var e,r,i=a(t),l=o.f,u=n(i),c={},h=0;while(u.length>h)r=l(i,e=u[h++]),void 0!==r&&s(c,e,r);return c}})},"8f60":function(t,e,r){"use strict";var i=r("a159"),n=r("aebd"),a=r("45f2"),o={};r("35e8")(o,r("5168")("iterator"),(function(){return this})),t.exports=function(t,e,r){t.prototype=i(o,{next:n(1,r)}),a(t,e+" Iterator")}},9003:function(t,e,r){var i=r("6b4c");t.exports=Array.isArray||function(t){return"Array"==i(t)}},9093:function(t,e,r){var i=r("ce10"),n=r("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,n)}},9138:function(t,e,r){t.exports=r("35e8")},"95d5":function(t,e,r){var i=r("40c3"),n=r("5168")("iterator"),a=r("481b");t.exports=r("584a").isIterable=function(t){var e=Object(t);return void 0!==e[n]||"@@iterator"in e||a.hasOwnProperty(i(e))}},"990b":function(t,e,r){var i=r("9093"),n=r("2621"),a=r("cb7c"),o=r("7726").Reflect;t.exports=o&&o.ownKeys||function(t){var e=i.f(a(t)),r=n.f;return r?e.concat(r(t)):e}},"9b43":function(t,e,r){var i=r("d8e8");t.exports=function(t,e,r){if(i(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,i){return t.call(e,r,i)};case 3:return function(r,i,n){return t.call(e,r,i,n)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,r){var i=r("2b4c")("unscopables"),n=Array.prototype;void 0==n[i]&&r("32e9")(n,i,{}),t.exports=function(t){n[i][t]=!0}},"9c80":function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},"9cf7":function(t,e,r){"use strict";t.exports=function(t){return JSON.parse(JSON.stringify(t))}},"9def":function(t,e,r){var i=r("4588"),n=Math.min;t.exports=function(t){return t>0?n(i(t),9007199254740991):0}},"9e1e":function(t,e,r){t.exports=!r("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a159:function(t,e,r){var i=r("e4ae"),n=r("7e90"),a=r("1691"),o=r("5559")("IE_PROTO"),s=function(){},l="prototype",u=function(){var t,e=r("1ec9")("iframe"),i=a.length,n="<",o=">";e.style.display="none",r("32fc").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(n+"script"+o+"document.F=Object"+n+"/script"+o),t.close(),u=t.F;while(i--)delete u[l][a[i]];return u()};t.exports=Object.create||function(t,e){var r;return null!==t?(s[l]=i(t),r=new s,s[l]=null,r[o]=t):r=u(),void 0===e?r:n(r,e)}},a25f:function(t,e,r){var i=r("7726"),n=i.navigator;t.exports=n&&n.userAgent||""},a481:function(t,e,r){"use strict";var i=r("cb7c"),n=r("4bf8"),a=r("9def"),o=r("4588"),s=r("0390"),l=r("5f1b"),u=Math.max,c=Math.min,h=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};r("214f")("replace",2,(function(t,e,r,m){return[function(i,n){var a=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,a,n):r.call(String(a),i,n)},function(t,e){var n=m(r,t,this,e);if(n.done)return n.value;var h=i(t),p=String(this),d="function"===typeof e;d||(e=String(e));var g=h.global;if(g){var y=h.unicode;h.lastIndex=0}var _=[];while(1){var x=l(h,p);if(null===x)break;if(_.push(x),!g)break;var b=String(x[0]);""===b&&(h.lastIndex=s(p,a(h.lastIndex),y))}for(var w="",T=0,S=0;S<_.length;S++){x=_[S];for(var E=String(x[0]),M=u(c(o(x.index),p.length),0),A=[],C=1;C<x.length;C++)A.push(f(x[C]));var P=x.groups;if(d){var L=[E].concat(A,M,p);void 0!==P&&L.push(P);var I=String(e.apply(void 0,L))}else I=v(E,p,M,A,P,e);M>=T&&(w+=p.slice(T,M)+I,T=M+E.length)}return w+p.slice(T)}];function v(t,e,i,a,o,s){var l=i+t.length,u=a.length,c=d;return void 0!==o&&(o=n(o),c=p),r.call(s,c,(function(r,n){var s;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(l);case"<":s=o[n.slice(1,-1)];break;default:var c=+n;if(0===c)return r;if(c>u){var p=h(c/10);return 0===p?r:p<=u?void 0===a[p-1]?n.charAt(1):a[p-1]+n.charAt(1):r}s=a[c-1]}return void 0===s?"":s}))}}))},a5b8:function(t,e,r){"use strict";var i=r("d8e8");function n(t){var e,r;this.promise=new t((function(t,i){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=i})),this.resolve=i(e),this.reject=i(r)}t.exports.f=function(t){return new n(t)}},a745:function(t,e,r){t.exports=r("f410")},aa77:function(t,e,r){var i=r("5ca1"),n=r("be13"),a=r("79e5"),o=r("fdef"),s="["+o+"]",l="​",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),h=function(t,e,r){var n={},s=a((function(){return!!o[t]()||l[t]()!=l})),u=n[t]=s?e(p):o[t];r&&(n[r]=u),i(i.P+i.F*s,"String",n)},p=h.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=h},aae3:function(t,e,r){var i=r("d3f4"),n=r("2d95"),a=r("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==n(t))}},ac6a:function(t,e,r){for(var i=r("cadf"),n=r("0d58"),a=r("2aba"),o=r("7726"),s=r("32e9"),l=r("84f2"),u=r("2b4c"),c=u("iterator"),h=u("toStringTag"),p=l.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=n(d),m=0;m<f.length;m++){var v,g=f[m],y=d[g],_=o[g],x=_&&_.prototype;if(x&&(x[c]||s(x,c,p),x[h]||s(x,h,g),l[g]=p,y))for(v in i)x[v]||a(x,v,i[v],!0)}},aebd:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},b0b4:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var i=r("85f2"),n=r.n(i);function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),n()(t,i.key,i)}}function o(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}},b0c5:function(t,e,r){"use strict";var i=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},b0dc:function(t,e,r){var i=r("e4ae");t.exports=function(t,e,r,n){try{return n?e(i(r)[0],r[1]):e(r)}catch(o){var a=t["return"];throw void 0!==a&&i(a.call(t)),o}}},b447:function(t,e,r){var i=r("3a38"),n=Math.min;t.exports=function(t){return t>0?n(i(t),9007199254740991):0}},b8e3:function(t,e){t.exports=!0},bcaa:function(t,e,r){var i=r("cb7c"),n=r("d3f4"),a=r("a5b8");t.exports=function(t,e){if(i(t),n(e)&&e.constructor===t)return e;var r=a.f(t),o=r.resolve;return o(e),r.promise}},bd2e:function(t,e,r){var i=r("5a89"),n=function(){function t(t){i.Loader.call(this,t),this.dracoLoader=null,this.ddsLoader=null}function e(){var t={};return{get:function(e){return t[e]},add:function(e,r){t[e]=r},remove:function(e){delete t[e]},removeAll:function(){t={}}}}t.prototype=Object.assign(Object.create(i.Loader.prototype),{constructor:t,load:function(t,e,r,n){var a,o=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:i.LoaderUtils.extractUrlBase(t),o.manager.itemStart(t);var s=function(e){n?n(e):console.error(e),o.manager.itemError(t),o.manager.itemEnd(t)},l=new i.FileLoader(o.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),"use-credentials"===o.crossOrigin&&l.setWithCredentials(!0),l.load(t,(function(r){try{o.parse(r,a,(function(r){e(r),o.manager.itemEnd(t)}),s)}catch(i){s(i)}}),r,s)},setDRACOLoader:function(t){return this.dracoLoader=t,this},setDDSLoader:function(t){return this.ddsLoader=t,this},parse:function(t,e,l,u){var f,m={};if("string"===typeof t)f=t;else{var v=i.LoaderUtils.decodeText(new Uint8Array(t,0,4));if(v===s){try{m[r.KHR_BINARY_GLTF]=new c(t)}catch(w){return void(u&&u(w))}f=m[r.KHR_BINARY_GLTF].content}else f=i.LoaderUtils.decodeText(new Uint8Array(t))}var g=JSON.parse(f);if(void 0===g.asset||g.asset.version[0]<2)u&&u(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(g.extensionsUsed)for(var y=0;y<g.extensionsUsed.length;++y){var _=g.extensionsUsed[y],x=g.extensionsRequired||[];switch(_){case r.KHR_LIGHTS_PUNCTUAL:m[_]=new a(g);break;case r.KHR_MATERIALS_UNLIT:m[_]=new o;break;case r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:m[_]=new d;break;case r.KHR_DRACO_MESH_COMPRESSION:m[_]=new h(g,this.dracoLoader);break;case r.MSFT_TEXTURE_DDS:m[r.MSFT_TEXTURE_DDS]=new n(this.ddsLoader);break;case r.KHR_TEXTURE_TRANSFORM:m[r.KHR_TEXTURE_TRANSFORM]=new p;break;default:x.indexOf(_)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+_+'".')}}var b=new z(g,m,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});b.parse(l,u)}}});var r={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function n(t){if(!t)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=t}function a(t){this.name=r.KHR_LIGHTS_PUNCTUAL;var e=t.extensions&&t.extensions[r.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=e.lights||[]}function o(){this.name=r.KHR_MATERIALS_UNLIT}a.prototype.loadLight=function(t){var e,r=this.lightDefs[t],n=new i.Color(16777215);void 0!==r.color&&n.fromArray(r.color);var a=void 0!==r.range?r.range:0;switch(r.type){case"directional":e=new i.DirectionalLight(n),e.target.position.set(0,0,-1),e.add(e.target);break;case"point":e=new i.PointLight(n),e.distance=a;break;case"spot":e=new i.SpotLight(n),e.distance=a,r.spot=r.spot||{},r.spot.innerConeAngle=void 0!==r.spot.innerConeAngle?r.spot.innerConeAngle:0,r.spot.outerConeAngle=void 0!==r.spot.outerConeAngle?r.spot.outerConeAngle:Math.PI/4,e.angle=r.spot.outerConeAngle,e.penumbra=1-r.spot.innerConeAngle/r.spot.outerConeAngle,e.target.position.set(0,0,-1),e.add(e.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+r.type+'".')}return e.position.set(0,0,0),e.decay=2,void 0!==r.intensity&&(e.intensity=r.intensity),e.name=r.name||"light_"+t,Promise.resolve(e)},o.prototype.getMaterialType=function(){return i.MeshBasicMaterial},o.prototype.extendParams=function(t,e,r){var n=[];t.color=new i.Color(1,1,1),t.opacity=1;var a=e.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var o=a.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}void 0!==a.baseColorTexture&&n.push(r.assignTexture(t,"map",a.baseColorTexture))}return Promise.all(n)};var s="glTF",l=12,u={JSON:1313821514,BIN:5130562};function c(t){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(t,0,l);if(this.header={magic:i.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==s)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");var n=new DataView(t,l),a=0;while(a<n.byteLength){var o=n.getUint32(a,!0);a+=4;var c=n.getUint32(a,!0);if(a+=4,c===u.JSON){var h=new Uint8Array(t,l+a,o);this.content=i.LoaderUtils.decodeText(h)}else if(c===u.BIN){var p=l+a;this.body=t.slice(p,p+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function h(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e}function p(){this.name=r.KHR_TEXTURE_TRANSFORM}function d(){return{name:r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return i.ShaderMaterial},extendParams:function(t,e,r){var n=e.extensions[this.name],a=i.ShaderLib["standard"],o=i.UniformsUtils.clone(a.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),l=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),u=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),p=a.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",l).replace("#include <roughnessmap_fragment>",u).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",h);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new i.Color).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},t.vertexShader=a.vertexShader,t.fragmentShader=p,t.uniforms=o,t.defines={STANDARD:""},t.color=new i.Color(1,1,1),t.opacity=1;var d=[];if(Array.isArray(n.diffuseFactor)){var f=n.diffuseFactor;t.color.fromArray(f),t.opacity=f[3]}if(void 0!==n.diffuseTexture&&d.push(r.assignTexture(t,"map",n.diffuseTexture)),t.emissive=new i.Color(0,0,0),t.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,t.specular=new i.Color(1,1,1),Array.isArray(n.specularFactor)&&t.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var m=n.specularGlossinessTexture;d.push(r.assignTexture(t,"glossinessMap",m)),d.push(r.assignTexture(t,"specularMap",m))}return Promise.all(d)},createMaterial:function(t){var e=new i.ShaderMaterial({defines:t.defines,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,fog:!0,lights:!0,opacity:t.opacity,transparent:t.transparent});return e.isGLTFSpecularGlossinessMaterial=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e.extensions.derivatives=!0,e},cloneMaterial:function(t){var e=t.clone();e.isGLTFSpecularGlossinessMaterial=!0;for(var r=this.specularGlossinessParams,i=0,n=r.length;i<n;i++){var a=t[r[i]];e[r[i]]=a&&a.isColor?a.clone():a}return e},refreshUniforms:function(t,e,r,i,n){if(!0===n.isGLTFSpecularGlossinessMaterial){var a,o=n.uniforms,s=n.defines;o.opacity.value=n.opacity,o.diffuse.value.copy(n.color),o.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),o.map.value=n.map,o.specularMap.value=n.specularMap,o.alphaMap.value=n.alphaMap,o.lightMap.value=n.lightMap,o.lightMapIntensity.value=n.lightMapIntensity,o.aoMap.value=n.aoMap,o.aoMapIntensity.value=n.aoMapIntensity,n.map?a=n.map:n.specularMap?a=n.specularMap:n.displacementMap?a=n.displacementMap:n.normalMap?a=n.normalMap:n.bumpMap?a=n.bumpMap:n.glossinessMap?a=n.glossinessMap:n.alphaMap?a=n.alphaMap:n.emissiveMap&&(a=n.emissiveMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),o.uvTransform.value.copy(a.matrix)),n.envMap&&(o.envMap.value=n.envMap,o.envMapIntensity.value=n.envMapIntensity,o.flipEnvMap.value=n.envMap.isCubeTexture?-1:1,o.reflectivity.value=n.reflectivity,o.refractionRatio.value=n.refractionRatio,o.maxMipLevel.value=t.properties.get(n.envMap).__maxMipLevel),o.specular.value.copy(n.specular),o.glossiness.value=n.glossiness,o.glossinessMap.value=n.glossinessMap,o.emissiveMap.value=n.emissiveMap,o.bumpMap.value=n.bumpMap,o.normalMap.value=n.normalMap,o.displacementMap.value=n.displacementMap,o.displacementScale.value=n.displacementScale,o.displacementBias.value=n.displacementBias,null!==o.glossinessMap.value&&void 0===s.USE_GLOSSINESSMAP&&(s.USE_GLOSSINESSMAP="",s.USE_ROUGHNESSMAP=""),null===o.glossinessMap.value&&void 0!==s.USE_GLOSSINESSMAP&&(delete s.USE_GLOSSINESSMAP,delete s.USE_ROUGHNESSMAP)}}}}function f(t,e,r,n){i.Interpolant.call(this,t,e,r,n)}h.prototype.decodePrimitive=function(t,e){var r=this.json,i=this.dracoLoader,n=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,o={},s={},l={};for(var u in a){var c=b[u]||u.toLowerCase();o[c]=a[u]}for(u in t.attributes){c=b[u]||u.toLowerCase();if(void 0!==a[u]){var h=r.accessors[t.attributes[u]],p=g[h.componentType];l[c]=p,s[c]=!0===h.normalized}}return e.getDependency("bufferView",n).then((function(t){return new Promise((function(e){i.decodeDracoFile(t,(function(t){for(var r in t.attributes){var i=t.attributes[r],n=s[r];void 0!==n&&(i.normalized=n)}e(t)}),o,l)}))}))},p.prototype.extendTexture=function(t,e){return t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.needsUpdate=!0,t},f.prototype=Object.create(i.Interpolant.prototype),f.prototype.constructor=f,f.prototype.copySampleValue_=function(t){for(var e=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=t*i*3+i,a=0;a!==i;a++)e[a]=r[n+a];return e},f.prototype.beforeStart_=f.prototype.copySampleValue_,f.prototype.afterEnd_=f.prototype.copySampleValue_,f.prototype.interpolate_=function(t,e,r,i){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=i-e,c=(r-e)/u,h=c*c,p=h*c,d=t*l,f=d-l,m=-2*p+3*h,v=p-h,g=1-m,y=v-h+c,_=0;_!==o;_++){var x=a[f+_+o],b=a[f+_+s]*u,w=a[d+_+o],T=a[d+_]*u;n[_]=g*x+y*b+m*w+v*T}return n};var m,v={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},g={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},y={9728:i.NearestFilter,9729:i.LinearFilter,9984:i.NearestMipmapNearestFilter,9985:i.LinearMipmapNearestFilter,9986:i.NearestMipmapLinearFilter,9987:i.LinearMipmapLinearFilter},_={33071:i.ClampToEdgeWrapping,33648:i.MirroredRepeatWrapping,10497:i.RepeatWrapping},x={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},b={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},w={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},T={CUBICSPLINE:void 0,LINEAR:i.InterpolateLinear,STEP:i.InterpolateDiscrete},S={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},E={"image/png":i.RGBAFormat,"image/jpeg":i.RGBFormat};function M(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)?t:/^data:.*,.*$/i.test(t)?t:/^blob:.*$/i.test(t)?t:e+t)}function A(){return m=m||new i.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.FrontSide}),m}function C(t,e,r){for(var i in r.extensions)void 0===t[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=r.extensions[i])}function P(t,e){void 0!==e.extras&&("object"===typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function L(t,e,r){for(var i=!1,n=!1,a=0,o=e.length;a<o;a++){var s=e[a];if(void 0!==s.POSITION&&(i=!0),void 0!==s.NORMAL&&(n=!0),i&&n)break}if(!i&&!n)return Promise.resolve(t);var l=[],u=[];for(a=0,o=e.length;a<o;a++){s=e[a];if(i){var c=void 0!==s.POSITION?r.getDependency("accessor",s.POSITION):t.attributes.position;l.push(c)}if(n){c=void 0!==s.NORMAL?r.getDependency("accessor",s.NORMAL):t.attributes.normal;u.push(c)}}return Promise.all([Promise.all(l),Promise.all(u)]).then((function(r){for(var a=r[0],o=r[1],s=0,l=a.length;s<l;s++)t.attributes.position!==a[s]&&(a[s]=O(a[s]));for(s=0,l=o.length;s<l;s++)t.attributes.normal!==o[s]&&(o[s]=O(o[s]));for(s=0,l=e.length;s<l;s++){var u=e[s],c="morphTarget"+s;if(i&&void 0!==u.POSITION){var h=a[s];h.name=c;for(var p=t.attributes.position,d=0,f=h.count;d<f;d++)h.setXYZ(d,h.getX(d)+p.getX(d),h.getY(d)+p.getY(d),h.getZ(d)+p.getZ(d))}if(n&&void 0!==u.NORMAL){var m=o[s];m.name=c;var v=t.attributes.normal;for(d=0,f=m.count;d<f;d++)m.setXYZ(d,m.getX(d)+v.getX(d),m.getY(d)+v.getY(d),m.getZ(d)+v.getZ(d))}}return i&&(t.morphAttributes.position=a),n&&(t.morphAttributes.normal=o),t}))}function I(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(var r=0,i=e.weights.length;r<i;r++)t.morphTargetInfluences[r]=e.weights[r];if(e.extras&&Array.isArray(e.extras.targetNames)){var n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(r=0,i=n.length;r<i;r++)t.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function k(t){var e,i=t.extensions&&t.extensions[r.KHR_DRACO_MESH_COMPRESSION];return e=i?"draco:"+i.bufferView+":"+i.indices+":"+R(i.attributes):t.indices+":"+R(t.attributes)+":"+t.mode,e}function R(t){for(var e="",r=Object.keys(t).sort(),i=0,n=r.length;i<n;i++)e+=r[i]+":"+t[r[i]]+";";return e}function O(t){if(t.isInterleavedBufferAttribute){for(var e=t.count,r=t.itemSize,n=t.array.slice(0,e*r),a=0,o=0;a<e;++a)n[o++]=t.getX(a),r>=2&&(n[o++]=t.getY(a)),r>=3&&(n[o++]=t.getZ(a)),r>=4&&(n[o++]=t.getW(a));return new i.BufferAttribute(n,r,t.normalized)}return t.clone()}function z(t,r,n){this.json=t||{},this.extensions=r||{},this.options=n||{},this.cache=new e,this.primitiveCache={},this.textureLoader=new i.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new i.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function D(t,e,r){var i=e.attributes,n=[];function a(e,i){return r.getDependency("accessor",e).then((function(e){t.addAttribute(i,e)}))}for(var o in i){var s=b[o]||o.toLowerCase();s in t.attributes||n.push(a(i[o],s))}if(void 0!==e.indices&&!t.index){var l=r.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));n.push(l)}return P(t,e),Promise.all(n).then((function(){return void 0!==e.targets?L(t,e.targets,r):t}))}return z.prototype.parse=function(t,e){var r=this,i=this.json,n=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(e){var a={scene:e[0][i.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:i.asset,parser:r,userData:{}};C(n,a,i),P(a,i),t(a)})).catch(e)},z.prototype.markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],r=this.json.meshes||[],i={},n={},a=0,o=e.length;a<o;a++)for(var s=e[a].joints,l=0,u=s.length;l<u;l++)t[s[l]].isBone=!0;for(var c=0,h=t.length;c<h;c++){var p=t[c];void 0!==p.mesh&&(void 0===i[p.mesh]&&(i[p.mesh]=n[p.mesh]=0),i[p.mesh]++,void 0!==p.skin&&(r[p.mesh].isSkinnedMesh=!0))}this.json.meshReferences=i,this.json.meshUses=n},z.prototype.getDependency=function(t,e){var i=t+":"+e,n=this.cache.get(i);if(!n){switch(t){case"scene":n=this.loadScene(e);break;case"node":n=this.loadNode(e);break;case"mesh":n=this.loadMesh(e);break;case"accessor":n=this.loadAccessor(e);break;case"bufferView":n=this.loadBufferView(e);break;case"buffer":n=this.loadBuffer(e);break;case"material":n=this.loadMaterial(e);break;case"texture":n=this.loadTexture(e);break;case"skin":n=this.loadSkin(e);break;case"animation":n=this.loadAnimation(e);break;case"camera":n=this.loadCamera(e);break;case"light":n=this.extensions[r.KHR_LIGHTS_PUNCTUAL].loadLight(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(i,n)}return n},z.prototype.getDependencies=function(t){var e=this.cache.get(t);if(!e){var r=this,i=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(i.map((function(e,i){return r.getDependency(t,i)}))),this.cache.add(t,e)}return e},z.prototype.loadBuffer=function(t){var e=this.json.buffers[t],i=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var n=this.options;return new Promise((function(t,r){i.load(M(e.uri,n.path),t,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))},z.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){var r=e.byteLength||0,i=e.byteOffset||0;return t.slice(i,i+r)}))},z.prototype.loadAccessor=function(t){var e=this,r=this.json,n=this.json.accessors[t];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);var a=[];return void 0!==n.bufferView?a.push(this.getDependency("bufferView",n.bufferView)):a.push(null),void 0!==n.sparse&&(a.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(a).then((function(t){var a,o,s=t[0],l=x[n.type],u=g[n.componentType],c=u.BYTES_PER_ELEMENT,h=c*l,p=n.byteOffset||0,d=void 0!==n.bufferView?r.bufferViews[n.bufferView].byteStride:void 0,f=!0===n.normalized;if(d&&d!==h){var m=Math.floor(p/d),v="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+m+":"+n.count,y=e.cache.get(v);y||(a=new u(s,m*d,n.count*d/c),y=new i.InterleavedBuffer(a,d/c),e.cache.add(v,y)),o=new i.InterleavedBufferAttribute(y,l,p%d/c,f)}else a=null===s?new u(n.count*l):new u(s,p,n.count*l),o=new i.BufferAttribute(a,l,f);if(void 0!==n.sparse){var _=x.SCALAR,b=g[n.sparse.indices.componentType],w=n.sparse.indices.byteOffset||0,T=n.sparse.values.byteOffset||0,S=new b(t[1],w,n.sparse.count*_),E=new u(t[2],T,n.sparse.count*l);null!==s&&(o=new i.BufferAttribute(o.array.slice(),o.itemSize,o.normalized));for(var M=0,A=S.length;M<A;M++){var C=S[M];if(o.setX(C,E[M*l]),l>=2&&o.setY(C,E[M*l+1]),l>=3&&o.setZ(C,E[M*l+2]),l>=4&&o.setW(C,E[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o}))},z.prototype.loadTexture=function(t){var e,n=this,a=this.json,o=this.options,s=this.textureLoader,l=window.URL||window.webkitURL,u=a.textures[t],c=u.extensions||{};e=c[r.MSFT_TEXTURE_DDS]?a.images[c[r.MSFT_TEXTURE_DDS].source]:a.images[u.source];var h=e.uri,p=!1;return void 0!==e.bufferView&&(h=n.getDependency("bufferView",e.bufferView).then((function(t){p=!0;var r=new Blob([t],{type:e.mimeType});return h=l.createObjectURL(r),h}))),Promise.resolve(h).then((function(t){var e=o.manager.getHandler(t);return e||(e=c[r.MSFT_TEXTURE_DDS]?n.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise((function(r,i){e.load(M(t,o.path),r,void 0,i)}))})).then((function(t){!0===p&&l.revokeObjectURL(h),t.flipY=!1,void 0!==u.name&&(t.name=u.name),e.mimeType in E&&(t.format=E[e.mimeType]);var r=a.samplers||{},n=r[u.sampler]||{};return t.magFilter=y[n.magFilter]||i.LinearFilter,t.minFilter=y[n.minFilter]||i.LinearMipmapLinearFilter,t.wrapS=_[n.wrapS]||i.RepeatWrapping,t.wrapT=_[n.wrapT]||i.RepeatWrapping,t}))},z.prototype.assignTexture=function(t,e,n){var a=this;return this.getDependency("texture",n.index).then((function(o){if(!o.isCompressedTexture)switch(e){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":o.format=i.RGBFormat;break}if(a.extensions[r.KHR_TEXTURE_TRANSFORM]){var s=void 0!==n.extensions?n.extensions[r.KHR_TEXTURE_TRANSFORM]:void 0;s&&(o=a.extensions[r.KHR_TEXTURE_TRANSFORM].extendTexture(o,s))}t[e]=o}))},z.prototype.assignFinalMaterial=function(t){var e=t.geometry,n=t.material,a=this.extensions,o=void 0!==e.attributes.tangent,s=void 0!==e.attributes.color,l=void 0===e.attributes.normal,u=!0===t.isSkinnedMesh,c=Object.keys(e.morphAttributes).length>0,h=c&&void 0!==e.morphAttributes.normal;if(t.isPoints){var p="PointsMaterial:"+n.uuid,d=this.cache.get(p);d||(d=new i.PointsMaterial,i.Material.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,d.sizeAttenuation=!1,this.cache.add(p,d)),n=d}else if(t.isLine){p="LineBasicMaterial:"+n.uuid;var f=this.cache.get(p);f||(f=new i.LineBasicMaterial,i.Material.prototype.copy.call(f,n),f.color.copy(n.color),this.cache.add(p,f)),n=f}if(o||s||l||u||c){p="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(p+="specular-glossiness:"),u&&(p+="skinning:"),o&&(p+="vertex-tangents:"),s&&(p+="vertex-colors:"),l&&(p+="flat-shading:"),c&&(p+="morph-targets:"),h&&(p+="morph-normals:");var m=this.cache.get(p);m||(m=n.isGLTFSpecularGlossinessMaterial?a[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(n):n.clone(),u&&(m.skinning=!0),o&&(m.vertexTangents=!0),s&&(m.vertexColors=i.VertexColors),l&&(m.flatShading=!0),c&&(m.morphTargets=!0),h&&(m.morphNormals=!0),this.cache.add(p,m)),n=m}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),e.addAttribute("uv2",new i.BufferAttribute(e.attributes.uv.array,2))),n.isGLTFSpecularGlossinessMaterial&&(t.onBeforeRender=a[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),t.material=n},z.prototype.loadMaterial=function(t){var e,n=this,a=this.json,o=this.extensions,s=a.materials[t],l={},u=s.extensions||{},c=[];if(u[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var h=o[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];e=h.getMaterialType(),c.push(h.extendParams(l,s,n))}else if(u[r.KHR_MATERIALS_UNLIT]){var p=o[r.KHR_MATERIALS_UNLIT];e=p.getMaterialType(),c.push(p.extendParams(l,s,n))}else{e=i.MeshStandardMaterial;var d=s.pbrMetallicRoughness||{};if(l.color=new i.Color(1,1,1),l.opacity=1,Array.isArray(d.baseColorFactor)){var f=d.baseColorFactor;l.color.fromArray(f),l.opacity=f[3]}void 0!==d.baseColorTexture&&c.push(n.assignTexture(l,"map",d.baseColorTexture)),l.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,l.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(n.assignTexture(l,"metalnessMap",d.metallicRoughnessTexture)),c.push(n.assignTexture(l,"roughnessMap",d.metallicRoughnessTexture)))}!0===s.doubleSided&&(l.side=i.DoubleSide);var m=s.alphaMode||S.OPAQUE;return m===S.BLEND?l.transparent=!0:(l.transparent=!1,m===S.MASK&&(l.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&e!==i.MeshBasicMaterial&&(c.push(n.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new i.Vector2(1,1),void 0!==s.normalTexture.scale&&l.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&e!==i.MeshBasicMaterial&&(c.push(n.assignTexture(l,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(l.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&e!==i.MeshBasicMaterial&&(l.emissive=(new i.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&e!==i.MeshBasicMaterial&&c.push(n.assignTexture(l,"emissiveMap",s.emissiveTexture)),Promise.all(c).then((function(){var t;return t=e===i.ShaderMaterial?o[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):new e(l),void 0!==s.name&&(t.name=s.name),t.map&&(t.map.encoding=i.sRGBEncoding),t.emissiveMap&&(t.emissiveMap.encoding=i.sRGBEncoding),t.specularMap&&(t.specularMap.encoding=i.sRGBEncoding),P(t,s),s.extensions&&C(o,t,s),t}))},z.prototype.loadGeometries=function(t){var e=this,n=this.extensions,a=this.primitiveCache;function o(t){return n[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(r){return D(r,t,e)}))}for(var s=[],l=0,u=t.length;l<u;l++){var c,h=t[l],p=k(h),d=a[p];if(d)s.push(d.promise);else c=h.extensions&&h.extensions[r.KHR_DRACO_MESH_COMPRESSION]?o(h):D(new i.BufferGeometry,h,e),a[p]={primitive:h,promise:c},s.push(c)}return Promise.all(s)},z.prototype.loadMesh=function(t){for(var e=this,r=this.json,n=r.meshes[t],a=n.primitives,o=[],s=0,l=a.length;s<l;s++){var u=void 0===a[s].material?A():this.getDependency("material",a[s].material);o.push(u)}return Promise.all(o).then((function(r){return e.loadGeometries(a).then((function(o){for(var s=[],l=0,u=o.length;l<u;l++){var c,h=o[l],p=a[l],d=r[l];if(p.mode===v.TRIANGLES||p.mode===v.TRIANGLE_STRIP||p.mode===v.TRIANGLE_FAN||void 0===p.mode)c=!0===n.isSkinnedMesh?new i.SkinnedMesh(h,d):new i.Mesh(h,d),!0!==c.isSkinnedMesh||c.geometry.attributes.skinWeight.normalized||c.normalizeSkinWeights(),p.mode===v.TRIANGLE_STRIP?c.drawMode=i.TriangleStripDrawMode:p.mode===v.TRIANGLE_FAN&&(c.drawMode=i.TriangleFanDrawMode);else if(p.mode===v.LINES)c=new i.LineSegments(h,d);else if(p.mode===v.LINE_STRIP)c=new i.Line(h,d);else if(p.mode===v.LINE_LOOP)c=new i.LineLoop(h,d);else{if(p.mode!==v.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);c=new i.Points(h,d)}Object.keys(c.geometry.morphAttributes).length>0&&I(c,n),c.name=n.name||"mesh_"+t,o.length>1&&(c.name+="_"+l),P(c,n),e.assignFinalMaterial(c),s.push(c)}if(1===s.length)return s[0];var f=new i.Group;for(l=0,u=s.length;l<u;l++)f.add(s[l]);return f}))}))},z.prototype.loadCamera=function(t){var e,r=this.json.cameras[t],n=r[r.type];if(n)return"perspective"===r.type?e=new i.PerspectiveCamera(i.Math.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===r.type&&(e=new i.OrthographicCamera(n.xmag/-2,n.xmag/2,n.ymag/2,n.ymag/-2,n.znear,n.zfar)),void 0!==r.name&&(e.name=r.name),P(e,r),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")},z.prototype.loadSkin=function(t){var e=this.json.skins[t],r={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return r.inverseBindMatrices=t,r}))},z.prototype.loadAnimation=function(t){for(var e=this.json,r=e.animations[t],n=[],a=[],o=[],s=[],l=[],u=0,c=r.channels.length;u<c;u++){var h=r.channels[u],p=r.samplers[h.sampler],d=h.target,m=void 0!==d.node?d.node:d.id,v=void 0!==r.parameters?r.parameters[p.input]:p.input,g=void 0!==r.parameters?r.parameters[p.output]:p.output;n.push(this.getDependency("node",m)),a.push(this.getDependency("accessor",v)),o.push(this.getDependency("accessor",g)),s.push(p),l.push(d)}return Promise.all([Promise.all(n),Promise.all(a),Promise.all(o),Promise.all(s),Promise.all(l)]).then((function(e){for(var n=e[0],a=e[1],o=e[2],s=e[3],l=e[4],u=[],c=0,h=n.length;c<h;c++){var p=n[c],d=a[c],m=o[c],v=s[c],g=l[c];if(void 0!==p){var y;switch(p.updateMatrix(),p.matrixAutoUpdate=!0,w[g.path]){case w.weights:y=i.NumberKeyframeTrack;break;case w.rotation:y=i.QuaternionKeyframeTrack;break;case w.position:case w.scale:default:y=i.VectorKeyframeTrack;break}var _=p.name?p.name:p.uuid,x=void 0!==v.interpolation?T[v.interpolation]:i.InterpolateLinear,b=[];w[g.path]===w.weights?p.traverse((function(t){!0===t.isMesh&&t.morphTargetInfluences&&b.push(t.name?t.name:t.uuid)})):b.push(_);var S=m.array;if(m.normalized){var E;if(S.constructor===Int8Array)E=1/127;else if(S.constructor===Uint8Array)E=1/255;else if(S.constructor==Int16Array)E=1/32767;else{if(S.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");E=1/65535}for(var M=new Float32Array(S.length),A=0,C=S.length;A<C;A++)M[A]=S[A]*E;S=M}for(A=0,C=b.length;A<C;A++){var P=new y(b[A]+"."+w[g.path],d.array,S,x);"CUBICSPLINE"===v.interpolation&&(P.createInterpolant=function(t){return new f(this.times,this.values,this.getValueSize()/3,t)},P.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(P)}}}var L=void 0!==r.name?r.name:"animation_"+t;return new i.AnimationClip(L,void 0,u)}))},z.prototype.loadNode=function(t){var e=this.json,n=this.extensions,a=this,o=e.meshReferences,s=e.meshUses,l=e.nodes[t];return function(){var t=[];return void 0!==l.mesh&&t.push(a.getDependency("mesh",l.mesh).then((function(t){var e;if(o[l.mesh]>1){var r=s[l.mesh]++;e=t.clone(),e.name+="_instance_"+r,e.onBeforeRender=t.onBeforeRender;for(var i=0,n=e.children.length;i<n;i++)e.children[i].name+="_instance_"+r,e.children[i].onBeforeRender=t.children[i].onBeforeRender}else e=t;return void 0!==l.weights&&e.traverse((function(t){if(t.isMesh)for(var e=0,r=l.weights.length;e<r;e++)t.morphTargetInfluences[e]=l.weights[e]})),e}))),void 0!==l.camera&&t.push(a.getDependency("camera",l.camera)),l.extensions&&l.extensions[r.KHR_LIGHTS_PUNCTUAL]&&void 0!==l.extensions[r.KHR_LIGHTS_PUNCTUAL].light&&t.push(a.getDependency("light",l.extensions[r.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(t)}().then((function(t){var e;if(e=!0===l.isBone?new i.Bone:t.length>1?new i.Group:1===t.length?t[0]:new i.Object3D,e!==t[0])for(var r=0,a=t.length;r<a;r++)e.add(t[r]);if(void 0!==l.name&&(e.userData.name=l.name,e.name=i.PropertyBinding.sanitizeNodeName(l.name)),P(e,l),l.extensions&&C(n,e,l),void 0!==l.matrix){var o=new i.Matrix4;o.fromArray(l.matrix),e.applyMatrix(o)}else void 0!==l.translation&&e.position.fromArray(l.translation),void 0!==l.rotation&&e.quaternion.fromArray(l.rotation),void 0!==l.scale&&e.scale.fromArray(l.scale);return e}))},z.prototype.loadScene=function(){function t(e,r,n,a){var o=n.nodes[e];return a.getDependency("node",e).then((function(t){return void 0===o.skin?t:a.getDependency("skin",o.skin).then((function(t){e=t;for(var r=[],i=0,n=e.joints.length;i<n;i++)r.push(a.getDependency("node",e.joints[i]));return Promise.all(r)})).then((function(r){return t.traverse((function(t){if(t.isMesh){for(var n=[],a=[],o=0,s=r.length;o<s;o++){var l=r[o];if(l){n.push(l);var u=new i.Matrix4;void 0!==e.inverseBindMatrices&&u.fromArray(e.inverseBindMatrices.array,16*o),a.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[o])}t.bind(new i.Skeleton(n,a),t.matrixWorld)}})),t}));var e})).then((function(e){r.add(e);var i=[];if(o.children)for(var s=o.children,l=0,u=s.length;l<u;l++){var c=s[l];i.push(t(c,e,n,a))}return Promise.all(i)}))}return function(e){var r=this.json,n=this.extensions,a=this.json.scenes[e],o=this,s=new i.Scene;void 0!==a.name&&(s.name=a.name),P(s,a),a.extensions&&C(n,s,a);for(var l=a.nodes||[],u=[],c=0,h=l.length;c<h;c++)u.push(t(l[c],s,r,o));return Promise.all(u).then((function(){return s}))}}(),t}();t.exports=n},bd7e:function(t,e,r){var i,n;
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */(function(a,o){"use strict";i=[r("0949")],n=function(t){return o(a,t)}.apply(e,i),void 0===n||(t.exports=n)})("undefined"!==typeof window?window:this,(function(t,e){"use strict";var r=t.jQuery,i=t.console;function n(t,e){for(var r in e)t[r]=e[r];return t}var a=Array.prototype.slice;function o(t){if(Array.isArray(t))return t;var e="object"==typeof t&&"number"==typeof t.length;return e?a.call(t):[t]}function s(t,e,a){if(!(this instanceof s))return new s(t,e,a);var l=t;"string"==typeof t&&(l=document.querySelectorAll(t)),l?(this.elements=o(l),this.options=n({},this.options),"function"==typeof e?a=e:n(this.options,e),a&&this.on("always",a),this.getImages(),r&&(this.jqDeferred=new r.Deferred),setTimeout(this.check.bind(this))):i.error("Bad element for imagesLoaded "+(l||t))}s.prototype=Object.create(e.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&l[e]){for(var r=t.querySelectorAll("img"),i=0;i<r.length;i++){var n=r[i];this.addImage(n)}if("string"==typeof this.options.background){var a=t.querySelectorAll(this.options.background);for(i=0;i<a.length;i++){var o=a[i];this.addElementBackgroundImages(o)}}}};var l={1:!0,9:!0,11:!0};function u(t){this.img=t}function c(t,e){this.url=t,this.element=e,this.img=new Image}return s.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e){var r=/url\((['"])?(.*?)\1\)/gi,i=r.exec(e.backgroundImage);while(null!==i){var n=i&&i[2];n&&this.addBackground(n,t),i=r.exec(e.backgroundImage)}}},s.prototype.addImage=function(t){var e=new u(t);this.images.push(e)},s.prototype.addBackground=function(t,e){var r=new c(t,e);this.images.push(r)},s.prototype.check=function(){var t=this;function e(e,r,i){setTimeout((function(){t.progress(e,r,i)}))}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach((function(t){t.once("progress",e),t.check()})):this.complete()},s.prototype.progress=function(t,e,r){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&i&&i.log("progress: "+r,t,e)},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},u.prototype=Object.create(e.prototype),u.prototype.check=function(){var t=this.getIsImageComplete();t?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},u.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},u.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},u.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},u.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},u.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},u.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},c.prototype=Object.create(u.prototype),c.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},c.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},c.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},s.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(r=e,r.fn.imagesLoaded=function(t,e){var i=new s(this,t,e);return i.jqDeferred.promise(r(this))})},s.makeJQueryPlugin(),s}))},bd86:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var i=r("85f2"),n=r.n(i);function a(t,e,r){return e in t?n()(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},bf54:function(t,e,r){"use strict";var i=Object.prototype.toString,n=Object.prototype.hasOwnProperty;function a(t,e){return function(){return t.apply(e,arguments)}}t.exports=function(t){if(!t)return console.warn("bindAll requires at least one argument.");var e=Array.prototype.slice.call(arguments,1);if(0===e.length)for(var r in t)n.call(t,r)&&"function"==typeof t[r]&&"[object Function]"==i.call(t[r])&&e.push(r);for(var o=0;o<e.length;o++){var s=e[o];t[s]=a(t[s],t)}}},c0e2:function(t,e){function r(){}r.prototype={on:function(t,e,r){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:r}),this},once:function(t,e,r){var i=this;function n(){i.off(t,n),e.apply(r,arguments)}return n._=e,this.on(t,n,r)},emit:function(t){var e=[].slice.call(arguments,1),r=((this.e||(this.e={}))[t]||[]).slice(),i=0,n=r.length;for(i;i<n;i++)r[i].fn.apply(r[i].ctx,e);return this},off:function(t,e){var r=this.e||(this.e={}),i=r[t],n=[];if(i&&e)for(var a=0,o=i.length;a<o;a++)i[a].fn!==e&&i[a].fn._!==e&&n.push(i[a]);return n.length?r[t]=n:delete r[t],this}},t.exports=r},c366:function(t,e,r){var i=r("6821"),n=r("9def"),a=r("77f1");t.exports=function(t){return function(e,r,o){var s,l=i(e),u=n(l.length),c=a(o,u);if(t&&r!=r){while(u>c)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===r)return t||c||0;return!t&&-1}}},c367:function(t,e,r){"use strict";var i=r("8436"),n=r("50ed"),a=r("481b"),o=r("36c3");t.exports=r("30f1")(Array,"Array",(function(t,e){this._t=o(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,n(1)):n(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},c3a1:function(t,e,r){var i=r("e6f3"),n=r("1691");t.exports=Object.keys||function(t){return i(t,n)}},c5f6:function(t,e,r){"use strict";var i=r("7726"),n=r("69a8"),a=r("2d95"),o=r("5dbc"),s=r("6a99"),l=r("79e5"),u=r("9093").f,c=r("11e9").f,h=r("86cc").f,p=r("aa77").trim,d="Number",f=i[d],m=f,v=f.prototype,g=a(r("2aeb")(v))==d,y="trim"in String.prototype,_=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():p(e,3);var r,i,n,a=e.charCodeAt(0);if(43===a||45===a){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+e}for(var o,l=e.slice(2),u=0,c=l.length;u<c;u++)if(o=l.charCodeAt(u),o<48||o>n)return NaN;return parseInt(l,i)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof f&&(g?l((function(){v.valueOf.call(r)})):a(r)!=d)?o(new m(_(e)),r,f):_(e)};for(var x,b=r("9e1e")?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;b.length>w;w++)n(m,x=b[w])&&!n(f,x)&&h(f,x,c(m,x));f.prototype=v,v.constructor=f,r("2aba")(i,d,f)}},c69a:function(t,e,r){t.exports=!r("9e1e")&&!r("79e5")((function(){return 7!=Object.defineProperty(r("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(i){"object"===typeof window&&(r=window)}t.exports=r},c8bb:function(t,e,r){t.exports=r("54a1")},ca5a:function(t,e){var r=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+i).toString(36))}},cadf:function(t,e,r){"use strict";var i=r("9c6c"),n=r("d53b"),a=r("84f2"),o=r("6821");t.exports=r("01f9")(Array,"Array",(function(t,e){this._t=o(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,n(1)):n(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},cb7c:function(t,e,r){var i=r("d3f4");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},cd1c:function(t,e,r){var i=r("e853");t.exports=function(t,e){return new(i(t))(e)}},ce10:function(t,e,r){var i=r("69a8"),n=r("6821"),a=r("c366")(!1),o=r("613b")("IE_PROTO");t.exports=function(t,e){var r,s=n(t),l=0,u=[];for(r in s)r!=o&&i(s,r)&&u.push(r);while(e.length>l)i(s,r=e[l++])&&(~a(u,r)||u.push(r));return u}},ce52:function(t,e,r){},d090:function(t,e,r){(function(e,r){t.exports=r()})(0,(function(){"use strict";var t="undefined"===typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,e="undefined"===typeof window?{document:t,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,r=function(t){for(var e=this,r=0;r<t.length;r+=1)e[r]=t[r];return e.length=t.length,this};function i(i,n){var a=[],o=0;if(i&&!n&&i instanceof r)return i;if(i)if("string"===typeof i){var s,l,u=i.trim();if(u.indexOf("<")>=0&&u.indexOf(">")>=0){var c="div";for(0===u.indexOf("<li")&&(c="ul"),0===u.indexOf("<tr")&&(c="tbody"),0!==u.indexOf("<td")&&0!==u.indexOf("<th")||(c="tr"),0===u.indexOf("<tbody")&&(c="table"),0===u.indexOf("<option")&&(c="select"),l=t.createElement(c),l.innerHTML=u,o=0;o<l.childNodes.length;o+=1)a.push(l.childNodes[o])}else for(s=n||"#"!==i[0]||i.match(/[ .<>:~]/)?(n||t).querySelectorAll(i.trim()):[t.getElementById(i.trim().split("#")[1])],o=0;o<s.length;o+=1)s[o]&&a.push(s[o])}else if(i.nodeType||i===e||i===t)a.push(i);else if(i.length>0&&i[0].nodeType)for(o=0;o<i.length;o+=1)a.push(i[o]);return new r(a)}function n(t){for(var e=[],r=0;r<t.length;r+=1)-1===e.indexOf(t[r])&&e.push(t[r]);return e}function a(t){if("undefined"===typeof t)return this;for(var e=t.split(" "),r=0;r<e.length;r+=1)for(var i=0;i<this.length;i+=1)"undefined"!==typeof this[i]&&"undefined"!==typeof this[i].classList&&this[i].classList.add(e[r]);return this}function o(t){for(var e=t.split(" "),r=0;r<e.length;r+=1)for(var i=0;i<this.length;i+=1)"undefined"!==typeof this[i]&&"undefined"!==typeof this[i].classList&&this[i].classList.remove(e[r]);return this}function s(t){return!!this[0]&&this[0].classList.contains(t)}function l(t){for(var e=t.split(" "),r=0;r<e.length;r+=1)for(var i=0;i<this.length;i+=1)"undefined"!==typeof this[i]&&"undefined"!==typeof this[i].classList&&this[i].classList.toggle(e[r]);return this}function u(t,e){var r=arguments;if(1===arguments.length&&"string"===typeof t)return this[0]?this[0].getAttribute(t):void 0;for(var i=0;i<this.length;i+=1)if(2===r.length)this[i].setAttribute(t,e);else for(var n in t)this[i][n]=t[n],this[i].setAttribute(n,t[n]);return this}function c(t){for(var e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this}function h(t,e){var r;if("undefined"!==typeof e){for(var i=0;i<this.length;i+=1)r=this[i],r.dom7ElementDataStorage||(r.dom7ElementDataStorage={}),r.dom7ElementDataStorage[t]=e;return this}if(r=this[0],r){if(r.dom7ElementDataStorage&&t in r.dom7ElementDataStorage)return r.dom7ElementDataStorage[t];var n=r.getAttribute("data-"+t);return n||void 0}}function p(t){for(var e=0;e<this.length;e+=1){var r=this[e].style;r.webkitTransform=t,r.transform=t}return this}function d(t){"string"!==typeof t&&(t+="ms");for(var e=0;e<this.length;e+=1){var r=this[e].style;r.webkitTransitionDuration=t,r.transitionDuration=t}return this}function f(){var t,e=[],r=arguments.length;while(r--)e[r]=arguments[r];var n=e[0],a=e[1],o=e[2],s=e[3];function l(t){var e=t.target;if(e){var r=t.target.dom7EventData||[];if(r.indexOf(t)<0&&r.unshift(t),i(e).is(a))o.apply(e,r);else for(var n=i(e).parents(),s=0;s<n.length;s+=1)i(n[s]).is(a)&&o.apply(n[s],r)}}function u(t){var e=t&&t.target&&t.target.dom7EventData||[];e.indexOf(t)<0&&e.unshift(t),o.apply(this,e)}"function"===typeof e[1]&&(t=e,n=t[0],o=t[1],s=t[2],a=void 0),s||(s=!1);for(var c,h=n.split(" "),p=0;p<this.length;p+=1){var d=this[p];if(a)for(c=0;c<h.length;c+=1){var f=h[c];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[f]||(d.dom7LiveListeners[f]=[]),d.dom7LiveListeners[f].push({listener:o,proxyListener:l}),d.addEventListener(f,l,s)}else for(c=0;c<h.length;c+=1){var m=h[c];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[m]||(d.dom7Listeners[m]=[]),d.dom7Listeners[m].push({listener:o,proxyListener:u}),d.addEventListener(m,u,s)}}return this}function m(){var t,e=[],r=arguments.length;while(r--)e[r]=arguments[r];var i=e[0],n=e[1],a=e[2],o=e[3];"function"===typeof e[1]&&(t=e,i=t[0],a=t[1],o=t[2],n=void 0),o||(o=!1);for(var s=i.split(" "),l=0;l<s.length;l+=1)for(var u=s[l],c=0;c<this.length;c+=1){var h=this[c],p=void 0;if(!n&&h.dom7Listeners?p=h.dom7Listeners[u]:n&&h.dom7LiveListeners&&(p=h.dom7LiveListeners[u]),p&&p.length)for(var d=p.length-1;d>=0;d-=1){var f=p[d];a&&f.listener===a?(h.removeEventListener(u,f.proxyListener,o),p.splice(d,1)):a&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===a?(h.removeEventListener(u,f.proxyListener,o),p.splice(d,1)):a||(h.removeEventListener(u,f.proxyListener,o),p.splice(d,1))}}return this}function v(){var r=[],i=arguments.length;while(i--)r[i]=arguments[i];for(var n=r[0].split(" "),a=r[1],o=0;o<n.length;o+=1)for(var s=n[o],l=0;l<this.length;l+=1){var u=this[l],c=void 0;try{c=new e.CustomEvent(s,{detail:a,bubbles:!0,cancelable:!0})}catch(h){c=t.createEvent("Event"),c.initEvent(s,!0,!0),c.detail=a}u.dom7EventData=r.filter((function(t,e){return e>0})),u.dispatchEvent(c),u.dom7EventData=[],delete u.dom7EventData}return this}function g(t){var e,r=["webkitTransitionEnd","transitionend"],i=this;function n(a){if(a.target===this)for(t.call(this,a),e=0;e<r.length;e+=1)i.off(r[e],n)}if(t)for(e=0;e<r.length;e+=1)i.on(r[e],n);return this}function y(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function _(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function x(){if(this.length>0){var r=this[0],i=r.getBoundingClientRect(),n=t.body,a=r.clientTop||n.clientTop||0,o=r.clientLeft||n.clientLeft||0,s=r===e?e.scrollY:r.scrollTop,l=r===e?e.scrollX:r.scrollLeft;return{top:i.top+s-a,left:i.left+l-o}}return null}function b(){return this[0]?e.getComputedStyle(this[0],null):{}}function w(t,r){var i;if(1===arguments.length){if("string"!==typeof t){for(i=0;i<this.length;i+=1)for(var n in t)this[i].style[n]=t[n];return this}if(this[0])return e.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"===typeof t){for(i=0;i<this.length;i+=1)this[i].style[t]=r;return this}return this}function T(t){if(!t)return this;for(var e=0;e<this.length;e+=1)if(!1===t.call(this[e],e,this[e]))return this;return this}function S(t){if("undefined"===typeof t)return this[0]?this[0].innerHTML:void 0;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function E(t){if("undefined"===typeof t)return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e+=1)this[e].textContent=t;return this}function M(n){var a,o,s=this[0];if(!s||"undefined"===typeof n)return!1;if("string"===typeof n){if(s.matches)return s.matches(n);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(n);if(s.msMatchesSelector)return s.msMatchesSelector(n);for(a=i(n),o=0;o<a.length;o+=1)if(a[o]===s)return!0;return!1}if(n===t)return s===t;if(n===e)return s===e;if(n.nodeType||n instanceof r){for(a=n.nodeType?[n]:n,o=0;o<a.length;o+=1)if(a[o]===s)return!0;return!1}return!1}function A(){var t,e=this[0];if(e){t=0;while(null!==(e=e.previousSibling))1===e.nodeType&&(t+=1);return t}}function C(t){if("undefined"===typeof t)return this;var e,i=this.length;return t>i-1?new r([]):t<0?(e=i+t,new r(e<0?[]:[this[e]])):new r([this[t]])}function P(){var e,i=[],n=arguments.length;while(n--)i[n]=arguments[n];for(var a=0;a<i.length;a+=1){e=i[a];for(var o=0;o<this.length;o+=1)if("string"===typeof e){var s=t.createElement("div");s.innerHTML=e;while(s.firstChild)this[o].appendChild(s.firstChild)}else if(e instanceof r)for(var l=0;l<e.length;l+=1)this[o].appendChild(e[l]);else this[o].appendChild(e)}return this}function L(e){var i,n;for(i=0;i<this.length;i+=1)if("string"===typeof e){var a=t.createElement("div");for(a.innerHTML=e,n=a.childNodes.length-1;n>=0;n-=1)this[i].insertBefore(a.childNodes[n],this[i].childNodes[0])}else if(e instanceof r)for(n=0;n<e.length;n+=1)this[i].insertBefore(e[n],this[i].childNodes[0]);else this[i].insertBefore(e,this[i].childNodes[0]);return this}function I(t){return this.length>0?t?this[0].nextElementSibling&&i(this[0].nextElementSibling).is(t)?new r([this[0].nextElementSibling]):new r([]):this[0].nextElementSibling?new r([this[0].nextElementSibling]):new r([]):new r([])}function k(t){var e=[],n=this[0];if(!n)return new r([]);while(n.nextElementSibling){var a=n.nextElementSibling;t?i(a).is(t)&&e.push(a):e.push(a),n=a}return new r(e)}function R(t){if(this.length>0){var e=this[0];return t?e.previousElementSibling&&i(e.previousElementSibling).is(t)?new r([e.previousElementSibling]):new r([]):e.previousElementSibling?new r([e.previousElementSibling]):new r([])}return new r([])}function O(t){var e=[],n=this[0];if(!n)return new r([]);while(n.previousElementSibling){var a=n.previousElementSibling;t?i(a).is(t)&&e.push(a):e.push(a),n=a}return new r(e)}function z(t){for(var e=[],r=0;r<this.length;r+=1)null!==this[r].parentNode&&(t?i(this[r].parentNode).is(t)&&e.push(this[r].parentNode):e.push(this[r].parentNode));return i(n(e))}function D(t){for(var e=[],r=0;r<this.length;r+=1){var a=this[r].parentNode;while(a)t?i(a).is(t)&&e.push(a):e.push(a),a=a.parentNode}return i(n(e))}function B(t){var e=this;return"undefined"===typeof t?new r([]):(e.is(t)||(e=e.parents(t).eq(0)),e)}function F(t){for(var e=[],i=0;i<this.length;i+=1)for(var n=this[i].querySelectorAll(t),a=0;a<n.length;a+=1)e.push(n[a]);return new r(e)}function N(t){for(var e=[],a=0;a<this.length;a+=1)for(var o=this[a].childNodes,s=0;s<o.length;s+=1)t?1===o[s].nodeType&&i(o[s]).is(t)&&e.push(o[s]):1===o[s].nodeType&&e.push(o[s]);return new r(n(e))}function U(){for(var t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}function V(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];var r,n,a=this;for(r=0;r<t.length;r+=1){var o=i(t[r]);for(n=0;n<o.length;n+=1)a[a.length]=o[n],a.length+=1}return a}i.fn=r.prototype,i.Class=r,i.Dom7=r;var j={addClass:a,removeClass:o,hasClass:s,toggleClass:l,attr:u,removeAttr:c,data:h,transform:p,transition:d,on:f,off:m,trigger:v,transitionEnd:g,outerWidth:y,outerHeight:_,offset:x,css:w,each:T,html:S,text:E,is:M,index:A,eq:C,append:P,prepend:L,next:I,nextAll:k,prev:R,prevAll:O,parent:z,parents:D,closest:B,find:F,children:N,remove:U,add:V,styles:b};Object.keys(j).forEach((function(t){i.fn[t]=i.fn[t]||j[t]}));var G={deleteProps:function(t){var e=t;Object.keys(e).forEach((function(t){try{e[t]=null}catch(r){}try{delete e[t]}catch(r){}}))},nextTick:function(t,e){return void 0===e&&(e=0),setTimeout(t,e)},now:function(){return Date.now()},getTranslate:function(t,r){var i,n,a;void 0===r&&(r="x");var o=e.getComputedStyle(t,null);return e.WebKitCSSMatrix?(n=o.transform||o.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map((function(t){return t.replace(",",".")})).join(", ")),a=new e.WebKitCSSMatrix("none"===n?"":n)):(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=a.toString().split(",")),"x"===r&&(n=e.WebKitCSSMatrix?a.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===r&&(n=e.WebKitCSSMatrix?a.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),n||0},parseUrlQuery:function(t){var r,i,n,a,o={},s=t||e.location.href;if("string"===typeof s&&s.length)for(s=s.indexOf("?")>-1?s.replace(/\S*\?/,""):"",i=s.split("&").filter((function(t){return""!==t})),a=i.length,r=0;r<a;r+=1)n=i[r].replace(/#\S+/g,"").split("="),o[decodeURIComponent(n[0])]="undefined"===typeof n[1]?void 0:decodeURIComponent(n[1])||"";return o},isObject:function(t){return"object"===typeof t&&null!==t&&t.constructor&&t.constructor===Object},extend:function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];for(var r=Object(t[0]),i=1;i<t.length;i+=1){var n=t[i];if(void 0!==n&&null!==n)for(var a=Object.keys(Object(n)),o=0,s=a.length;o<s;o+=1){var l=a[o],u=Object.getOwnPropertyDescriptor(n,l);void 0!==u&&u.enumerable&&(G.isObject(r[l])&&G.isObject(n[l])?G.extend(r[l],n[l]):!G.isObject(r[l])&&G.isObject(n[l])?(r[l]={},G.extend(r[l],n[l])):r[l]=n[l])}}return r}},H=function(){var r=t.createElement("div");return{touch:e.Modernizr&&!0===e.Modernizr.touch||function(){return!!(e.navigator.maxTouchPoints>0||"ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}(),pointerEvents:!!(e.navigator.pointerEnabled||e.PointerEvent||"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>0),prefixedPointerEvents:!!e.navigator.msPointerEnabled,transition:function(){var t=r.style;return"transition"in t||"webkitTransition"in t||"MozTransition"in t}(),transforms3d:e.Modernizr&&!0===e.Modernizr.csstransforms3d||function(){var t=r.style;return"webkitPerspective"in t||"MozPerspective"in t||"OPerspective"in t||"MsPerspective"in t||"perspective"in t}(),flexbox:function(){for(var t=r.style,e="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),i=0;i<e.length;i+=1)if(e[i]in t)return!0;return!1}(),observer:function(){return"MutationObserver"in e||"WebkitMutationObserver"in e}(),passiveListener:function(){var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,r)}catch(i){}return t}(),gestures:function(){return"ongesturestart"in e}()}}(),W=function(){function t(){var t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}return{isIE:!!e.navigator.userAgent.match(/Trident/g)||!!e.navigator.userAgent.match(/MSIE/g),isEdge:!!e.navigator.userAgent.match(/Edge/g),isSafari:t(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}(),q=function(t){void 0===t&&(t={});var e=this;e.params=t,e.eventsListeners={},e.params&&e.params.on&&Object.keys(e.params.on).forEach((function(t){e.on(t,e.params.on[t])}))},X={components:{configurable:!0}};function $(){var t,e,r=this,i=r.$el;t="undefined"!==typeof r.params.width?r.params.width:i[0].clientWidth,e="undefined"!==typeof r.params.height?r.params.height:i[0].clientHeight,0===t&&r.isHorizontal()||0===e&&r.isVertical()||(t=t-parseInt(i.css("padding-left"),10)-parseInt(i.css("padding-right"),10),e=e-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10),G.extend(r,{width:t,height:e,size:r.isHorizontal()?t:e}))}function Y(){var t=this,r=t.params,i=t.$wrapperEl,n=t.size,a=t.rtlTranslate,o=t.wrongRTL,s=t.virtual&&r.virtual.enabled,l=s?t.virtual.slides.length:t.slides.length,u=i.children("."+t.params.slideClass),c=s?t.virtual.slides.length:u.length,h=[],p=[],d=[],f=r.slidesOffsetBefore;"function"===typeof f&&(f=r.slidesOffsetBefore.call(t));var m=r.slidesOffsetAfter;"function"===typeof m&&(m=r.slidesOffsetAfter.call(t));var v=t.snapGrid.length,g=t.snapGrid.length,y=r.spaceBetween,_=-f,x=0,b=0;if("undefined"!==typeof n){var w,T;"string"===typeof y&&y.indexOf("%")>=0&&(y=parseFloat(y.replace("%",""))/100*n),t.virtualSize=-y,a?u.css({marginLeft:"",marginTop:""}):u.css({marginRight:"",marginBottom:""}),r.slidesPerColumn>1&&(w=Math.floor(c/r.slidesPerColumn)===c/t.params.slidesPerColumn?c:Math.ceil(c/r.slidesPerColumn)*r.slidesPerColumn,"auto"!==r.slidesPerView&&"row"===r.slidesPerColumnFill&&(w=Math.max(w,r.slidesPerView*r.slidesPerColumn)));for(var S,E=r.slidesPerColumn,M=w/E,A=Math.floor(c/r.slidesPerColumn),C=0;C<c;C+=1){T=0;var P=u.eq(C);if(r.slidesPerColumn>1){var L=void 0,I=void 0,k=void 0;if("column"===r.slidesPerColumnFill||"row"===r.slidesPerColumnFill&&r.slidesPerGroup>1){if("column"===r.slidesPerColumnFill)I=Math.floor(C/E),k=C-I*E,(I>A||I===A&&k===E-1)&&(k+=1,k>=E&&(k=0,I+=1));else{var R=Math.floor(C/r.slidesPerGroup);k=Math.floor(C/r.slidesPerView)-R*r.slidesPerColumn,I=C-k*r.slidesPerView-R*r.slidesPerView}L=I+k*w/E,P.css({"-webkit-box-ordinal-group":L,"-moz-box-ordinal-group":L,"-ms-flex-order":L,"-webkit-order":L,order:L})}else k=Math.floor(C/M),I=C-k*M;P.css("margin-"+(t.isHorizontal()?"top":"left"),0!==k&&r.spaceBetween&&r.spaceBetween+"px").attr("data-swiper-column",I).attr("data-swiper-row",k)}if("none"!==P.css("display")){if("auto"===r.slidesPerView){var O=e.getComputedStyle(P[0],null),z=P[0].style.transform,D=P[0].style.webkitTransform;if(z&&(P[0].style.transform="none"),D&&(P[0].style.webkitTransform="none"),r.roundLengths)T=t.isHorizontal()?P.outerWidth(!0):P.outerHeight(!0);else if(t.isHorizontal()){var B=parseFloat(O.getPropertyValue("width")),F=parseFloat(O.getPropertyValue("padding-left")),N=parseFloat(O.getPropertyValue("padding-right")),U=parseFloat(O.getPropertyValue("margin-left")),V=parseFloat(O.getPropertyValue("margin-right")),j=O.getPropertyValue("box-sizing");T=j&&"border-box"===j&&!W.isIE?B+U+V:B+F+N+U+V}else{var q=parseFloat(O.getPropertyValue("height")),X=parseFloat(O.getPropertyValue("padding-top")),$=parseFloat(O.getPropertyValue("padding-bottom")),Y=parseFloat(O.getPropertyValue("margin-top")),Z=parseFloat(O.getPropertyValue("margin-bottom")),J=O.getPropertyValue("box-sizing");T=J&&"border-box"===J&&!W.isIE?q+Y+Z:q+X+$+Y+Z}z&&(P[0].style.transform=z),D&&(P[0].style.webkitTransform=D),r.roundLengths&&(T=Math.floor(T))}else T=(n-(r.slidesPerView-1)*y)/r.slidesPerView,r.roundLengths&&(T=Math.floor(T)),u[C]&&(t.isHorizontal()?u[C].style.width=T+"px":u[C].style.height=T+"px");u[C]&&(u[C].swiperSlideSize=T),d.push(T),r.centeredSlides?(_=_+T/2+x/2+y,0===x&&0!==C&&(_=_-n/2-y),0===C&&(_=_-n/2-y),Math.abs(_)<.001&&(_=0),r.roundLengths&&(_=Math.floor(_)),b%r.slidesPerGroup===0&&h.push(_),p.push(_)):(r.roundLengths&&(_=Math.floor(_)),b%r.slidesPerGroup===0&&h.push(_),p.push(_),_=_+T+y),t.virtualSize+=T+y,x=T,b+=1}}if(t.virtualSize=Math.max(t.virtualSize,n)+m,a&&o&&("slide"===r.effect||"coverflow"===r.effect)&&i.css({width:t.virtualSize+r.spaceBetween+"px"}),H.flexbox&&!r.setWrapperSize||(t.isHorizontal()?i.css({width:t.virtualSize+r.spaceBetween+"px"}):i.css({height:t.virtualSize+r.spaceBetween+"px"})),r.slidesPerColumn>1&&(t.virtualSize=(T+r.spaceBetween)*w,t.virtualSize=Math.ceil(t.virtualSize/r.slidesPerColumn)-r.spaceBetween,t.isHorizontal()?i.css({width:t.virtualSize+r.spaceBetween+"px"}):i.css({height:t.virtualSize+r.spaceBetween+"px"}),r.centeredSlides)){S=[];for(var K=0;K<h.length;K+=1){var Q=h[K];r.roundLengths&&(Q=Math.floor(Q)),h[K]<t.virtualSize+h[0]&&S.push(Q)}h=S}if(!r.centeredSlides){S=[];for(var tt=0;tt<h.length;tt+=1){var et=h[tt];r.roundLengths&&(et=Math.floor(et)),h[tt]<=t.virtualSize-n&&S.push(et)}h=S,Math.floor(t.virtualSize-n)-Math.floor(h[h.length-1])>1&&h.push(t.virtualSize-n)}if(0===h.length&&(h=[0]),0!==r.spaceBetween&&(t.isHorizontal()?a?u.css({marginLeft:y+"px"}):u.css({marginRight:y+"px"}):u.css({marginBottom:y+"px"})),r.centerInsufficientSlides){var rt=0;if(d.forEach((function(t){rt+=t+(r.spaceBetween?r.spaceBetween:0)})),rt-=r.spaceBetween,rt<n){var it=(n-rt)/2;h.forEach((function(t,e){h[e]=t-it})),p.forEach((function(t,e){p[e]=t+it}))}}G.extend(t,{slides:u,snapGrid:h,slidesGrid:p,slidesSizesGrid:d}),c!==l&&t.emit("slidesLengthChange"),h.length!==v&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==g&&t.emit("slidesGridLengthChange"),(r.watchSlidesProgress||r.watchSlidesVisibility)&&t.updateSlidesOffset()}}function Z(t){var e,r=this,i=[],n=0;if("number"===typeof t?r.setTransition(t):!0===t&&r.setTransition(r.params.speed),"auto"!==r.params.slidesPerView&&r.params.slidesPerView>1)for(e=0;e<Math.ceil(r.params.slidesPerView);e+=1){var a=r.activeIndex+e;if(a>r.slides.length)break;i.push(r.slides.eq(a)[0])}else i.push(r.slides.eq(r.activeIndex)[0]);for(e=0;e<i.length;e+=1)if("undefined"!==typeof i[e]){var o=i[e].offsetHeight;n=o>n?o:n}n&&r.$wrapperEl.css("height",n+"px")}function J(){for(var t=this,e=t.slides,r=0;r<e.length;r+=1)e[r].swiperSlideOffset=t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop}function K(t){void 0===t&&(t=this&&this.translate||0);var e=this,r=e.params,n=e.slides,a=e.rtlTranslate;if(0!==n.length){"undefined"===typeof n[0].swiperSlideOffset&&e.updateSlidesOffset();var o=-t;a&&(o=t),n.removeClass(r.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(var s=0;s<n.length;s+=1){var l=n[s],u=(o+(r.centeredSlides?e.minTranslate():0)-l.swiperSlideOffset)/(l.swiperSlideSize+r.spaceBetween);if(r.watchSlidesVisibility){var c=-(o-l.swiperSlideOffset),h=c+e.slidesSizesGrid[s],p=c>=0&&c<e.size-1||h>1&&h<=e.size||c<=0&&h>=e.size;p&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(s),n.eq(s).addClass(r.slideVisibleClass))}l.progress=a?-u:u}e.visibleSlides=i(e.visibleSlides)}}function Q(t){void 0===t&&(t=this&&this.translate||0);var e=this,r=e.params,i=e.maxTranslate()-e.minTranslate(),n=e.progress,a=e.isBeginning,o=e.isEnd,s=a,l=o;0===i?(n=0,a=!0,o=!0):(n=(t-e.minTranslate())/i,a=n<=0,o=n>=1),G.extend(e,{progress:n,isBeginning:a,isEnd:o}),(r.watchSlidesProgress||r.watchSlidesVisibility)&&e.updateSlidesProgress(t),a&&!s&&e.emit("reachBeginning toEdge"),o&&!l&&e.emit("reachEnd toEdge"),(s&&!a||l&&!o)&&e.emit("fromEdge"),e.emit("progress",n)}function tt(){var t,e=this,r=e.slides,i=e.params,n=e.$wrapperEl,a=e.activeIndex,o=e.realIndex,s=e.virtual&&i.virtual.enabled;r.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),t=s?e.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+a+'"]'):r.eq(a),t.addClass(i.slideActiveClass),i.loop&&(t.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+o+'"]').addClass(i.slideDuplicateActiveClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+o+'"]').addClass(i.slideDuplicateActiveClass));var l=t.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===l.length&&(l=r.eq(0),l.addClass(i.slideNextClass));var u=t.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===u.length&&(u=r.eq(-1),u.addClass(i.slidePrevClass)),i.loop&&(l.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),u.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))}function et(t){var e,r=this,i=r.rtlTranslate?r.translate:-r.translate,n=r.slidesGrid,a=r.snapGrid,o=r.params,s=r.activeIndex,l=r.realIndex,u=r.snapIndex,c=t;if("undefined"===typeof c){for(var h=0;h<n.length;h+=1)"undefined"!==typeof n[h+1]?i>=n[h]&&i<n[h+1]-(n[h+1]-n[h])/2?c=h:i>=n[h]&&i<n[h+1]&&(c=h+1):i>=n[h]&&(c=h);o.normalizeSlideIndex&&(c<0||"undefined"===typeof c)&&(c=0)}if(e=a.indexOf(i)>=0?a.indexOf(i):Math.floor(c/o.slidesPerGroup),e>=a.length&&(e=a.length-1),c!==s){var p=parseInt(r.slides.eq(c).attr("data-swiper-slide-index")||c,10);G.extend(r,{snapIndex:e,realIndex:p,previousIndex:s,activeIndex:c}),r.emit("activeIndexChange"),r.emit("snapIndexChange"),l!==p&&r.emit("realIndexChange"),(r.initialized||r.runCallbacksOnInit)&&r.emit("slideChange")}else e!==u&&(r.snapIndex=e,r.emit("snapIndexChange"))}function rt(t){var e=this,r=e.params,n=i(t.target).closest("."+r.slideClass)[0],a=!1;if(n)for(var o=0;o<e.slides.length;o+=1)e.slides[o]===n&&(a=!0);if(!n||!a)return e.clickedSlide=void 0,void(e.clickedIndex=void 0);e.clickedSlide=n,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(i(n).attr("data-swiper-slide-index"),10):e.clickedIndex=i(n).index(),r.slideToClickedSlide&&void 0!==e.clickedIndex&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}q.prototype.on=function(t,e,r){var i=this;if("function"!==typeof e)return i;var n=r?"unshift":"push";return t.split(" ").forEach((function(t){i.eventsListeners[t]||(i.eventsListeners[t]=[]),i.eventsListeners[t][n](e)})),i},q.prototype.once=function(t,e,r){var i=this;if("function"!==typeof e)return i;function n(){var r=[],a=arguments.length;while(a--)r[a]=arguments[a];e.apply(i,r),i.off(t,n),n.f7proxy&&delete n.f7proxy}return n.f7proxy=e,i.on(t,n,r)},q.prototype.off=function(t,e){var r=this;return r.eventsListeners?(t.split(" ").forEach((function(t){"undefined"===typeof e?r.eventsListeners[t]=[]:r.eventsListeners[t]&&r.eventsListeners[t].length&&r.eventsListeners[t].forEach((function(i,n){(i===e||i.f7proxy&&i.f7proxy===e)&&r.eventsListeners[t].splice(n,1)}))})),r):r},q.prototype.emit=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];var r,i,n,a=this;if(!a.eventsListeners)return a;"string"===typeof t[0]||Array.isArray(t[0])?(r=t[0],i=t.slice(1,t.length),n=a):(r=t[0].events,i=t[0].data,n=t[0].context||a);var o=Array.isArray(r)?r:r.split(" ");return o.forEach((function(t){if(a.eventsListeners&&a.eventsListeners[t]){var e=[];a.eventsListeners[t].forEach((function(t){e.push(t)})),e.forEach((function(t){t.apply(n,i)}))}})),a},q.prototype.useModulesParams=function(t){var e=this;e.modules&&Object.keys(e.modules).forEach((function(r){var i=e.modules[r];i.params&&G.extend(t,i.params)}))},q.prototype.useModules=function(t){void 0===t&&(t={});var e=this;e.modules&&Object.keys(e.modules).forEach((function(r){var i=e.modules[r],n=t[r]||{};i.instance&&Object.keys(i.instance).forEach((function(t){var r=i.instance[t];e[t]="function"===typeof r?r.bind(e):r})),i.on&&e.on&&Object.keys(i.on).forEach((function(t){e.on(t,i.on[t])})),i.create&&i.create.bind(e)(n)}))},X.components.set=function(t){var e=this;e.use&&e.use(t)},q.installModule=function(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];var i=this;i.prototype.modules||(i.prototype.modules={});var n=t.name||Object.keys(i.prototype.modules).length+"_"+G.now();return i.prototype.modules[n]=t,t.proto&&Object.keys(t.proto).forEach((function(e){i.prototype[e]=t.proto[e]})),t.static&&Object.keys(t.static).forEach((function(e){i[e]=t.static[e]})),t.install&&t.install.apply(i,e),i},q.use=function(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];var i=this;return Array.isArray(t)?(t.forEach((function(t){return i.installModule(t)})),i):i.installModule.apply(i,[t].concat(e))},Object.defineProperties(q,X);var it={updateSize:$,updateSlides:Y,updateAutoHeight:Z,updateSlidesOffset:J,updateSlidesProgress:K,updateProgress:Q,updateSlidesClasses:tt,updateActiveIndex:et,updateClickedSlide:rt};function nt(t){void 0===t&&(t=this.isHorizontal()?"x":"y");var e=this,r=e.params,i=e.rtlTranslate,n=e.translate,a=e.$wrapperEl;if(r.virtualTranslate)return i?-n:n;var o=G.getTranslate(a[0],t);return i&&(o=-o),o||0}function at(t,e){var r,i=this,n=i.rtlTranslate,a=i.params,o=i.$wrapperEl,s=i.progress,l=0,u=0,c=0;i.isHorizontal()?l=n?-t:t:u=t,a.roundLengths&&(l=Math.floor(l),u=Math.floor(u)),a.virtualTranslate||(H.transforms3d?o.transform("translate3d("+l+"px, "+u+"px, "+c+"px)"):o.transform("translate("+l+"px, "+u+"px)")),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?l:u;var h=i.maxTranslate()-i.minTranslate();r=0===h?0:(t-i.minTranslate())/h,r!==s&&i.updateProgress(t),i.emit("setTranslate",i.translate,e)}function ot(){return-this.snapGrid[0]}function st(){return-this.snapGrid[this.snapGrid.length-1]}var lt={getTranslate:nt,setTranslate:at,minTranslate:ot,maxTranslate:st};function ut(t,e){var r=this;r.$wrapperEl.transition(t),r.emit("setTransition",t,e)}function ct(t,e){void 0===t&&(t=!0);var r=this,i=r.activeIndex,n=r.params,a=r.previousIndex;n.autoHeight&&r.updateAutoHeight();var o=e;if(o||(o=i>a?"next":i<a?"prev":"reset"),r.emit("transitionStart"),t&&i!==a){if("reset"===o)return void r.emit("slideResetTransitionStart");r.emit("slideChangeTransitionStart"),"next"===o?r.emit("slideNextTransitionStart"):r.emit("slidePrevTransitionStart")}}function ht(t,e){void 0===t&&(t=!0);var r=this,i=r.activeIndex,n=r.previousIndex;r.animating=!1,r.setTransition(0);var a=e;if(a||(a=i>n?"next":i<n?"prev":"reset"),r.emit("transitionEnd"),t&&i!==n){if("reset"===a)return void r.emit("slideResetTransitionEnd");r.emit("slideChangeTransitionEnd"),"next"===a?r.emit("slideNextTransitionEnd"):r.emit("slidePrevTransitionEnd")}}var pt={setTransition:ut,transitionStart:ct,transitionEnd:ht};function dt(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===r&&(r=!0);var n=this,a=t;a<0&&(a=0);var o=n.params,s=n.snapGrid,l=n.slidesGrid,u=n.previousIndex,c=n.activeIndex,h=n.rtlTranslate;if(n.animating&&o.preventInteractionOnTransition)return!1;var p=Math.floor(a/o.slidesPerGroup);p>=s.length&&(p=s.length-1),(c||o.initialSlide||0)===(u||0)&&r&&n.emit("beforeSlideChangeStart");var d,f=-s[p];if(n.updateProgress(f),o.normalizeSlideIndex)for(var m=0;m<l.length;m+=1)-Math.floor(100*f)>=Math.floor(100*l[m])&&(a=m);if(n.initialized&&a!==c){if(!n.allowSlideNext&&f<n.translate&&f<n.minTranslate())return!1;if(!n.allowSlidePrev&&f>n.translate&&f>n.maxTranslate()&&(c||0)!==a)return!1}return d=a>c?"next":a<c?"prev":"reset",h&&-f===n.translate||!h&&f===n.translate?(n.updateActiveIndex(a),o.autoHeight&&n.updateAutoHeight(),n.updateSlidesClasses(),"slide"!==o.effect&&n.setTranslate(f),"reset"!==d&&(n.transitionStart(r,d),n.transitionEnd(r,d)),!1):(0!==e&&H.transition?(n.setTransition(e),n.setTranslate(f),n.updateActiveIndex(a),n.updateSlidesClasses(),n.emit("beforeTransitionStart",e,i),n.transitionStart(r,d),n.animating||(n.animating=!0,n.onSlideToWrapperTransitionEnd||(n.onSlideToWrapperTransitionEnd=function(t){n&&!n.destroyed&&t.target===this&&(n.$wrapperEl[0].removeEventListener("transitionend",n.onSlideToWrapperTransitionEnd),n.$wrapperEl[0].removeEventListener("webkitTransitionEnd",n.onSlideToWrapperTransitionEnd),n.onSlideToWrapperTransitionEnd=null,delete n.onSlideToWrapperTransitionEnd,n.transitionEnd(r,d))}),n.$wrapperEl[0].addEventListener("transitionend",n.onSlideToWrapperTransitionEnd),n.$wrapperEl[0].addEventListener("webkitTransitionEnd",n.onSlideToWrapperTransitionEnd))):(n.setTransition(0),n.setTranslate(f),n.updateActiveIndex(a),n.updateSlidesClasses(),n.emit("beforeTransitionStart",e,i),n.transitionStart(r,d),n.transitionEnd(r,d)),!0)}function ft(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===r&&(r=!0);var n=this,a=t;return n.params.loop&&(a+=n.loopedSlides),n.slideTo(a,e,r,i)}function mt(t,e,r){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var i=this,n=i.params,a=i.animating;return n.loop?!a&&(i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft,i.slideTo(i.activeIndex+n.slidesPerGroup,t,e,r)):i.slideTo(i.activeIndex+n.slidesPerGroup,t,e,r)}function vt(t,e,r){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var i=this,n=i.params,a=i.animating,o=i.snapGrid,s=i.slidesGrid,l=i.rtlTranslate;if(n.loop){if(a)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}var u=l?i.translate:-i.translate;function c(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}var h,p=c(u),d=o.map((function(t){return c(t)})),f=(s.map((function(t){return c(t)})),o[d.indexOf(p)],o[d.indexOf(p)-1]);return"undefined"!==typeof f&&(h=s.indexOf(f),h<0&&(h=i.activeIndex-1)),i.slideTo(h,t,e,r)}function gt(t,e,r){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var i=this;return i.slideTo(i.activeIndex,t,e,r)}function yt(t,e,r){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var i=this,n=i.activeIndex,a=Math.floor(n/i.params.slidesPerGroup);if(a<i.snapGrid.length-1){var o=i.rtlTranslate?i.translate:-i.translate,s=i.snapGrid[a],l=i.snapGrid[a+1];o-s>(l-s)/2&&(n=i.params.slidesPerGroup)}return i.slideTo(n,t,e,r)}function _t(){var t,e=this,r=e.params,n=e.$wrapperEl,a="auto"===r.slidesPerView?e.slidesPerViewDynamic():r.slidesPerView,o=e.clickedIndex;if(r.loop){if(e.animating)return;t=parseInt(i(e.clickedSlide).attr("data-swiper-slide-index"),10),r.centeredSlides?o<e.loopedSlides-a/2||o>e.slides.length-e.loopedSlides+a/2?(e.loopFix(),o=n.children("."+r.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+r.slideDuplicateClass+")").eq(0).index(),G.nextTick((function(){e.slideTo(o)}))):e.slideTo(o):o>e.slides.length-a?(e.loopFix(),o=n.children("."+r.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+r.slideDuplicateClass+")").eq(0).index(),G.nextTick((function(){e.slideTo(o)}))):e.slideTo(o)}else e.slideTo(o)}var xt={slideTo:dt,slideToLoop:ft,slideNext:mt,slidePrev:vt,slideReset:gt,slideToClosest:yt,slideToClickedSlide:_t};function bt(){var e=this,r=e.params,n=e.$wrapperEl;n.children("."+r.slideClass+"."+r.slideDuplicateClass).remove();var a=n.children("."+r.slideClass);if(r.loopFillGroupWithBlank){var o=r.slidesPerGroup-a.length%r.slidesPerGroup;if(o!==r.slidesPerGroup){for(var s=0;s<o;s+=1){var l=i(t.createElement("div")).addClass(r.slideClass+" "+r.slideBlankClass);n.append(l)}a=n.children("."+r.slideClass)}}"auto"!==r.slidesPerView||r.loopedSlides||(r.loopedSlides=a.length),e.loopedSlides=parseInt(r.loopedSlides||r.slidesPerView,10),e.loopedSlides+=r.loopAdditionalSlides,e.loopedSlides>a.length&&(e.loopedSlides=a.length);var u=[],c=[];a.each((function(t,r){var n=i(r);t<e.loopedSlides&&c.push(r),t<a.length&&t>=a.length-e.loopedSlides&&u.push(r),n.attr("data-swiper-slide-index",t)}));for(var h=0;h<c.length;h+=1)n.append(i(c[h].cloneNode(!0)).addClass(r.slideDuplicateClass));for(var p=u.length-1;p>=0;p-=1)n.prepend(i(u[p].cloneNode(!0)).addClass(r.slideDuplicateClass))}function wt(){var t,e=this,r=e.params,i=e.activeIndex,n=e.slides,a=e.loopedSlides,o=e.allowSlidePrev,s=e.allowSlideNext,l=e.snapGrid,u=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var c=-l[i],h=c-e.getTranslate();if(i<a){t=n.length-3*a+i,t+=a;var p=e.slideTo(t,0,!1,!0);p&&0!==h&&e.setTranslate((u?-e.translate:e.translate)-h)}else if("auto"===r.slidesPerView&&i>=2*a||i>=n.length-a){t=-n.length+i+a,t+=a;var d=e.slideTo(t,0,!1,!0);d&&0!==h&&e.setTranslate((u?-e.translate:e.translate)-h)}e.allowSlidePrev=o,e.allowSlideNext=s}function Tt(){var t=this,e=t.$wrapperEl,r=t.params,i=t.slides;e.children("."+r.slideClass+"."+r.slideDuplicateClass+",."+r.slideClass+"."+r.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}var St={loopCreate:bt,loopFix:wt,loopDestroy:Tt};function Et(t){var e=this;if(!(H.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked)){var r=e.el;r.style.cursor="move",r.style.cursor=t?"-webkit-grabbing":"-webkit-grab",r.style.cursor=t?"-moz-grabbin":"-moz-grab",r.style.cursor=t?"grabbing":"grab"}}function Mt(){var t=this;H.touch||t.params.watchOverflow&&t.isLocked||(t.el.style.cursor="")}var At={setGrabCursor:Et,unsetGrabCursor:Mt};function Ct(t){var e=this,r=e.$wrapperEl,i=e.params;if(i.loop&&e.loopDestroy(),"object"===typeof t&&"length"in t)for(var n=0;n<t.length;n+=1)t[n]&&r.append(t[n]);else r.append(t);i.loop&&e.loopCreate(),i.observer&&H.observer||e.update()}function Pt(t){var e=this,r=e.params,i=e.$wrapperEl,n=e.activeIndex;r.loop&&e.loopDestroy();var a=n+1;if("object"===typeof t&&"length"in t){for(var o=0;o<t.length;o+=1)t[o]&&i.prepend(t[o]);a=n+t.length}else i.prepend(t);r.loop&&e.loopCreate(),r.observer&&H.observer||e.update(),e.slideTo(a,0,!1)}function Lt(t,e){var r=this,i=r.$wrapperEl,n=r.params,a=r.activeIndex,o=a;n.loop&&(o-=r.loopedSlides,r.loopDestroy(),r.slides=i.children("."+n.slideClass));var s=r.slides.length;if(t<=0)r.prependSlide(e);else if(t>=s)r.appendSlide(e);else{for(var l=o>t?o+1:o,u=[],c=s-1;c>=t;c-=1){var h=r.slides.eq(c);h.remove(),u.unshift(h)}if("object"===typeof e&&"length"in e){for(var p=0;p<e.length;p+=1)e[p]&&i.append(e[p]);l=o>t?o+e.length:o}else i.append(e);for(var d=0;d<u.length;d+=1)i.append(u[d]);n.loop&&r.loopCreate(),n.observer&&H.observer||r.update(),n.loop?r.slideTo(l+r.loopedSlides,0,!1):r.slideTo(l,0,!1)}}function It(t){var e=this,r=e.params,i=e.$wrapperEl,n=e.activeIndex,a=n;r.loop&&(a-=e.loopedSlides,e.loopDestroy(),e.slides=i.children("."+r.slideClass));var o,s=a;if("object"===typeof t&&"length"in t){for(var l=0;l<t.length;l+=1)o=t[l],e.slides[o]&&e.slides.eq(o).remove(),o<s&&(s-=1);s=Math.max(s,0)}else o=t,e.slides[o]&&e.slides.eq(o).remove(),o<s&&(s-=1),s=Math.max(s,0);r.loop&&e.loopCreate(),r.observer&&H.observer||e.update(),r.loop?e.slideTo(s+e.loopedSlides,0,!1):e.slideTo(s,0,!1)}function kt(){for(var t=this,e=[],r=0;r<t.slides.length;r+=1)e.push(r);t.removeSlide(e)}var Rt={appendSlide:Ct,prependSlide:Pt,addSlide:Lt,removeSlide:It,removeAllSlides:kt},Ot=function(){var r=e.navigator.userAgent,i={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:e.cordova||e.phonegap,phonegap:e.cordova||e.phonegap},n=r.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),a=r.match(/(Android);?[\s\/]+([\d.]+)?/),o=r.match(/(iPad).*OS\s([\d_]+)/),s=r.match(/(iPod)(.*OS\s([\d_]+))?/),l=!o&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/);if(n&&(i.os="windows",i.osVersion=n[2],i.windows=!0),a&&!n&&(i.os="android",i.osVersion=a[2],i.android=!0,i.androidChrome=r.toLowerCase().indexOf("chrome")>=0),(o||l||s)&&(i.os="ios",i.ios=!0),l&&!s&&(i.osVersion=l[2].replace(/_/g,"."),i.iphone=!0),o&&(i.osVersion=o[2].replace(/_/g,"."),i.ipad=!0),s&&(i.osVersion=s[3]?s[3].replace(/_/g,"."):null,i.iphone=!0),i.ios&&i.osVersion&&r.indexOf("Version/")>=0&&"10"===i.osVersion.split(".")[0]&&(i.osVersion=r.toLowerCase().split("version/")[1].split(" ")[0]),i.desktop=!(i.os||i.android||i.webView),i.webView=(l||o||s)&&r.match(/.*AppleWebKit(?!.*Safari)/i),i.os&&"ios"===i.os){var u=i.osVersion.split("."),c=t.querySelector('meta[name="viewport"]');i.minimalUi=!i.webView&&(s||l)&&(1*u[0]===7?1*u[1]>=1:1*u[0]>7)&&c&&c.getAttribute("content").indexOf("minimal-ui")>=0}return i.pixelRatio=e.devicePixelRatio||1,i}();function zt(r){var n=this,a=n.touchEventsData,o=n.params,s=n.touches;if(!n.animating||!o.preventInteractionOnTransition){var l=r;if(l.originalEvent&&(l=l.originalEvent),a.isTouchEvent="touchstart"===l.type,(a.isTouchEvent||!("which"in l)||3!==l.which)&&!(!a.isTouchEvent&&"button"in l&&l.button>0)&&(!a.isTouched||!a.isMoved))if(o.noSwiping&&i(l.target).closest(o.noSwipingSelector?o.noSwipingSelector:"."+o.noSwipingClass)[0])n.allowClick=!0;else if(!o.swipeHandler||i(l).closest(o.swipeHandler)[0]){s.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,s.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;var u=s.currentX,c=s.currentY,h=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,p=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(!h||!(u<=p||u>=e.screen.width-p)){if(G.extend(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=u,s.startY=c,a.touchStartTime=G.now(),n.allowClick=!0,n.updateSize(),n.swipeDirection=void 0,o.threshold>0&&(a.allowThresholdMove=!1),"touchstart"!==l.type){var d=!0;i(l.target).is(a.formElements)&&(d=!1),t.activeElement&&i(t.activeElement).is(a.formElements)&&t.activeElement!==l.target&&t.activeElement.blur();var f=d&&n.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||f)&&l.preventDefault()}n.emit("touchStart",l)}}}}function Dt(e){var r=this,n=r.touchEventsData,a=r.params,o=r.touches,s=r.rtlTranslate,l=e;if(l.originalEvent&&(l=l.originalEvent),n.isTouched){if(!n.isTouchEvent||"mousemove"!==l.type){var u="touchmove"===l.type?l.targetTouches[0].pageX:l.pageX,c="touchmove"===l.type?l.targetTouches[0].pageY:l.pageY;if(l.preventedByNestedSwiper)return o.startX=u,void(o.startY=c);if(!r.allowTouchMove)return r.allowClick=!1,void(n.isTouched&&(G.extend(o,{startX:u,startY:c,currentX:u,currentY:c}),n.touchStartTime=G.now()));if(n.isTouchEvent&&a.touchReleaseOnEdges&&!a.loop)if(r.isVertical()){if(c<o.startY&&r.translate<=r.maxTranslate()||c>o.startY&&r.translate>=r.minTranslate())return n.isTouched=!1,void(n.isMoved=!1)}else if(u<o.startX&&r.translate<=r.maxTranslate()||u>o.startX&&r.translate>=r.minTranslate())return;if(n.isTouchEvent&&t.activeElement&&l.target===t.activeElement&&i(l.target).is(n.formElements))return n.isMoved=!0,void(r.allowClick=!1);if(n.allowTouchCallbacks&&r.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){o.currentX=u,o.currentY=c;var h=o.currentX-o.startX,p=o.currentY-o.startY;if(!(r.params.threshold&&Math.sqrt(Math.pow(h,2)+Math.pow(p,2))<r.params.threshold)){var d;if("undefined"===typeof n.isScrolling)r.isHorizontal()&&o.currentY===o.startY||r.isVertical()&&o.currentX===o.startX?n.isScrolling=!1:h*h+p*p>=25&&(d=180*Math.atan2(Math.abs(p),Math.abs(h))/Math.PI,n.isScrolling=r.isHorizontal()?d>a.touchAngle:90-d>a.touchAngle);if(n.isScrolling&&r.emit("touchMoveOpposite",l),"undefined"===typeof n.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(n.startMoving=!0)),n.isScrolling)n.isTouched=!1;else if(n.startMoving){r.allowClick=!1,l.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&l.stopPropagation(),n.isMoved||(a.loop&&r.loopFix(),n.startTranslate=r.getTranslate(),r.setTransition(0),r.animating&&r.$wrapperEl.trigger("webkitTransitionEnd transitionend"),n.allowMomentumBounce=!1,!a.grabCursor||!0!==r.allowSlideNext&&!0!==r.allowSlidePrev||r.setGrabCursor(!0),r.emit("sliderFirstMove",l)),r.emit("sliderMove",l),n.isMoved=!0;var f=r.isHorizontal()?h:p;o.diff=f,f*=a.touchRatio,s&&(f=-f),r.swipeDirection=f>0?"prev":"next",n.currentTranslate=f+n.startTranslate;var m=!0,v=a.resistanceRatio;if(a.touchReleaseOnEdges&&(v=0),f>0&&n.currentTranslate>r.minTranslate()?(m=!1,a.resistance&&(n.currentTranslate=r.minTranslate()-1+Math.pow(-r.minTranslate()+n.startTranslate+f,v))):f<0&&n.currentTranslate<r.maxTranslate()&&(m=!1,a.resistance&&(n.currentTranslate=r.maxTranslate()+1-Math.pow(r.maxTranslate()-n.startTranslate-f,v))),m&&(l.preventedByNestedSwiper=!0),!r.allowSlideNext&&"next"===r.swipeDirection&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&"prev"===r.swipeDirection&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),a.threshold>0){if(!(Math.abs(f)>a.threshold||n.allowThresholdMove))return void(n.currentTranslate=n.startTranslate);if(!n.allowThresholdMove)return n.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,n.currentTranslate=n.startTranslate,void(o.diff=r.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}a.followFinger&&((a.freeMode||a.watchSlidesProgress||a.watchSlidesVisibility)&&(r.updateActiveIndex(),r.updateSlidesClasses()),a.freeMode&&(0===n.velocities.length&&n.velocities.push({position:o[r.isHorizontal()?"startX":"startY"],time:n.touchStartTime}),n.velocities.push({position:o[r.isHorizontal()?"currentX":"currentY"],time:G.now()})),r.updateProgress(n.currentTranslate),r.setTranslate(n.currentTranslate))}}}}}else n.startMoving&&n.isScrolling&&r.emit("touchMoveOpposite",l)}function Bt(t){var e=this,r=e.touchEventsData,i=e.params,n=e.touches,a=e.rtlTranslate,o=e.$wrapperEl,s=e.slidesGrid,l=e.snapGrid,u=t;if(u.originalEvent&&(u=u.originalEvent),r.allowTouchCallbacks&&e.emit("touchEnd",u),r.allowTouchCallbacks=!1,!r.isTouched)return r.isMoved&&i.grabCursor&&e.setGrabCursor(!1),r.isMoved=!1,void(r.startMoving=!1);i.grabCursor&&r.isMoved&&r.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);var c,h=G.now(),p=h-r.touchStartTime;if(e.allowClick&&(e.updateClickedSlide(u),e.emit("tap",u),p<300&&h-r.lastClickTime>300&&(r.clickTimeout&&clearTimeout(r.clickTimeout),r.clickTimeout=G.nextTick((function(){e&&!e.destroyed&&e.emit("click",u)}),300)),p<300&&h-r.lastClickTime<300&&(r.clickTimeout&&clearTimeout(r.clickTimeout),e.emit("doubleTap",u))),r.lastClickTime=G.now(),G.nextTick((function(){e.destroyed||(e.allowClick=!0)})),!r.isTouched||!r.isMoved||!e.swipeDirection||0===n.diff||r.currentTranslate===r.startTranslate)return r.isTouched=!1,r.isMoved=!1,void(r.startMoving=!1);if(r.isTouched=!1,r.isMoved=!1,r.startMoving=!1,c=i.followFinger?a?e.translate:-e.translate:-r.currentTranslate,i.freeMode){if(c<-e.minTranslate())return void e.slideTo(e.activeIndex);if(c>-e.maxTranslate())return void(e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1));if(i.freeModeMomentum){if(r.velocities.length>1){var d=r.velocities.pop(),f=r.velocities.pop(),m=d.position-f.position,v=d.time-f.time;e.velocity=m/v,e.velocity/=2,Math.abs(e.velocity)<i.freeModeMinimumVelocity&&(e.velocity=0),(v>150||G.now()-d.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=i.freeModeMomentumVelocityRatio,r.velocities.length=0;var g=1e3*i.freeModeMomentumRatio,y=e.velocity*g,_=e.translate+y;a&&(_=-_);var x,b,w=!1,T=20*Math.abs(e.velocity)*i.freeModeMomentumBounceRatio;if(_<e.maxTranslate())i.freeModeMomentumBounce?(_+e.maxTranslate()<-T&&(_=e.maxTranslate()-T),x=e.maxTranslate(),w=!0,r.allowMomentumBounce=!0):_=e.maxTranslate(),i.loop&&i.centeredSlides&&(b=!0);else if(_>e.minTranslate())i.freeModeMomentumBounce?(_-e.minTranslate()>T&&(_=e.minTranslate()+T),x=e.minTranslate(),w=!0,r.allowMomentumBounce=!0):_=e.minTranslate(),i.loop&&i.centeredSlides&&(b=!0);else if(i.freeModeSticky){for(var S,E=0;E<l.length;E+=1)if(l[E]>-_){S=E;break}_=Math.abs(l[S]-_)<Math.abs(l[S-1]-_)||"next"===e.swipeDirection?l[S]:l[S-1],_=-_}if(b&&e.once("transitionEnd",(function(){e.loopFix()})),0!==e.velocity)g=a?Math.abs((-_-e.translate)/e.velocity):Math.abs((_-e.translate)/e.velocity);else if(i.freeModeSticky)return void e.slideToClosest();i.freeModeMomentumBounce&&w?(e.updateProgress(x),e.setTransition(g),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating=!0,o.transitionEnd((function(){e&&!e.destroyed&&r.allowMomentumBounce&&(e.emit("momentumBounce"),e.setTransition(i.speed),e.setTranslate(x),o.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()})))}))):e.velocity?(e.updateProgress(_),e.setTransition(g),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,o.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()})))):e.updateProgress(_),e.updateActiveIndex(),e.updateSlidesClasses()}else if(i.freeModeSticky)return void e.slideToClosest();(!i.freeModeMomentum||p>=i.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}else{for(var M=0,A=e.slidesSizesGrid[0],C=0;C<s.length;C+=i.slidesPerGroup)"undefined"!==typeof s[C+i.slidesPerGroup]?c>=s[C]&&c<s[C+i.slidesPerGroup]&&(M=C,A=s[C+i.slidesPerGroup]-s[C]):c>=s[C]&&(M=C,A=s[s.length-1]-s[s.length-2]);var P=(c-s[M])/A;if(p>i.longSwipesMs){if(!i.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(P>=i.longSwipesRatio?e.slideTo(M+i.slidesPerGroup):e.slideTo(M)),"prev"===e.swipeDirection&&(P>1-i.longSwipesRatio?e.slideTo(M+i.slidesPerGroup):e.slideTo(M))}else{if(!i.shortSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&e.slideTo(M+i.slidesPerGroup),"prev"===e.swipeDirection&&e.slideTo(M)}}}function Ft(){var t=this,e=t.params,r=t.el;if(!r||0!==r.offsetWidth){e.breakpoints&&t.setBreakpoint();var i=t.allowSlideNext,n=t.allowSlidePrev,a=t.snapGrid;if(t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),e.freeMode){var o=Math.min(Math.max(t.translate,t.maxTranslate()),t.minTranslate());t.setTranslate(o),t.updateActiveIndex(),t.updateSlidesClasses(),e.autoHeight&&t.updateAutoHeight()}else t.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0);t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=n,t.allowSlideNext=i,t.params.watchOverflow&&a!==t.snapGrid&&t.checkOverflow()}}function Nt(t){var e=this;e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function Ut(){var e=this,r=e.params,i=e.touchEvents,n=e.el,a=e.wrapperEl;e.onTouchStart=zt.bind(e),e.onTouchMove=Dt.bind(e),e.onTouchEnd=Bt.bind(e),e.onClick=Nt.bind(e);var o="container"===r.touchEventsTarget?n:a,s=!!r.nested;if(H.touch||!H.pointerEvents&&!H.prefixedPointerEvents){if(H.touch){var l=!("touchstart"!==i.start||!H.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};o.addEventListener(i.start,e.onTouchStart,l),o.addEventListener(i.move,e.onTouchMove,H.passiveListener?{passive:!1,capture:s}:s),o.addEventListener(i.end,e.onTouchEnd,l)}(r.simulateTouch&&!Ot.ios&&!Ot.android||r.simulateTouch&&!H.touch&&Ot.ios)&&(o.addEventListener("mousedown",e.onTouchStart,!1),t.addEventListener("mousemove",e.onTouchMove,s),t.addEventListener("mouseup",e.onTouchEnd,!1))}else o.addEventListener(i.start,e.onTouchStart,!1),t.addEventListener(i.move,e.onTouchMove,s),t.addEventListener(i.end,e.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&o.addEventListener("click",e.onClick,!0),e.on(Ot.ios||Ot.android?"resize orientationchange observerUpdate":"resize observerUpdate",Ft,!0)}function Vt(){var e=this,r=e.params,i=e.touchEvents,n=e.el,a=e.wrapperEl,o="container"===r.touchEventsTarget?n:a,s=!!r.nested;if(H.touch||!H.pointerEvents&&!H.prefixedPointerEvents){if(H.touch){var l=!("onTouchStart"!==i.start||!H.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};o.removeEventListener(i.start,e.onTouchStart,l),o.removeEventListener(i.move,e.onTouchMove,s),o.removeEventListener(i.end,e.onTouchEnd,l)}(r.simulateTouch&&!Ot.ios&&!Ot.android||r.simulateTouch&&!H.touch&&Ot.ios)&&(o.removeEventListener("mousedown",e.onTouchStart,!1),t.removeEventListener("mousemove",e.onTouchMove,s),t.removeEventListener("mouseup",e.onTouchEnd,!1))}else o.removeEventListener(i.start,e.onTouchStart,!1),t.removeEventListener(i.move,e.onTouchMove,s),t.removeEventListener(i.end,e.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&o.removeEventListener("click",e.onClick,!0),e.off(Ot.ios||Ot.android?"resize orientationchange observerUpdate":"resize observerUpdate",Ft)}var jt={attachEvents:Ut,detachEvents:Vt};function Gt(){var t=this,e=t.activeIndex,r=t.initialized,i=t.loopedSlides;void 0===i&&(i=0);var n=t.params,a=n.breakpoints;if(a&&(!a||0!==Object.keys(a).length)){var o=t.getBreakpoint(a);if(o&&t.currentBreakpoint!==o){var s=o in a?a[o]:void 0;s&&["slidesPerView","spaceBetween","slidesPerGroup"].forEach((function(t){var e=s[t];"undefined"!==typeof e&&(s[t]="slidesPerView"!==t||"AUTO"!==e&&"auto"!==e?"slidesPerView"===t?parseFloat(e):parseInt(e,10):"auto")}));var l=s||t.originalParams,u=l.direction&&l.direction!==n.direction,c=n.loop&&(l.slidesPerView!==n.slidesPerView||u);u&&r&&t.changeDirection(),G.extend(t.params,l),G.extend(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),t.currentBreakpoint=o,c&&r&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-i+t.loopedSlides,0,!1)),t.emit("breakpoint",l)}}}function Ht(t){var r=this;if(t){var i=!1,n=[];Object.keys(t).forEach((function(t){n.push(t)})),n.sort((function(t,e){return parseInt(t,10)-parseInt(e,10)}));for(var a=0;a<n.length;a+=1){var o=n[a];r.params.breakpointsInverse?o<=e.innerWidth&&(i=o):o>=e.innerWidth&&!i&&(i=o)}return i||"max"}}var Wt={setBreakpoint:Gt,getBreakpoint:Ht};function qt(){var t=this,e=t.classNames,r=t.params,i=t.rtl,n=t.$el,a=[];a.push("initialized"),a.push(r.direction),r.freeMode&&a.push("free-mode"),H.flexbox||a.push("no-flexbox"),r.autoHeight&&a.push("autoheight"),i&&a.push("rtl"),r.slidesPerColumn>1&&a.push("multirow"),Ot.android&&a.push("android"),Ot.ios&&a.push("ios"),(W.isIE||W.isEdge)&&(H.pointerEvents||H.prefixedPointerEvents)&&a.push("wp8-"+r.direction),a.forEach((function(t){e.push(r.containerModifierClass+t)})),n.addClass(e.join(" "))}function Xt(){var t=this,e=t.$el,r=t.classNames;e.removeClass(r.join(" "))}var $t={addClasses:qt,removeClasses:Xt};function Yt(t,r,i,n,a,o){var s;function l(){o&&o()}t.complete&&a?l():r?(s=new e.Image,s.onload=l,s.onerror=l,n&&(s.sizes=n),i&&(s.srcset=i),r&&(s.src=r)):l()}function Zt(){var t=this;function e(){"undefined"!==typeof t&&null!==t&&t&&!t.destroyed&&(void 0!==t.imagesLoaded&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}t.imagesToLoad=t.$el.find("img");for(var r=0;r<t.imagesToLoad.length;r+=1){var i=t.imagesToLoad[r];t.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,e)}}var Jt={loadImage:Yt,preloadImages:Zt};function Kt(){var t=this,e=t.isLocked;t.isLocked=1===t.snapGrid.length,t.allowSlideNext=!t.isLocked,t.allowSlidePrev=!t.isLocked,e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock"),e&&e!==t.isLocked&&(t.isEnd=!1,t.navigation.update())}var Qt={checkOverflow:Kt},te={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsInverse:!1,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!0,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},ee={update:it,translate:lt,transition:pt,slide:xt,loop:St,grabCursor:At,manipulation:Rt,events:jt,breakpoints:Wt,checkOverflow:Qt,classes:$t,images:Jt},re={},ie=function(t){function e(){var r,n,a,o=[],s=arguments.length;while(s--)o[s]=arguments[s];1===o.length&&o[0].constructor&&o[0].constructor===Object?a=o[0]:(r=o,n=r[0],a=r[1]),a||(a={}),a=G.extend({},a),n&&!a.el&&(a.el=n),t.call(this,a),Object.keys(ee).forEach((function(t){Object.keys(ee[t]).forEach((function(r){e.prototype[r]||(e.prototype[r]=ee[t][r])}))}));var l=this;"undefined"===typeof l.modules&&(l.modules={}),Object.keys(l.modules).forEach((function(t){var e=l.modules[t];if(e.params){var r=Object.keys(e.params)[0],i=e.params[r];if("object"!==typeof i||null===i)return;if(!(r in a&&"enabled"in i))return;!0===a[r]&&(a[r]={enabled:!0}),"object"!==typeof a[r]||"enabled"in a[r]||(a[r].enabled=!0),a[r]||(a[r]={enabled:!1})}}));var u=G.extend({},te);l.useModulesParams(u),l.params=G.extend({},u,re,a),l.originalParams=G.extend({},l.params),l.passedParams=G.extend({},a),l.$=i;var c=i(l.params.el);if(n=c[0],n){if(c.length>1){var h=[];return c.each((function(t,r){var i=G.extend({},a,{el:r});h.push(new e(i))})),h}n.swiper=l,c.data("swiper",l);var p=c.children("."+l.params.wrapperClass);return G.extend(l,{$el:c,el:n,$wrapperEl:p,wrapperEl:p[0],classNames:[],slides:i(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===l.params.direction},isVertical:function(){return"vertical"===l.params.direction},rtl:"rtl"===n.dir.toLowerCase()||"rtl"===c.css("direction"),rtlTranslate:"horizontal"===l.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===c.css("direction")),wrongRTL:"-webkit-box"===p.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEvents:function(){var t=["touchstart","touchmove","touchend"],e=["mousedown","mousemove","mouseup"];return H.pointerEvents?e=["pointerdown","pointermove","pointerup"]:H.prefixedPointerEvents&&(e=["MSPointerDown","MSPointerMove","MSPointerUp"]),l.touchEventsTouch={start:t[0],move:t[1],end:t[2]},l.touchEventsDesktop={start:e[0],move:e[1],end:e[2]},H.touch||!l.params.simulateTouch?l.touchEventsTouch:l.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video",lastClickTime:G.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.useModules(),l.params.init&&l.init(),l}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return e.prototype.slidesPerViewDynamic=function(){var t=this,e=t.params,r=t.slides,i=t.slidesGrid,n=t.size,a=t.activeIndex,o=1;if(e.centeredSlides){for(var s,l=r[a].swiperSlideSize,u=a+1;u<r.length;u+=1)r[u]&&!s&&(l+=r[u].swiperSlideSize,o+=1,l>n&&(s=!0));for(var c=a-1;c>=0;c-=1)r[c]&&!s&&(l+=r[c].swiperSlideSize,o+=1,l>n&&(s=!0))}else for(var h=a+1;h<r.length;h+=1)i[h]-i[a]<n&&(o+=1);return o},e.prototype.update=function(){var t=this;if(t&&!t.destroyed){var e,r=t.snapGrid,i=t.params;i.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.params.freeMode?(n(),t.params.autoHeight&&t.updateAutoHeight()):(e=("auto"===t.params.slidesPerView||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),e||n()),i.watchOverflow&&r!==t.snapGrid&&t.checkOverflow(),t.emit("update")}function n(){var e=t.rtlTranslate?-1*t.translate:t.translate,r=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(r),t.updateActiveIndex(),t.updateSlidesClasses()}},e.prototype.changeDirection=function(t,e){void 0===e&&(e=!0);var r=this,i=r.params.direction;return t||(t="horizontal"===i?"vertical":"horizontal"),t===i||"horizontal"!==t&&"vertical"!==t?r:(r.$el.removeClass(""+r.params.containerModifierClass+i+" wp8-"+i).addClass(""+r.params.containerModifierClass+t),(W.isIE||W.isEdge)&&(H.pointerEvents||H.prefixedPointerEvents)&&r.$el.addClass(r.params.containerModifierClass+"wp8-"+t),r.params.direction=t,r.slides.each((function(e,r){"vertical"===t?r.style.width="":r.style.height=""})),r.emit("changeDirection"),e&&r.update(),r)},e.prototype.init=function(){var t=this;t.initialized||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit),t.attachEvents(),t.initialized=!0,t.emit("init"))},e.prototype.destroy=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var r=this,i=r.params,n=r.$el,a=r.$wrapperEl,o=r.slides;return"undefined"===typeof r.params||r.destroyed?null:(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),e&&(r.removeClasses(),n.removeAttr("style"),a.removeAttr("style"),o&&o.length&&o.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index").removeAttr("data-swiper-column").removeAttr("data-swiper-row")),r.emit("destroy"),Object.keys(r.eventsListeners).forEach((function(t){r.off(t)})),!1!==t&&(r.$el[0].swiper=null,r.$el.data("swiper",null),G.deleteProps(r)),r.destroyed=!0,null)},e.extendDefaults=function(t){G.extend(re,t)},r.extendedDefaults.get=function(){return re},r.defaults.get=function(){return te},r.Class.get=function(){return t},r.$.get=function(){return i},Object.defineProperties(e,r),e}(q),ne={name:"device",proto:{device:Ot},static:{device:Ot}},ae={name:"support",proto:{support:H},static:{support:H}},oe={name:"browser",proto:{browser:W},static:{browser:W}},se={name:"resize",create:function(){var t=this;G.extend(t,{resize:{resizeHandler:function(){t&&!t.destroyed&&t.initialized&&(t.emit("beforeResize"),t.emit("resize"))},orientationChangeHandler:function(){t&&!t.destroyed&&t.initialized&&t.emit("orientationchange")}}})},on:{init:function(){var t=this;e.addEventListener("resize",t.resize.resizeHandler),e.addEventListener("orientationchange",t.resize.orientationChangeHandler)},destroy:function(){var t=this;e.removeEventListener("resize",t.resize.resizeHandler),e.removeEventListener("orientationchange",t.resize.orientationChangeHandler)}}},le={func:e.MutationObserver||e.WebkitMutationObserver,attach:function(t,r){void 0===r&&(r={});var i=this,n=le.func,a=new n((function(t){if(1!==t.length){var r=function(){i.emit("observerUpdate",t[0])};e.requestAnimationFrame?e.requestAnimationFrame(r):e.setTimeout(r,0)}else i.emit("observerUpdate",t[0])}));a.observe(t,{attributes:"undefined"===typeof r.attributes||r.attributes,childList:"undefined"===typeof r.childList||r.childList,characterData:"undefined"===typeof r.characterData||r.characterData}),i.observer.observers.push(a)},init:function(){var t=this;if(H.observer&&t.params.observer){if(t.params.observeParents)for(var e=t.$el.parents(),r=0;r<e.length;r+=1)t.observer.attach(e[r]);t.observer.attach(t.$el[0],{childList:t.params.observeSlideChildren}),t.observer.attach(t.$wrapperEl[0],{attributes:!1})}},destroy:function(){var t=this;t.observer.observers.forEach((function(t){t.disconnect()})),t.observer.observers=[]}},ue={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){var t=this;G.extend(t,{observer:{init:le.init.bind(t),attach:le.attach.bind(t),destroy:le.destroy.bind(t),observers:[]}})},on:{init:function(){var t=this;t.observer.init()},destroy:function(){var t=this;t.observer.destroy()}}},ce={update:function(t){var e=this,r=e.params,i=r.slidesPerView,n=r.slidesPerGroup,a=r.centeredSlides,o=e.params.virtual,s=o.addSlidesBefore,l=o.addSlidesAfter,u=e.virtual,c=u.from,h=u.to,p=u.slides,d=u.slidesGrid,f=u.renderSlide,m=u.offset;e.updateActiveIndex();var v,g,y,_=e.activeIndex||0;v=e.rtlTranslate?"right":e.isHorizontal()?"left":"top",a?(g=Math.floor(i/2)+n+s,y=Math.floor(i/2)+n+l):(g=i+(n-1)+s,y=n+l);var x=Math.max((_||0)-y,0),b=Math.min((_||0)+g,p.length-1),w=(e.slidesGrid[x]||0)-(e.slidesGrid[0]||0);function T(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load()}if(G.extend(e.virtual,{from:x,to:b,offset:w,slidesGrid:e.slidesGrid}),c===x&&h===b&&!t)return e.slidesGrid!==d&&w!==m&&e.slides.css(v,w+"px"),void e.updateProgress();if(e.params.virtual.renderExternal)return e.params.virtual.renderExternal.call(e,{offset:w,from:x,to:b,slides:function(){for(var t=[],e=x;e<=b;e+=1)t.push(p[e]);return t}()}),void T();var S=[],E=[];if(t)e.$wrapperEl.find("."+e.params.slideClass).remove();else for(var M=c;M<=h;M+=1)(M<x||M>b)&&e.$wrapperEl.find("."+e.params.slideClass+'[data-swiper-slide-index="'+M+'"]').remove();for(var A=0;A<p.length;A+=1)A>=x&&A<=b&&("undefined"===typeof h||t?E.push(A):(A>h&&E.push(A),A<c&&S.push(A)));E.forEach((function(t){e.$wrapperEl.append(f(p[t],t))})),S.sort((function(t,e){return e-t})).forEach((function(t){e.$wrapperEl.prepend(f(p[t],t))})),e.$wrapperEl.children(".swiper-slide").css(v,w+"px"),T()},renderSlide:function(t,e){var r=this,n=r.params.virtual;if(n.cache&&r.virtual.cache[e])return r.virtual.cache[e];var a=n.renderSlide?i(n.renderSlide.call(r,t,e)):i('<div class="'+r.params.slideClass+'" data-swiper-slide-index="'+e+'">'+t+"</div>");return a.attr("data-swiper-slide-index")||a.attr("data-swiper-slide-index",e),n.cache&&(r.virtual.cache[e]=a),a},appendSlide:function(t){var e=this;if("object"===typeof t&&"length"in t)for(var r=0;r<t.length;r+=1)t[r]&&e.virtual.slides.push(t[r]);else e.virtual.slides.push(t);e.virtual.update(!0)},prependSlide:function(t){var e=this,r=e.activeIndex,i=r+1,n=1;if(Array.isArray(t)){for(var a=0;a<t.length;a+=1)t[a]&&e.virtual.slides.unshift(t[a]);i=r+t.length,n=t.length}else e.virtual.slides.unshift(t);if(e.params.virtual.cache){var o=e.virtual.cache,s={};Object.keys(o).forEach((function(t){s[parseInt(t,10)+n]=o[t]})),e.virtual.cache=s}e.virtual.update(!0),e.slideTo(i,0)},removeSlide:function(t){var e=this;if("undefined"!==typeof t&&null!==t){var r=e.activeIndex;if(Array.isArray(t))for(var i=t.length-1;i>=0;i-=1)e.virtual.slides.splice(t[i],1),e.params.virtual.cache&&delete e.virtual.cache[t[i]],t[i]<r&&(r-=1),r=Math.max(r,0);else e.virtual.slides.splice(t,1),e.params.virtual.cache&&delete e.virtual.cache[t],t<r&&(r-=1),r=Math.max(r,0);e.virtual.update(!0),e.slideTo(r,0)}},removeAllSlides:function(){var t=this;t.virtual.slides=[],t.params.virtual.cache&&(t.virtual.cache={}),t.virtual.update(!0),t.slideTo(0,0)}},he={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){var t=this;G.extend(t,{virtual:{update:ce.update.bind(t),appendSlide:ce.appendSlide.bind(t),prependSlide:ce.prependSlide.bind(t),removeSlide:ce.removeSlide.bind(t),removeAllSlides:ce.removeAllSlides.bind(t),renderSlide:ce.renderSlide.bind(t),slides:t.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){var t=this;if(t.params.virtual.enabled){t.classNames.push(t.params.containerModifierClass+"virtual");var e={watchSlidesProgress:!0};G.extend(t.params,e),G.extend(t.originalParams,e),t.params.initialSlide||t.virtual.update()}},setTranslate:function(){var t=this;t.params.virtual.enabled&&t.virtual.update()}}},pe={handle:function(r){var i=this,n=i.rtlTranslate,a=r;a.originalEvent&&(a=a.originalEvent);var o=a.keyCode||a.charCode;if(!i.allowSlideNext&&(i.isHorizontal()&&39===o||i.isVertical()&&40===o||34===o))return!1;if(!i.allowSlidePrev&&(i.isHorizontal()&&37===o||i.isVertical()&&38===o||33===o))return!1;if(!(a.shiftKey||a.altKey||a.ctrlKey||a.metaKey)&&(!t.activeElement||!t.activeElement.nodeName||"input"!==t.activeElement.nodeName.toLowerCase()&&"textarea"!==t.activeElement.nodeName.toLowerCase())){if(i.params.keyboard.onlyInViewport&&(33===o||34===o||37===o||39===o||38===o||40===o)){var s=!1;if(i.$el.parents("."+i.params.slideClass).length>0&&0===i.$el.parents("."+i.params.slideActiveClass).length)return;var l=e.innerWidth,u=e.innerHeight,c=i.$el.offset();n&&(c.left-=i.$el[0].scrollLeft);for(var h=[[c.left,c.top],[c.left+i.width,c.top],[c.left,c.top+i.height],[c.left+i.width,c.top+i.height]],p=0;p<h.length;p+=1){var d=h[p];d[0]>=0&&d[0]<=l&&d[1]>=0&&d[1]<=u&&(s=!0)}if(!s)return}i.isHorizontal()?(33!==o&&34!==o&&37!==o&&39!==o||(a.preventDefault?a.preventDefault():a.returnValue=!1),(34!==o&&39!==o||n)&&(33!==o&&37!==o||!n)||i.slideNext(),(33!==o&&37!==o||n)&&(34!==o&&39!==o||!n)||i.slidePrev()):(33!==o&&34!==o&&38!==o&&40!==o||(a.preventDefault?a.preventDefault():a.returnValue=!1),34!==o&&40!==o||i.slideNext(),33!==o&&38!==o||i.slidePrev()),i.emit("keyPress",o)}},enable:function(){var e=this;e.keyboard.enabled||(i(t).on("keydown",e.keyboard.handle),e.keyboard.enabled=!0)},disable:function(){var e=this;e.keyboard.enabled&&(i(t).off("keydown",e.keyboard.handle),e.keyboard.enabled=!1)}},de={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){var t=this;G.extend(t,{keyboard:{enabled:!1,enable:pe.enable.bind(t),disable:pe.disable.bind(t),handle:pe.handle.bind(t)}})},on:{init:function(){var t=this;t.params.keyboard.enabled&&t.keyboard.enable()},destroy:function(){var t=this;t.keyboard.enabled&&t.keyboard.disable()}}};function fe(){var e="onwheel",r=e in t;if(!r){var i=t.createElement("div");i.setAttribute(e,"return;"),r="function"===typeof i[e]}return!r&&t.implementation&&t.implementation.hasFeature&&!0!==t.implementation.hasFeature("","")&&(r=t.implementation.hasFeature("Events.wheel","3.0")),r}var me={lastScrollTime:G.now(),event:function(){return e.navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":fe()?"wheel":"mousewheel"}(),normalize:function(t){var e=10,r=40,i=800,n=0,a=0,o=0,s=0;return"detail"in t&&(a=t.detail),"wheelDelta"in t&&(a=-t.wheelDelta/120),"wheelDeltaY"in t&&(a=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(n=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(n=a,a=0),o=n*e,s=a*e,"deltaY"in t&&(s=t.deltaY),"deltaX"in t&&(o=t.deltaX),(o||s)&&t.deltaMode&&(1===t.deltaMode?(o*=r,s*=r):(o*=i,s*=i)),o&&!n&&(n=o<1?-1:1),s&&!a&&(a=s<1?-1:1),{spinX:n,spinY:a,pixelX:o,pixelY:s}},handleMouseEnter:function(){var t=this;t.mouseEntered=!0},handleMouseLeave:function(){var t=this;t.mouseEntered=!1},handle:function(t){var r=t,i=this,n=i.params.mousewheel;if(!i.mouseEntered&&!n.releaseOnEdges)return!0;r.originalEvent&&(r=r.originalEvent);var a=0,o=i.rtlTranslate?-1:1,s=me.normalize(r);if(n.forceToAxis)if(i.isHorizontal()){if(!(Math.abs(s.pixelX)>Math.abs(s.pixelY)))return!0;a=s.pixelX*o}else{if(!(Math.abs(s.pixelY)>Math.abs(s.pixelX)))return!0;a=s.pixelY}else a=Math.abs(s.pixelX)>Math.abs(s.pixelY)?-s.pixelX*o:-s.pixelY;if(0===a)return!0;if(n.invert&&(a=-a),i.params.freeMode){i.params.loop&&i.loopFix();var l=i.getTranslate()+a*n.sensitivity,u=i.isBeginning,c=i.isEnd;if(l>=i.minTranslate()&&(l=i.minTranslate()),l<=i.maxTranslate()&&(l=i.maxTranslate()),i.setTransition(0),i.setTranslate(l),i.updateProgress(),i.updateActiveIndex(),i.updateSlidesClasses(),(!u&&i.isBeginning||!c&&i.isEnd)&&i.updateSlidesClasses(),i.params.freeModeSticky&&(clearTimeout(i.mousewheel.timeout),i.mousewheel.timeout=G.nextTick((function(){i.slideToClosest()}),300)),i.emit("scroll",r),i.params.autoplay&&i.params.autoplayDisableOnInteraction&&i.autoplay.stop(),l===i.minTranslate()||l===i.maxTranslate())return!0}else{if(G.now()-i.mousewheel.lastScrollTime>60)if(a<0)if(i.isEnd&&!i.params.loop||i.animating){if(n.releaseOnEdges)return!0}else i.slideNext(),i.emit("scroll",r);else if(i.isBeginning&&!i.params.loop||i.animating){if(n.releaseOnEdges)return!0}else i.slidePrev(),i.emit("scroll",r);i.mousewheel.lastScrollTime=(new e.Date).getTime()}return r.preventDefault?r.preventDefault():r.returnValue=!1,!1},enable:function(){var t=this;if(!me.event)return!1;if(t.mousewheel.enabled)return!1;var e=t.$el;return"container"!==t.params.mousewheel.eventsTarged&&(e=i(t.params.mousewheel.eventsTarged)),e.on("mouseenter",t.mousewheel.handleMouseEnter),e.on("mouseleave",t.mousewheel.handleMouseLeave),e.on(me.event,t.mousewheel.handle),t.mousewheel.enabled=!0,!0},disable:function(){var t=this;if(!me.event)return!1;if(!t.mousewheel.enabled)return!1;var e=t.$el;return"container"!==t.params.mousewheel.eventsTarged&&(e=i(t.params.mousewheel.eventsTarged)),e.off(me.event,t.mousewheel.handle),t.mousewheel.enabled=!1,!0}},ve={name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){var t=this;G.extend(t,{mousewheel:{enabled:!1,enable:me.enable.bind(t),disable:me.disable.bind(t),handle:me.handle.bind(t),handleMouseEnter:me.handleMouseEnter.bind(t),handleMouseLeave:me.handleMouseLeave.bind(t),lastScrollTime:G.now()}})},on:{init:function(){var t=this;t.params.mousewheel.enabled&&t.mousewheel.enable()},destroy:function(){var t=this;t.mousewheel.enabled&&t.mousewheel.disable()}}},ge={update:function(){var t=this,e=t.params.navigation;if(!t.params.loop){var r=t.navigation,i=r.$nextEl,n=r.$prevEl;n&&n.length>0&&(t.isBeginning?n.addClass(e.disabledClass):n.removeClass(e.disabledClass),n[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](e.lockClass)),i&&i.length>0&&(t.isEnd?i.addClass(e.disabledClass):i.removeClass(e.disabledClass),i[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](e.lockClass))}},onPrevClick:function(t){var e=this;t.preventDefault(),e.isBeginning&&!e.params.loop||e.slidePrev()},onNextClick:function(t){var e=this;t.preventDefault(),e.isEnd&&!e.params.loop||e.slideNext()},init:function(){var t,e,r=this,n=r.params.navigation;(n.nextEl||n.prevEl)&&(n.nextEl&&(t=i(n.nextEl),r.params.uniqueNavElements&&"string"===typeof n.nextEl&&t.length>1&&1===r.$el.find(n.nextEl).length&&(t=r.$el.find(n.nextEl))),n.prevEl&&(e=i(n.prevEl),r.params.uniqueNavElements&&"string"===typeof n.prevEl&&e.length>1&&1===r.$el.find(n.prevEl).length&&(e=r.$el.find(n.prevEl))),t&&t.length>0&&t.on("click",r.navigation.onNextClick),e&&e.length>0&&e.on("click",r.navigation.onPrevClick),G.extend(r.navigation,{$nextEl:t,nextEl:t&&t[0],$prevEl:e,prevEl:e&&e[0]}))},destroy:function(){var t=this,e=t.navigation,r=e.$nextEl,i=e.$prevEl;r&&r.length&&(r.off("click",t.navigation.onNextClick),r.removeClass(t.params.navigation.disabledClass)),i&&i.length&&(i.off("click",t.navigation.onPrevClick),i.removeClass(t.params.navigation.disabledClass))}},ye={name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){var t=this;G.extend(t,{navigation:{init:ge.init.bind(t),update:ge.update.bind(t),destroy:ge.destroy.bind(t),onNextClick:ge.onNextClick.bind(t),onPrevClick:ge.onPrevClick.bind(t)}})},on:{init:function(){var t=this;t.navigation.init(),t.navigation.update()},toEdge:function(){var t=this;t.navigation.update()},fromEdge:function(){var t=this;t.navigation.update()},destroy:function(){var t=this;t.navigation.destroy()},click:function(t){var e,r=this,n=r.navigation,a=n.$nextEl,o=n.$prevEl;!r.params.navigation.hideOnClick||i(t.target).is(o)||i(t.target).is(a)||(a?e=a.hasClass(r.params.navigation.hiddenClass):o&&(e=o.hasClass(r.params.navigation.hiddenClass)),!0===e?r.emit("navigationShow",r):r.emit("navigationHide",r),a&&a.toggleClass(r.params.navigation.hiddenClass),o&&o.toggleClass(r.params.navigation.hiddenClass))}}},_e={update:function(){var t=this,e=t.rtl,r=t.params.pagination;if(r.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var n,a=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,o=t.pagination.$el,s=t.params.loop?Math.ceil((a-2*t.loopedSlides)/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(n=Math.ceil((t.activeIndex-t.loopedSlides)/t.params.slidesPerGroup),n>a-1-2*t.loopedSlides&&(n-=a-2*t.loopedSlides),n>s-1&&(n-=s),n<0&&"bullets"!==t.params.paginationType&&(n=s+n)):n="undefined"!==typeof t.snapIndex?t.snapIndex:t.activeIndex||0,"bullets"===r.type&&t.pagination.bullets&&t.pagination.bullets.length>0){var l,u,c,h=t.pagination.bullets;if(r.dynamicBullets&&(t.pagination.bulletSize=h.eq(0)[t.isHorizontal()?"outerWidth":"outerHeight"](!0),o.css(t.isHorizontal()?"width":"height",t.pagination.bulletSize*(r.dynamicMainBullets+4)+"px"),r.dynamicMainBullets>1&&void 0!==t.previousIndex&&(t.pagination.dynamicBulletIndex+=n-t.previousIndex,t.pagination.dynamicBulletIndex>r.dynamicMainBullets-1?t.pagination.dynamicBulletIndex=r.dynamicMainBullets-1:t.pagination.dynamicBulletIndex<0&&(t.pagination.dynamicBulletIndex=0)),l=n-t.pagination.dynamicBulletIndex,u=l+(Math.min(h.length,r.dynamicMainBullets)-1),c=(u+l)/2),h.removeClass(r.bulletActiveClass+" "+r.bulletActiveClass+"-next "+r.bulletActiveClass+"-next-next "+r.bulletActiveClass+"-prev "+r.bulletActiveClass+"-prev-prev "+r.bulletActiveClass+"-main"),o.length>1)h.each((function(t,e){var a=i(e),o=a.index();o===n&&a.addClass(r.bulletActiveClass),r.dynamicBullets&&(o>=l&&o<=u&&a.addClass(r.bulletActiveClass+"-main"),o===l&&a.prev().addClass(r.bulletActiveClass+"-prev").prev().addClass(r.bulletActiveClass+"-prev-prev"),o===u&&a.next().addClass(r.bulletActiveClass+"-next").next().addClass(r.bulletActiveClass+"-next-next"))}));else{var p=h.eq(n);if(p.addClass(r.bulletActiveClass),r.dynamicBullets){for(var d=h.eq(l),f=h.eq(u),m=l;m<=u;m+=1)h.eq(m).addClass(r.bulletActiveClass+"-main");d.prev().addClass(r.bulletActiveClass+"-prev").prev().addClass(r.bulletActiveClass+"-prev-prev"),f.next().addClass(r.bulletActiveClass+"-next").next().addClass(r.bulletActiveClass+"-next-next")}}if(r.dynamicBullets){var v=Math.min(h.length,r.dynamicMainBullets+4),g=(t.pagination.bulletSize*v-t.pagination.bulletSize)/2-c*t.pagination.bulletSize,y=e?"right":"left";h.css(t.isHorizontal()?y:"top",g+"px")}}if("fraction"===r.type&&(o.find("."+r.currentClass).text(r.formatFractionCurrent(n+1)),o.find("."+r.totalClass).text(r.formatFractionTotal(s))),"progressbar"===r.type){var _;_=r.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";var x=(n+1)/s,b=1,w=1;"horizontal"===_?b=x:w=x,o.find("."+r.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+b+") scaleY("+w+")").transition(t.params.speed)}"custom"===r.type&&r.renderCustom?(o.html(r.renderCustom(t,n+1,s)),t.emit("paginationRender",t,o[0])):t.emit("paginationUpdate",t,o[0]),o[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](r.lockClass)}},render:function(){var t=this,e=t.params.pagination;if(e.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var r=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,i=t.pagination.$el,n="";if("bullets"===e.type){for(var a=t.params.loop?Math.ceil((r-2*t.loopedSlides)/t.params.slidesPerGroup):t.snapGrid.length,o=0;o<a;o+=1)e.renderBullet?n+=e.renderBullet.call(t,o,e.bulletClass):n+="<"+e.bulletElement+' class="'+e.bulletClass+'"></'+e.bulletElement+">";i.html(n),t.pagination.bullets=i.find("."+e.bulletClass)}"fraction"===e.type&&(n=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):'<span class="'+e.currentClass+'"></span> / <span class="'+e.totalClass+'"></span>',i.html(n)),"progressbar"===e.type&&(n=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):'<span class="'+e.progressbarFillClass+'"></span>',i.html(n)),"custom"!==e.type&&t.emit("paginationRender",t.pagination.$el[0])}},init:function(){var t=this,e=t.params.pagination;if(e.el){var r=i(e.el);0!==r.length&&(t.params.uniqueNavElements&&"string"===typeof e.el&&r.length>1&&1===t.$el.find(e.el).length&&(r=t.$el.find(e.el)),"bullets"===e.type&&e.clickable&&r.addClass(e.clickableClass),r.addClass(e.modifierClass+e.type),"bullets"===e.type&&e.dynamicBullets&&(r.addClass(""+e.modifierClass+e.type+"-dynamic"),t.pagination.dynamicBulletIndex=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&r.addClass(e.progressbarOppositeClass),e.clickable&&r.on("click","."+e.bulletClass,(function(e){e.preventDefault();var r=i(this).index()*t.params.slidesPerGroup;t.params.loop&&(r+=t.loopedSlides),t.slideTo(r)})),G.extend(t.pagination,{$el:r,el:r[0]}))}},destroy:function(){var t=this,e=t.params.pagination;if(e.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var r=t.pagination.$el;r.removeClass(e.hiddenClass),r.removeClass(e.modifierClass+e.type),t.pagination.bullets&&t.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&r.off("click","."+e.bulletClass)}}},xe={name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(t){return t},formatFractionTotal:function(t){return t},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){var t=this;G.extend(t,{pagination:{init:_e.init.bind(t),render:_e.render.bind(t),update:_e.update.bind(t),destroy:_e.destroy.bind(t),dynamicBulletIndex:0}})},on:{init:function(){var t=this;t.pagination.init(),t.pagination.render(),t.pagination.update()},activeIndexChange:function(){var t=this;t.params.loop?t.pagination.update():"undefined"===typeof t.snapIndex&&t.pagination.update()},snapIndexChange:function(){var t=this;t.params.loop||t.pagination.update()},slidesLengthChange:function(){var t=this;t.params.loop&&(t.pagination.render(),t.pagination.update())},snapGridLengthChange:function(){var t=this;t.params.loop||(t.pagination.render(),t.pagination.update())},destroy:function(){var t=this;t.pagination.destroy()},click:function(t){var e=this;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!i(t.target).hasClass(e.params.pagination.bulletClass)){var r=e.pagination.$el.hasClass(e.params.pagination.hiddenClass);!0===r?e.emit("paginationShow",e):e.emit("paginationHide",e),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}},be={setTranslate:function(){var t=this;if(t.params.scrollbar.el&&t.scrollbar.el){var e=t.scrollbar,r=t.rtlTranslate,i=t.progress,n=e.dragSize,a=e.trackSize,o=e.$dragEl,s=e.$el,l=t.params.scrollbar,u=n,c=(a-n)*i;r?(c=-c,c>0?(u=n-c,c=0):-c+n>a&&(u=a+c)):c<0?(u=n+c,c=0):c+n>a&&(u=a-c),t.isHorizontal()?(H.transforms3d?o.transform("translate3d("+c+"px, 0, 0)"):o.transform("translateX("+c+"px)"),o[0].style.width=u+"px"):(H.transforms3d?o.transform("translate3d(0px, "+c+"px, 0)"):o.transform("translateY("+c+"px)"),o[0].style.height=u+"px"),l.hide&&(clearTimeout(t.scrollbar.timeout),s[0].style.opacity=1,t.scrollbar.timeout=setTimeout((function(){s[0].style.opacity=0,s.transition(400)}),1e3))}},setTransition:function(t){var e=this;e.params.scrollbar.el&&e.scrollbar.el&&e.scrollbar.$dragEl.transition(t)},updateSize:function(){var t=this;if(t.params.scrollbar.el&&t.scrollbar.el){var e=t.scrollbar,r=e.$dragEl,i=e.$el;r[0].style.width="",r[0].style.height="";var n,a=t.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,o=t.size/t.virtualSize,s=o*(a/t.size);n="auto"===t.params.scrollbar.dragSize?a*o:parseInt(t.params.scrollbar.dragSize,10),t.isHorizontal()?r[0].style.width=n+"px":r[0].style.height=n+"px",i[0].style.display=o>=1?"none":"",t.params.scrollbar.hide&&(i[0].style.opacity=0),G.extend(e,{trackSize:a,divider:o,moveDivider:s,dragSize:n}),e.$el[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](t.params.scrollbar.lockClass)}},getPointerPosition:function(t){var e=this;return e.isHorizontal()?"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].pageX:t.pageX||t.clientX:"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].pageY:t.pageY||t.clientY},setDragPosition:function(t){var e,r=this,i=r.scrollbar,n=r.rtlTranslate,a=i.$el,o=i.dragSize,s=i.trackSize,l=i.dragStartPos;e=(i.getPointerPosition(t)-a.offset()[r.isHorizontal()?"left":"top"]-(null!==l?l:o/2))/(s-o),e=Math.max(Math.min(e,1),0),n&&(e=1-e);var u=r.minTranslate()+(r.maxTranslate()-r.minTranslate())*e;r.updateProgress(u),r.setTranslate(u),r.updateActiveIndex(),r.updateSlidesClasses()},onDragStart:function(t){var e=this,r=e.params.scrollbar,i=e.scrollbar,n=e.$wrapperEl,a=i.$el,o=i.$dragEl;e.scrollbar.isTouched=!0,e.scrollbar.dragStartPos=t.target===o[0]||t.target===o?i.getPointerPosition(t)-t.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,t.preventDefault(),t.stopPropagation(),n.transition(100),o.transition(100),i.setDragPosition(t),clearTimeout(e.scrollbar.dragTimeout),a.transition(0),r.hide&&a.css("opacity",1),e.emit("scrollbarDragStart",t)},onDragMove:function(t){var e=this,r=e.scrollbar,i=e.$wrapperEl,n=r.$el,a=r.$dragEl;e.scrollbar.isTouched&&(t.preventDefault?t.preventDefault():t.returnValue=!1,r.setDragPosition(t),i.transition(0),n.transition(0),a.transition(0),e.emit("scrollbarDragMove",t))},onDragEnd:function(t){var e=this,r=e.params.scrollbar,i=e.scrollbar,n=i.$el;e.scrollbar.isTouched&&(e.scrollbar.isTouched=!1,r.hide&&(clearTimeout(e.scrollbar.dragTimeout),e.scrollbar.dragTimeout=G.nextTick((function(){n.css("opacity",0),n.transition(400)}),1e3)),e.emit("scrollbarDragEnd",t),r.snapOnRelease&&e.slideToClosest())},enableDraggable:function(){var e=this;if(e.params.scrollbar.el){var r=e.scrollbar,i=e.touchEventsTouch,n=e.touchEventsDesktop,a=e.params,o=r.$el,s=o[0],l=!(!H.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},u=!(!H.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};H.touch?(s.addEventListener(i.start,e.scrollbar.onDragStart,l),s.addEventListener(i.move,e.scrollbar.onDragMove,l),s.addEventListener(i.end,e.scrollbar.onDragEnd,u)):(s.addEventListener(n.start,e.scrollbar.onDragStart,l),t.addEventListener(n.move,e.scrollbar.onDragMove,l),t.addEventListener(n.end,e.scrollbar.onDragEnd,u))}},disableDraggable:function(){var e=this;if(e.params.scrollbar.el){var r=e.scrollbar,i=e.touchEventsTouch,n=e.touchEventsDesktop,a=e.params,o=r.$el,s=o[0],l=!(!H.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},u=!(!H.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};H.touch?(s.removeEventListener(i.start,e.scrollbar.onDragStart,l),s.removeEventListener(i.move,e.scrollbar.onDragMove,l),s.removeEventListener(i.end,e.scrollbar.onDragEnd,u)):(s.removeEventListener(n.start,e.scrollbar.onDragStart,l),t.removeEventListener(n.move,e.scrollbar.onDragMove,l),t.removeEventListener(n.end,e.scrollbar.onDragEnd,u))}},init:function(){var t=this;if(t.params.scrollbar.el){var e=t.scrollbar,r=t.$el,n=t.params.scrollbar,a=i(n.el);t.params.uniqueNavElements&&"string"===typeof n.el&&a.length>1&&1===r.find(n.el).length&&(a=r.find(n.el));var o=a.find("."+t.params.scrollbar.dragClass);0===o.length&&(o=i('<div class="'+t.params.scrollbar.dragClass+'"></div>'),a.append(o)),G.extend(e,{$el:a,el:a[0],$dragEl:o,dragEl:o[0]}),n.draggable&&e.enableDraggable()}},destroy:function(){var t=this;t.scrollbar.disableDraggable()}},we={name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){var t=this;G.extend(t,{scrollbar:{init:be.init.bind(t),destroy:be.destroy.bind(t),updateSize:be.updateSize.bind(t),setTranslate:be.setTranslate.bind(t),setTransition:be.setTransition.bind(t),enableDraggable:be.enableDraggable.bind(t),disableDraggable:be.disableDraggable.bind(t),setDragPosition:be.setDragPosition.bind(t),getPointerPosition:be.getPointerPosition.bind(t),onDragStart:be.onDragStart.bind(t),onDragMove:be.onDragMove.bind(t),onDragEnd:be.onDragEnd.bind(t),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){var t=this;t.scrollbar.init(),t.scrollbar.updateSize(),t.scrollbar.setTranslate()},update:function(){var t=this;t.scrollbar.updateSize()},resize:function(){var t=this;t.scrollbar.updateSize()},observerUpdate:function(){var t=this;t.scrollbar.updateSize()},setTranslate:function(){var t=this;t.scrollbar.setTranslate()},setTransition:function(t){var e=this;e.scrollbar.setTransition(t)},destroy:function(){var t=this;t.scrollbar.destroy()}}},Te={setTransform:function(t,e){var r=this,n=r.rtl,a=i(t),o=n?-1:1,s=a.attr("data-swiper-parallax")||"0",l=a.attr("data-swiper-parallax-x"),u=a.attr("data-swiper-parallax-y"),c=a.attr("data-swiper-parallax-scale"),h=a.attr("data-swiper-parallax-opacity");if(l||u?(l=l||"0",u=u||"0"):r.isHorizontal()?(l=s,u="0"):(u=s,l="0"),l=l.indexOf("%")>=0?parseInt(l,10)*e*o+"%":l*e*o+"px",u=u.indexOf("%")>=0?parseInt(u,10)*e+"%":u*e+"px","undefined"!==typeof h&&null!==h){var p=h-(h-1)*(1-Math.abs(e));a[0].style.opacity=p}if("undefined"===typeof c||null===c)a.transform("translate3d("+l+", "+u+", 0px)");else{var d=c-(c-1)*(1-Math.abs(e));a.transform("translate3d("+l+", "+u+", 0px) scale("+d+")")}},setTranslate:function(){var t=this,e=t.$el,r=t.slides,n=t.progress,a=t.snapGrid;e.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e,r){t.parallax.setTransform(r,n)})),r.each((function(e,r){var o=r.progress;t.params.slidesPerGroup>1&&"auto"!==t.params.slidesPerView&&(o+=Math.ceil(e/2)-n*(a.length-1)),o=Math.min(Math.max(o,-1),1),i(r).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e,r){t.parallax.setTransform(r,o)}))}))},setTransition:function(t){void 0===t&&(t=this.params.speed);var e=this,r=e.$el;r.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e,r){var n=i(r),a=parseInt(n.attr("data-swiper-parallax-duration"),10)||t;0===t&&(a=0),n.transition(a)}))}},Se={name:"parallax",params:{parallax:{enabled:!1}},create:function(){var t=this;G.extend(t,{parallax:{setTransform:Te.setTransform.bind(t),setTranslate:Te.setTranslate.bind(t),setTransition:Te.setTransition.bind(t)}})},on:{beforeInit:function(){var t=this;t.params.parallax.enabled&&(t.params.watchSlidesProgress=!0,t.originalParams.watchSlidesProgress=!0)},init:function(){var t=this;t.params.parallax.enabled&&t.parallax.setTranslate()},setTranslate:function(){var t=this;t.params.parallax.enabled&&t.parallax.setTranslate()},setTransition:function(t){var e=this;e.params.parallax.enabled&&e.parallax.setTransition(t)}}},Ee={getDistanceBetweenTouches:function(t){if(t.targetTouches.length<2)return 1;var e=t.targetTouches[0].pageX,r=t.targetTouches[0].pageY,i=t.targetTouches[1].pageX,n=t.targetTouches[1].pageY,a=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-r,2));return a},onGestureStart:function(t){var e=this,r=e.params.zoom,n=e.zoom,a=n.gesture;if(n.fakeGestureTouched=!1,n.fakeGestureMoved=!1,!H.gestures){if("touchstart"!==t.type||"touchstart"===t.type&&t.targetTouches.length<2)return;n.fakeGestureTouched=!0,a.scaleStart=Ee.getDistanceBetweenTouches(t)}a.$slideEl&&a.$slideEl.length||(a.$slideEl=i(t.target).closest(".swiper-slide"),0===a.$slideEl.length&&(a.$slideEl=e.slides.eq(e.activeIndex)),a.$imageEl=a.$slideEl.find("img, svg, canvas"),a.$imageWrapEl=a.$imageEl.parent("."+r.containerClass),a.maxRatio=a.$imageWrapEl.attr("data-swiper-zoom")||r.maxRatio,0!==a.$imageWrapEl.length)?(a.$imageEl.transition(0),e.zoom.isScaling=!0):a.$imageEl=void 0},onGestureChange:function(t){var e=this,r=e.params.zoom,i=e.zoom,n=i.gesture;if(!H.gestures){if("touchmove"!==t.type||"touchmove"===t.type&&t.targetTouches.length<2)return;i.fakeGestureMoved=!0,n.scaleMove=Ee.getDistanceBetweenTouches(t)}n.$imageEl&&0!==n.$imageEl.length&&(H.gestures?i.scale=t.scale*i.currentScale:i.scale=n.scaleMove/n.scaleStart*i.currentScale,i.scale>n.maxRatio&&(i.scale=n.maxRatio-1+Math.pow(i.scale-n.maxRatio+1,.5)),i.scale<r.minRatio&&(i.scale=r.minRatio+1-Math.pow(r.minRatio-i.scale+1,.5)),n.$imageEl.transform("translate3d(0,0,0) scale("+i.scale+")"))},onGestureEnd:function(t){var e=this,r=e.params.zoom,i=e.zoom,n=i.gesture;if(!H.gestures){if(!i.fakeGestureTouched||!i.fakeGestureMoved)return;if("touchend"!==t.type||"touchend"===t.type&&t.changedTouches.length<2&&!Ot.android)return;i.fakeGestureTouched=!1,i.fakeGestureMoved=!1}n.$imageEl&&0!==n.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,n.maxRatio),r.minRatio),n.$imageEl.transition(e.params.speed).transform("translate3d(0,0,0) scale("+i.scale+")"),i.currentScale=i.scale,i.isScaling=!1,1===i.scale&&(n.$slideEl=void 0))},onTouchStart:function(t){var e=this,r=e.zoom,i=r.gesture,n=r.image;i.$imageEl&&0!==i.$imageEl.length&&(n.isTouched||(Ot.android&&t.preventDefault(),n.isTouched=!0,n.touchesStart.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,n.touchesStart.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))},onTouchMove:function(t){var e=this,r=e.zoom,i=r.gesture,n=r.image,a=r.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(e.allowClick=!1,n.isTouched&&i.$slideEl)){n.isMoved||(n.width=i.$imageEl[0].offsetWidth,n.height=i.$imageEl[0].offsetHeight,n.startX=G.getTranslate(i.$imageWrapEl[0],"x")||0,n.startY=G.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),e.rtl&&(n.startX=-n.startX,n.startY=-n.startY));var o=n.width*r.scale,s=n.height*r.scale;if(!(o<i.slideWidth&&s<i.slideHeight)){if(n.minX=Math.min(i.slideWidth/2-o/2,0),n.maxX=-n.minX,n.minY=Math.min(i.slideHeight/2-s/2,0),n.maxY=-n.minY,n.touchesCurrent.x="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,n.touchesCurrent.y="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,!n.isMoved&&!r.isScaling){if(e.isHorizontal()&&(Math.floor(n.minX)===Math.floor(n.startX)&&n.touchesCurrent.x<n.touchesStart.x||Math.floor(n.maxX)===Math.floor(n.startX)&&n.touchesCurrent.x>n.touchesStart.x))return void(n.isTouched=!1);if(!e.isHorizontal()&&(Math.floor(n.minY)===Math.floor(n.startY)&&n.touchesCurrent.y<n.touchesStart.y||Math.floor(n.maxY)===Math.floor(n.startY)&&n.touchesCurrent.y>n.touchesStart.y))return void(n.isTouched=!1)}t.preventDefault(),t.stopPropagation(),n.isMoved=!0,n.currentX=n.touchesCurrent.x-n.touchesStart.x+n.startX,n.currentY=n.touchesCurrent.y-n.touchesStart.y+n.startY,n.currentX<n.minX&&(n.currentX=n.minX+1-Math.pow(n.minX-n.currentX+1,.8)),n.currentX>n.maxX&&(n.currentX=n.maxX-1+Math.pow(n.currentX-n.maxX+1,.8)),n.currentY<n.minY&&(n.currentY=n.minY+1-Math.pow(n.minY-n.currentY+1,.8)),n.currentY>n.maxY&&(n.currentY=n.maxY-1+Math.pow(n.currentY-n.maxY+1,.8)),a.prevPositionX||(a.prevPositionX=n.touchesCurrent.x),a.prevPositionY||(a.prevPositionY=n.touchesCurrent.y),a.prevTime||(a.prevTime=Date.now()),a.x=(n.touchesCurrent.x-a.prevPositionX)/(Date.now()-a.prevTime)/2,a.y=(n.touchesCurrent.y-a.prevPositionY)/(Date.now()-a.prevTime)/2,Math.abs(n.touchesCurrent.x-a.prevPositionX)<2&&(a.x=0),Math.abs(n.touchesCurrent.y-a.prevPositionY)<2&&(a.y=0),a.prevPositionX=n.touchesCurrent.x,a.prevPositionY=n.touchesCurrent.y,a.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+n.currentX+"px, "+n.currentY+"px,0)")}}},onTouchEnd:function(){var t=this,e=t.zoom,r=e.gesture,i=e.image,n=e.velocity;if(r.$imageEl&&0!==r.$imageEl.length){if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;var a=300,o=300,s=n.x*a,l=i.currentX+s,u=n.y*o,c=i.currentY+u;0!==n.x&&(a=Math.abs((l-i.currentX)/n.x)),0!==n.y&&(o=Math.abs((c-i.currentY)/n.y));var h=Math.max(a,o);i.currentX=l,i.currentY=c;var p=i.width*e.scale,d=i.height*e.scale;i.minX=Math.min(r.slideWidth/2-p/2,0),i.maxX=-i.minX,i.minY=Math.min(r.slideHeight/2-d/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),r.$imageWrapEl.transition(h).transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}},onTransitionEnd:function(){var t=this,e=t.zoom,r=e.gesture;r.$slideEl&&t.previousIndex!==t.activeIndex&&(r.$imageEl.transform("translate3d(0,0,0) scale(1)"),r.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,r.$slideEl=void 0,r.$imageEl=void 0,r.$imageWrapEl=void 0)},toggle:function(t){var e=this,r=e.zoom;r.scale&&1!==r.scale?r.out():r.in(t)},in:function(t){var e,r,n,a,o,s,l,u,c,h,p,d,f,m,v,g,y,_,x=this,b=x.zoom,w=x.params.zoom,T=b.gesture,S=b.image;(T.$slideEl||(T.$slideEl=x.clickedSlide?i(x.clickedSlide):x.slides.eq(x.activeIndex),T.$imageEl=T.$slideEl.find("img, svg, canvas"),T.$imageWrapEl=T.$imageEl.parent("."+w.containerClass)),T.$imageEl&&0!==T.$imageEl.length)&&(T.$slideEl.addClass(""+w.zoomedSlideClass),"undefined"===typeof S.touchesStart.x&&t?(e="touchend"===t.type?t.changedTouches[0].pageX:t.pageX,r="touchend"===t.type?t.changedTouches[0].pageY:t.pageY):(e=S.touchesStart.x,r=S.touchesStart.y),b.scale=T.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,b.currentScale=T.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,t?(y=T.$slideEl[0].offsetWidth,_=T.$slideEl[0].offsetHeight,n=T.$slideEl.offset().left,a=T.$slideEl.offset().top,o=n+y/2-e,s=a+_/2-r,c=T.$imageEl[0].offsetWidth,h=T.$imageEl[0].offsetHeight,p=c*b.scale,d=h*b.scale,f=Math.min(y/2-p/2,0),m=Math.min(_/2-d/2,0),v=-f,g=-m,l=o*b.scale,u=s*b.scale,l<f&&(l=f),l>v&&(l=v),u<m&&(u=m),u>g&&(u=g)):(l=0,u=0),T.$imageWrapEl.transition(300).transform("translate3d("+l+"px, "+u+"px,0)"),T.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+b.scale+")"))},out:function(){var t=this,e=t.zoom,r=t.params.zoom,n=e.gesture;n.$slideEl||(n.$slideEl=t.clickedSlide?i(t.clickedSlide):t.slides.eq(t.activeIndex),n.$imageEl=n.$slideEl.find("img, svg, canvas"),n.$imageWrapEl=n.$imageEl.parent("."+r.containerClass)),n.$imageEl&&0!==n.$imageEl.length&&(e.scale=1,e.currentScale=1,n.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),n.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),n.$slideEl.removeClass(""+r.zoomedSlideClass),n.$slideEl=void 0)},enable:function(){var t=this,e=t.zoom;if(!e.enabled){e.enabled=!0;var r=!("touchstart"!==t.touchEvents.start||!H.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1};H.gestures?(t.$wrapperEl.on("gesturestart",".swiper-slide",e.onGestureStart,r),t.$wrapperEl.on("gesturechange",".swiper-slide",e.onGestureChange,r),t.$wrapperEl.on("gestureend",".swiper-slide",e.onGestureEnd,r)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.on(t.touchEvents.start,".swiper-slide",e.onGestureStart,r),t.$wrapperEl.on(t.touchEvents.move,".swiper-slide",e.onGestureChange,r),t.$wrapperEl.on(t.touchEvents.end,".swiper-slide",e.onGestureEnd,r)),t.$wrapperEl.on(t.touchEvents.move,"."+t.params.zoom.containerClass,e.onTouchMove)}},disable:function(){var t=this,e=t.zoom;if(e.enabled){t.zoom.enabled=!1;var r=!("touchstart"!==t.touchEvents.start||!H.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1};H.gestures?(t.$wrapperEl.off("gesturestart",".swiper-slide",e.onGestureStart,r),t.$wrapperEl.off("gesturechange",".swiper-slide",e.onGestureChange,r),t.$wrapperEl.off("gestureend",".swiper-slide",e.onGestureEnd,r)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.off(t.touchEvents.start,".swiper-slide",e.onGestureStart,r),t.$wrapperEl.off(t.touchEvents.move,".swiper-slide",e.onGestureChange,r),t.$wrapperEl.off(t.touchEvents.end,".swiper-slide",e.onGestureEnd,r)),t.$wrapperEl.off(t.touchEvents.move,"."+t.params.zoom.containerClass,e.onTouchMove)}}},Me={name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var t=this,e={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach((function(r){e[r]=Ee[r].bind(t)})),G.extend(t,{zoom:e});var r=1;Object.defineProperty(t.zoom,"scale",{get:function(){return r},set:function(e){if(r!==e){var i=t.zoom.gesture.$imageEl?t.zoom.gesture.$imageEl[0]:void 0,n=t.zoom.gesture.$slideEl?t.zoom.gesture.$slideEl[0]:void 0;t.emit("zoomChange",e,i,n)}r=e}})},on:{init:function(){var t=this;t.params.zoom.enabled&&t.zoom.enable()},destroy:function(){var t=this;t.zoom.disable()},touchStart:function(t){var e=this;e.zoom.enabled&&e.zoom.onTouchStart(t)},touchEnd:function(t){var e=this;e.zoom.enabled&&e.zoom.onTouchEnd(t)},doubleTap:function(t){var e=this;e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&e.zoom.toggle(t)},transitionEnd:function(){var t=this;t.zoom.enabled&&t.params.zoom.enabled&&t.zoom.onTransitionEnd()}}},Ae={loadInSlide:function(t,e){void 0===e&&(e=!0);var r=this,n=r.params.lazy;if("undefined"!==typeof t&&0!==r.slides.length){var a=r.virtual&&r.params.virtual.enabled,o=a?r.$wrapperEl.children("."+r.params.slideClass+'[data-swiper-slide-index="'+t+'"]'):r.slides.eq(t),s=o.find("."+n.elementClass+":not(."+n.loadedClass+"):not(."+n.loadingClass+")");!o.hasClass(n.elementClass)||o.hasClass(n.loadedClass)||o.hasClass(n.loadingClass)||(s=s.add(o[0])),0!==s.length&&s.each((function(t,a){var s=i(a);s.addClass(n.loadingClass);var l=s.attr("data-background"),u=s.attr("data-src"),c=s.attr("data-srcset"),h=s.attr("data-sizes");r.loadImage(s[0],u||l,c,h,!1,(function(){if("undefined"!==typeof r&&null!==r&&r&&(!r||r.params)&&!r.destroyed){if(l?(s.css("background-image",'url("'+l+'")'),s.removeAttr("data-background")):(c&&(s.attr("srcset",c),s.removeAttr("data-srcset")),h&&(s.attr("sizes",h),s.removeAttr("data-sizes")),u&&(s.attr("src",u),s.removeAttr("data-src"))),s.addClass(n.loadedClass).removeClass(n.loadingClass),o.find("."+n.preloaderClass).remove(),r.params.loop&&e){var t=o.attr("data-swiper-slide-index");if(o.hasClass(r.params.slideDuplicateClass)){var i=r.$wrapperEl.children('[data-swiper-slide-index="'+t+'"]:not(.'+r.params.slideDuplicateClass+")");r.lazy.loadInSlide(i.index(),!1)}else{var a=r.$wrapperEl.children("."+r.params.slideDuplicateClass+'[data-swiper-slide-index="'+t+'"]');r.lazy.loadInSlide(a.index(),!1)}}r.emit("lazyImageReady",o[0],s[0])}})),r.emit("lazyImageLoad",o[0],s[0])}))}},load:function(){var t=this,e=t.$wrapperEl,r=t.params,n=t.slides,a=t.activeIndex,o=t.virtual&&r.virtual.enabled,s=r.lazy,l=r.slidesPerView;function u(t){if(o){if(e.children("."+r.slideClass+'[data-swiper-slide-index="'+t+'"]').length)return!0}else if(n[t])return!0;return!1}function c(t){return o?i(t).attr("data-swiper-slide-index"):i(t).index()}if("auto"===l&&(l=0),t.lazy.initialImageLoaded||(t.lazy.initialImageLoaded=!0),t.params.watchSlidesVisibility)e.children("."+r.slideVisibleClass).each((function(e,r){var n=o?i(r).attr("data-swiper-slide-index"):i(r).index();t.lazy.loadInSlide(n)}));else if(l>1)for(var h=a;h<a+l;h+=1)u(h)&&t.lazy.loadInSlide(h);else t.lazy.loadInSlide(a);if(s.loadPrevNext)if(l>1||s.loadPrevNextAmount&&s.loadPrevNextAmount>1){for(var p=s.loadPrevNextAmount,d=l,f=Math.min(a+d+Math.max(p,d),n.length),m=Math.max(a-Math.max(d,p),0),v=a+l;v<f;v+=1)u(v)&&t.lazy.loadInSlide(v);for(var g=m;g<a;g+=1)u(g)&&t.lazy.loadInSlide(g)}else{var y=e.children("."+r.slideNextClass);y.length>0&&t.lazy.loadInSlide(c(y));var _=e.children("."+r.slidePrevClass);_.length>0&&t.lazy.loadInSlide(c(_))}}},Ce={name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){var t=this;G.extend(t,{lazy:{initialImageLoaded:!1,load:Ae.load.bind(t),loadInSlide:Ae.loadInSlide.bind(t)}})},on:{beforeInit:function(){var t=this;t.params.lazy.enabled&&t.params.preloadImages&&(t.params.preloadImages=!1)},init:function(){var t=this;t.params.lazy.enabled&&!t.params.loop&&0===t.params.initialSlide&&t.lazy.load()},scroll:function(){var t=this;t.params.freeMode&&!t.params.freeModeSticky&&t.lazy.load()},resize:function(){var t=this;t.params.lazy.enabled&&t.lazy.load()},scrollbarDragMove:function(){var t=this;t.params.lazy.enabled&&t.lazy.load()},transitionStart:function(){var t=this;t.params.lazy.enabled&&(t.params.lazy.loadOnTransitionStart||!t.params.lazy.loadOnTransitionStart&&!t.lazy.initialImageLoaded)&&t.lazy.load()},transitionEnd:function(){var t=this;t.params.lazy.enabled&&!t.params.lazy.loadOnTransitionStart&&t.lazy.load()}}},Pe={LinearSpline:function(t,e){var r,i,n=function(){var t,e,r;return function(i,n){e=-1,t=i.length;while(t-e>1)r=t+e>>1,i[r]<=n?e=r:t=r;return t}}();return this.x=t,this.y=e,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(i=n(this.x,t),r=i-1,(t-this.x[r])*(this.y[i]-this.y[r])/(this.x[i]-this.x[r])+this.y[r]):0},this},getInterpolateFunction:function(t){var e=this;e.controller.spline||(e.controller.spline=e.params.loop?new Pe.LinearSpline(e.slidesGrid,t.slidesGrid):new Pe.LinearSpline(e.snapGrid,t.snapGrid))},setTranslate:function(t,e){var r,i,n=this,a=n.controller.control;function o(t){var e=n.rtlTranslate?-n.translate:n.translate;"slide"===n.params.controller.by&&(n.controller.getInterpolateFunction(t),i=-n.controller.spline.interpolate(-e)),i&&"container"!==n.params.controller.by||(r=(t.maxTranslate()-t.minTranslate())/(n.maxTranslate()-n.minTranslate()),i=(e-n.minTranslate())*r+t.minTranslate()),n.params.controller.inverse&&(i=t.maxTranslate()-i),t.updateProgress(i),t.setTranslate(i,n),t.updateActiveIndex(),t.updateSlidesClasses()}if(Array.isArray(a))for(var s=0;s<a.length;s+=1)a[s]!==e&&a[s]instanceof ie&&o(a[s]);else a instanceof ie&&e!==a&&o(a)},setTransition:function(t,e){var r,i=this,n=i.controller.control;function a(e){e.setTransition(t,i),0!==t&&(e.transitionStart(),e.params.autoHeight&&G.nextTick((function(){e.updateAutoHeight()})),e.$wrapperEl.transitionEnd((function(){n&&(e.params.loop&&"slide"===i.params.controller.by&&e.loopFix(),e.transitionEnd())})))}if(Array.isArray(n))for(r=0;r<n.length;r+=1)n[r]!==e&&n[r]instanceof ie&&a(n[r]);else n instanceof ie&&e!==n&&a(n)}},Le={name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){var t=this;G.extend(t,{controller:{control:t.params.controller.control,getInterpolateFunction:Pe.getInterpolateFunction.bind(t),setTranslate:Pe.setTranslate.bind(t),setTransition:Pe.setTransition.bind(t)}})},on:{update:function(){var t=this;t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},resize:function(){var t=this;t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},observerUpdate:function(){var t=this;t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},setTranslate:function(t,e){var r=this;r.controller.control&&r.controller.setTranslate(t,e)},setTransition:function(t,e){var r=this;r.controller.control&&r.controller.setTransition(t,e)}}},Ie={makeElFocusable:function(t){return t.attr("tabIndex","0"),t},addElRole:function(t,e){return t.attr("role",e),t},addElLabel:function(t,e){return t.attr("aria-label",e),t},disableEl:function(t){return t.attr("aria-disabled",!0),t},enableEl:function(t){return t.attr("aria-disabled",!1),t},onEnterKey:function(t){var e=this,r=e.params.a11y;if(13===t.keyCode){var n=i(t.target);e.navigation&&e.navigation.$nextEl&&n.is(e.navigation.$nextEl)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?e.a11y.notify(r.lastSlideMessage):e.a11y.notify(r.nextSlideMessage)),e.navigation&&e.navigation.$prevEl&&n.is(e.navigation.$prevEl)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?e.a11y.notify(r.firstSlideMessage):e.a11y.notify(r.prevSlideMessage)),e.pagination&&n.is("."+e.params.pagination.bulletClass)&&n[0].click()}},notify:function(t){var e=this,r=e.a11y.liveRegion;0!==r.length&&(r.html(""),r.html(t))},updateNavigation:function(){var t=this;if(!t.params.loop){var e=t.navigation,r=e.$nextEl,i=e.$prevEl;i&&i.length>0&&(t.isBeginning?t.a11y.disableEl(i):t.a11y.enableEl(i)),r&&r.length>0&&(t.isEnd?t.a11y.disableEl(r):t.a11y.enableEl(r))}},updatePagination:function(){var t=this,e=t.params.a11y;t.pagination&&t.params.pagination.clickable&&t.pagination.bullets&&t.pagination.bullets.length&&t.pagination.bullets.each((function(r,n){var a=i(n);t.a11y.makeElFocusable(a),t.a11y.addElRole(a,"button"),t.a11y.addElLabel(a,e.paginationBulletMessage.replace(/{{index}}/,a.index()+1))}))},init:function(){var t=this;t.$el.append(t.a11y.liveRegion);var e,r,i=t.params.a11y;t.navigation&&t.navigation.$nextEl&&(e=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(r=t.navigation.$prevEl),e&&(t.a11y.makeElFocusable(e),t.a11y.addElRole(e,"button"),t.a11y.addElLabel(e,i.nextSlideMessage),e.on("keydown",t.a11y.onEnterKey)),r&&(t.a11y.makeElFocusable(r),t.a11y.addElRole(r,"button"),t.a11y.addElLabel(r,i.prevSlideMessage),r.on("keydown",t.a11y.onEnterKey)),t.pagination&&t.params.pagination.clickable&&t.pagination.bullets&&t.pagination.bullets.length&&t.pagination.$el.on("keydown","."+t.params.pagination.bulletClass,t.a11y.onEnterKey)},destroy:function(){var t,e,r=this;r.a11y.liveRegion&&r.a11y.liveRegion.length>0&&r.a11y.liveRegion.remove(),r.navigation&&r.navigation.$nextEl&&(t=r.navigation.$nextEl),r.navigation&&r.navigation.$prevEl&&(e=r.navigation.$prevEl),t&&t.off("keydown",r.a11y.onEnterKey),e&&e.off("keydown",r.a11y.onEnterKey),r.pagination&&r.params.pagination.clickable&&r.pagination.bullets&&r.pagination.bullets.length&&r.pagination.$el.off("keydown","."+r.params.pagination.bulletClass,r.a11y.onEnterKey)}},ke={name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var t=this;G.extend(t,{a11y:{liveRegion:i('<span class="'+t.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(Ie).forEach((function(e){t.a11y[e]=Ie[e].bind(t)}))},on:{init:function(){var t=this;t.params.a11y.enabled&&(t.a11y.init(),t.a11y.updateNavigation())},toEdge:function(){var t=this;t.params.a11y.enabled&&t.a11y.updateNavigation()},fromEdge:function(){var t=this;t.params.a11y.enabled&&t.a11y.updateNavigation()},paginationUpdate:function(){var t=this;t.params.a11y.enabled&&t.a11y.updatePagination()},destroy:function(){var t=this;t.params.a11y.enabled&&t.a11y.destroy()}}},Re={init:function(){var t=this;if(t.params.history){if(!e.history||!e.history.pushState)return t.params.history.enabled=!1,void(t.params.hashNavigation.enabled=!0);var r=t.history;r.initialized=!0,r.paths=Re.getPathValues(),(r.paths.key||r.paths.value)&&(r.scrollToSlide(0,r.paths.value,t.params.runCallbacksOnInit),t.params.history.replaceState||e.addEventListener("popstate",t.history.setHistoryPopState))}},destroy:function(){var t=this;t.params.history.replaceState||e.removeEventListener("popstate",t.history.setHistoryPopState)},setHistoryPopState:function(){var t=this;t.history.paths=Re.getPathValues(),t.history.scrollToSlide(t.params.speed,t.history.paths.value,!1)},getPathValues:function(){var t=e.location.pathname.slice(1).split("/").filter((function(t){return""!==t})),r=t.length,i=t[r-2],n=t[r-1];return{key:i,value:n}},setHistory:function(t,r){var i=this;if(i.history.initialized&&i.params.history.enabled){var n=i.slides.eq(r),a=Re.slugify(n.attr("data-history"));e.location.pathname.includes(t)||(a=t+"/"+a);var o=e.history.state;o&&o.value===a||(i.params.history.replaceState?e.history.replaceState({value:a},null,a):e.history.pushState({value:a},null,a))}},slugify:function(t){return t.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(t,e,r){var i=this;if(e)for(var n=0,a=i.slides.length;n<a;n+=1){var o=i.slides.eq(n),s=Re.slugify(o.attr("data-history"));if(s===e&&!o.hasClass(i.params.slideDuplicateClass)){var l=o.index();i.slideTo(l,t,r)}}else i.slideTo(0,t,r)}},Oe={name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){var t=this;G.extend(t,{history:{init:Re.init.bind(t),setHistory:Re.setHistory.bind(t),setHistoryPopState:Re.setHistoryPopState.bind(t),scrollToSlide:Re.scrollToSlide.bind(t),destroy:Re.destroy.bind(t)}})},on:{init:function(){var t=this;t.params.history.enabled&&t.history.init()},destroy:function(){var t=this;t.params.history.enabled&&t.history.destroy()},transitionEnd:function(){var t=this;t.history.initialized&&t.history.setHistory(t.params.history.key,t.activeIndex)}}},ze={onHashCange:function(){var e=this,r=t.location.hash.replace("#",""),i=e.slides.eq(e.activeIndex).attr("data-hash");if(r!==i){var n=e.$wrapperEl.children("."+e.params.slideClass+'[data-hash="'+r+'"]').index();if("undefined"===typeof n)return;e.slideTo(n)}},setHash:function(){var r=this;if(r.hashNavigation.initialized&&r.params.hashNavigation.enabled)if(r.params.hashNavigation.replaceState&&e.history&&e.history.replaceState)e.history.replaceState(null,null,"#"+r.slides.eq(r.activeIndex).attr("data-hash")||!1);else{var i=r.slides.eq(r.activeIndex),n=i.attr("data-hash")||i.attr("data-history");t.location.hash=n||""}},init:function(){var r=this;if(!(!r.params.hashNavigation.enabled||r.params.history&&r.params.history.enabled)){r.hashNavigation.initialized=!0;var n=t.location.hash.replace("#","");if(n)for(var a=0,o=0,s=r.slides.length;o<s;o+=1){var l=r.slides.eq(o),u=l.attr("data-hash")||l.attr("data-history");if(u===n&&!l.hasClass(r.params.slideDuplicateClass)){var c=l.index();r.slideTo(c,a,r.params.runCallbacksOnInit,!0)}}r.params.hashNavigation.watchState&&i(e).on("hashchange",r.hashNavigation.onHashCange)}},destroy:function(){var t=this;t.params.hashNavigation.watchState&&i(e).off("hashchange",t.hashNavigation.onHashCange)}},De={name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){var t=this;G.extend(t,{hashNavigation:{initialized:!1,init:ze.init.bind(t),destroy:ze.destroy.bind(t),setHash:ze.setHash.bind(t),onHashCange:ze.onHashCange.bind(t)}})},on:{init:function(){var t=this;t.params.hashNavigation.enabled&&t.hashNavigation.init()},destroy:function(){var t=this;t.params.hashNavigation.enabled&&t.hashNavigation.destroy()},transitionEnd:function(){var t=this;t.hashNavigation.initialized&&t.hashNavigation.setHash()}}},Be={run:function(){var t=this,e=t.slides.eq(t.activeIndex),r=t.params.autoplay.delay;e.attr("data-swiper-autoplay")&&(r=e.attr("data-swiper-autoplay")||t.params.autoplay.delay),clearTimeout(t.autoplay.timeout),t.autoplay.timeout=G.nextTick((function(){t.params.autoplay.reverseDirection?t.params.loop?(t.loopFix(),t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.isBeginning?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(t.slideTo(t.slides.length-1,t.params.speed,!0,!0),t.emit("autoplay")):(t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.params.loop?(t.loopFix(),t.slideNext(t.params.speed,!0,!0),t.emit("autoplay")):t.isEnd?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(t.slideTo(0,t.params.speed,!0,!0),t.emit("autoplay")):(t.slideNext(t.params.speed,!0,!0),t.emit("autoplay"))}),r)},start:function(){var t=this;return"undefined"===typeof t.autoplay.timeout&&(!t.autoplay.running&&(t.autoplay.running=!0,t.emit("autoplayStart"),t.autoplay.run(),!0))},stop:function(){var t=this;return!!t.autoplay.running&&("undefined"!==typeof t.autoplay.timeout&&(t.autoplay.timeout&&(clearTimeout(t.autoplay.timeout),t.autoplay.timeout=void 0),t.autoplay.running=!1,t.emit("autoplayStop"),!0))},pause:function(t){var e=this;e.autoplay.running&&(e.autoplay.paused||(e.autoplay.timeout&&clearTimeout(e.autoplay.timeout),e.autoplay.paused=!0,0!==t&&e.params.autoplay.waitForTransition?(e.$wrapperEl[0].addEventListener("transitionend",e.autoplay.onTransitionEnd),e.$wrapperEl[0].addEventListener("webkitTransitionEnd",e.autoplay.onTransitionEnd)):(e.autoplay.paused=!1,e.autoplay.run())))}},Fe={name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var t=this;G.extend(t,{autoplay:{running:!1,paused:!1,run:Be.run.bind(t),start:Be.start.bind(t),stop:Be.stop.bind(t),pause:Be.pause.bind(t),onTransitionEnd:function(e){t&&!t.destroyed&&t.$wrapperEl&&e.target===this&&(t.$wrapperEl[0].removeEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].removeEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())}}})},on:{init:function(){var t=this;t.params.autoplay.enabled&&t.autoplay.start()},beforeTransitionStart:function(t,e){var r=this;r.autoplay.running&&(e||!r.params.autoplay.disableOnInteraction?r.autoplay.pause(t):r.autoplay.stop())},sliderFirstMove:function(){var t=this;t.autoplay.running&&(t.params.autoplay.disableOnInteraction?t.autoplay.stop():t.autoplay.pause())},destroy:function(){var t=this;t.autoplay.running&&t.autoplay.stop()}}},Ne={setTranslate:function(){for(var t=this,e=t.slides,r=0;r<e.length;r+=1){var i=t.slides.eq(r),n=i[0].swiperSlideOffset,a=-n;t.params.virtualTranslate||(a-=t.translate);var o=0;t.isHorizontal()||(o=a,a=0);var s=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:s}).transform("translate3d("+a+"px, "+o+"px, 0px)")}},setTransition:function(t){var e=this,r=e.slides,i=e.$wrapperEl;if(r.transition(t),e.params.virtualTranslate&&0!==t){var n=!1;r.transitionEnd((function(){if(!n&&e&&!e.destroyed){n=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],r=0;r<t.length;r+=1)i.trigger(t[r])}}))}}},Ue={name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){var t=this;G.extend(t,{fadeEffect:{setTranslate:Ne.setTranslate.bind(t),setTransition:Ne.setTransition.bind(t)}})},on:{beforeInit:function(){var t=this;if("fade"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"fade");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};G.extend(t.params,e),G.extend(t.originalParams,e)}},setTranslate:function(){var t=this;"fade"===t.params.effect&&t.fadeEffect.setTranslate()},setTransition:function(t){var e=this;"fade"===e.params.effect&&e.fadeEffect.setTransition(t)}}},Ve={setTranslate:function(){var t,e=this,r=e.$el,n=e.$wrapperEl,a=e.slides,o=e.width,s=e.height,l=e.rtlTranslate,u=e.size,c=e.params.cubeEffect,h=e.isHorizontal(),p=e.virtual&&e.params.virtual.enabled,d=0;c.shadow&&(h?(t=n.find(".swiper-cube-shadow"),0===t.length&&(t=i('<div class="swiper-cube-shadow"></div>'),n.append(t)),t.css({height:o+"px"})):(t=r.find(".swiper-cube-shadow"),0===t.length&&(t=i('<div class="swiper-cube-shadow"></div>'),r.append(t))));for(var f=0;f<a.length;f+=1){var m=a.eq(f),v=f;p&&(v=parseInt(m.attr("data-swiper-slide-index"),10));var g=90*v,y=Math.floor(g/360);l&&(g=-g,y=Math.floor(-g/360));var _=Math.max(Math.min(m[0].progress,1),-1),x=0,b=0,w=0;v%4===0?(x=4*-y*u,w=0):(v-1)%4===0?(x=0,w=4*-y*u):(v-2)%4===0?(x=u+4*y*u,w=u):(v-3)%4===0&&(x=-u,w=3*u+4*u*y),l&&(x=-x),h||(b=x,x=0);var T="rotateX("+(h?0:-g)+"deg) rotateY("+(h?g:0)+"deg) translate3d("+x+"px, "+b+"px, "+w+"px)";if(_<=1&&_>-1&&(d=90*v+90*_,l&&(d=90*-v-90*_)),m.transform(T),c.slideShadows){var S=h?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),E=h?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===S.length&&(S=i('<div class="swiper-slide-shadow-'+(h?"left":"top")+'"></div>'),m.append(S)),0===E.length&&(E=i('<div class="swiper-slide-shadow-'+(h?"right":"bottom")+'"></div>'),m.append(E)),S.length&&(S[0].style.opacity=Math.max(-_,0)),E.length&&(E[0].style.opacity=Math.max(_,0))}}if(n.css({"-webkit-transform-origin":"50% 50% -"+u/2+"px","-moz-transform-origin":"50% 50% -"+u/2+"px","-ms-transform-origin":"50% 50% -"+u/2+"px","transform-origin":"50% 50% -"+u/2+"px"}),c.shadow)if(h)t.transform("translate3d(0px, "+(o/2+c.shadowOffset)+"px, "+-o/2+"px) rotateX(90deg) rotateZ(0deg) scale("+c.shadowScale+")");else{var M=Math.abs(d)-90*Math.floor(Math.abs(d)/90),A=1.5-(Math.sin(2*M*Math.PI/360)/2+Math.cos(2*M*Math.PI/360)/2),C=c.shadowScale,P=c.shadowScale/A,L=c.shadowOffset;t.transform("scale3d("+C+", 1, "+P+") translate3d(0px, "+(s/2+L)+"px, "+-s/2/P+"px) rotateX(-90deg)")}var I=W.isSafari||W.isUiWebView?-u/2:0;n.transform("translate3d(0px,0,"+I+"px) rotateX("+(e.isHorizontal()?0:d)+"deg) rotateY("+(e.isHorizontal()?-d:0)+"deg)")},setTransition:function(t){var e=this,r=e.$el,i=e.slides;i.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),e.params.cubeEffect.shadow&&!e.isHorizontal()&&r.find(".swiper-cube-shadow").transition(t)}},je={name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){var t=this;G.extend(t,{cubeEffect:{setTranslate:Ve.setTranslate.bind(t),setTransition:Ve.setTransition.bind(t)}})},on:{beforeInit:function(){var t=this;if("cube"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"cube"),t.classNames.push(t.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};G.extend(t.params,e),G.extend(t.originalParams,e)}},setTranslate:function(){var t=this;"cube"===t.params.effect&&t.cubeEffect.setTranslate()},setTransition:function(t){var e=this;"cube"===e.params.effect&&e.cubeEffect.setTransition(t)}}},Ge={setTranslate:function(){for(var t=this,e=t.slides,r=t.rtlTranslate,n=0;n<e.length;n+=1){var a=e.eq(n),o=a[0].progress;t.params.flipEffect.limitRotation&&(o=Math.max(Math.min(a[0].progress,1),-1));var s=a[0].swiperSlideOffset,l=-180*o,u=l,c=0,h=-s,p=0;if(t.isHorizontal()?r&&(u=-u):(p=h,h=0,c=-u,u=0),a[0].style.zIndex=-Math.abs(Math.round(o))+e.length,t.params.flipEffect.slideShadows){var d=t.isHorizontal()?a.find(".swiper-slide-shadow-left"):a.find(".swiper-slide-shadow-top"),f=t.isHorizontal()?a.find(".swiper-slide-shadow-right"):a.find(".swiper-slide-shadow-bottom");0===d.length&&(d=i('<div class="swiper-slide-shadow-'+(t.isHorizontal()?"left":"top")+'"></div>'),a.append(d)),0===f.length&&(f=i('<div class="swiper-slide-shadow-'+(t.isHorizontal()?"right":"bottom")+'"></div>'),a.append(f)),d.length&&(d[0].style.opacity=Math.max(-o,0)),f.length&&(f[0].style.opacity=Math.max(o,0))}a.transform("translate3d("+h+"px, "+p+"px, 0px) rotateX("+c+"deg) rotateY("+u+"deg)")}},setTransition:function(t){var e=this,r=e.slides,i=e.activeIndex,n=e.$wrapperEl;if(r.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),e.params.virtualTranslate&&0!==t){var a=!1;r.eq(i).transitionEnd((function(){if(!a&&e&&!e.destroyed){a=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],r=0;r<t.length;r+=1)n.trigger(t[r])}}))}}},He={name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){var t=this;G.extend(t,{flipEffect:{setTranslate:Ge.setTranslate.bind(t),setTransition:Ge.setTransition.bind(t)}})},on:{beforeInit:function(){var t=this;if("flip"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"flip"),t.classNames.push(t.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};G.extend(t.params,e),G.extend(t.originalParams,e)}},setTranslate:function(){var t=this;"flip"===t.params.effect&&t.flipEffect.setTranslate()},setTransition:function(t){var e=this;"flip"===e.params.effect&&e.flipEffect.setTransition(t)}}},We={setTranslate:function(){for(var t=this,e=t.width,r=t.height,n=t.slides,a=t.$wrapperEl,o=t.slidesSizesGrid,s=t.params.coverflowEffect,l=t.isHorizontal(),u=t.translate,c=l?e/2-u:r/2-u,h=l?s.rotate:-s.rotate,p=s.depth,d=0,f=n.length;d<f;d+=1){var m=n.eq(d),v=o[d],g=m[0].swiperSlideOffset,y=(c-g-v/2)/v*s.modifier,_=l?h*y:0,x=l?0:h*y,b=-p*Math.abs(y),w=l?0:s.stretch*y,T=l?s.stretch*y:0;Math.abs(T)<.001&&(T=0),Math.abs(w)<.001&&(w=0),Math.abs(b)<.001&&(b=0),Math.abs(_)<.001&&(_=0),Math.abs(x)<.001&&(x=0);var S="translate3d("+T+"px,"+w+"px,"+b+"px)  rotateX("+x+"deg) rotateY("+_+"deg)";if(m.transform(S),m[0].style.zIndex=1-Math.abs(Math.round(y)),s.slideShadows){var E=l?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),M=l?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===E.length&&(E=i('<div class="swiper-slide-shadow-'+(l?"left":"top")+'"></div>'),m.append(E)),0===M.length&&(M=i('<div class="swiper-slide-shadow-'+(l?"right":"bottom")+'"></div>'),m.append(M)),E.length&&(E[0].style.opacity=y>0?y:0),M.length&&(M[0].style.opacity=-y>0?-y:0)}}if(H.pointerEvents||H.prefixedPointerEvents){var A=a[0].style;A.perspectiveOrigin=c+"px 50%"}},setTransition:function(t){var e=this;e.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t)}},qe={name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){var t=this;G.extend(t,{coverflowEffect:{setTranslate:We.setTranslate.bind(t),setTransition:We.setTransition.bind(t)}})},on:{beforeInit:function(){var t=this;"coverflow"===t.params.effect&&(t.classNames.push(t.params.containerModifierClass+"coverflow"),t.classNames.push(t.params.containerModifierClass+"3d"),t.params.watchSlidesProgress=!0,t.originalParams.watchSlidesProgress=!0)},setTranslate:function(){var t=this;"coverflow"===t.params.effect&&t.coverflowEffect.setTranslate()},setTransition:function(t){var e=this;"coverflow"===e.params.effect&&e.coverflowEffect.setTransition(t)}}},Xe={init:function(){var t=this,e=t.params,r=e.thumbs,i=t.constructor;r.swiper instanceof i?(t.thumbs.swiper=r.swiper,G.extend(t.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),G.extend(t.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):G.isObject(r.swiper)&&(t.thumbs.swiper=new i(G.extend({},r.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),t.thumbs.swiperCreated=!0),t.thumbs.swiper.$el.addClass(t.params.thumbs.thumbsContainerClass),t.thumbs.swiper.on("tap",t.thumbs.onThumbClick)},onThumbClick:function(){var t=this,e=t.thumbs.swiper;if(e){var r=e.clickedIndex,n=e.clickedSlide;if((!n||!i(n).hasClass(t.params.thumbs.slideThumbActiveClass))&&"undefined"!==typeof r&&null!==r){var a;if(a=e.params.loop?parseInt(i(e.clickedSlide).attr("data-swiper-slide-index"),10):r,t.params.loop){var o=t.activeIndex;t.slides.eq(o).hasClass(t.params.slideDuplicateClass)&&(t.loopFix(),t._clientLeft=t.$wrapperEl[0].clientLeft,o=t.activeIndex);var s=t.slides.eq(o).prevAll('[data-swiper-slide-index="'+a+'"]').eq(0).index(),l=t.slides.eq(o).nextAll('[data-swiper-slide-index="'+a+'"]').eq(0).index();a="undefined"===typeof s?l:"undefined"===typeof l?s:l-o<o-s?l:s}t.slideTo(a)}}},update:function(t){var e=this,r=e.thumbs.swiper;if(r){var i="auto"===r.params.slidesPerView?r.slidesPerViewDynamic():r.params.slidesPerView;if(e.realIndex!==r.realIndex){var n,a=r.activeIndex;if(r.params.loop){r.slides.eq(a).hasClass(r.params.slideDuplicateClass)&&(r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft,a=r.activeIndex);var o=r.slides.eq(a).prevAll('[data-swiper-slide-index="'+e.realIndex+'"]').eq(0).index(),s=r.slides.eq(a).nextAll('[data-swiper-slide-index="'+e.realIndex+'"]').eq(0).index();n="undefined"===typeof o?s:"undefined"===typeof s?o:s-a===a-o?a:s-a<a-o?s:o}else n=e.realIndex;r.visibleSlidesIndexes&&r.visibleSlidesIndexes.indexOf(n)<0&&(r.params.centeredSlides?n=n>a?n-Math.floor(i/2)+1:n+Math.floor(i/2)-1:n>a&&(n=n-i+1),r.slideTo(n,t?0:void 0))}var l=1,u=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(l=e.params.slidesPerView),r.slides.removeClass(u),r.params.loop||r.params.virtual)for(var c=0;c<l;c+=1)r.$wrapperEl.children('[data-swiper-slide-index="'+(e.realIndex+c)+'"]').addClass(u);else for(var h=0;h<l;h+=1)r.slides.eq(e.realIndex+h).addClass(u)}}},$e={name:"thumbs",params:{thumbs:{swiper:null,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){var t=this;G.extend(t,{thumbs:{swiper:null,init:Xe.init.bind(t),update:Xe.update.bind(t),onThumbClick:Xe.onThumbClick.bind(t)}})},on:{beforeInit:function(){var t=this,e=t.params,r=e.thumbs;r&&r.swiper&&(t.thumbs.init(),t.thumbs.update(!0))},slideChange:function(){var t=this;t.thumbs.swiper&&t.thumbs.update()},update:function(){var t=this;t.thumbs.swiper&&t.thumbs.update()},resize:function(){var t=this;t.thumbs.swiper&&t.thumbs.update()},observerUpdate:function(){var t=this;t.thumbs.swiper&&t.thumbs.update()},setTransition:function(t){var e=this,r=e.thumbs.swiper;r&&r.setTransition(t)},beforeDestroy:function(){var t=this,e=t.thumbs.swiper;e&&t.thumbs.swiperCreated&&e&&e.destroy()}}},Ye=[ne,ae,oe,se,ue,he,de,ve,ye,xe,we,Se,Me,Ce,Le,ke,Oe,De,Fe,Ue,je,He,qe,$e];return"undefined"===typeof ie.use&&(ie.use=ie.Class.use,ie.installModule=ie.Class.installModule),ie.use(Ye),ie}))},d225:function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",(function(){return i}))},d2c8:function(t,e,r){var i=r("aae3"),n=r("be13");t.exports=function(t,e,r){if(i(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(n(t))}},d2d5:function(t,e,r){r("1654"),r("549b"),t.exports=r("584a").Array.from},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d60a:function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},d860:function(t,e,r){(function(r){var i,n;
/*!
 * VERSION: 2.1.3
 * DATE: 2019-05-17
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */(function(r,a){"use strict";var o={},s=r.document,l=r.GreenSockGlobals=r.GreenSockGlobals||r,u=l[a];if(u)return t.exports&&(t.exports=u),u;var c,h,p,d,f,m=function(t){var e,r=t.split("."),i=l;for(e=0;e<r.length;e++)i[r[e]]=i=i[r[e]]||{};return i},v=m("com.greensock"),g=1e-8,y=function(t){var e,r=[],i=t.length;for(e=0;e!==i;r.push(t[e++]));return r},_=function(){},x=function(){var t=Object.prototype.toString,e=t.call([]);return function(r){return null!=r&&(r instanceof Array||"object"===typeof r&&!!r.push&&t.call(r)===e)}}(),b={},w=function(r,s,u,c){this.sc=b[r]?b[r].sc:[],b[r]=this,this.gsClass=null,this.func=u;var h=[];this.check=function(p){var d,f,v,g,y=s.length,_=y;while(--y>-1)(d=b[s[y]]||new w(s[y],[])).gsClass?(h[y]=d.gsClass,_--):p&&d.sc.push(this);if(0===_&&u){if(f=("com.greensock."+r).split("."),v=f.pop(),g=m(f.join("."))[v]=this.gsClass=u.apply(u,h),c)if(l[v]=o[v]=g,t.exports)if(r===a)for(y in t.exports=o[a]=g,o)g[y]=o[y];else o[a]&&(o[a][v]=g);else i=[],n=function(){return g}.apply(e,i),void 0===n||(t.exports=n);for(y=0;y<this.sc.length;y++)this.sc[y].check()}},this.check(!0)},T=r._gsDefine=function(t,e,r,i){return new w(t,e,r,i)},S=v._class=function(t,e,r){return e=e||function(){},T(t,[],(function(){return e}),r),e};T.globals=l;var E=[0,0,1,1],M=S("easing.Ease",(function(t,e,r,i){this._func=t,this._type=r||0,this._power=i||0,this._params=e?E.concat(e):E}),!0),A=M.map={},C=M.register=function(t,e,r,i){var n,a,o,s,l=e.split(","),u=l.length,c=(r||"easeIn,easeOut,easeInOut").split(",");while(--u>-1){a=l[u],n=i?S("easing."+a,null,!0):v.easing[a]||{},o=c.length;while(--o>-1)s=c[o],A[a+"."+s]=A[s+a]=n[s]=t.getRatio?t:t[s]||new t}};p=M.prototype,p._calcEnd=!1,p.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,r=this._power,i=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===r?i*=i:2===r?i*=i*i:3===r?i*=i*i*i:4===r&&(i*=i*i*i*i),1===e?1-i:2===e?i:t<.5?i/2:1-i/2},c=["Linear","Quad","Cubic","Quart","Quint,Strong"],h=c.length;while(--h>-1)p=c[h]+",Power"+h,C(new M(null,null,1,h),p,"easeOut",!0),C(new M(null,null,2,h),p,"easeIn"+(0===h?",easeNone":"")),C(new M(null,null,3,h),p,"easeInOut");A.linear=v.easing.Linear.easeIn,A.swing=v.easing.Quad.easeInOut;var P=S("events.EventDispatcher",(function(t){this._listeners={},this._eventTarget=t||this}));p=P.prototype,p.addEventListener=function(t,e,r,i,n){n=n||0;var a,o,s=this._listeners[t],l=0;this!==d||f||d.wake(),null==s&&(this._listeners[t]=s=[]),o=s.length;while(--o>-1)a=s[o],a.c===e&&a.s===r?s.splice(o,1):0===l&&a.pr<n&&(l=o+1);s.splice(l,0,{c:e,s:r,up:i,pr:n})},p.removeEventListener=function(t,e){var r,i=this._listeners[t];if(i){r=i.length;while(--r>-1)if(i[r].c===e)return void i.splice(r,1)}},p.dispatchEvent=function(t){var e,r,i,n=this._listeners[t];if(n){e=n.length,e>1&&(n=n.slice(0)),r=this._eventTarget;while(--e>-1)i=n[e],i&&(i.up?i.c.call(i.s||r,{type:t,target:r}):i.c.call(i.s||r))}};var L=r.requestAnimationFrame,I=r.cancelAnimationFrame,k=Date.now||function(){return(new Date).getTime()},R=k();c=["ms","moz","webkit","o"],h=c.length;while(--h>-1&&!L)L=r[c[h]+"RequestAnimationFrame"],I=r[c[h]+"CancelAnimationFrame"]||r[c[h]+"CancelRequestAnimationFrame"];S("Ticker",(function(t,e){var r,i,n,a,o,l=this,u=k(),c=!(!1===e||!L)&&"auto",h=500,p=33,m="tick",v=function(t){var e,s,c=k()-R;c>h&&(u+=c-p),R+=c,l.time=(R-u)/1e3,e=l.time-o,(!r||e>0||!0===t)&&(l.frame++,o+=e+(e>=a?.004:a-e),s=!0),!0!==t&&(n=i(v)),s&&l.dispatchEvent(m)};P.call(l),l.time=l.frame=0,l.tick=function(){v(!0)},l.lagSmoothing=function(t,e){if(!arguments.length)return h<1/g;h=t||1/g,p=Math.min(e,h,0)},l.sleep=function(){null!=n&&(c&&I?I(n):clearTimeout(n),i=_,n=null,l===d&&(f=!1))},l.wake=function(t){null!==n?l.sleep():t?u+=-R+(R=k()):l.frame>10&&(R=k()-h+5),i=0===r?_:c&&L?L:function(t){return setTimeout(t,1e3*(o-l.time)+1|0)},l===d&&(f=!0),v(2)},l.fps=function(t){if(!arguments.length)return r;r=t,a=1/(r||60),o=this.time+a,l.wake()},l.useRAF=function(t){if(!arguments.length)return c;l.sleep(),c=t,l.fps(r)},l.fps(t),setTimeout((function(){"auto"===c&&l.frame<5&&"hidden"!==(s||{}).visibilityState&&l.useRAF(!1)}),1500)})),p=v.Ticker.prototype=new v.events.EventDispatcher,p.constructor=v.Ticker;var O=S("core.Animation",(function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!!e.immediateRender,this.data=e.data,this._reversed=!!e.reversed,et){f||d.wake();var r=this.vars.useFrames?tt:et;r.add(this,r._time),this.vars.paused&&this.paused(!0)}}));d=O.ticker=new v.Ticker,p=O.prototype,p._dirty=p._gc=p._initted=p._paused=!1,p._totalTime=p._time=0,p._rawPrevTime=-1,p._next=p._last=p._onUpdate=p._timeline=p.timeline=null,p._paused=!1;var z=function(){f&&k()-R>2e3&&("hidden"!==(s||{}).visibilityState||!d.lagSmoothing())&&d.wake();var t=setTimeout(z,2e3);t.unref&&t.unref()};z(),p.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},p.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},p.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},p.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},p.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},p.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},p.render=function(t,e,r){},p.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},p.isActive=function(){var t,e=this._timeline,r=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=r&&t<r+this.totalDuration()/this._timeScale-g},p._enabled=function(t,e){return f||d.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},p._kill=function(t,e){return this._enabled(!1,!1)},p.kill=function(t,e){return this._kill(t,e),this},p._uncache=function(t){var e=t?this:this.timeline;while(e)e._dirty=!0,e=e.timeline;return this},p._swapSelfInParams=function(t){var e=t.length,r=t.concat();while(--e>-1)"{self}"===t[e]&&(r[e]=this);return r},p._callback=function(t){var e=this.vars,r=e[t],i=e[t+"Params"],n=e[t+"Scope"]||e.callbackScope||this,a=i?i.length:0;switch(a){case 0:r.call(n);break;case 1:r.call(n,i[0]);break;case 2:r.call(n,i[0],i[1]);break;default:r.apply(n,i)}},p.eventCallback=function(t,e,r,i){if("on"===(t||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[t];null==e?delete n[t]:(n[t]=e,n[t+"Params"]=x(r)&&-1!==r.join("").indexOf("{self}")?this._swapSelfInParams(r):r,n[t+"Scope"]=i),"onUpdate"===t&&(this._onUpdate=e)}return this},p.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},p.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},p.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},p.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},p.totalTime=function(t,e,r){if(f||d.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!r&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,n=this._timeline;if(t>i&&!r&&(t=i),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?i-t:t)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)while(n._timeline)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(U.length&&it(),this.render(t,e,!1),U.length&&it())}return this},p.progress=p.totalProgress=function(t,e){var r=this.duration();return arguments.length?this.totalTime(r*t,e):r?this._time/r:this.ratio},p.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},p.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},p.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,r;t=t||g,this._timeline&&this._timeline.smoothChildTiming&&(e=this._pauseTime,r=e||0===e?e:this._timeline.totalTime(),this._startTime=r-(r-this._startTime)*this._timeScale/t),this._timeScale=t,r=this.timeline;while(r&&r.timeline)r._dirty=!0,r.totalDuration(),r=r.timeline;return this},p.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},p.paused=function(t){if(!arguments.length)return this._paused;var e,r,i=this._timeline;return t!=this._paused&&i&&(f||t||d.wake(),e=i.rawTime(),r=e-this._pauseTime,!t&&i.smoothChildTiming&&(this._startTime+=r,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==r&&this._initted&&this.duration()&&(e=i.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var D=S("core.SimpleTimeline",(function(t){O.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0}));p=D.prototype=new O,p.constructor=D,p.kill()._gc=!1,p._first=p._last=p._recent=null,p._sortChildren=!1,p.add=p.insert=function(t,e,r,i){var n,a;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=this.rawTime()-(t._timeline.rawTime()-t._pauseTime)),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),n=this._last,this._sortChildren){a=t._startTime;while(n&&n._startTime>a)n=n._prev}return n?(t._next=n._next,n._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=n,this._recent=t,this._timeline&&this._uncache(!0),this},p._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},p.render=function(t,e,r){var i,n=this._first;this._totalTime=this._time=this._rawPrevTime=t;while(n)i=n._next,(n._active||t>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,r):n.render((t-n._startTime)*n._timeScale,e,r)),n=i},p.rawTime=function(){return f||d.wake(),this._totalTime};var B=S("TweenLite",(function(t,e,i){if(O.call(this,e,i),this.render=B.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!==typeof t?t:B.selector(t)||t;var n,a,o,s=t.jquery||t.length&&t!==r&&t[0]&&(t[0]===r||t[0].nodeType&&t[0].style&&!t.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?Q[B.defaultOverwrite]:"number"===typeof l?l>>0:Q[l],(s||t instanceof Array||t.push&&x(t))&&"number"!==typeof t[0])for(this._targets=o=y(t),this._propLookup=[],this._siblings=[],n=0;n<o.length;n++)a=o[n],a?"string"!==typeof a?a.length&&a!==r&&a[0]&&(a[0]===r||a[0].nodeType&&a[0].style&&!a.nodeType)?(o.splice(n--,1),this._targets=o=o.concat(y(a))):(this._siblings[n]=nt(a,this,!1),1===l&&this._siblings[n].length>1&&ot(a,this,null,1,this._siblings[n])):(a=o[n--]=B.selector(a),"string"===typeof a&&o.splice(n+1,1)):o.splice(n--,1);else this._propLookup={},this._siblings=nt(t,this,!1),1===l&&this._siblings.length>1&&ot(t,this,null,1,this._siblings);(this.vars.immediateRender||0===e&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-g,this.render(Math.min(0,-this._delay)))}),!0),F=function(t){return t&&t.length&&t!==r&&t[0]&&(t[0]===r||t[0].nodeType&&t[0].style&&!t.nodeType)},N=function(t,e){var r,i={};for(r in t)K[r]||r in e&&"transform"!==r&&"x"!==r&&"y"!==r&&"width"!==r&&"height"!==r&&"className"!==r&&"border"!==r||!(!Y[r]||Y[r]&&Y[r]._autoCSS)||(i[r]=t[r],delete t[r]);t.css=i};p=B.prototype=new O,p.constructor=B,p.kill()._gc=!1,p.ratio=0,p._firstPT=p._targets=p._overwrittenProps=p._startAt=null,p._notifyPluginsOfEnabled=p._lazy=!1,B.version="2.1.3",B.defaultEase=p._ease=new M(null,null,1,1),B.defaultOverwrite="auto",B.ticker=d,B.autoSleep=120,B.lagSmoothing=function(t,e){d.lagSmoothing(t,e)},B.selector=r.$||r.jQuery||function(t){var e=r.$||r.jQuery;return e?(B.selector=e,e(t)):(s||(s=r.document),s?s.querySelectorAll?s.querySelectorAll(t):s.getElementById("#"===t.charAt(0)?t.substr(1):t):t)};var U=[],V={},j=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,G=/[\+-]=-?[\.\d]/,H=function(t){var e,r=this._firstPT,i=1e-6;while(r)e=r.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:r.c*t+r.s,r.m?e=r.m.call(this._tween,e,this._target||r.t,this._tween):e<i&&e>-i&&!r.blob&&(e=0),r.f?r.fp?r.t[r.p](r.fp,e):r.t[r.p](e):r.t[r.p]=e,r=r._next},W=function(t){return(1e3*t|0)/1e3+""},q=function(t,e,r,i){var n,a,o,s,l,u,c,h=[],p=0,d="",f=0;for(h.start=t,h.end=e,t=h[0]=t+"",e=h[1]=e+"",r&&(r(h),t=h[0],e=h[1]),h.length=0,n=t.match(j)||[],a=e.match(j)||[],i&&(i._next=null,i.blob=1,h._firstPT=h._applyPT=i),l=a.length,s=0;s<l;s++)c=a[s],u=e.substr(p,e.indexOf(c,p)-p),d+=u||!s?u:",",p+=u.length,f?f=(f+1)%5:"rgba("===u.substr(-5)&&(f=1),c===n[s]||n.length<=s?d+=c:(d&&(h.push(d),d=""),o=parseFloat(n[s]),h.push(o),h._firstPT={_next:h._firstPT,t:h,p:h.length-1,s:o,c:("="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*parseFloat(c.substr(2)):parseFloat(c)-o)||0,f:0,m:f&&f<4?Math.round:W}),p+=c.length;return d+=e.substr(p),d&&h.push(d),h.setRatio=H,G.test(e)&&(h.end=null),h},X=function(t,e,r,i,n,a,o,s,l){"function"===typeof i&&(i=i(l||0,t));var u,c=typeof t[e],h="function"!==c?"":e.indexOf("set")||"function"!==typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),p="get"!==r?r:h?o?t[h](o):t[h]():t[e],d="string"===typeof i&&"="===i.charAt(1),f={t:t,p:e,s:p,f:"function"===c,pg:0,n:n||e,m:a?"function"===typeof a?a:Math.round:0,pr:0,c:d?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-p||0};if(("number"!==typeof p||"number"!==typeof i&&!d)&&(o||isNaN(p)||!d&&isNaN(i)||"boolean"===typeof p||"boolean"===typeof i?(f.fp=o,u=q(p,d?parseFloat(f.s)+f.c+(f.s+"").replace(/[0-9\-\.]/g,""):i,s||B.defaultStringFilter,f),f={t:u,p:"setRatio",s:0,c:1,f:2,pg:0,n:n||e,pr:0,m:0}):(f.s=parseFloat(p),d||(f.c=parseFloat(i)-f.s||0))),f.c)return(f._next=this._firstPT)&&(f._next._prev=f),this._firstPT=f,f},$=B._internals={isArray:x,isSelector:F,lazyTweens:U,blobDif:q},Y=B._plugins={},Z=$.tweenLookup={},J=0,K=$.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},Q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},tt=O._rootFramesTimeline=new D,et=O._rootTimeline=new D,rt=30,it=$.lazyRender=function(){var t,e,r=U.length;for(V={},t=0;t<r;t++)e=U[t],e&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);U.length=0};et._startTime=d.time,tt._startTime=d.frame,et._active=tt._active=!0,setTimeout(it,1),O._updateRoot=B.render=function(){var t,e,r;if(U.length&&it(),et.render((d.time-et._startTime)*et._timeScale,!1,!1),tt.render((d.frame-tt._startTime)*tt._timeScale,!1,!1),U.length&&it(),d.frame>=rt){for(r in rt=d.frame+(parseInt(B.autoSleep,10)||120),Z){e=Z[r].tweens,t=e.length;while(--t>-1)e[t]._gc&&e.splice(t,1);0===e.length&&delete Z[r]}if(r=et._first,(!r||r._paused)&&B.autoSleep&&!tt._first&&1===d._listeners.tick.length){while(r&&r._paused)r=r._next;r||d.sleep()}}},d.addEventListener("tick",O._updateRoot);var nt=function(t,e,r){var i,n,a=t._gsTweenID;if(Z[a||(t._gsTweenID=a="t"+J++)]||(Z[a]={target:t,tweens:[]}),e&&(i=Z[a].tweens,i[n=i.length]=e,r))while(--n>-1)i[n]===e&&i.splice(n,1);return Z[a].tweens},at=function(t,e,r,i){var n,a,o=t.vars.onOverwrite;return o&&(n=o(t,e,r,i)),o=B.onOverwrite,o&&(a=o(t,e,r,i)),!1!==n&&!1!==a},ot=function(t,e,r,i,n){var a,o,s,l;if(1===i||i>=4){for(l=n.length,a=0;a<l;a++)if((s=n[a])!==e)s._gc||s._kill(null,t,e)&&(o=!0);else if(5===i)break;return o}var u,c=e._startTime+g,h=[],p=0,d=0===e._duration;a=n.length;while(--a>-1)(s=n[a])===e||s._gc||s._paused||(s._timeline!==e._timeline?(u=u||st(e,0,d),0===st(s,u,d)&&(h[p++]=s)):s._startTime<=c&&s._startTime+s.totalDuration()/s._timeScale>c&&((d||!s._initted)&&c-s._startTime<=2*g||(h[p++]=s)));a=p;while(--a>-1)if(s=h[a],l=s._firstPT,2===i&&s._kill(r,t,e)&&(o=!0),2!==i||!s._firstPT&&s._initted&&l){if(2!==i&&!at(s,e))continue;s._enabled(!1,!1)&&(o=!0)}return o},st=function(t,e,r){var i=t._timeline,n=i._timeScale,a=t._startTime;while(i._timeline){if(a+=i._startTime,n*=i._timeScale,i._paused)return-100;i=i._timeline}return a/=n,a>e?a-e:r&&a===e||!t._initted&&a-e<2*g?g:(a+=t.totalDuration()/t._timeScale/n)>e+g?0:a-e-g};p._init=function(){var t,e,r,i,n,a,o=this.vars,s=this._overwrittenProps,l=this._duration,u=!!o.immediateRender,c=o.ease,h=this._startAt;if(o.startAt){for(i in h&&(h.render(-1,!0),h.kill()),n={},o.startAt)n[i]=o.startAt[i];if(n.data="isStart",n.overwrite=!1,n.immediateRender=!0,n.lazy=u&&!1!==o.lazy,n.startAt=n.delay=null,n.onUpdate=o.onUpdate,n.onUpdateParams=o.onUpdateParams,n.onUpdateScope=o.onUpdateScope||o.callbackScope||this,this._startAt=B.to(this.target||{},0,n),u)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(o.runBackwards&&0!==l)if(h)h.render(-1,!0),h.kill(),this._startAt=null;else{for(i in 0!==this._time&&(u=!1),r={},o)K[i]&&"autoCSS"!==i||(r[i]=o[i]);if(r.overwrite=0,r.data="isFromStart",r.lazy=u&&!1!==o.lazy,r.immediateRender=u,this._startAt=B.to(this.target,0,r),u){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof M?c:"function"===typeof c?new M(c,o.easeParams):A[c]||B.defaultEase:B.defaultEase,o.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,t=0;t<a;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],s?s[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,s,0);if(e&&B._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!==typeof this.target&&this._enabled(!1,!1)),o.runBackwards){r=this._firstPT;while(r)r.s+=r.c,r.c=-r.c,r=r._next}this._onUpdate=o.onUpdate,this._initted=!0},p._initProps=function(t,e,i,n,a){var o,s,l,u,c,h;if(null==t)return!1;for(o in V[t._gsTweenID]&&it(),this.vars.css||t.style&&t!==r&&t.nodeType&&Y.css&&!1!==this.vars.autoCSS&&N(this.vars,t),this.vars)if(h=this.vars[o],K[o])h&&(h instanceof Array||h.push&&x(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[o]=h=this._swapSelfInParams(h,this));else if(Y[o]&&(u=new Y[o])._onInitTween(t,this.vars[o],this,a)){this._firstPT=c={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:u._priority,m:0},s=u._overwriteProps.length;while(--s>-1)e[u._overwriteProps[s]]=this._firstPT;(u._priority||u._onInitAllProps)&&(l=!0),(u._onDisable||u._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else e[o]=X.call(this,t,o,"get",h,o,0,null,this.vars.stringFilter,a);return n&&this._kill(n,t)?this._initProps(t,e,i,n,a):this._overwrite>1&&this._firstPT&&i.length>1&&ot(t,this,e,this._overwrite,i)?(this._kill(e,t),this._initProps(t,e,i,n,a)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(V[t._gsTweenID]=!0),l)},p.render=function(t,e,r){var i,n,a,o,s=this,l=s._time,u=s._duration,c=s._rawPrevTime;if(t>=u-g&&t>=0)s._totalTime=s._time=u,s.ratio=s._ease._calcEnd?s._ease.getRatio(1):1,s._reversed||(i=!0,n="onComplete",r=r||s._timeline.autoRemoveChildren),0===u&&(s._initted||!s.vars.lazy||r)&&(s._startTime===s._timeline._duration&&(t=0),(c<0||t<=0&&t>=-g||c===g&&"isPause"!==s.data)&&c!==t&&(r=!0,c>g&&(n="onReverseComplete")),s._rawPrevTime=o=!e||t||c===t?t:g);else if(t<g)s._totalTime=s._time=0,s.ratio=s._ease._calcEnd?s._ease.getRatio(0):0,(0!==l||0===u&&c>0)&&(n="onReverseComplete",i=s._reversed),t>-g?t=0:t<0&&(s._active=!1,0===u&&(s._initted||!s.vars.lazy||r)&&(c>=0&&(c!==g||"isPause"!==s.data)&&(r=!0),s._rawPrevTime=o=!e||t||c===t?t:g)),(!s._initted||s._startAt&&s._startAt.progress())&&(r=!0);else if(s._totalTime=s._time=t,s._easeType){var h=t/u,p=s._easeType,d=s._easePower;(1===p||3===p&&h>=.5)&&(h=1-h),3===p&&(h*=2),1===d?h*=h:2===d?h*=h*h:3===d?h*=h*h*h:4===d&&(h*=h*h*h*h),s.ratio=1===p?1-h:2===p?h:t/u<.5?h/2:1-h/2}else s.ratio=s._ease.getRatio(t/u);if(s._time!==l||r){if(!s._initted){if(s._init(),!s._initted||s._gc)return;if(!r&&s._firstPT&&(!1!==s.vars.lazy&&s._duration||s.vars.lazy&&!s._duration))return s._time=s._totalTime=l,s._rawPrevTime=c,U.push(s),void(s._lazy=[t,e]);s._time&&!i?s.ratio=s._ease.getRatio(s._time/u):i&&s._ease._calcEnd&&(s.ratio=s._ease.getRatio(0===s._time?0:1))}!1!==s._lazy&&(s._lazy=!1),s._active||!s._paused&&s._time!==l&&t>=0&&(s._active=!0),0===l&&(s._startAt&&(t>=0?s._startAt.render(t,!0,r):n||(n="_dummyGS")),s.vars.onStart&&(0===s._time&&0!==u||e||s._callback("onStart"))),a=s._firstPT;while(a)a.f?a.t[a.p](a.c*s.ratio+a.s):a.t[a.p]=a.c*s.ratio+a.s,a=a._next;s._onUpdate&&(t<0&&s._startAt&&-1e-4!==t&&s._startAt.render(t,!0,r),e||(s._time!==l||i||r)&&s._callback("onUpdate")),n&&(s._gc&&!r||(t<0&&s._startAt&&!s._onUpdate&&-1e-4!==t&&s._startAt.render(t,!0,r),i&&(s._timeline.autoRemoveChildren&&s._enabled(!1,!1),s._active=!1),!e&&s.vars[n]&&s._callback(n),0===u&&s._rawPrevTime===g&&o!==g&&(s._rawPrevTime=0)))}},p._kill=function(t,e,r){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!==typeof e?e||this._targets||this.target:B.selector(e)||e;var i,n,a,o,s,l,u,c,h,p=r&&this._time&&r._startTime===this._startTime&&this._timeline===r._timeline,d=this._firstPT;if((x(e)||F(e))&&"number"!==typeof e[0]){i=e.length;while(--i>-1)this._kill(t,e[i],r)&&(l=!0)}else{if(this._targets){i=this._targets.length;while(--i>-1)if(e===this._targets[i]){s=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;s=this._propLookup,n=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(s){if(u=t||s,c=t!==n&&"all"!==n&&t!==s&&("object"!==typeof t||!t._tempKill),r&&(B.onOverwrite||this.vars.onOverwrite)){for(a in u)s[a]&&(h||(h=[]),h.push(a));if((h||!t)&&!at(this,r,e,h))return!1}for(a in u)(o=s[a])&&(p&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,l=!0),o.pg&&o.t._kill(u)&&(l=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete s[a]),c&&(n[a]=1);!this._firstPT&&this._initted&&d&&this._enabled(!1,!1)}}return l},p.invalidate=function(){this._notifyPluginsOfEnabled&&B._onPluginEvent("_onDisable",this);var t=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],O.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-g,this.render(t,!1,!1!==this.vars.lazy)),this},p._enabled=function(t,e){if(f||d.wake(),t&&this._gc){var r,i=this._targets;if(i){r=i.length;while(--r>-1)this._siblings[r]=nt(i[r],this,!0)}else this._siblings=nt(this.target,this,!0)}return O.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&B._onPluginEvent(t?"_onEnable":"_onDisable",this)},B.to=function(t,e,r){return new B(t,e,r)},B.from=function(t,e,r){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,new B(t,e,r)},B.fromTo=function(t,e,r,i){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,new B(t,e,i)},B.delayedCall=function(t,e,r,i,n){return new B(e,0,{delay:t,onComplete:e,onCompleteParams:r,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:r,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},B.set=function(t,e){return new B(t,0,e)},B.getTweensOf=function(t,e){if(null==t)return[];var r,i,n,a;if(t="string"!==typeof t?t:B.selector(t)||t,(x(t)||F(t))&&"number"!==typeof t[0]){r=t.length,i=[];while(--r>-1)i=i.concat(B.getTweensOf(t[r],e));r=i.length;while(--r>-1){a=i[r],n=r;while(--n>-1)a===i[n]&&i.splice(r,1)}}else if(t._gsTweenID){i=nt(t).concat(),r=i.length;while(--r>-1)(i[r]._gc||e&&!i[r].isActive())&&i.splice(r,1)}return i||[]},B.killTweensOf=B.killDelayedCallsTo=function(t,e,r){"object"===typeof e&&(r=e,e=!1);var i=B.getTweensOf(t,e),n=i.length;while(--n>-1)i[n]._kill(r,t)};var lt=S("plugins.TweenPlugin",(function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=lt.prototype}),!0);if(p=lt.prototype,lt.version="1.19.0",lt.API=2,p._firstPT=null,p._addTween=X,p.setRatio=H,p._kill=function(t){var e,r=this._overwriteProps,i=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else{e=r.length;while(--e>-1)null!=t[r[e]]&&r.splice(e,1)}while(i)null!=t[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},p._mod=p._roundProps=function(t){var e,r=this._firstPT;while(r)e=t[this._propName]||null!=r.n&&t[r.n.split(this._propName+"_").join("")],e&&"function"===typeof e&&(2===r.f?r.t._applyPT.m=e:r.m=e),r=r._next},B._onPluginEvent=function(t,e){var r,i,n,a,o,s=e._firstPT;if("_onInitAllProps"===t){while(s){o=s._next,i=n;while(i&&i.pr>s.pr)i=i._next;(s._prev=i?i._prev:a)?s._prev._next=s:n=s,(s._next=i)?i._prev=s:a=s,s=o}s=e._firstPT=n}while(s)s.pg&&"function"===typeof s.t[t]&&s.t[t]()&&(r=!0),s=s._next;return r},lt.activate=function(t){var e=t.length;while(--e>-1)t[e].API===lt.API&&(Y[(new t[e])._propName]=t[e]);return!0},T.plugin=function(t){if(!t||!t.propName||!t.init||!t.API)throw"illegal plugin definition.";var e,r=t.propName,i=t.priority||0,n=t.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},o=S("plugins."+r.charAt(0).toUpperCase()+r.substr(1)+"Plugin",(function(){lt.call(this,r,i),this._overwriteProps=n||[]}),!0===t.global),s=o.prototype=new lt(r);for(e in s.constructor=o,o.API=t.API,a)"function"===typeof t[e]&&(s[a[e]]=t[e]);return o.version=t.version,lt.activate([o]),o},c=r._gsQueue,c){for(h=0;h<c.length;h++)c[h]();for(p in b)b[p].func||r.console.log("GSAP encountered missing dependency: "+p)}f=!1})(t.exports&&"undefined"!==typeof r?r:this||window,"TweenLite")}).call(this,r("c8ba"))},d864:function(t,e,r){var i=r("79aa");t.exports=function(t,e,r){if(i(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,i){return t.call(e,r,i)};case 3:return function(r,i,n){return t.call(e,r,i,n)}}return function(){return t.apply(e,arguments)}}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},d9f6:function(t,e,r){var i=r("e4ae"),n=r("794b"),a=r("1bc3"),o=Object.defineProperty;e.f=r("8e60")?Object.defineProperty:function(t,e,r){if(i(t),e=a(e,!0),i(r),n)try{return o(t,e,r)}catch(s){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},db5d:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}function _arrayWithHoles(t){if(Array.isArray(t))return t}!function(){var lax=function(){for(var lax={elements:[]},lastY=0,currentBreakpoint="default",breakpointsSeparator="_",transformFns={"data-lax-opacity":function(t,e){t.opacity=e},"data-lax-translate":function(t,e){t.transform+=" translate(".concat(e,"px, ").concat(e,"px)")},"data-lax-translate-x":function(t,e){t.transform+=" translateX(".concat(e,"px)")},"data-lax-translate-y":function(t,e){t.transform+=" translateY(".concat(e,"px)")},"data-lax-scale":function(t,e){t.transform+=" scale(".concat(e,")")},"data-lax-scale-x":function(t,e){t.transform+=" scaleX(".concat(e,")")},"data-lax-scale-y":function(t,e){t.transform+=" scaleY(".concat(e,")")},"data-lax-skew":function(t,e){t.transform+=" skew(".concat(e,"deg, ").concat(e,"deg)")},"data-lax-skew-x":function(t,e){t.transform+=" skewX(".concat(e,"deg)")},"data-lax-skew-y":function(t,e){t.transform+=" skewY(".concat(e,"deg)")},"data-lax-rotate":function(t,e){t.transform+=" rotate(".concat(e,"deg)")},"data-lax-rotate-x":function(t,e){t.transform+=" rotateX(".concat(e,"deg)")},"data-lax-rotate-y":function(t,e){t.transform+=" rotateY(".concat(e,"deg)")},"data-lax-brightness":function(t,e){t.filter+=" brightness(".concat(e,"%)")},"data-lax-contrast":function(t,e){t.filter+=" contrast(".concat(e,"%)")},"data-lax-hue-rotate":function(t,e){t.filter+=" hue-rotate(".concat(e,"deg)")},"data-lax-blur":function(t,e){t.filter+=" blur(".concat(e,"px)")},"data-lax-invert":function(t,e){t.filter+="  invert(".concat(e,"%)")},"data-lax-saturate":function(t,e){t.filter+="  saturate(".concat(e,"%)")},"data-lax-grayscale":function(t,e){t.filter+="  grayscale(".concat(e,"%)")},"data-lax-bg-pos":function(t,e){t.backgroundPosition="".concat(e,"px ").concat(e,"px")},"data-lax-bg-pos-x":function(t,e){t.backgroundPositionX="".concat(e,"px")},"data-lax-bg-pos-y":function(t,e){t.backgroundPositionY="".concat(e,"px")}},_crazy="",i=0;i<20;i++)_crazy+=" "+5*i+" "+47*i%360+", ";function intrp(t,e){for(var r=0;t[r][0]<=e&&void 0!==t[r+1];)r+=1;var i=t[r][0],n=void 0===t[r-1]?i:t[r-1][0],a=t[r][1],o=void 0===t[r-1]?a:t[r-1][1];return Math.min(Math.max((e-n)/(i-n),0),1)*(a-o)+o}function fnOrVal(s){return"("===s[0]?eval(s):parseFloat(s)}return lax.presets={linger:function(t){return{"data-lax-translate-y":"(vh*0.7) 0, 0 200, -500 0"}},lazy:function(t){return{"data-lax-translate-y":"(vh) 0, (-elh) ".concat(0<arguments.length&&void 0!==t?t:100)}},eager:function(t){return{"data-lax-translate-y":"(vh) 0, (-elh) -".concat(0<arguments.length&&void 0!==t?t:100)}},slalom:function(t){var e=0<arguments.length&&void 0!==t?t:50;return{"data-lax-translate-x":"vh ".concat(e,", (vh*0.8) ").concat(-e,", (vh*0.6) ").concat(e,", (vh*0.4) ").concat(-e,", (vh*0.2) ").concat(e,", (vh*0) ").concat(-e,", (-elh) ").concat(e)}},crazy:function(t){return{"data-lax-hue-rotate":"".concat(_crazy," | loop=20")}},spin:function(t){return{"data-lax-rotate":"(vh) 0, (-elh) ".concat(0<arguments.length&&void 0!==t?t:360)}},spinRev:function(t){return{"data-lax-rotate":"(vh) 0, (-elh) ".concat(-(0<arguments.length&&void 0!==t?t:360))}},spinIn:function(t){return{"data-lax-rotate":"vh ".concat(0<arguments.length&&void 0!==t?t:360,", (vh*0.5) 0")}},spinOut:function(t){return{"data-lax-rotate":"(vh*0.5) 0, -elh ".concat(0<arguments.length&&void 0!==t?t:360)}},blurInOut:function(t){var e=0<arguments.length&&void 0!==t?t:40;return{"data-lax-blur":"(vh) ".concat(e,", (vh*0.8) 0, (vh*0.2) 0, 0 ").concat(e)}},blurIn:function(t){return{"data-lax-blur":"(vh) ".concat(0<arguments.length&&void 0!==t?t:40,", (vh*0.7) 0")}},blurOut:function(t){return{"data-lax-blur":"(vh*0.3) 0, 0 ".concat(0<arguments.length&&void 0!==t?t:40)}},fadeInOut:function(){return{"data-lax-opacity":"(vh) 0, (vh*0.8) 1, (vh*0.2) 1, 0 0"}},fadeIn:function(){return{"data-lax-opacity":"(vh) 0, (vh*0.7) 1"}},fadeOut:function(){return{"data-lax-opacity":"(vh*0.3) 1, 0 0"}},driftLeft:function(t){var e=0<arguments.length&&void 0!==t?t:100;return{"data-lax-translate-x":"vh ".concat(e,", -elh ").concat(-e)}},driftRight:function(t){var e=0<arguments.length&&void 0!==t?t:100;return{"data-lax-translate-x":"vh ".concat(-e,", -elh ").concat(e)}},leftToRight:function(t){return{"data-lax-translate-x":"vh 0, -elh (vw*".concat(0<arguments.length&&void 0!==t?t:1,")")}},rightToLeft:function(t){return{"data-lax-translate-x":"vh 0, -elh (vw*".concat(-(0<arguments.length&&void 0!==t?t:1),")")}},zoomInOut:function(t){var e=0<arguments.length&&void 0!==t?t:.2;return{"data-lax-scale":"(vh) ".concat(e,", (vh*0.8) 1, (vh*0.2) 1, -elh ").concat(e)}},zoomIn:function(t){return{"data-lax-scale":"(vh) ".concat(0<arguments.length&&void 0!==t?t:.2,", (vh*0.7) 1")}},zoomOut:function(t){return{"data-lax-scale":"(vh*0.3) 1, -elh ".concat(0<arguments.length&&void 0!==t?t:.2)}},speedy:function(t){var e=0<arguments.length&&void 0!==t?t:30;return{"data-lax-skew-x":"(vh) ".concat(e,", -elh ").concat(-e)}},swing:function(t){var e=0<arguments.length&&void 0!==t?t:30;return{"data-lax-skew-y":"(vh) ".concat(e,", -elh ").concat(-e)}}},lax.addPreset=function(t,e){lax.presets[t]=e},lax.setup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};lax.breakpoints=t.breakpoints||{},lax.selector=t.selector||".lax",lax.populateElements()},lax.removeElement=function(t){var e=lax.elements.findIndex((function(e){return e.el=t}));-1<e&&lax.elements.splice(e,1)},lax.createLaxObject=function(t){return{el:t,originalStyle:{transform:t.style.transform,filter:t.style.filter},transforms:{}}},lax.calcTransforms=function(t){for(var e=t.el,r=[],i=0;i<e.attributes.length;i++){var n=e.attributes[i];-1<n.name.indexOf("data-lax-preset")&&r.push(n)}for(var a=function(t){var i=r[t],n=i.name.split(breakpointsSeparator),a=n[1]?"".concat(breakpointsSeparator).concat(n[1]):"";i.value.split(" ").forEach((function(t){var r=t.split("-"),i=lax.presets[r[0]];if(i){var n=i(r[1]);for(var o in n)e.setAttribute("".concat(o).concat(a),n[o])}else console.log("lax error: preset ".concat(r[0]," is not defined"))}));var o=e.getAttribute("data-lax-anchor");o&&""!==o||e.setAttribute("data-lax-anchor","self"),e.attributes.removeNamedItem(i.name)},o=0;o<r.length;o++)a(o);if(!(e.attributes["data-lax-use-gpu"]&&"false"===e.attributes["data-lax-use-gpu"].value)&&(e.style["backface-visibility"]="hidden",e.style["-webkit-backface-visibility"]="hidden"),e.attributes["data-lax-use-gpu"]&&e.attributes.removeNamedItem("data-lax-use-gpu"),t.optimise=!1,e.attributes["data-lax-optimize"]&&"true"===e.attributes["data-lax-optimize"].value){t.optimise=!0;var s=e.getBoundingClientRect();e.setAttribute("data-lax-opacity","".concat(-s.height-1," 0, ").concat(-s.height," 1, ").concat(window.innerHeight," 1, ").concat(window.innerHeight+1," 0")),e.attributes.removeNamedItem("data-lax-optimize")}for(var l=0;l<e.attributes.length;l++){var u=e.attributes[l];if(!(u.name.indexOf("data-lax")<0)){var c=u.name.split(breakpointsSeparator),h=c[0].split("-"),p=c[1]||"default";if("lax"===h[1])if("data-lax-anchor"===u.name){t["data-lax-anchor"]="self"===u.value?e:document.querySelector(u.value);var d=t["data-lax-anchor"].getBoundingClientRect();t.anchorTop=Math.floor(d.top)+window.scrollY}else!function(){var r=_slicedToArray(u.value.replace(/vw/g,window.innerWidth).replace(/vh/g,window.innerHeight).replace(/elh/g,e.clientHeight).replace(/elw/g,e.clientWidth).replace(/\s+/g," ").split("|"),2),i=r[0],n=r[1],a={};n&&n.split(" ").forEach((function(t){var e=_slicedToArray(t.split("="),2),r=e[0],i=e[1];a[r]=r&&fnOrVal(i)}));var o=c[0],s=i.split(",").map((function(t){return t.trim().split(" ").map(fnOrVal)})).sort((function(t,e){return t[0]-e[0]}));t.transforms[o]||(t.transforms[o]={}),t.transforms[o][p]={valueMap:s,options:a}}()}}var f=e.attributes["data-lax-sprite-data"]&&e.attributes["data-lax-sprite-data"].value;if(f){t.spriteData=f.split(",").map((function(t){return parseInt(t)})),e.style.height=t.spriteData[1]+"px",e.style.width=t.spriteData[0]+"px";var m=e.attributes["data-lax-sprite-image"]&&e.attributes["data-lax-sprite-image"].value;m&&(e.style.backgroundImage="url(".concat(m,")"))}return t},lax.addElement=function(t){var e=lax.calcTransforms(lax.createLaxObject(t));lax.elements.push(e),lax.updateElement(e)},lax.populateElements=function(){lax.elements=[],document.querySelectorAll(lax.selector).forEach(lax.addElement),currentBreakpoint=lax.getCurrentBreakPoint()},lax.updateElements=function(){lax.elements.forEach((function(t){lax.calcTransforms(t),lax.updateElement(t)})),currentBreakpoint=lax.getCurrentBreakPoint()},lax.getCurrentBreakPoint=function(){var t="default",e=window.innerWidth;for(var r in lax.breakpoints){if(!(parseFloat(lax.breakpoints[r])<=e))break;t=r}return t},lax.updateElement=function(t){var e=t.originalStyle,r=t.anchorTop,i=t.transforms,n=t.spriteData,a=t.el,o=r?r-lastY:lastY,s={transform:e.transform,filter:e.filter};for(var l in i){var u=i[l][currentBreakpoint]||i[l].default;if(u){var c=o;u.options.offset&&(c+=u.options.offset),u.options.speed&&(c*=u.options.speed),u.options.loop&&(c%=u.options.loop);var h=transformFns[l],p=intrp(u.valueMap,c);h&&h(s,p)}}if(n){var d=_slicedToArray(n,5),f=d[0],m=d[1],v=d[2],g=d[3],y=d[4],_=Math.floor(lastY/y)%v,x=_%g,b=Math.floor(_/g);s.backgroundPosition="-".concat(x*f,"px -").concat(b*m,"px")}if(0===s.opacity)a.style.opacity=0;else for(var w in s)a.style[w]=s[w]},lax.update=function(t){lastY!==t&&(lastY=t,lax.elements.forEach(lax.updateElement))},lax}();void 0!==module.exports?module.exports=lax:window.lax=lax}()},dbdb:function(t,e,r){var i=r("584a"),n=r("e53d"),a="__core-js_shared__",o=n[a]||(n[a]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:r("b8e3")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},dcbc:function(t,e,r){var i=r("2aba");t.exports=function(t,e,r){for(var n in e)i(t,n,e[n],r);return t}},dd40:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},dfa4:function(t,e,r){},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e192:function(t,e,r){(function(e,r){t.exports=r()})(0,(function(){"use strict";var t,e,r;function i(i,n){if(t)if(e){var a="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",o={};t(o),r=n(o),r.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else e=n;else t=n}return i(["exports"],(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=i;function i(t,e,r,i){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=r,this.p2y=i}i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var r,i,n,a,o;for(void 0===e&&(e=1e-6),n=t,o=0;o<8;o++){if(a=this.sampleCurveX(n)-t,Math.abs(a)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=a/s}if((n=t)<(r=0))return r;if(n>(i=1))return i;for(;r<i;){if(a=this.sampleCurveX(n),Math.abs(a-t)<e)return n;t>a?r=n:i=n,n=.5*(i-r)+r}return n},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var n=a;function a(t,e){this.x=t,this.y=e}function o(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!o(t[r],e[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!o(t[i],e[i]))return!1;return!0}return t===e}function s(t,e,i,n){var a=new r(t,e,i,n);return function(t){return a.solve(t)}}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),i=e*this.x-r*this.y,n=r*this.x+e*this.y;return this.x=i,this.y=n,this},_rotateAround:function(t,e){var r=Math.cos(t),i=Math.sin(t),n=e.x+r*(this.x-e.x)-i*(this.y-e.y),a=e.y+i*(this.x-e.x)+r*(this.y-e.y);return this.x=n,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t};var l=s(.25,.1,.25,1);function u(t,e,r){return Math.min(r,Math.max(e,t))}function c(t,e,r){var i=r-e,n=((t-e)%i+i)%i+e;return n===e?r:n}function h(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var i=0,n=e;i<n.length;i+=1){var a=n[i];for(var o in a)t[o]=a[o]}return t}var p=1;function d(){return p++}function f(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function m(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function v(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function g(t,e){return-1!==t.indexOf(e,t.length-e.length)}function y(t,e,r){var i={};for(var n in t)i[n]=e.call(r||this,t[n],n,t);return i}function _(t,e,r){var i={};for(var n in t)e.call(r||this,t[n],n,t)&&(i[n]=t[n]);return i}function x(t){return Array.isArray(t)?t.map(x):"object"==typeof t&&t?y(t,x):t}var b={};function w(t){b[t]||("undefined"!=typeof console&&console.warn(t),b[t]=!0)}function T(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function S(t){for(var e=0,r=0,i=t.length,n=i-1,a=void 0,o=void 0;r<i;n=r++)a=t[r],e+=((o=t[n]).x-a.x)*(a.y+o.y);return e}function E(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,r,i,n){var a=i||n;return e[r]=!a||a.toLowerCase(),""})),e["max-age"]){var r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}function M(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var A,C,P,L,I=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),k=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,R=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,O={now:I,frame:function(t){var e=k(t);return{cancel:function(){return R(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var r=self.document.createElement("canvas"),i=r.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return r.width=t.width,r.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return A||(A=self.document.createElement("a")),A.href=t,A.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==C&&(C=self.matchMedia("(prefers-reduced-motion: reduce)")),C.matches)}},z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},D={supported:!1,testSupport:function(t){!B&&L&&(F?N(t):P=t)}},B=!1,F=!1;function N(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,L),t.isContextLost())return;D.supported=!0}catch(t){}t.deleteTexture(e),B=!0}self.document&&((L=self.document.createElement("img")).onload=function(){P&&N(P),P=null,F=!0},L.onerror=function(){B=!0,P=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var U="01",V=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function j(t){return 0===t.indexOf("mapbox:")}V.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",U,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},V.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},V.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},V.prototype.normalizeStyleURL=function(t,e){if(!j(t))return t;var r=q(t);return r.path="/styles/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},V.prototype.normalizeGlyphsURL=function(t,e){if(!j(t))return t;var r=q(t);return r.path="/fonts/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},V.prototype.normalizeSourceURL=function(t,e){if(!j(t))return t;var r=q(t);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),this._makeAPIURL(r,this._customAccessToken||e)},V.prototype.normalizeSpriteURL=function(t,e,r,i){var n=q(t);return j(t)?(n.path="/styles/v1"+n.path+"/sprite"+e+r,this._makeAPIURL(n,this._customAccessToken||i)):(n.path+=""+e+r,X(n))},V.prototype.normalizeTileURL=function(t,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),!e||!j(e))return t;var i=q(t),n=O.devicePixelRatio>=2||512===r?"@2x":"",a=D.supported?".webp":"$1";return i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+n+a),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path,z.REQUIRE_ACCESS_TOKEN&&(z.ACCESS_TOKEN||this._customAccessToken)&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,this._customAccessToken)},V.prototype.canonicalizeTileURL=function(t){var e=q(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=e.path.replace("/v4/","");var i=e.params.filter((function(t){return!t.match(/^access_token=/)}));return i.length&&(r+="?"+i.join("&")),r},V.prototype.canonicalizeTileset=function(t,e){if(!j(e))return t.tiles||[];for(var r=[],i=0,n=t.tiles;i<n.length;i+=1){var a=n[i],o=this.canonicalizeTileURL(a);r.push(o)}return r},V.prototype._makeAPIURL=function(t,e){var r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=q(z.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"/"!==i.path&&(t.path=""+i.path+t.path),!z.REQUIRE_ACCESS_TOKEN)return X(t);if(!(e=e||z.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+r);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+r);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),X(t)};var G=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function H(t){return G.test(t)}var W=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function q(t){var e=t.match(W);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function X(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function $(t){if(!t)return null;var e,r=t.split(".");if(!r||3!==r.length)return null;try{return JSON.parse((e=r[1],decodeURIComponent(self.atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(t){return null}}var Y=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Y.prototype.getStorageKey=function(t){var e,r=$(z.ACCESS_TOKEN),i="";return r&&r.u?(e=r.u,i=self.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})))):i=z.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+i:"mapbox.eventData:"+i},Y.prototype.fetchEventData=function(){var t=M("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{var i=self.localStorage.getItem(e);i&&(this.eventData=JSON.parse(i));var n=self.localStorage.getItem(r);n&&(this.anonId=n)}catch(t){w("Unable to read from LocalStorage")}},Y.prototype.saveEventData=function(){var t=M("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){w("Unable to write to LocalStorage")}},Y.prototype.processRequests=function(t){},Y.prototype.postEvent=function(t,e,r,i){var n=this;if(z.EVENTS_URL){var a=q(z.EVENTS_URL);a.params.push("access_token="+(i||z.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.5.0",skuId:U,userId:this.anonId},s=e?h(o,e):o,l={url:X(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=_t(l,(function(t){n.pendingRequest=null,r(t),n.saveEventData(),n.processRequests(i)}))}},Y.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var Z,J=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postMapLoadEvent=function(t,e,r,i){this.skuToken=r,(z.EVENTS_URL&&i||z.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return j(t)||H(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},i)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var r=this.queue.shift(),i=r.id,n=r.timestamp;i&&this.success[i]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=f()),this.postEvent(n,{skuToken:this.skuToken},(function(t){t||i&&(e.success[i]=!0)}),t))}},e}(Y),K=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postTurnstileEvent=function(t,e){z.EVENTS_URL&&z.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return j(t)||H(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var r=$(z.ACCESS_TOKEN),i=r?r.u:z.ACCESS_TOKEN,n=i!==this.eventData.tokenU;m(this.anonId)||(this.anonId=f(),n=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),l=(a-this.eventData.lastSuccess)/864e5;n=n||l>=1||l<-1||o.getDate()!==s.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(a,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=a,e.eventData.tokenU=i)}),t)}},e}(Y)),Q=K.postTurnstileEvent.bind(K),tt=new J,et=tt.postMapLoadEvent.bind(tt),rt="mapbox-tiles",it=500,nt=50,at=42e4;function ot(t,e,r){if(self.caches){var i={status:e.status,statusText:e.statusText,headers:new self.Headers};e.headers.forEach((function(t,e){return i.headers.set(e,t)}));var n=E(e.headers.get("Cache-Control")||"");n["no-store"]||(n["max-age"]&&i.headers.set("Expires",new Date(r+1e3*n["max-age"]).toUTCString()),new Date(i.headers.get("Expires")).getTime()-r<at||function(t,e){if(void 0===Z)try{new Response(new ReadableStream),Z=!0}catch(t){Z=!1}Z?e(t.body):t.blob().then(e)}(e,(function(e){var r=new self.Response(e,i);self.caches.open(rt).then((function(e){return e.put(st(t.url),r)})).catch((function(t){return w(t.message)}))})))}}function st(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}function lt(t,e){if(!self.caches)return e(null);var r=st(t.url);self.caches.open(rt).then((function(t){t.match(r).then((function(i){var n=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")),r=E(t.headers.get("Cache-Control")||"");return e>Date.now()&&!r["no-cache"]}(i);t.delete(r),n&&t.put(r,i.clone()),e(null,i,n)})).catch(e)})).catch(e)}var ut=1/0,ct={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ct);var ht=function(t){function e(e,r,i){401===r&&H(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=r,this.url=i,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function pt(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var dt=pt()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function ft(t,e){var r,i=new self.AbortController,n=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:dt(),signal:i.signal}),a=!1,o=!1,s=(r=n.url).indexOf("sku=")>0&&H(r);"json"===t.type&&n.headers.set("Accept","application/json");var l=function(r,i,a){if(!o){if(r&&"SecurityError"!==r.message&&w(r),i&&a)return u(i);var l=Date.now();self.fetch(n).then((function(r){if(r.ok){var i=s?r.clone():null;return u(r,i,l)}return e(new ht(r.statusText,r.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},u=function(r,i,s){("arrayBuffer"===t.type?r.arrayBuffer():"json"===t.type?r.json():r.text()).then((function(t){o||(i&&s&&ot(n,i,s),a=!0,e(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((function(t){return e(new Error(t.message))}))};return s?lt(n,l):l(null,null),{cancel:function(){o=!0,a||i.abort()}}}var mt,vt,gt=function(t,e){if(r=t.url,!(/^file:/.test(r)||/^file:/.test(dt())&&!/^\w+:/.test(r))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ft(t,e);if(pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e)}var r;return function(t,e){var r=new self.XMLHttpRequest;for(var i in r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer"),t.headers)r.setRequestHeader(i,t.headers[i]);return"json"===t.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===t.credentials,r.onerror=function(){e(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var i=r.response;if("json"===t.type)try{i=JSON.parse(r.response)}catch(t){return e(t)}e(null,i,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else e(new ht(r.statusText,r.status,t.url))},r.send(t.body),{cancel:function(){return r.abort()}}}(t,e)},yt=function(t,e){return gt(h(t,{type:"arrayBuffer"}),e)},_t=function(t,e){return gt(h(t,{method:"POST"}),e)};mt=[],vt=0;var xt=function(t,e){if(vt>=z.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return mt.push(r),r}vt++;var i=!1,n=function(){if(!i)for(i=!0,vt--;mt.length&&vt<z.MAX_PARALLEL_IMAGE_REQUESTS;){var t=mt.shift(),e=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=xt(e,r).cancel)}},a=yt(t,(function(t,r,i,a){if(n(),t)e(t);else if(r){var o=new self.Image,s=self.URL||self.webkitURL;o.onload=function(){e(null,o),s.revokeObjectURL(o.src)},o.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var l=new self.Blob([new Uint8Array(r)],{type:"image/png"});o.cacheControl=i,o.expires=a,o.src=r.byteLength?s.createObjectURL(l):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}}));return{cancel:function(){a.cancel(),n()}}};function bt(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e))}function wt(t,e,r){if(r&&r[t]){var i=r[t].indexOf(e);-1!==i&&r[t].splice(i,1)}}var Tt=function(t,e){void 0===e&&(e={}),h(this,e),this.type=t},St=function(t){function e(e,r){void 0===r&&(r={}),t.call(this,"error",h({error:e},r))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Tt),Et=function(){};Et.prototype.on=function(t,e){return this._listeners=this._listeners||{},bt(t,e,this._listeners),this},Et.prototype.off=function(t,e){return wt(t,e,this._listeners),wt(t,e,this._oneTimeListeners),this},Et.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},bt(t,e,this._oneTimeListeners),this},Et.prototype.fire=function(t,e){"string"==typeof t&&(t=new Tt(t,e||{}));var r=t.type;if(this.listens(r)){t.target=this;for(var i=0,n=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];i<n.length;i+=1)n[i].call(this,t);for(var a=0,o=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];a<o.length;a+=1){var s=o[a];wt(r,s,this._oneTimeListeners),s.call(this,t)}var l=this._eventedParent;l&&(h(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof St&&console.error(t.error);return this},Et.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Et.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var Mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},At=function(t,e,r,i){this.message=(t?t+": ":"")+r,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)};function Ct(t){var e=t.key,r=t.value;return r?[new At(e,r,"constants have been deprecated as of v8")]:[]}function Pt(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var i=0,n=e;i<n.length;i+=1){var a=n[i];for(var o in a)t[o]=a[o]}return t}function Lt(t){return t instanceof Number||t instanceof String||t instanceof Boolean}function It(t){return Lt(t)?t.valueOf():t}function kt(t){if(Array.isArray(t))return t.map(kt);if(t instanceof Object&&!Lt(t)){var e={};for(var r in t)e[r]=kt(t[r]);return e}return It(t)}var Rt=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Ot=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,i=e;r<i.length;r+=1){var n=i[r],a=n[0],o=n[1];this.bindings[a]=o}};Ot.prototype.concat=function(t){return new Ot(this,t)},Ot.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Ot.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var zt={kind:"null"},Dt={kind:"number"},Bt={kind:"string"},Ft={kind:"boolean"},Nt={kind:"color"},Ut={kind:"object"},Vt={kind:"value"},jt={kind:"collator"},Gt={kind:"formatted"},Ht={kind:"resolvedImage"};function Wt(t,e){return{kind:"array",itemType:t,N:e}}function qt(t){if("array"===t.kind){var e=qt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Xt=[zt,Dt,Bt,Ft,Nt,Gt,Ut,Wt(Vt),Ht];function $t(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!$t(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,i=Xt;r<i.length;r+=1)if(!$t(i[r],e))return null}return"Expected "+qt(t)+" but found "+qt(e)+" instead."}var Yt=e((function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function n(t){return t<0?0:t>1?1:t}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100*255):i(parseInt(t))}function o(t){return"%"===t[t.length-1]?n(parseFloat(t)/100):n(parseFloat(t))}function s(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in r)return r[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=n.indexOf("("),u=n.indexOf(")");if(-1!==l&&u+1===n.length){var c=n.substr(0,l),h=n.substr(l+1,u-(l+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=o(h.pop());case"rgb":return 3!==h.length?null:[a(h[0]),a(h[1]),a(h[2]),p];case"hsla":if(4!==h.length)return null;p=o(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,f=o(h[1]),m=o(h[2]),v=m<=.5?m*(f+1):m+f-m*f,g=2*m-v;return[i(255*s(g,v,d+1/3)),i(255*s(g,v,d)),i(255*s(g,v,d-1/3)),p];default:return null}}return null}}catch(t){}})).parseCSSColor,Zt=function(t,e,r,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=r,this.a=i};Zt.parse=function(t){if(t){if(t instanceof Zt)return t;if("string"==typeof t){var e=Yt(t);if(e)return new Zt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Zt.prototype.toString=function(){var t=this.toArray(),e=t[0],r=t[1],i=t[2],n=t[3];return"rgba("+Math.round(e)+","+Math.round(r)+","+Math.round(i)+","+n+")"},Zt.prototype.toArray=function(){var t=this.r,e=this.g,r=this.b,i=this.a;return 0===i?[0,0,0,0]:[255*t/i,255*e/i,255*r/i,i]},Zt.black=new Zt(0,0,0,1),Zt.white=new Zt(1,1,1,1),Zt.transparent=new Zt(0,0,0,0),Zt.red=new Zt(1,0,0,1);var Jt=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Jt.prototype.compare=function(t,e){return this.collator.compare(t,e)},Jt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Kt=function(t,e,r,i){this.text=t,this.scale=e,this.fontStack=r,this.textColor=i},Qt=function(t){this.sections=t};Qt.fromString=function(t){return new Qt([new Kt(t,null,null,null)])},Qt.prototype.toString=function(){return this.sections.map((function(t){return t.text})).join("")},Qt.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var i=r[e];t.push(i.text);var n={};i.fontStack&&(n["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(n["font-scale"]=i.scale),i.textColor&&(n["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(n)}return t};var te=function(t){this.name=t.name,this.available=t.available};function ee(t,e,r,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,e,r,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,r,i]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function re(t){if(null===t)return zt;if("string"==typeof t)return Bt;if("boolean"==typeof t)return Ft;if("number"==typeof t)return Dt;if(t instanceof Zt)return Nt;if(t instanceof Jt)return jt;if(t instanceof Qt)return Gt;if(t instanceof te)return Ht;if(Array.isArray(t)){for(var e,r=t.length,i=0,n=t;i<n.length;i+=1){var a=re(n[i]);if(e){if(e===a)continue;e=Vt;break}e=a}return Wt(e||Vt,r)}return Ut}function ie(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Zt||t instanceof Qt||t instanceof te?t.toString():JSON.stringify(t)}te.prototype.toString=function(){return this.name},te.fromString=function(t){return new te({name:t,available:!1})},te.prototype.serialize=function(){return["image",this.name]};var ne=function(t,e){this.type=t,this.value=e};ne.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Zt)return!0;if(e instanceof Jt)return!0;if(e instanceof Qt)return!0;if(e instanceof te)return!0;if(Array.isArray(e)){for(var r=0,i=e;r<i.length;r+=1)if(!t(i[r]))return!1;return!0}if("object"==typeof e){for(var n in e)if(!t(e[n]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var r=t[1],i=re(r),n=e.expectedType;return"array"!==i.kind||0!==i.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(i=n),new ne(i,r)},ne.prototype.evaluate=function(){return this.value},ne.prototype.eachChild=function(){},ne.prototype.possibleOutputs=function(){return[this.value]},ne.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Zt?["rgba"].concat(this.value.toArray()):this.value instanceof Qt?this.value.serialize():this.value};var ae=function(t){this.name="ExpressionEvaluationError",this.message=t};ae.prototype.toJSON=function(){return this.message};var oe={string:Bt,number:Dt,boolean:Ft,object:Ut},se=function(t,e){this.type=t,this.args=e};se.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r,i=1,n=t[0];if("array"===n){var a,o;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in oe)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=oe[s],i++}else a=Vt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],i++}r=Wt(a,o)}else r=oe[n];for(var l=[];i<t.length;i++){var u=e.parse(t[i],i,Vt);if(!u)return null;l.push(u)}return new se(r,l)},se.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!$t(this.type,re(r)))return r;if(e===this.args.length-1)throw new ae("Expected value to be of type "+qt(this.type)+", but found "+qt(re(r))+" instead.")}return null},se.prototype.eachChild=function(t){this.args.forEach(t)},se.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map((function(t){return t.possibleOutputs()})))},se.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var le=function(t){this.type=Gt,this.sections=t};le.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var r=[],i=1;i<t.length-1;i+=2){var n=e.parse(t[i],1,Vt);if(!n)return null;var a=n.type.kind;if("string"!==a&&"value"!==a&&"null"!==a)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var o=t[i+1];if("object"!=typeof o||Array.isArray(o))return e.error("Format options argument must be an object.");var s=null;if(o["font-scale"]&&!(s=e.parse(o["font-scale"],1,Dt)))return null;var l=null;if(o["text-font"]&&!(l=e.parse(o["text-font"],1,Wt(Bt))))return null;var u=null;if(o["text-color"]&&!(u=e.parse(o["text-color"],1,Nt)))return null;r.push({text:n,scale:s,font:l,textColor:u})}return new le(r)},le.prototype.evaluate=function(t){return new Qt(this.sections.map((function(e){return new Kt(ie(e.text.evaluate(t)),e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},le.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var i=r[e];t(i.text),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor)}},le.prototype.possibleOutputs=function(){return[void 0]},le.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var i=r[e];t.push(i.text.serialize());var n={};i.scale&&(n["font-scale"]=i.scale.serialize()),i.font&&(n["text-font"]=i.font.serialize()),i.textColor&&(n["text-color"]=i.textColor.serialize()),t.push(n)}return t};var ue=function(t){this.type=Ht,this.input=t};ue.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,Bt);return r?new ue(r):e.error("No image name provided.")},ue.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=!1;return t.availableImages&&t.availableImages.indexOf(e)>-1&&(r=!0),new te({name:e,available:r})},ue.prototype.eachChild=function(t){t(this.input)},ue.prototype.possibleOutputs=function(){return[void 0]},ue.prototype.serialize=function(){return["image",this.input.serialize()]};var ce={"to-boolean":Ft,"to-color":Nt,"to-number":Dt,"to-string":Bt},he=function(t,e){this.type=t,this.args=e};he.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");for(var i=ce[r],n=[],a=1;a<t.length;a++){var o=e.parse(t[a],a,Vt);if(!o)return null;n.push(o)}return new he(i,n)},he.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,r,i=0,n=this.args;i<n.length;i+=1){if(r=null,(e=n[i].evaluate(t))instanceof Zt)return e;if("string"==typeof e){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ee(e[0],e[1],e[2],e[3])))return new Zt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ae(r||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var o=null,s=0,l=this.args;s<l.length;s+=1){if(null===(o=l[s].evaluate(t)))return 0;var u=Number(o);if(!isNaN(u))return u}throw new ae("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?Qt.fromString(ie(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?te.fromString(ie(this.args[0].evaluate(t))):ie(this.args[0].evaluate(t))},he.prototype.eachChild=function(t){this.args.forEach(t)},he.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map((function(t){return t.possibleOutputs()})))},he.prototype.serialize=function(){if("formatted"===this.type.kind)return new le([{text:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ue(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var pe=["Unknown","Point","LineString","Polygon"],de=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null};de.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},de.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?pe[this.feature.type]:this.feature.type:null},de.prototype.properties=function(){return this.feature&&this.feature.properties||{}},de.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Zt.parse(t)),e};var fe=function(t,e,r,i){this.name=t,this.type=e,this._evaluate=r,this.args=i};fe.prototype.evaluate=function(t){return this._evaluate(t,this.args)},fe.prototype.eachChild=function(t){this.args.forEach(t)},fe.prototype.possibleOutputs=function(){return[void 0]},fe.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},fe.parse=function(t,e){var r,i=t[0],n=fe.definitions[i];if(!n)return e.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0);for(var a=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=o.filter((function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1})),l=null,u=0,c=s;u<c.length;u+=1){var h=c[u],p=h[0],d=h[1];l=new xe(e.registry,e.path,null,e.scope);for(var f=[],m=!1,v=1;v<t.length;v++){var g=t[v],y=Array.isArray(p)?p[v-1]:p.type,_=l.parse(g,1+f.length,y);if(!_){m=!0;break}f.push(_)}if(!m)if(Array.isArray(p)&&p.length!==f.length)l.error("Expected "+p.length+" arguments, but found "+f.length+" instead.");else{for(var x=0;x<f.length;x++){var b=Array.isArray(p)?p[x]:p.type,w=f[x];l.concat(x+1).checkSubtype(b,w.type)}if(0===l.errors.length)return new fe(i,a,d,f)}}if(1===s.length)(r=e.errors).push.apply(r,l.errors);else{for(var T=(s.length?s:o).map((function(t){var e,r=t[0];return e=r,Array.isArray(e)?"("+e.map(qt).join(", ")+")":"("+qt(e.type)+"...)"})).join(" | "),S=[],E=1;E<t.length;E++){var M=e.parse(t[E],1+S.length);if(!M)return null;S.push(qt(M.type))}e.error("Expected arguments of type "+T+", but found ("+S.join(", ")+") instead.")}return null},fe.register=function(t,e){for(var r in fe.definitions=e,e)t[r]=fe};var me=function(t,e,r){this.type=jt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e};function ve(t){if(t instanceof fe){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild((function(t){e&&!ve(t)&&(e=!1)})),e}function ge(t){if(t instanceof fe&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!ge(t)&&(e=!1)})),e}function ye(t,e){if(t instanceof fe&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild((function(t){r&&!ye(t,e)&&(r=!1)})),r}me.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");var i=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Ft);if(!i)return null;var n=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Ft);if(!n)return null;var a=null;return r.locale&&!(a=e.parse(r.locale,1,Bt))?null:new me(i,n,a)},me.prototype.evaluate=function(t){return new Jt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},me.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},me.prototype.possibleOutputs=function(){return[void 0]},me.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var _e=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};_e.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new _e(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},_e.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},_e.prototype.eachChild=function(){},_e.prototype.possibleOutputs=function(){return[void 0]},_e.prototype.serialize=function(){return["var",this.name]};var xe=function(t,e,r,i,n){void 0===e&&(e=[]),void 0===i&&(i=new Ot),void 0===n&&(n=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=i,this.errors=n,this.expectedType=r};function be(t,e){for(var r,i,n=t.length-1,a=0,o=n,s=0;a<=o;)if(r=t[s=Math.floor((a+o)/2)],i=t[s+1],r<=e){if(s===n||e<i)return s;a=s+1}else{if(!(r>e))throw new ae("Input is not a number.");o=s-1}return 0}xe.prototype.parse=function(t,e,r,i,n){return void 0===n&&(n={}),e?this.concat(e,r,i)._parse(t,n):this._parse(t,n)},xe.prototype._parse=function(t,e){function r(t,e,r){return"assert"===r?new se(e,[t]):"coerce"===r?new he(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var i=t[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found "+typeof i+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var n=this.registry[i];if(n){var a=n.parse(t,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=r(a,o,e.typeAnnotation||"coerce");else a=r(a,o,e.typeAnnotation||"assert")}if(!(a instanceof ne)&&"resolvedImage"!==a.type.kind&&function t(e){if(e instanceof _e)return t(e.boundExpression);if(e instanceof fe&&"error"===e.name)return!1;if(e instanceof me)return!1;var r=e instanceof he||e instanceof se,i=!0;return e.eachChild((function(e){i=r?i&&t(e):i&&e instanceof ne})),!!i&&(ve(e)&&ye(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]))}(a)){var l=new de;try{a=new ne(a.type,a.evaluate(l))}catch(t){return this.error(t.message),null}}return a}return this.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},xe.prototype.concat=function(t,e,r){var i="number"==typeof t?this.path.concat(t):this.path,n=r?this.scope.concat(r):this.scope;return new xe(this.registry,i,e||null,n,this.errors)},xe.prototype.error=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var i=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Rt(i,t))},xe.prototype.checkSubtype=function(t,e){var r=$t(t,e);return r&&this.error(r),r};var we=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,n=r;i<n.length;i+=1){var a=n[i],o=a[0],s=a[1];this.labels.push(o),this.outputs.push(s)}};we.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var r=e.parse(t[1],1,Dt);if(!r)return null;var i=[],n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var a=1;a<t.length;a+=2){var o=1===a?-1/0:t[a],s=t[a+1],l=a,u=a+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(s,u,n);if(!c)return null;n=n||c.type,i.push([o,c])}return new we(n,r,i)},we.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);var n=e.length;return i>=e[n-1]?r[n-1].evaluate(t):r[be(e,i)].evaluate(t)},we.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},we.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map((function(t){return t.possibleOutputs()})))},we.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Te=Se;function Se(t,e,r,i){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=r,this.p2y=i}function Ee(t,e,r){return t*(1-r)+e*r}Se.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},Se.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},Se.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},Se.prototype.solveCurveX=function(t,e){var r,i,n,a,o;for(void 0===e&&(e=1e-6),n=t,o=0;o<8;o++){if(a=this.sampleCurveX(n)-t,Math.abs(a)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=a/s}if((n=t)<(r=0))return r;if(n>(i=1))return i;for(;r<i;){if(a=this.sampleCurveX(n),Math.abs(a-t)<e)return n;t>a?r=n:i=n,n=.5*(i-r)+r}return n},Se.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var Me=Object.freeze({__proto__:null,number:Ee,color:function(t,e,r){return new Zt(Ee(t.r,e.r,r),Ee(t.g,e.g,r),Ee(t.b,e.b,r),Ee(t.a,e.a,r))},array:function(t,e,r){return t.map((function(t,i){return Ee(t,e[i],r)}))}}),Ae=.95047,Ce=1,Pe=1.08883,Le=4/29,Ie=6/29,ke=3*Ie*Ie,Re=Ie*Ie*Ie,Oe=Math.PI/180,ze=180/Math.PI;function De(t){return t>Re?Math.pow(t,1/3):t/ke+Le}function Be(t){return t>Ie?t*t*t:ke*(t-Le)}function Fe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ne(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ue(t){var e=Ne(t.r),r=Ne(t.g),i=Ne(t.b),n=De((.4124564*e+.3575761*r+.1804375*i)/Ae),a=De((.2126729*e+.7151522*r+.072175*i)/Ce);return{l:116*a-16,a:500*(n-a),b:200*(a-De((.0193339*e+.119192*r+.9503041*i)/Pe)),alpha:t.a}}function Ve(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=Ce*Be(e),r=Ae*Be(r),i=Pe*Be(i),new Zt(Fe(3.2404542*r-1.5371385*e-.4985314*i),Fe(-.969266*r+1.8760108*e+.041556*i),Fe(.0556434*r-.2040259*e+1.0572252*i),t.alpha)}function je(t,e,r){var i=e-t;return t+r*(i>180||i<-180?i-360*Math.round(i/360):i)}var Ge={forward:Ue,reverse:Ve,interpolate:function(t,e,r){return{l:Ee(t.l,e.l,r),a:Ee(t.a,e.a,r),b:Ee(t.b,e.b,r),alpha:Ee(t.alpha,e.alpha,r)}}},He={forward:function(t){var e=Ue(t),r=e.l,i=e.a,n=e.b,a=Math.atan2(n,i)*ze;return{h:a<0?a+360:a,c:Math.sqrt(i*i+n*n),l:r,alpha:t.a}},reverse:function(t){var e=t.h*Oe,r=t.c;return Ve({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:je(t.h,e.h,r),c:Ee(t.c,e.c,r),l:Ee(t.l,e.l,r),alpha:Ee(t.alpha,e.alpha,r)}}},We=Object.freeze({__proto__:null,lab:Ge,hcl:He}),qe=function(t,e,r,i,n){this.type=t,this.operator=e,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(var a=0,o=n;a<o.length;a+=1){var s=o[a],l=s[0],u=s[1];this.labels.push(l),this.outputs.push(u)}};function Xe(t,e,r,i){var n=i-r,a=t-r;return 0===n?0:1===e?a/n:(Math.pow(e,a)-1)/(Math.pow(e,n)-1)}qe.interpolationFactor=function(t,e,r,i){var n=0;if("exponential"===t.name)n=Xe(e,t.base,r,i);else if("linear"===t.name)n=Xe(e,1,r,i);else if("cubic-bezier"===t.name){var a=t.controlPoints;n=new Te(a[0],a[1],a[2],a[3]).solve(Xe(e,1,r,i))}return n},qe.parse=function(t,e){var r=t[0],i=t[1],n=t[2],a=t.slice(3);if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var o=i[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:o}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type "+String(i[0]),1,0);var s=i.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,2,Dt)))return null;var l=[],u=null;"interpolate-hcl"===r||"interpolate-lab"===r?u=Nt:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<a.length;c+=2){var h=a[c],p=a[c+1],d=c+3,f=c+4;if("number"!=typeof h)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(l.length&&l[l.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var m=e.parse(p,f,u);if(!m)return null;u=u||m.type,l.push([h,m])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new qe(u,r,i,n,l):e.error("Type "+qt(u)+" is not interpolatable.")},qe.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);var n=e.length;if(i>=e[n-1])return r[n-1].evaluate(t);var a=be(e,i),o=e[a],s=e[a+1],l=qe.interpolationFactor(this.interpolation,i,o,s),u=r[a].evaluate(t),c=r[a+1].evaluate(t);return"interpolate"===this.operator?Me[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?He.reverse(He.interpolate(He.forward(u),He.forward(c),l)):Ge.reverse(Ge.interpolate(Ge.forward(u),Ge.forward(c),l))},qe.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},qe.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map((function(t){return t.possibleOutputs()})))},qe.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e};var $e=function(t,e){this.type=t,this.args=e};$e.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,i=e.expectedType;i&&"value"!==i.kind&&(r=i);for(var n=[],a=0,o=t.slice(1);a<o.length;a+=1){var s=o[a],l=e.parse(s,1+n.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,n.push(l)}var u=i&&n.some((function(t){return $t(i,t.type)}));return new $e(u?Vt:r,n)},$e.prototype.evaluate=function(t){for(var e,r=null,i=0,n=0,a=this.args;n<a.length;n+=1){var o=a[n];if(i++,r=o.evaluate(t),"resolvedImage"!==o.type.kind||r.available||(e||(e=o.evaluate(t).name),r=null,i===this.args.length&&(r=e)),null!==r)break}return r},$e.prototype.eachChild=function(t){this.args.forEach(t)},$e.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map((function(t){return t.possibleOutputs()})))},$e.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Ye=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Ye.prototype.evaluate=function(t){return this.result.evaluate(t)},Ye.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)},Ye.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],i=1;i<t.length-1;i+=2){var n=t[i];if("string"!=typeof n)return e.error("Expected string, but found "+typeof n+" instead.",i);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=e.parse(t[i+1],i+1);if(!a)return null;r.push([n,a])}var o=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return o?new Ye(r,o):null},Ye.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Ye.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var i=r[e],n=i[0],a=i[1];t.push(n,a.serialize())}return t.push(this.result.serialize()),t};var Ze=function(t,e,r){this.type=t,this.index=e,this.input=r};Ze.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,Dt),i=e.parse(t[2],2,Wt(e.expectedType||Vt));if(!r||!i)return null;var n=i.type;return new Ze(n.itemType,r,i)},Ze.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new ae("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new ae("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new ae("Array index must be an integer, but found "+e+" instead.");return r[e]},Ze.prototype.eachChild=function(t){t(this.index),t(this.input)},Ze.prototype.possibleOutputs=function(){return[void 0]},Ze.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Je=function(t,e,r,i,n,a){this.inputType=t,this.type=e,this.input=r,this.cases=i,this.outputs=n,this.otherwise=a};Je.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var n={},a=[],o=2;o<t.length-1;o+=2){var s=t[o],l=t[o+1];Array.isArray(s)||(s=[s]);var u=e.concat(o);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var p=h[c];if("number"!=typeof p&&"string"!=typeof p)return u.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,re(p)))return null}else r=re(p);if(void 0!==n[String(p)])return u.error("Branch labels must be unique.");n[String(p)]=a.length}var d=e.parse(l,o,i);if(!d)return null;i=i||d.type,a.push(d)}var f=e.parse(t[1],1,Vt);if(!f)return null;var m=e.parse(t[t.length-1],t.length-1,i);return m?"value"!==f.type.kind&&e.concat(1).checkSubtype(r,f.type)?null:new Je(r,i,f,n,a,m):null},Je.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(re(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Je.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Je.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map((function(t){return t.possibleOutputs()}))).concat(this.otherwise.possibleOutputs())},Je.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],r=[],i={},n=0,a=Object.keys(this.cases).sort();n<a.length;n+=1){var o=a[n];void 0===(h=i[this.cases[o]])?(i[this.cases[o]]=r.length,r.push([this.cases[o],[o]])):r[h][1].push(o)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,u=r;l<u.length;l+=1){var c=u[l],h=c[0],p=c[1];1===p.length?e.push(s(p[0])):e.push(p.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var Ke=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r};function Qe(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function tr(t,e,r,i){return 0===i.compare(e,r)}function er(t,e,r){var i="=="!==t&&"!="!==t;return function(){function n(t,e,r){this.type=Ft,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return n.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],a=e.parse(t[1],1,Vt);if(!a)return null;if(!Qe(r,a.type))return e.concat(1).error('"'+r+"\" comparisons are not supported for type '"+qt(a.type)+"'.");var o=e.parse(t[2],2,Vt);if(!o)return null;if(!Qe(r,o.type))return e.concat(2).error('"'+r+"\" comparisons are not supported for type '"+qt(o.type)+"'.");if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '"+qt(a.type)+"' and '"+qt(o.type)+"'.");i&&("value"===a.type.kind&&"value"!==o.type.kind?a=new se(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new se(a.type,[o])));var s=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,jt)))return null}return new n(a,o,s)},n.prototype.evaluate=function(n){var a=this.lhs.evaluate(n),o=this.rhs.evaluate(n);if(i&&this.hasUntypedArgument){var s=re(a),l=re(o);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new ae('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!i&&this.hasUntypedArgument){var u=re(a),c=re(o);if("string"!==u.kind||"string"!==c.kind)return e(n,a,o)}return this.collator?r(n,a,o,this.collator.evaluate(n)):e(n,a,o)},n.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},n.prototype.possibleOutputs=function(){return[!0,!1]},n.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},n}()}Ke.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i=[],n=1;n<t.length-1;n+=2){var a=e.parse(t[n],n,Ft);if(!a)return null;var o=e.parse(t[n+1],n+1,r);if(!o)return null;i.push([a,o]),r=r||o.type}var s=e.parse(t[t.length-1],t.length-1,r);return s?new Ke(r,i,s):null},Ke.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var i=r[e],n=i[0],a=i[1];if(n.evaluate(t))return a.evaluate(t)}return this.otherwise.evaluate(t)},Ke.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var i=r[e],n=i[0],a=i[1];t(n),t(a)}t(this.otherwise)},Ke.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map((function(t){return t[0],t[1].possibleOutputs()}))).concat(this.otherwise.possibleOutputs())},Ke.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var rr=er("==",(function(t,e,r){return e===r}),tr),ir=er("!=",(function(t,e,r){return e!==r}),(function(t,e,r,i){return!tr(0,e,r,i)})),nr=er("<",(function(t,e,r){return e<r}),(function(t,e,r,i){return i.compare(e,r)<0})),ar=er(">",(function(t,e,r){return e>r}),(function(t,e,r,i){return i.compare(e,r)>0})),or=er("<=",(function(t,e,r){return e<=r}),(function(t,e,r,i){return i.compare(e,r)<=0})),sr=er(">=",(function(t,e,r){return e>=r}),(function(t,e,r,i){return i.compare(e,r)>=0})),lr=function(t,e,r,i,n){this.type=Bt,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=n};lr.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,Dt);if(!r)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");var n=null;if(i.locale&&!(n=e.parse(i.locale,1,Bt)))return null;var a=null;if(i.currency&&!(a=e.parse(i.currency,1,Bt)))return null;var o=null;if(i["min-fraction-digits"]&&!(o=e.parse(i["min-fraction-digits"],1,Dt)))return null;var s=null;return i["max-fraction-digits"]&&!(s=e.parse(i["max-fraction-digits"],1,Dt))?null:new lr(r,n,a,o,s)},lr.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},lr.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},lr.prototype.possibleOutputs=function(){return[void 0]},lr.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var ur=function(t){this.type=Dt,this.input=t};ur.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+qt(r.type)+" instead."):new ur(r):null},ur.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ae("Expected value to be of type string or array, but found "+qt(re(e))+" instead.")},ur.prototype.eachChild=function(t){t(this.input)},ur.prototype.possibleOutputs=function(){return[void 0]},ur.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var cr={"==":rr,"!=":ir,">":ar,"<":nr,">=":sr,"<=":or,array:se,at:Ze,boolean:se,case:Ke,coalesce:$e,collator:me,format:le,image:ue,interpolate:qe,"interpolate-hcl":qe,"interpolate-lab":qe,length:ur,let:Ye,literal:ne,match:Je,number:se,"number-format":lr,object:se,step:we,string:se,"to-boolean":he,"to-color":he,"to-number":he,"to-string":he,var:_e};function hr(t,e){var r=e[0],i=e[1],n=e[2],a=e[3];r=r.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);var o=a?a.evaluate(t):1,s=ee(r,i,n,o);if(s)throw new ae(s);return new Zt(r/255*o,i/255*o,n/255*o,o)}function pr(t,e){return t in e}function dr(t,e){var r=e[t];return void 0===r?null:r}function fr(t){return{type:t}}function mr(t){return{result:"success",value:t}}function vr(t){return{result:"error",value:t}}function gr(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function yr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function _r(t){return!!t.expression&&t.expression.interpolated}function xr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function br(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function wr(t){return t}function Tr(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function Sr(t,e,r,i,n){return Tr(typeof r===n?i[r]:void 0,t.default,e.default)}function Er(t,e,r){if("number"!==xr(r))return Tr(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var n=be(t.stops.map((function(t){return t[0]})),r);return t.stops[n][1]}function Mr(t,e,r){var i=void 0!==t.base?t.base:1;if("number"!==xr(r))return Tr(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];var a=be(t.stops.map((function(t){return t[0]})),r),o=function(t,e,r,i){var n=i-r,a=t-r;return 0===n?0:1===e?a/n:(Math.pow(e,a)-1)/(Math.pow(e,n)-1)}(r,i,t.stops[a][0],t.stops[a+1][0]),s=t.stops[a][1],l=t.stops[a+1][1],u=Me[e.type]||wr;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=We[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=s.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return u(r,i,o)}}:u(s,l,o)}function Ar(t,e,r){return"color"===e.type?r=Zt.parse(r):"formatted"===e.type?r=Qt.fromString(r.toString()):"resolvedImage"===e.type?r=te.fromString(r.toString()):xr(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),Tr(r,t.default,e.default)}fe.register(cr,{error:[{kind:"error"},[Bt],function(t,e){var r=e[0];throw new ae(r.evaluate(t))}],typeof:[Bt,[Vt],function(t,e){return qt(re(e[0].evaluate(t)))}],"to-rgba":[Wt(Dt,4),[Nt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Nt,[Dt,Dt,Dt],hr],rgba:[Nt,[Dt,Dt,Dt,Dt],hr],has:{type:Ft,overloads:[[[Bt],function(t,e){return pr(e[0].evaluate(t),t.properties())}],[[Bt,Ut],function(t,e){var r=e[0],i=e[1];return pr(r.evaluate(t),i.evaluate(t))}]]},get:{type:Vt,overloads:[[[Bt],function(t,e){return dr(e[0].evaluate(t),t.properties())}],[[Bt,Ut],function(t,e){var r=e[0],i=e[1];return dr(r.evaluate(t),i.evaluate(t))}]]},"feature-state":[Vt,[Bt],function(t,e){return dr(e[0].evaluate(t),t.featureState||{})}],properties:[Ut,[],function(t){return t.properties()}],"geometry-type":[Bt,[],function(t){return t.geometryType()}],id:[Vt,[],function(t){return t.id()}],zoom:[Dt,[],function(t){return t.globals.zoom}],"heatmap-density":[Dt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Dt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Vt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Dt,fr(Dt),function(t,e){for(var r=0,i=0,n=e;i<n.length;i+=1)r+=n[i].evaluate(t);return r}],"*":[Dt,fr(Dt),function(t,e){for(var r=1,i=0,n=e;i<n.length;i+=1)r*=n[i].evaluate(t);return r}],"-":{type:Dt,overloads:[[[Dt,Dt],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)-i.evaluate(t)}],[[Dt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Dt,[Dt,Dt],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)/i.evaluate(t)}],"%":[Dt,[Dt,Dt],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)%i.evaluate(t)}],ln2:[Dt,[],function(){return Math.LN2}],pi:[Dt,[],function(){return Math.PI}],e:[Dt,[],function(){return Math.E}],"^":[Dt,[Dt,Dt],function(t,e){var r=e[0],i=e[1];return Math.pow(r.evaluate(t),i.evaluate(t))}],sqrt:[Dt,[Dt],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[Dt,[Dt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[Dt,[Dt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[Dt,[Dt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[Dt,[Dt],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[Dt,[Dt],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[Dt,[Dt],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[Dt,[Dt],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[Dt,[Dt],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[Dt,[Dt],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[Dt,fr(Dt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Dt,fr(Dt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Dt,[Dt],function(t,e){var r=e[0];return Math.abs(r.evaluate(t))}],round:[Dt,[Dt],function(t,e){var r=e[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[Dt,[Dt],function(t,e){var r=e[0];return Math.floor(r.evaluate(t))}],ceil:[Dt,[Dt],function(t,e){var r=e[0];return Math.ceil(r.evaluate(t))}],"filter-==":[Ft,[Bt,Vt],function(t,e){var r=e[0],i=e[1];return t.properties()[r.value]===i.value}],"filter-id-==":[Ft,[Vt],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[Ft,[Bt],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[Ft,[Bt,Vt],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],a=i.value;return typeof n==typeof a&&n<a}],"filter-id-<":[Ft,[Vt],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i<n}],"filter->":[Ft,[Bt,Vt],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],a=i.value;return typeof n==typeof a&&n>a}],"filter-id->":[Ft,[Vt],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i>n}],"filter-<=":[Ft,[Bt,Vt],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],a=i.value;return typeof n==typeof a&&n<=a}],"filter-id-<=":[Ft,[Vt],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i<=n}],"filter->=":[Ft,[Bt,Vt],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],a=i.value;return typeof n==typeof a&&n>=a}],"filter-id->=":[Ft,[Vt],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i>=n}],"filter-has":[Ft,[Vt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Ft,[],function(t){return null!==t.id()}],"filter-type-in":[Ft,[Wt(Bt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Ft,[Wt(Vt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Ft,[Bt,Wt(Vt)],function(t,e){var r=e[0];return e[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[Ft,[Bt,Wt(Vt)],function(t,e){var r=e[0],i=e[1];return function(t,e,r,i){for(;r<=i;){var n=r+i>>1;if(e[n]===t)return!0;e[n]>t?i=n-1:r=n+1}return!1}(t.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:Ft,overloads:[[[Ft,Ft],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)&&i.evaluate(t)}],[fr(Ft),function(t,e){for(var r=0,i=e;r<i.length;r+=1)if(!i[r].evaluate(t))return!1;return!0}]]},any:{type:Ft,overloads:[[[Ft,Ft],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)||i.evaluate(t)}],[fr(Ft),function(t,e){for(var r=0,i=e;r<i.length;r+=1)if(i[r].evaluate(t))return!0;return!1}]]},"!":[Ft,[Ft],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Ft,[Bt],function(t,e){var r=e[0],i=t.globals&&t.globals.isSupportedScript;return!i||i(r.evaluate(t))}],upcase:[Bt,[Bt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Bt,[Bt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Bt,fr(Vt),function(t,e){return e.map((function(e){return ie(e.evaluate(t))})).join("")}],"resolved-locale":[Bt,[jt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Cr=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new de,this._defaultValue=e?function(t){return"color"===t.type&&br(t.default)?new Zt(0,0,0,0):"color"===t.type?Zt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Pr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in cr}function Lr(t,e){var r=new xe(cr,[],e?function(t){var e={color:Nt,string:Bt,number:Dt,enum:Bt,boolean:Ft,formatted:Gt,resolvedImage:Ht};return"array"===t.type?Wt(e[t.value]||Vt,t.length):e[t.type]}(e):void 0),i=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?mr(new Cr(i,e)):vr(r.errors)}Cr.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,n){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=n,this.expression.evaluate(this._evaluator)},Cr.prototype.evaluate=function(t,e,r,i,n){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=n||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ae("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Ir=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ge(e.expression)};Ir.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,i,n)},Ir.prototype.evaluate=function(t,e,r,i,n){return this._styleExpression.evaluate(t,e,r,i,n)};var kr=function(t,e,r,i){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ge(e.expression),this.interpolationType=i};function Rr(t,e){if("error"===(t=Lr(t,e)).result)return t;var r=t.value.expression,i=ve(r);if(!i&&!gr(e))return vr([new Rt("","data expressions not supported")]);var n=ye(r,["zoom"]);if(!n&&!yr(e))return vr([new Rt("","zoom expressions not supported")]);var a=function t(e){var r=null;if(e instanceof Ye)r=t(e.result);else if(e instanceof $e)for(var i=0,n=e.args;i<n.length;i+=1){var a=n[i];if(r=t(a))break}else(e instanceof we||e instanceof qe)&&e.input instanceof fe&&"zoom"===e.input.name&&(r=e);return r instanceof Rt?r:(e.eachChild((function(e){var i=t(e);i instanceof Rt?r=i:!r&&i?r=new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&i&&r!==i&&(r=new Rt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),r)}(r);if(!a&&!n)return vr([new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof Rt)return vr([a]);if(a instanceof qe&&!_r(e))return vr([new Rt("",'"interpolate" expressions cannot be used with this property')]);if(!a)return mr(new Ir(i?"constant":"source",t.value));var o=a instanceof qe?a.interpolation:void 0;return mr(new kr(i?"camera":"composite",t.value,a.labels,o))}kr.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,i,n)},kr.prototype.evaluate=function(t,e,r,i,n){return this._styleExpression.evaluate(t,e,r,i,n)},kr.prototype.interpolationFactor=function(t,e,r){return this.interpolationType?qe.interpolationFactor(this.interpolationType,t,e,r):0};var Or=function(t,e){this._parameters=t,this._specification=e,Pt(this,function t(e,r){var i,n,a,o="color"===r.type,s=e.stops&&"object"==typeof e.stops[0][0],l=s||void 0!==e.property,u=s||!l,c=e.type||(_r(r)?"exponential":"interval");if(o&&((e=Pt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],Zt.parse(t[1])]}))),e.default?e.default=Zt.parse(e.default):e.default=Zt.parse(r.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!We[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)i=Mr;else if("interval"===c)i=Er;else if("categorical"===c){i=Sr,n=Object.create(null);for(var h=0,p=e.stops;h<p.length;h+=1){var d=p[h];n[d[0]]=d[1]}a=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');i=Ar}if(s){for(var f={},m=[],v=0;v<e.stops.length;v++){var g=e.stops[v],y=g[0].zoom;void 0===f[y]&&(f[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},m.push(y)),f[y].stops.push([g[0].value,g[1]])}for(var _=[],x=0,b=m;x<b.length;x+=1){var w=b[x];_.push([f[w].zoom,t(f[w],r)])}var T={name:"linear"};return{kind:"composite",interpolationType:T,interpolationFactor:qe.interpolationFactor.bind(void 0,T),zoomStops:_.map((function(t){return t[0]})),evaluate:function(t,i){var n=t.zoom;return Mr({stops:_,base:e.base},r,n).evaluate(n,i)}}}if(u){var S="exponential"===c?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:qe.interpolationFactor.bind(void 0,S),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){var o=t.zoom;return i(e,r,o,n,a)}}}return{kind:"source",evaluate:function(t,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?Tr(e.default,r.default):i(e,r,s,n,a)}}}(this._parameters,this._specification))};function zr(t){var e=t.key,r=t.value,i=t.valueSpec||{},n=t.objectElementValidators||{},a=t.style,o=t.styleSpec,s=[],l=xr(r);if("object"!==l)return[new At(e,r,"object expected, "+l+" found")];for(var u in r){var c=u.split(".")[0],h=i[c]||i["*"],p=void 0;if(n[c])p=n[c];else if(i[c])p=ai;else if(n["*"])p=n["*"];else{if(!i["*"]){s.push(new At(e,r[u],'unknown property "'+u+'"'));continue}p=ai}s=s.concat(p({key:(e?e+".":e)+u,value:r[u],valueSpec:h,style:a,styleSpec:o,object:r,objectKey:u},r))}for(var d in i)n[d]||i[d].required&&void 0===i[d].default&&void 0===r[d]&&s.push(new At(e,r,'missing required property "'+d+'"'));return s}function Dr(t){var e=t.value,r=t.valueSpec,i=t.style,n=t.styleSpec,a=t.key,o=t.arrayElementValidator||ai;if("array"!==xr(e))return[new At(a,e,"array expected, "+xr(e)+" found")];if(r.length&&e.length!==r.length)return[new At(a,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new At(a,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value,values:r.values};n.$version<7&&(s.function=r.function),"object"===xr(r.value)&&(s=r.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(o({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:i,styleSpec:n,key:a+"["+u+"]"}));return l}function Br(t){var e=t.key,r=t.value,i=t.valueSpec,n=xr(r);return"number"!==n?[new At(e,r,"number expected, "+n+" found")]:"minimum"in i&&r<i.minimum?[new At(e,r,r+" is less than the minimum value "+i.minimum)]:"maximum"in i&&r>i.maximum?[new At(e,r,r+" is greater than the maximum value "+i.maximum)]:[]}function Fr(t){var e,r,i,n=t.valueSpec,a=It(t.value.type),o={},s="categorical"!==a&&void 0===t.value.property,l=!s,u="array"===xr(t.value.stops)&&"array"===xr(t.value.stops[0])&&"object"===xr(t.value.stops[0][0]),c=zr({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===a)return[new At(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;return e=e.concat(Dr({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===xr(r)&&0===r.length&&e.push(new At(t.key,r,"array must have at least one stop")),e},default:function(t){return ai({key:t.key,value:t.value,valueSpec:n,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===a&&s&&c.push(new At(t.key,t.value,'missing required property "property"')),"identity"===a||t.value.stops||c.push(new At(t.key,t.value,'missing required property "stops"')),"exponential"===a&&t.valueSpec.expression&&!_r(t.valueSpec)&&c.push(new At(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!gr(t.valueSpec)?c.push(new At(t.key,t.value,"property functions not supported")):s&&!yr(t.valueSpec)&&c.push(new At(t.key,t.value,"zoom functions not supported"))),"categorical"!==a&&!u||void 0!==t.value.property||c.push(new At(t.key,t.value,'"property" property is required')),c;function h(t){var e=[],a=t.value,s=t.key;if("array"!==xr(a))return[new At(s,a,"array expected, "+xr(a)+" found")];if(2!==a.length)return[new At(s,a,"array length 2 expected, length "+a.length+" found")];if(u){if("object"!==xr(a[0]))return[new At(s,a,"object expected, "+xr(a[0])+" found")];if(void 0===a[0].zoom)return[new At(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new At(s,a,"object stop key must have value")];if(i&&i>It(a[0].zoom))return[new At(s,a[0].zoom,"stop zoom values must appear in ascending order")];It(a[0].zoom)!==i&&(i=It(a[0].zoom),r=void 0,o={}),e=e.concat(zr({key:s+"[0]",value:a[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Br,value:p}}))}else e=e.concat(p({key:s+"[0]",value:a[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},a));return Pr(kt(a[1]))?e.concat([new At(s+"[1]",a[1],"expressions are not allowed in function stops.")]):e.concat(ai({key:s+"[1]",value:a[1],valueSpec:n,style:t.style,styleSpec:t.styleSpec}))}function p(t,i){var s=xr(t.value),l=It(t.value),u=null!==t.value?t.value:i;if(e){if(s!==e)return[new At(t.key,u,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new At(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var c="number expected, "+s+" found";return gr(n)&&void 0===a&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new At(t.key,u,c)]}return"categorical"!==a||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==a&&"number"===s&&void 0!==r&&l<r?[new At(t.key,u,"stop domain values must appear in ascending order")]:(r=l,"categorical"===a&&l in o?[new At(t.key,u,"stop domain values must be unique")]:(o[l]=!0,[])):[new At(t.key,u,"integer expected, found "+l)]}}function Nr(t){var e=("property"===t.expressionContext?Rr:Lr)(kt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new At(""+t.key+e.key,t.value,e.message)}));var r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==r.possibleOutputs().indexOf(void 0))return[new At(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ge(r))return[new At(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ge(r))return[new At(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ye(r,["zoom","feature-state"]))return[new At(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ve(r))return[new At(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ur(t){var e=t.key,r=t.value,i=t.valueSpec,n=[];return Array.isArray(i.values)?-1===i.values.indexOf(It(r))&&n.push(new At(e,r,"expected one of ["+i.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(i.values).indexOf(It(r))&&n.push(new At(e,r,"expected one of ["+Object.keys(i.values).join(", ")+"], "+JSON.stringify(r)+" found")),n}function Vr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var i=r[e];if(!Vr(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}Or.deserialize=function(t){return new Or(t._parameters,t._specification)},Or.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var jr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Gr(t){if(null==t)return function(){return!0};Vr(t)||(t=Wr(t));var e=Lr(t,jr);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return function(t,r){return e.value.evaluate(t,r)}}function Hr(t,e){return t<e?-1:t>e?1:0}function Wr(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?qr(t[1],t[2],"=="):"!="===r?Yr(qr(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?qr(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(Wr))):"all"===r?["all"].concat(t.slice(1).map(Wr)):"none"===r?["all"].concat(t.slice(1).map(Wr).map(Yr)):"in"===r?Xr(t[1],t.slice(2)):"!in"===r?Yr(Xr(t[1],t.slice(2))):"has"===r?$r(t[1]):"!has"!==r||Yr($r(t[1]))}function qr(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Xr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(Hr)]]:["filter-in-small",t,["literal",e]]}}function $r(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Yr(t){return["!",t]}function Zr(t){return Vr(kt(t.value))?Nr(Pt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,i=e.key;if("array"!==xr(r))return[new At(i,r,"array expected, "+xr(r)+" found")];var n,a=e.styleSpec,o=[];if(r.length<1)return[new At(i,r,"filter array must have at least 1 element")];switch(o=o.concat(Ur({key:i+"[0]",value:r[0],valueSpec:a.filter_operator,style:e.style,styleSpec:e.styleSpec})),It(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===It(r[1])&&o.push(new At(i,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&o.push(new At(i,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(n=xr(r[1]))&&o.push(new At(i+"[1]",r[1],"string expected, "+n+" found"));for(var s=2;s<r.length;s++)n=xr(r[s]),"$type"===It(r[1])?o=o.concat(Ur({key:i+"["+s+"]",value:r[s],valueSpec:a.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&o.push(new At(i+"["+s+"]",r[s],"string, number, or boolean expected, "+n+" found"));break;case"any":case"all":case"none":for(var l=1;l<r.length;l++)o=o.concat(t({key:i+"["+l+"]",value:r[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=xr(r[1]),2!==r.length?o.push(new At(i,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==n&&o.push(new At(i+"[1]",r[1],"string expected, "+n+" found"))}return o}(t)}function Jr(t,e){var r=t.key,i=t.style,n=t.styleSpec,a=t.value,o=t.objectKey,s=n[e+"_"+t.layerType];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return ai({key:r,value:a,valueSpec:n.transition,style:i,styleSpec:n});var u,c=t.valueSpec||s[o];if(!c)return[new At(r,a,'unknown property "'+o+'"')];if("string"===xr(a)&&gr(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new At(r,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===o&&i&&!i.glyphs&&h.push(new At(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&br(kt(a))&&"identity"===It(a.type)&&h.push(new At(r,a,'"text-font" does not support identity functions'))),h.concat(ai({key:t.key,value:a,valueSpec:c,style:i,styleSpec:n,expressionContext:"property",propertyType:e,propertyKey:o}))}function Kr(t){return Jr(t,"paint")}function Qr(t){return Jr(t,"layout")}function ti(t){var e=[],r=t.value,i=t.key,n=t.style,a=t.styleSpec;r.type||r.ref||e.push(new At(i,r,'either "type" or "ref" is required'));var o,s=It(r.type),l=It(r.ref);if(r.id)for(var u=It(r.id),c=0;c<t.arrayIndex;c++){var h=n.layers[c];It(h.id)===u&&e.push(new At(i,r.id,'duplicate layer id "'+r.id+'", previously used at line '+h.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach((function(t){t in r&&e.push(new At(i,r[t],'"'+t+'" is prohibited for ref layers'))})),n.layers.forEach((function(t){It(t.id)===l&&(o=t)})),o?o.ref?e.push(new At(i,r.ref,"ref cannot reference another ref layer")):s=It(o.type):e.push(new At(i,r.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(r.source){var p=n.sources&&n.sources[r.source],d=p&&It(p.type);p?"vector"===d&&"raster"===s?e.push(new At(i,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===d&&"raster"!==s?e.push(new At(i,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==d||r["source-layer"]?"raster-dem"===d&&"hillshade"!==s?e.push(new At(i,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===d&&p.lineMetrics||e.push(new At(i,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new At(i,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new At(i,r.source,'source "'+r.source+'" not found'))}else e.push(new At(i,r,'missing required property "source"'));return e=e.concat(zr({key:i,value:r,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ai({key:i+".type",value:r.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:Zr,layout:function(t){return zr({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Qr(Pt({layerType:s},t))}}})},paint:function(t){return zr({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Kr(Pt({layerType:s},t))}}})}}}))}function ei(t){var e=t.value,r=t.key,i=t.styleSpec,n=t.style;if(!e.type)return[new At(r,e,'"type" is required')];var a,o=It(e.type);switch(o){case"vector":case"raster":case"raster-dem":return zr({key:r,value:e,valueSpec:i["source_"+o.replace("-","_")],style:t.style,styleSpec:i});case"geojson":if(a=zr({key:r,value:e,valueSpec:i.source_geojson,style:n,styleSpec:i}),e.cluster)for(var s in e.clusterProperties){var l=e.clusterProperties[s],u=l[0],c=l[1],h="string"==typeof u?[u,["accumulated"],["get",s]]:u;a.push.apply(a,Nr({key:r+"."+s+".map",value:c,expressionContext:"cluster-map"})),a.push.apply(a,Nr({key:r+"."+s+".reduce",value:h,expressionContext:"cluster-reduce"}))}return a;case"video":return zr({key:r,value:e,valueSpec:i.source_video,style:n,styleSpec:i});case"image":return zr({key:r,value:e,valueSpec:i.source_image,style:n,styleSpec:i});case"canvas":return[new At(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ur({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:i})}}function ri(t){var e=t.value,r=t.styleSpec,i=r.light,n=t.style,a=[],o=xr(e);if(void 0===e)return a;if("object"!==o)return a.concat([new At("light",e,"object expected, "+o+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);a=l&&i[l[1]]&&i[l[1]].transition?a.concat(ai({key:s,value:e[s],valueSpec:r.transition,style:n,styleSpec:r})):i[s]?a.concat(ai({key:s,value:e[s],valueSpec:i[s],style:n,styleSpec:r})):a.concat([new At(s,e[s],'unknown property "'+s+'"')])}return a}function ii(t){var e=t.value,r=t.key,i=xr(e);return"string"!==i?[new At(r,e,"string expected, "+i+" found")]:[]}var ni={"*":function(){return[]},array:Dr,boolean:function(t){var e=t.value,r=t.key,i=xr(e);return"boolean"!==i?[new At(r,e,"boolean expected, "+i+" found")]:[]},number:Br,color:function(t){var e=t.key,r=t.value,i=xr(r);return"string"!==i?[new At(e,r,"color expected, "+i+" found")]:null===Yt(r)?[new At(e,r,'color expected, "'+r+'" found')]:[]},constants:Ct,enum:Ur,filter:Zr,function:Fr,layer:ti,object:zr,source:ei,light:ri,string:ii,formatted:function(t){return 0===ii(t).length?[]:Nr(t)},resolvedImage:function(t){return 0===ii(t).length?[]:Nr(t)}};function ai(t){var e=t.value,r=t.valueSpec,i=t.styleSpec;return r.expression&&br(It(e))?Fr(t):r.expression&&Pr(kt(e))?Nr(t):r.type&&ni[r.type]?ni[r.type](t):zr(Pt({},t,{valueSpec:r.type?i[r.type]:r}))}function oi(t){var e=t.value,r=t.key,i=ii(t);return i.length?i:(-1===e.indexOf("{fontstack}")&&i.push(new At(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new At(r,e,'"glyphs" url must include a "{range}" token')),i)}function si(t,e){void 0===e&&(e=Mt);var r=[];return r=r.concat(ai({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:oi,"*":function(){return[]}}})),t.constants&&(r=r.concat(Ct({key:"constants",value:t.constants,style:t,styleSpec:e}))),li(r)}function li(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function ui(t){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return li(t.apply(this,e))}}si.source=ui(ei),si.light=ui(ri),si.layer=ui(ti),si.filter=ui(Zr),si.paintProperty=ui(Kr),si.layoutProperty=ui(Qr);var ci=si,hi=ci.light,pi=ci.paintProperty,di=ci.layoutProperty;function fi(t,e){var r=!1;if(e&&e.length)for(var i=0,n=e;i<n.length;i+=1){var a=n[i];t.fire(new St(new Error(a.message))),r=!0}return r}var mi=gi,vi=3;function gi(t,e,r){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var n=new Int32Array(this.arrayBuffer);t=n[0],e=n[1],r=n[2],this.d=e+2*r;for(var a=0;a<this.d*this.d;a++){var o=n[vi+a],s=n[vi+a+1];i.push(o===s?null:n.subarray(o,s))}var l=n[vi+i.length],u=n[vi+i.length+1];this.keys=n.subarray(l,u),this.bboxes=n.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var c=0;c<this.d*this.d;c++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var h=r/e*t;this.min=-h,this.max=t+h}gi.prototype.insert=function(t,e,r,i,n){this._forEachCell(e,r,i,n,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)},gi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},gi.prototype._insertCell=function(t,e,r,i,n,a){this.cells[n].push(a)},gi.prototype.query=function(t,e,r,i,n){var a=this.min,o=this.max;if(t<=a&&e<=a&&o<=r&&o<=i&&!n)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,r,i,this._queryCell,s,{},n),s},gi.prototype._queryCell=function(t,e,r,i,n,a,o,s){var l=this.cells[n];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===o[p]){var d=4*p;(s?s(c[d+0],c[d+1],c[d+2],c[d+3]):t<=c[d+2]&&e<=c[d+3]&&r>=c[d+0]&&i>=c[d+1])?(o[p]=!0,a.push(u[p])):o[p]=!1}}},gi.prototype._forEachCell=function(t,e,r,i,n,a,o,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(r),h=this._convertToCellCoord(i),p=l;p<=c;p++)for(var d=u;d<=h;d++){var f=this.d*d+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(d),this._convertFromCellCoord(p+1),this._convertFromCellCoord(d+1)))&&n.call(this,t,e,r,i,f,a,o,s))return}},gi.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},gi.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},gi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=vi+this.cells.length+1+1,r=0,i=0;i<this.cells.length;i++)r+=this.cells[i].length;var n=new Int32Array(e+r+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var a=e,o=0;o<t.length;o++){var s=t[o];n[vi+o]=a,n.set(s,a),a+=s.length}return n[vi+t.length]=a,n.set(this.keys,a),a+=this.keys.length,n[vi+t.length+1]=a,n.set(this.bboxes,a),a+=this.bboxes.length,n.buffer};var yi=self.ImageData,_i={};function xi(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),_i[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}for(var bi in xi("Object",Object),mi.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},mi.deserialize=function(t){return new mi(t.buffer)},xi("Grid",mi),xi("Color",Zt),xi("Error",Error),xi("ResolvedImage",te),xi("StylePropertyFunction",Or),xi("StyleExpression",Cr,{omit:["_evaluator"]}),xi("ZoomDependentExpression",kr),xi("ZoomConstantExpression",Ir),xi("CompoundExpression",fe,{omit:["_evaluate"]}),cr)cr[bi]._classRegistryKey||xi("Expression_"+bi,cr[bi]);function wi(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Ti(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(wi(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof yi)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var i=[],n=0,a=t;n<a.length;n+=1){var o=a[n];i.push(Ti(o,e))}return i}if("object"==typeof t){var s=t.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var u=s.serialize?s.serialize(t,e):{};if(!s.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(_i[l].omit.indexOf(c)>=0)){var h=t[c];u[c]=_i[l].shallow.indexOf(c)>=0?h:Ti(h,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof t)}function Si(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||wi(t)||ArrayBuffer.isView(t)||t instanceof yi)return t;if(Array.isArray(t))return t.map(Si);if("object"==typeof t){var e=t.$name||"Object",r=_i[e].klass;if(!r)throw new Error("can't deserialize unregistered class "+e);if(r.deserialize)return r.deserialize(t);for(var i=Object.create(r.prototype),n=0,a=Object.keys(t);n<a.length;n+=1){var o=a[n];if("$name"!==o){var s=t[o];i[o]=_i[e].shallow.indexOf(o)>=0?s:Si(s)}}return i}throw new Error("can't deserialize object of type "+typeof t)}var Ei=function(){this.first=!0};Ei.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))};var Mi={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Ai(t){for(var e=0,r=t;e<r.length;e+=1)if(Pi(r[e].charCodeAt(0)))return!0;return!1}function Ci(t){return!Mi.Arabic(t)&&!Mi["Arabic Supplement"](t)&&!Mi["Arabic Extended-A"](t)&&!Mi["Arabic Presentation Forms-A"](t)&&!Mi["Arabic Presentation Forms-B"](t)}function Pi(t){return 746===t||747===t||!(t<4352)&&(!!Mi["Bopomofo Extended"](t)||!!Mi.Bopomofo(t)||!(!Mi["CJK Compatibility Forms"](t)||t>=65097&&t<=65103)||!!Mi["CJK Compatibility Ideographs"](t)||!!Mi["CJK Compatibility"](t)||!!Mi["CJK Radicals Supplement"](t)||!!Mi["CJK Strokes"](t)||!(!Mi["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||!!Mi["CJK Unified Ideographs Extension A"](t)||!!Mi["CJK Unified Ideographs"](t)||!!Mi["Enclosed CJK Letters and Months"](t)||!!Mi["Hangul Compatibility Jamo"](t)||!!Mi["Hangul Jamo Extended-A"](t)||!!Mi["Hangul Jamo Extended-B"](t)||!!Mi["Hangul Jamo"](t)||!!Mi["Hangul Syllables"](t)||!!Mi.Hiragana(t)||!!Mi["Ideographic Description Characters"](t)||!!Mi.Kanbun(t)||!!Mi["Kangxi Radicals"](t)||!!Mi["Katakana Phonetic Extensions"](t)||!(!Mi.Katakana(t)||12540===t)||!(!Mi["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Mi["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||!!Mi["Unified Canadian Aboriginal Syllabics"](t)||!!Mi["Unified Canadian Aboriginal Syllabics Extended"](t)||!!Mi["Vertical Forms"](t)||!!Mi["Yijing Hexagram Symbols"](t)||!!Mi["Yi Syllables"](t)||!!Mi["Yi Radicals"](t))}function Li(t){return!(Pi(t)||function(t){return!(!Mi["Latin-1 Supplement"](t)||167!==t&&169!==t&&174!==t&&177!==t&&188!==t&&189!==t&&190!==t&&215!==t&&247!==t)||!(!Mi["General Punctuation"](t)||8214!==t&&8224!==t&&8225!==t&&8240!==t&&8241!==t&&8251!==t&&8252!==t&&8258!==t&&8263!==t&&8264!==t&&8265!==t&&8273!==t)||!!Mi["Letterlike Symbols"](t)||!!Mi["Number Forms"](t)||!(!Mi["Miscellaneous Technical"](t)||!(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215))||!(!Mi["Control Pictures"](t)||9251===t)||!!Mi["Optical Character Recognition"](t)||!!Mi["Enclosed Alphanumerics"](t)||!!Mi["Geometric Shapes"](t)||!(!Mi["Miscellaneous Symbols"](t)||t>=9754&&t<=9759)||!(!Mi["Miscellaneous Symbols and Arrows"](t)||!(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243))||!!Mi["CJK Symbols and Punctuation"](t)||!!Mi.Katakana(t)||!!Mi["Private Use Area"](t)||!!Mi["CJK Compatibility Forms"](t)||!!Mi["Small Form Variants"](t)||!!Mi["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t}(t))}function Ii(t,e){return!(!e&&(t>=1424&&t<=2303||Mi["Arabic Presentation Forms-A"](t)||Mi["Arabic Presentation Forms-B"](t)))&&!(t>=2304&&t<=3583||t>=3840&&t<=4255||Mi.Khmer(t))}var ki,Ri="unavailable",Oi="loading",zi="loaded",Di="error",Bi=Ri,Fi=null,Ni=new Et,Ui={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Bi===zi||null!=Ui.applyArabicShaping}},Vi=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ei,this.transition={})};Vi.prototype.isSupportedScript=function(t){return function(t,e){for(var r=0,i=t;r<i.length;r+=1)if(!Ii(i[r].charCodeAt(0),e))return!1;return!0}(t,Ui.isLoaded())},Vi.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Vi.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}};var ji=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(br(t))return new Or(t,e);if(Pr(t)){var r=Rr(t,e);if("error"===r.result)throw new Error(r.value.map((function(t){return t.key+": "+t.message})).join(", "));return r.value}var i=t;return"string"==typeof t&&"color"===e.type&&(i=Zt.parse(t)),{kind:"constant",evaluate:function(){return i}}}(void 0===e?t.specification.default:e,t.specification)};ji.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ji.prototype.possiblyEvaluate=function(t,e){return this.property.possiblyEvaluate(this,t,e)};var Gi=function(t){this.property=t,this.value=new ji(t,void 0)};Gi.prototype.transitioned=function(t,e){return new Wi(this.property,this.value,e,h({},t.transition,this.transition),t.now)},Gi.prototype.untransitioned=function(){return new Wi(this.property,this.value,null,{},0)};var Hi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Hi.prototype.getValue=function(t){return x(this._values[t].value.value)},Hi.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Gi(this._values[t].property)),this._values[t].value=new ji(this._values[t].property,null===e?void 0:x(e))},Hi.prototype.getTransition=function(t){return x(this._values[t].transition)},Hi.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Gi(this._values[t].property)),this._values[t].transition=x(e)||void 0},Hi.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var i=r[e],n=this.getValue(i);void 0!==n&&(t[i]=n);var a=this.getTransition(i);void 0!==a&&(t[i+"-transition"]=a)}return t},Hi.prototype.transitioned=function(t,e){for(var r=new qi(this._properties),i=0,n=Object.keys(this._values);i<n.length;i+=1){var a=n[i];r._values[a]=this._values[a].transitioned(t,e._values[a])}return r},Hi.prototype.untransitioned=function(){for(var t=new qi(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var i=r[e];t._values[i]=this._values[i].untransitioned()}return t};var Wi=function(t,e,r,i,n){this.property=t,this.value=e,this.begin=n+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=r)};Wi.prototype.possiblyEvaluate=function(t,e){var r=t.now||0,i=this.value.possiblyEvaluate(t,e),n=this.prior;if(n){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return n.possiblyEvaluate(t,e);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(n.possiblyEvaluate(t,e),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}(a))}return i};var qi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};qi.prototype.possiblyEvaluate=function(t,e){for(var r=new Yi(this._properties),i=0,n=Object.keys(this._values);i<n.length;i+=1){var a=n[i];r._values[a]=this._values[a].possiblyEvaluate(t,e)}return r},qi.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var r=e[t];if(this._values[r].prior)return!0}return!1};var Xi=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Xi.prototype.getValue=function(t){return x(this._values[t].value)},Xi.prototype.setValue=function(t,e){this._values[t]=new ji(this._values[t].property,null===e?void 0:x(e))},Xi.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var i=r[e],n=this.getValue(i);void 0!==n&&(t[i]=n)}return t},Xi.prototype.possiblyEvaluate=function(t,e){for(var r=new Yi(this._properties),i=0,n=Object.keys(this._values);i<n.length;i+=1){var a=n[i];r._values[a]=this._values[a].possiblyEvaluate(t,e)}return r};var $i=function(t,e,r){this.property=t,this.value=e,this.parameters=r};$i.prototype.isConstant=function(){return"constant"===this.value.kind},$i.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},$i.prototype.evaluate=function(t,e,r){return this.property.evaluate(this.value,this.parameters,t,e,r)};var Yi=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Yi.prototype.get=function(t){return this._values[t]};var Zi=function(t){this.specification=t};Zi.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Zi.prototype.interpolate=function(t,e,r){var i=Me[this.specification.type];return i?i(t,e,r):t};var Ji=function(t,e){this.specification=t,this.overrides=e};Ji.prototype.possiblyEvaluate=function(t,e,r){return"constant"===t.expression.kind||"camera"===t.expression.kind?new $i(this,{kind:"constant",value:t.expression.evaluate(e,null,{},r)},e):new $i(this,t.expression,e)},Ji.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new $i(this,{kind:"constant",value:void 0},t.parameters);var i=Me[this.specification.type];return i?new $i(this,{kind:"constant",value:i(t.value.value,e.value.value,r)},t.parameters):t},Ji.prototype.evaluate=function(t,e,r,i,n){return"constant"===t.kind?t.value:t.evaluate(e,r,i,n)};var Ki=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(t,e,r){if(void 0===t.value)return new $i(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},r),n="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(n,n,n,e);return new $i(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var o=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new $i(this,{kind:"constant",value:o},e)}return new $i(this,t.expression,e)},e.prototype.evaluate=function(t,e,r,i,n){if("source"===t.kind){var a=t.evaluate(e,r,i,n);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,i),t.evaluate({zoom:Math.floor(e.zoom)},r,i),t.evaluate({zoom:Math.floor(e.zoom)+1},r,i),e):t.value},e.prototype._calculate=function(t,e,r,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},e.prototype.interpolate=function(t){return t},e}(Ji),Qi=function(t){this.specification=t};Qi.prototype.possiblyEvaluate=function(t,e,r){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new Vi(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Vi(Math.floor(e.zoom),e)),t.expression.evaluate(new Vi(Math.floor(e.zoom+1),e)),e)}},Qi.prototype._calculate=function(t,e,r,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},Qi.prototype.interpolate=function(t){return t};var tn=function(t){this.specification=t};tn.prototype.possiblyEvaluate=function(t,e,r){return!!t.expression.evaluate(e,null,{},r)},tn.prototype.interpolate=function(){return!1};var en=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var r=t[e];r.specification.overridable&&this.overridableProperties.push(e);var i=this.defaultPropertyValues[e]=new ji(r,void 0),n=this.defaultTransitionablePropertyValues[e]=new Gi(r);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}};xi("DataDrivenProperty",Ji),xi("DataConstantProperty",Zi),xi("CrossFadedDataDrivenProperty",Ki),xi("CrossFadedProperty",Qi),xi("ColorRampProperty",tn);var rn=function(t){function e(e,r){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new Xi(r.layout)),r.paint)){for(var i in this._transitionablePaint=new Hi(r.paint),e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(var n in e.layout)this.setLayoutProperty(n,e.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var i="layers."+this.id+".layout."+t;if(this._validate(di,i,t,e,r))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e},e.prototype.getPaintProperty=function(t){return g(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var i="layers."+this.id+".paint."+t;if(this._validate(pi,i,t,e,r))return!1}if(g(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var n=this._transitionablePaint._values[t],a="cross-faded-data-driven"===n.property.specification["property-type"],o=n.value.isDataDriven(),s=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var l=this._transitionablePaint._values[t].value;return l.isDataDriven()||o||a||this._handleOverridablePaintPropertyUpdate(t,s,l)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,r){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),_(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,r,i,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&fi(this,t.call(ci,{key:e,layerType:this.type,objectKey:r,value:i,styleSpec:Mt,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof $i&&gr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Et),nn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},an=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},on=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function sn(t,e){void 0===e&&(e=1);var r=0,i=0;return{members:t.map((function(t){var n,a=(n=t.type,nn[n].BYTES_PER_ELEMENT),o=r=ln(r,Math.max(e,a)),s=t.components||1;return i=Math.max(i,a),r+=a*s,{name:t.name,type:t.type,components:s,offset:o}})),size:ln(r,Math.max(i,e)),alignment:e}}function ln(t,e){return Math.ceil(t/e)*e}on.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},on.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},on.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},on.prototype.clear=function(){this.length=0},on.prototype.resize=function(t){this.reserve(t),this.length=t},on.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},on.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var un=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var i=2*t;return this.int16[i+0]=e,this.int16[i+1]=r,t},e}(on);un.prototype.bytesPerElement=4,xi("StructArrayLayout2i4",un);var cn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r,i)},e.prototype.emplace=function(t,e,r,i,n){var a=4*t;return this.int16[a+0]=e,this.int16[a+1]=r,this.int16[a+2]=i,this.int16[a+3]=n,t},e}(on);cn.prototype.bytesPerElement=8,xi("StructArrayLayout4i8",cn);var hn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,i,n,a)},e.prototype.emplace=function(t,e,r,i,n,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=i,this.int16[s+3]=n,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(on);hn.prototype.bytesPerElement=12,xi("StructArrayLayout2i4i12",hn);var pn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,i,n,a)},e.prototype.emplace=function(t,e,r,i,n,a,o){var s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.uint8[l+4]=i,this.uint8[l+5]=n,this.uint8[l+6]=a,this.uint8[l+7]=o,t},e}(on);pn.prototype.bytesPerElement=8,xi("StructArrayLayout2i4ub8",pn);var dn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,r,i,n,a,o,s)},e.prototype.emplace=function(t,e,r,i,n,a,o,s,l){var u=8*t;return this.uint16[u+0]=e,this.uint16[u+1]=r,this.uint16[u+2]=i,this.uint16[u+3]=n,this.uint16[u+4]=a,this.uint16[u+5]=o,this.uint16[u+6]=s,this.uint16[u+7]=l,t},e}(on);dn.prototype.bytesPerElement=16,xi("StructArrayLayout8ui16",dn);var fn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,r,i,n,a,o,s)},e.prototype.emplace=function(t,e,r,i,n,a,o,s,l){var u=8*t;return this.int16[u+0]=e,this.int16[u+1]=r,this.int16[u+2]=i,this.int16[u+3]=n,this.uint16[u+4]=a,this.uint16[u+5]=o,this.uint16[u+6]=s,this.uint16[u+7]=l,t},e}(on);fn.prototype.bytesPerElement=16,xi("StructArrayLayout4i4ui16",fn);var mn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=3*t;return this.float32[n+0]=e,this.float32[n+1]=r,this.float32[n+2]=i,t},e}(on);mn.prototype.bytesPerElement=12,xi("StructArrayLayout3f12",mn);var vn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint32[r+0]=e,t},e}(on);vn.prototype.bytesPerElement=4,xi("StructArrayLayout1ul4",vn);var gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,a,o,s,l,u,c){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,r,i,n,a,o,s,l,u,c)},e.prototype.emplace=function(t,e,r,i,n,a,o,s,l,u,c,h){var p=12*t,d=6*t;return this.int16[p+0]=e,this.int16[p+1]=r,this.int16[p+2]=i,this.int16[p+3]=n,this.int16[p+4]=a,this.int16[p+5]=o,this.uint32[d+3]=s,this.uint16[p+8]=l,this.uint16[p+9]=u,this.int16[p+10]=c,this.int16[p+11]=h,t},e}(on);gn.prototype.bytesPerElement=24,xi("StructArrayLayout6i1ul2ui2i24",gn);var yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,i,n,a)},e.prototype.emplace=function(t,e,r,i,n,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=i,this.int16[s+3]=n,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(on);yn.prototype.bytesPerElement=12,xi("StructArrayLayout2i2i2i12",yn);var _n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r,i)},e.prototype.emplace=function(t,e,r,i,n){var a=12*t,o=3*t;return this.uint8[a+0]=e,this.uint8[a+1]=r,this.float32[o+1]=i,this.float32[o+2]=n,t},e}(on);_n.prototype.bytesPerElement=12,xi("StructArrayLayout2ub2f12",_n);var xn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,a,o,s,l,u,c,h,p,d,f,m,v){var g=this.length;return this.resize(g+1),this.emplace(g,t,e,r,i,n,a,o,s,l,u,c,h,p,d,f,m,v)},e.prototype.emplace=function(t,e,r,i,n,a,o,s,l,u,c,h,p,d,f,m,v,g){var y=24*t,_=12*t,x=48*t;return this.int16[y+0]=e,this.int16[y+1]=r,this.uint16[y+2]=i,this.uint16[y+3]=n,this.uint32[_+2]=a,this.uint32[_+3]=o,this.uint32[_+4]=s,this.uint16[y+10]=l,this.uint16[y+11]=u,this.uint16[y+12]=c,this.float32[_+7]=h,this.float32[_+8]=p,this.uint8[x+36]=d,this.uint8[x+37]=f,this.uint8[x+38]=m,this.uint32[_+10]=v,this.int16[y+22]=g,t},e}(on);xn.prototype.bytesPerElement=48,xi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",xn);var bn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,a,o,s,l,u,c,h,p,d,f,m,v,g,y,_,x,b,w,T,S,E){var M=this.length;return this.resize(M+1),this.emplace(M,t,e,r,i,n,a,o,s,l,u,c,h,p,d,f,m,v,g,y,_,x,b,w,T,S,E)},e.prototype.emplace=function(t,e,r,i,n,a,o,s,l,u,c,h,p,d,f,m,v,g,y,_,x,b,w,T,S,E,M){var A=30*t,C=15*t;return this.int16[A+0]=e,this.int16[A+1]=r,this.int16[A+2]=i,this.int16[A+3]=n,this.int16[A+4]=a,this.int16[A+5]=o,this.int16[A+6]=s,this.int16[A+7]=l,this.uint16[A+8]=u,this.uint16[A+9]=c,this.uint16[A+10]=h,this.uint16[A+11]=p,this.uint16[A+12]=d,this.uint16[A+13]=f,this.uint16[A+14]=m,this.uint16[A+15]=v,this.uint16[A+16]=g,this.uint16[A+17]=y,this.uint16[A+18]=_,this.uint16[A+19]=x,this.uint16[A+20]=b,this.uint16[A+21]=w,this.uint32[C+11]=T,this.float32[C+12]=S,this.float32[C+13]=E,this.float32[C+14]=M,t},e}(on);bn.prototype.bytesPerElement=60,xi("StructArrayLayout8i14ui1ul3f60",bn);var wn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.float32[r+0]=e,t},e}(on);wn.prototype.bytesPerElement=4,xi("StructArrayLayout1f4",wn);var Tn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=3*t;return this.int16[n+0]=e,this.int16[n+1]=r,this.int16[n+2]=i,t},e}(on);Tn.prototype.bytesPerElement=6,xi("StructArrayLayout3i6",Tn);var Sn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=2*t,a=4*t;return this.uint32[n+0]=e,this.uint16[a+2]=r,this.uint16[a+3]=i,t},e}(on);Sn.prototype.bytesPerElement=8,xi("StructArrayLayout1ul2ui8",Sn);var En=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=3*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,this.uint16[n+2]=i,t},e}(on);En.prototype.bytesPerElement=6,xi("StructArrayLayout3ui6",En);var Mn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,t},e}(on);Mn.prototype.bytesPerElement=4,xi("StructArrayLayout2ui4",Mn);var An=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint16[r+0]=e,t},e}(on);An.prototype.bytesPerElement=2,xi("StructArrayLayout1ui2",An);var Cn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var i=2*t;return this.float32[i+0]=e,this.float32[i+1]=r,t},e}(on);Cn.prototype.bytesPerElement=8,xi("StructArrayLayout2f8",Cn);var Pn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r,i)},e.prototype.emplace=function(t,e,r,i,n){var a=4*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=i,this.float32[a+3]=n,t},e}(on);Pn.prototype.bytesPerElement=16,xi("StructArrayLayout4f16",Pn);var Ln=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},r.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(an);Ln.prototype.size=24;var In=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Ln(this,t)},e}(gn);xi("CollisionBoxArray",In);var kn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},r.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},r.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},r.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},r.associatedIconIndex.set=function(t){this._structArray.int16[this._pos2+22]=t},Object.defineProperties(e.prototype,r),e}(an);kn.prototype.size=48;var Rn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new kn(this,t)},e}(xn);xi("PlacedSymbolArray",Rn);var On=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.rightJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},r.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.centerJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},r.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},r.leftJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+4]=t},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},r.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+5]=t},r.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},r.placedIconSymbolIndex.set=function(t){this._structArray.int16[this._pos2+6]=t},r.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},r.verticalPlacedIconSymbolIndex.set=function(t){this._structArray.int16[this._pos2+7]=t},r.key.get=function(){return this._structArray.uint16[this._pos2+8]},r.key.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},r.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},r.verticalTextBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},r.verticalTextBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},r.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+13]=t},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},r.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+14]=t},r.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},r.verticalIconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+15]=t},r.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},r.verticalIconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+16]=t},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},r.featureIndex.set=function(t){this._structArray.uint16[this._pos2+17]=t},r.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},r.numHorizontalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+18]=t},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},r.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+19]=t},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},r.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+20]=t},r.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},r.numVerticalIconVertices.set=function(t){this._structArray.uint16[this._pos2+21]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+11]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+11]=t},r.textBoxScale.get=function(){return this._structArray.float32[this._pos4+12]},r.textBoxScale.set=function(t){this._structArray.float32[this._pos4+12]=t},r.textOffset0.get=function(){return this._structArray.float32[this._pos4+13]},r.textOffset0.set=function(t){this._structArray.float32[this._pos4+13]=t},r.textOffset1.get=function(){return this._structArray.float32[this._pos4+14]},r.textOffset1.set=function(t){this._structArray.float32[this._pos4+14]=t},Object.defineProperties(e.prototype,r),e}(an);On.prototype.size=60;var zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new On(this,t)},e}(bn);xi("SymbolInstanceArray",zn);var Dn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={offsetX:{configurable:!0}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,r),e}(an);Dn.prototype.size=4;var Bn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new Dn(this,t)},e}(wn);xi("GlyphOffsetArray",Bn);var Fn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(t){this._structArray.int16[this._pos2+0]=t},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(t){this._structArray.int16[this._pos2+1]=t},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,r),e}(an);Fn.prototype.size=6;var Nn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new Fn(this,t)},e}(Tn);xi("SymbolLineVertexArray",Nn);var Un=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,r),e}(an);Un.prototype.size=8;var Vn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Un(this,t)},e}(Sn);xi("FeatureIndexArray",Vn);var jn=sn([{name:"a_pos",components:2,type:"Int16"}],4).members,Gn=function(t){void 0===t&&(t=[]),this.segments=t};function Hn(t,e){return 256*(t=u(Math.floor(t),0,255))+u(Math.floor(e),0,255)}Gn.prototype.prepareSegment=function(t,e,r,i){var n=this.segments[this.segments.length-1];return t>Gn.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+Gn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!n||n.vertexLength+t>Gn.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==i)&&(n={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(n.sortKey=i),this.segments.push(n)),n},Gn.prototype.get=function(){return this.segments},Gn.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var i in r.vaos)r.vaos[i].destroy()}},Gn.simpleSegment=function(t,e,r,i){return new Gn([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])},Gn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xi("SegmentVector",Gn);var Wn=function(){this.ids=[],this.positions=[],this.indexed=!1};function qn(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}Wn.prototype.add=function(t,e,r,i){this.ids.push(t),this.positions.push(e,r,i)},Wn.prototype.getPositions=function(t){for(var e=0,r=this.ids.length-1;e<r;){var i=e+r>>1;this.ids[i]>=t?r=i:e=i+1}for(var n=[];this.ids[e]===t;){var a=this.positions[3*e],o=this.positions[3*e+1],s=this.positions[3*e+2];n.push({index:a,start:o,end:s}),e++}return n},Wn.serialize=function(t,e){var r=new Float64Array(t.ids),i=new Uint32Array(t.positions);return function t(e,r,i,n){if(!(i>=n)){for(var a=e[i+n>>1],o=i-1,s=n+1;;){do{o++}while(e[o]<a);do{s--}while(e[s]>a);if(o>=s)break;qn(e,o,s),qn(r,3*o,3*s),qn(r,3*o+1,3*s+1),qn(r,3*o+2,3*s+2)}t(e,r,i,s),t(e,r,s+1,n)}}(r,i,0,r.length-1),e.push(r.buffer,i.buffer),{ids:r,positions:i}},Wn.deserialize=function(t){var e=new Wn;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},xi("FeaturePositionMap",Wn);var Xn=function(t,e){this.gl=t.gl,this.location=e},$n=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Xn),Yn=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Xn),Zn=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Xn),Jn=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Xn),Kn=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Xn),Qn=function(t){function e(e,r){t.call(this,e,r),this.current=Zt.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Xn),ta=new Float32Array(16),ea=function(t){function e(e,r){t.call(this,e,r),this.current=ta}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Xn);function ra(t){return[Hn(255*t.r,255*t.g),Hn(255*t.b,255*t.a)]}var ia=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map((function(t){return"u_"+t})),this.type=r,this.maxValue=-1/0};ia.prototype.defines=function(){return this.names.map((function(t){return"#define HAS_UNIFORM_u_"+t}))},ia.prototype.setConstantPatternPositions=function(){},ia.prototype.populatePaintArray=function(){},ia.prototype.updatePaintArray=function(){},ia.prototype.upload=function(){},ia.prototype.destroy=function(){},ia.prototype.setUniforms=function(t,e,r,i){e.set(i.constantOr(this.value))},ia.prototype.getBinding=function(t,e){return"color"===this.type?new Qn(t,e):new Yn(t,e)},ia.serialize=function(t){var e=t.value,r=t.names,i=t.type;return{value:Ti(e),names:r,type:i}},ia.deserialize=function(t){var e=t.value,r=t.names,i=t.type;return new ia(Si(e),r,i)};var na=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map((function(t){return"u_"+t})),this.type=r,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};na.prototype.defines=function(){return this.names.map((function(t){return"#define HAS_UNIFORM_u_"+t}))},na.prototype.populatePaintArray=function(){},na.prototype.updatePaintArray=function(){},na.prototype.upload=function(){},na.prototype.destroy=function(){},na.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},na.prototype.setUniforms=function(t,e,r,i,n){var a=this.patternPositions;"u_pattern_to"===n&&a.patternTo&&e.set(a.patternTo),"u_pattern_from"===n&&a.patternFrom&&e.set(a.patternFrom)},na.prototype.getBinding=function(t,e){return new Kn(t,e)};var aa=function(t,e,r,i){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map((function(t){return"a_"+t})),this.maxValue=-1/0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new i};aa.prototype.defines=function(){return[]},aa.prototype.setConstantPatternPositions=function(){},aa.prototype.populatePaintArray=function(t,e,r,i){var n=this.paintVertexArray,a=n.length;n.reserve(t);var o=this.expression.evaluate(new Vi(0),e,{},[],i);if("color"===this.type)for(var s=ra(o),l=a;l<t;l++)n.emplaceBack(s[0],s[1]);else{for(var u=a;u<t;u++)n.emplaceBack(o);this.maxValue=Math.max(this.maxValue,o)}},aa.prototype.updatePaintArray=function(t,e,r,i){var n=this.paintVertexArray,a=this.expression.evaluate({zoom:0},r,i);if("color"===this.type)for(var o=ra(a),s=t;s<e;s++)n.emplace(s,o[0],o[1]);else{for(var l=t;l<e;l++)n.emplace(l,a);this.maxValue=Math.max(this.maxValue,a)}},aa.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},aa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},aa.prototype.setUniforms=function(t,e){e.set(0)},aa.prototype.getBinding=function(t,e){return new Yn(t,e)};var oa=function(t,e,r,i,n,a){this.expression=t,this.names=e,this.uniformNames=this.names.map((function(t){return"u_"+t+"_t"})),this.type=r,this.useIntegerZoom=i,this.zoom=n,this.maxValue=-1/0;var o=a;this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new o};oa.prototype.defines=function(){return[]},oa.prototype.setConstantPatternPositions=function(){},oa.prototype.populatePaintArray=function(t,e,r,i){var n=this.paintVertexArray,a=n.length;n.reserve(t);var o=this.expression.evaluate(new Vi(this.zoom),e,{},[],i),s=this.expression.evaluate(new Vi(this.zoom+1),e,{},[],i);if("color"===this.type)for(var l=ra(o),u=ra(s),c=a;c<t;c++)n.emplaceBack(l[0],l[1],u[0],u[1]);else{for(var h=a;h<t;h++)n.emplaceBack(o,s);this.maxValue=Math.max(this.maxValue,o,s)}},oa.prototype.updatePaintArray=function(t,e,r,i){var n=this.paintVertexArray,a=this.expression.evaluate({zoom:this.zoom},r,i),o=this.expression.evaluate({zoom:this.zoom+1},r,i);if("color"===this.type)for(var s=ra(a),l=ra(o),u=t;u<e;u++)n.emplace(u,s[0],s[1],l[0],l[1]);else{for(var c=t;c<e;c++)n.emplace(c,a,o);this.maxValue=Math.max(this.maxValue,a,o)}},oa.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},oa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},oa.prototype.interpolationFactor=function(t){return this.useIntegerZoom&&(t=Math.floor(t)),u(this.expression.interpolationFactor(t,this.zoom,this.zoom+1),0,1)},oa.prototype.setUniforms=function(t,e,r){e.set(this.interpolationFactor(r.zoom))},oa.prototype.getBinding=function(t,e){return new Yn(t,e)};var sa=function(t,e,r,i,n,a,o){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map((function(t){return"u_"+t+"_t"})),this.useIntegerZoom=i,this.zoom=n,this.maxValue=-1/0,this.layerId=o,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}})),this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a};sa.prototype.defines=function(){return[]},sa.prototype.setConstantPatternPositions=function(){},sa.prototype.populatePaintArray=function(t,e,r){var i=this.zoomInPaintVertexArray,n=this.zoomOutPaintVertexArray,a=this.layerId,o=i.length;if(i.reserve(t),n.reserve(t),r&&e.patterns&&e.patterns[a]){var s=e.patterns[a],l=s.min,u=s.mid,c=s.max,h=r[l],p=r[u],d=r[c];if(!h||!p||!d)return;for(var f=o;f<t;f++)i.emplaceBack(p.tl[0],p.tl[1],p.br[0],p.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),n.emplaceBack(p.tl[0],p.tl[1],p.br[0],p.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},sa.prototype.updatePaintArray=function(t,e,r,i,n){var a=this.zoomInPaintVertexArray,o=this.zoomOutPaintVertexArray,s=this.layerId;if(n&&r.patterns&&r.patterns[s]){var l=r.patterns[s],u=l.min,c=l.mid,h=l.max,p=n[u],d=n[c],f=n[h];if(!p||!d||!f)return;for(var m=t;m<e;m++)a.emplace(m,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),o.emplace(m,d.tl[0],d.tl[1],d.br[0],d.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},sa.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},sa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},sa.prototype.setUniforms=function(t,e){e.set(0)},sa.prototype.getBinding=function(t,e){return new Yn(t,e)};var la=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Wn,this._bufferOffset=0};la.createDynamic=function(t,e,r){var i=new la,n=[];for(var a in t.paint._values)if(r(a)){var o=t.paint.get(a);if(o instanceof $i&&gr(o.property.specification)){var s=ca(a,t.type),l=o.property.specification.type,u=o.property.useIntegerZoom;if("cross-faded"===o.property.specification["property-type"]||"cross-faded-data-driven"===o.property.specification["property-type"])if("constant"===o.value.kind)i.binders[a]=new na(o.value.value,s,l),n.push("/u_"+a);else{var c=ha(a,l,"source");i.binders[a]=new sa(o.value,s,l,u,e,c,t.id),n.push("/a_"+a)}else if("constant"===o.value.kind)i.binders[a]=new ia(o.value.value,s,l),n.push("/u_"+a);else if("source"===o.value.kind){var h=ha(a,l,"source");i.binders[a]=new aa(o.value,s,l,h),n.push("/a_"+a)}else{var p=ha(a,l,"composite");i.binders[a]=new oa(o.value,s,l,u,e,p),n.push("/z_"+a)}}}return i.cacheKey=n.sort().join(""),i},la.prototype.populatePaintArrays=function(t,e,r,i,n){for(var a in this.binders)this.binders[a].populatePaintArray(t,e,i,n);void 0!==e.id&&this._featureMap.add(+e.id,r,this._bufferOffset,t),this._bufferOffset=t},la.prototype.setConstantPatternPositions=function(t,e){for(var r in this.binders)this.binders[r].setConstantPatternPositions(t,e)},la.prototype.updatePaintArrays=function(t,e,r,i){var n=!1;for(var a in t)for(var o=0,s=this._featureMap.getPositions(+a);o<s.length;o+=1){var l=s[o],u=e.feature(l.index);for(var c in this.binders){var h=this.binders[c];if(!(h instanceof ia||h instanceof na)&&!0===h.expression.isStateDependent){var p=r.paint.get(c);h.expression=p.value,h.updatePaintArray(l.start,l.end,u,t[a],i),n=!0}}}return n},la.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},la.prototype.getPaintVertexBuffers=function(){return this._buffers},la.prototype.getUniforms=function(t,e){var r=[];for(var i in this.binders)for(var n=this.binders[i],a=0,o=n.uniformNames;a<o.length;a+=1){var s=o[a];if(e[s]){var l=n.getBinding(t,e[s]);r.push({name:s,property:i,binding:l})}}return r},la.prototype.setUniforms=function(t,e,r,i){for(var n=0,a=e;n<a.length;n+=1){var o=a[n],s=o.name,l=o.property,u=o.binding;this.binders[l].setUniforms(t,u,i,r.get(l),s)}},la.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof sa){var n=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;n&&e.push(n)}else(i instanceof aa||i instanceof oa)&&i.paintVertexBuffer&&e.push(i.paintVertexBuffer)}this._buffers=e},la.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var r=[];for(var i in this.binders){var n=this.binders[i];(n instanceof aa||n instanceof oa)&&n.paintVertexBuffer&&r.push(n.paintVertexBuffer)}this._buffers=r},la.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var ua=function(t,e,r,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var n=0,a=e;n<a.length;n+=1){var o=a[n];this.programConfigurations[o.id]=la.createDynamic(o,r,i),this.programConfigurations[o.id].layoutAttributes=t}this.needsUpload=!1};function ca(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function ha(t,e,r){var i={color:{source:Cn,composite:Pn},number:{source:wn,composite:Cn}},n=function(t){return{"line-pattern":{source:dn,composite:dn},"fill-pattern":{source:dn,composite:dn},"fill-extrusion-pattern":{source:dn,composite:dn}}[t]}(t);return n&&n[r]||i[e][r]}ua.prototype.populatePaintArrays=function(t,e,r,i,n){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,i,n);this.needsUpload=!0},ua.prototype.updatePaintArrays=function(t,e,r,i){for(var n=0,a=r;n<a.length;n+=1){var o=a[n];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,e,o,i)||this.needsUpload}},ua.prototype.get=function(t){return this.programConfigurations[t]},ua.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},ua.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},xi("ConstantBinder",ia),xi("CrossFadedConstantBinder",na),xi("SourceExpressionBinder",aa),xi("CrossFadedCompositeBinder",sa),xi("CompositeExpressionBinder",oa),xi("ProgramConfiguration",la,{omit:["_buffers"]}),xi("ProgramConfigurationSet",ua);var pa,da=8192,fa=(pa=15,{min:-1*Math.pow(2,pa-1),max:Math.pow(2,pa-1)-1});function ma(t){for(var e=da/t.extent,r=t.loadGeometry(),i=0;i<r.length;i++)for(var n=r[i],a=0;a<n.length;a++){var o=n[a];o.x=Math.round(o.x*e),o.y=Math.round(o.y*e),(o.x<fa.min||o.x>fa.max||o.y<fa.min||o.y>fa.max)&&(w("Geometry exceeds allowed extent, reduce your vector tile buffer size"),o.x=u(o.x,fa.min,fa.max),o.y=u(o.y,fa.min,fa.max))}return r}function va(t,e,r,i,n){t.emplaceBack(2*e+(i+1)/2,2*r+(n+1)/2)}var ga=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new un,this.indexArray=new En,this.segments=new Gn,this.programConfigurations=new ua(jn,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function ya(t,e){for(var r=0;r<t.length;r++)if(Aa(e,t[r]))return!0;for(var i=0;i<e.length;i++)if(Aa(t,e[i]))return!0;return!!wa(t,e)}function _a(t,e,r){return!!Aa(t,e)||!!Sa(e,t,r)}function xa(t,e){if(1===t.length)return Ma(e,t[0]);for(var r=0;r<e.length;r++)for(var i=e[r],n=0;n<i.length;n++)if(Aa(t,i[n]))return!0;for(var a=0;a<t.length;a++)if(Ma(e,t[a]))return!0;for(var o=0;o<e.length;o++)if(wa(t,e[o]))return!0;return!1}function ba(t,e,r){if(t.length>1){if(wa(t,e))return!0;for(var i=0;i<e.length;i++)if(Sa(e[i],t,r))return!0}for(var n=0;n<t.length;n++)if(Sa(t[n],e,r))return!0;return!1}function wa(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var i=t[r],n=t[r+1],a=0;a<e.length-1;a++)if(Ta(i,n,e[a],e[a+1]))return!0;return!1}function Ta(t,e,r,i){return T(t,r,i)!==T(e,r,i)&&T(t,e,r)!==T(t,e,i)}function Sa(t,e,r){var i=r*r;if(1===e.length)return t.distSqr(e[0])<i;for(var n=1;n<e.length;n++)if(Ea(t,e[n-1],e[n])<i)return!0;return!1}function Ea(t,e,r){var i=e.distSqr(r);if(0===i)return t.distSqr(e);var n=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/i;return n<0?t.distSqr(e):n>1?t.distSqr(r):t.distSqr(r.sub(e)._mult(n)._add(e))}function Ma(t,e){for(var r,i,n,a=!1,o=0;o<t.length;o++)for(var s=0,l=(r=t[o]).length-1;s<r.length;l=s++)i=r[s],n=r[l],i.y>e.y!=n.y>e.y&&e.x<(n.x-i.x)*(e.y-i.y)/(n.y-i.y)+i.x&&(a=!a);return a}function Aa(t,e){for(var r=!1,i=0,n=t.length-1;i<t.length;n=i++){var a=t[i],o=t[n];a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(r=!r)}return r}function Ca(t,e,r){var i=r[0],n=r[2];if(t.x<i.x&&e.x<i.x||t.x>n.x&&e.x>n.x||t.y<i.y&&e.y<i.y||t.y>n.y&&e.y>n.y)return!1;var a=T(t,e,r[0]);return a!==T(t,e,r[1])||a!==T(t,e,r[2])||a!==T(t,e,r[3])}function Pa(t,e,r){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:r.programConfigurations.get(e.id).binders[t].maxValue}function La(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ia(t,e,r,i,a){if(!e[0]&&!e[1])return t;var o=n.convert(e)._mult(a);"viewport"===r&&o._rotate(-i);for(var s=[],l=0;l<t.length;l++){var u=t[l];s.push(u.sub(o))}return s}ga.prototype.populate=function(t,e){var r=this.layers[0],i=[],n=null;"circle"===r.type&&(n=r.layout.get("circle-sort-key"));for(var a=0,o=t;a<o.length;a+=1){var s=o[a],l=s.feature,u=s.index,c=s.sourceLayerIndex;if(this.layers[0]._featureFilter(new Vi(this.zoom),l)){var h=ma(l),p=n?n.evaluate(l,{}):void 0,d={id:l.id,properties:l.properties,type:l.type,sourceLayerIndex:c,index:u,geometry:h,patterns:{},sortKey:p};i.push(d)}}n&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var f=0,m=i;f<m.length;f+=1){var v=m[f],g=v,y=g.geometry,_=g.index,x=g.sourceLayerIndex,b=t[_].feature;this.addFeature(v,y,_),e.featureIndex.insert(b,y,_,x,this.index)}},ga.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},ga.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ga.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ga.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,jn),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ga.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ga.prototype.addFeature=function(t,e,r){for(var i=0,n=e;i<n.length;i+=1)for(var a=0,o=n[i];a<o.length;a+=1){var s=o[a],l=s.x,u=s.y;if(!(l<0||l>=da||u<0||u>=da)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=c.vertexLength;va(this.layoutVertexArray,l,u,-1,-1),va(this.layoutVertexArray,l,u,1,-1),va(this.layoutVertexArray,l,u,1,1),va(this.layoutVertexArray,l,u,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{})},xi("CircleBucket",ga,{omit:["layers"]});var ka,Ra=new en({"circle-sort-key":new Ji(Mt.layout_circle["circle-sort-key"])}),Oa={paint:new en({"circle-radius":new Ji(Mt.paint_circle["circle-radius"]),"circle-color":new Ji(Mt.paint_circle["circle-color"]),"circle-blur":new Ji(Mt.paint_circle["circle-blur"]),"circle-opacity":new Ji(Mt.paint_circle["circle-opacity"]),"circle-translate":new Zi(Mt.paint_circle["circle-translate"]),"circle-translate-anchor":new Zi(Mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zi(Mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zi(Mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ji(Mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ji(Mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ji(Mt.paint_circle["circle-stroke-opacity"])}),layout:Ra},za="undefined"!=typeof Float32Array?Float32Array:Array;function Da(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3];return t[0]=r[0]*i+r[4]*n+r[8]*a+r[12]*o,t[1]=r[1]*i+r[5]*n+r[9]*a+r[13]*o,t[2]=r[2]*i+r[6]*n+r[10]*a+r[14]*o,t[3]=r[3]*i+r[7]*n+r[11]*a+r[15]*o,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,r=arguments.length;r--;)e+=t[r]*t[r];return Math.sqrt(e)}),ka=new za(3),za!=Float32Array&&(ka[0]=0,ka[1]=0,ka[2]=0),function(){(function(){var t=new za(4);za!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)})()}();var Ba=function(t){function e(e){t.call(this,e,Oa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new ga(t)},e.prototype.queryRadius=function(t){var e=t;return Pa("circle-radius",this,e)+Pa("circle-stroke-width",this,e)+La(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,n,a,o,s){for(var l=Ia(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),u=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r),c="map"===this.paint.get("circle-pitch-alignment"),h=c?l:function(t,e){return t.map((function(t){return Fa(t,e)}))}(l,s),p=c?u*o:u,d=0,f=i;d<f.length;d+=1)for(var m=0,v=f[d];m<v.length;m+=1){var g=v[m],y=c?g:Fa(g,s),_=p,x=Da([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=x[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=a.cameraToCenterDistance/x[3]),_a(h,y,_))return!0}return!1},e}(rn);function Fa(t,e){var r=Da([],[t.x,t.y,0,1],e);return new n(r[0]/r[3],r[1]/r[3])}var Na=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ga);function Ua(t,e,r,i){var n=e.width,a=e.height;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==n*a*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(n*a*r);return t.width=n,t.height=a,t.data=i,t}function Va(t,e,r){var i=e.width,n=e.height;if(i!==t.width||n!==t.height){var a=Ua({},{width:i,height:n},r);ja(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,n)},r),t.width=i,t.height=n,t.data=a.data}}function ja(t,e,r,i,n,a){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||r.x>t.width-n.width||r.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||i.x>e.width-n.width||i.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=t.data,s=e.data,l=0;l<n.height;l++)for(var u=((r.y+l)*t.width+r.x)*a,c=((i.y+l)*e.width+i.x)*a,h=0;h<n.width*a;h++)s[c+h]=o[u+h];return e}xi("HeatmapBucket",Na,{omit:["layers"]});var Ga=function(t,e){Ua(this,t,1,e)};Ga.prototype.resize=function(t){Va(this,t,1)},Ga.prototype.clone=function(){return new Ga({width:this.width,height:this.height},new Uint8Array(this.data))},Ga.copy=function(t,e,r,i,n){ja(t,e,r,i,n,1)};var Ha=function(t,e){Ua(this,t,4,e)};Ha.prototype.resize=function(t){Va(this,t,4)},Ha.prototype.replace=function(t,e){e?this.data.set(t):t instanceof Uint8ClampedArray?this.data=new Uint8Array(t.buffer):this.data=t},Ha.prototype.clone=function(){return new Ha({width:this.width,height:this.height},new Uint8Array(this.data))},Ha.copy=function(t,e,r,i,n){ja(t,e,r,i,n,4)},xi("AlphaImage",Ga),xi("RGBAImage",Ha);var Wa={paint:new en({"heatmap-radius":new Ji(Mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ji(Mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zi(Mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new tn(Mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zi(Mt.paint_heatmap["heatmap-opacity"])})};function qa(t,e){for(var r=new Uint8Array(1024),i={},n=0,a=0;n<256;n++,a+=4){i[e]=n/255;var o=t.evaluate(i);r[a+0]=Math.floor(255*o.r/o.a),r[a+1]=Math.floor(255*o.g/o.a),r[a+2]=Math.floor(255*o.b/o.a),r[a+3]=Math.floor(255*o.a)}return new Ha({width:256,height:1},r)}var Xa=function(t){function e(e){t.call(this,e,Wa),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Na(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=qa(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(rn),$a={paint:new en({"hillshade-illumination-direction":new Zi(Mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Zi(Mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zi(Mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zi(Mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zi(Mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zi(Mt.paint_hillshade["hillshade-accent-color"])})},Ya=function(t){function e(e){t.call(this,e,$a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(rn),Za=sn([{name:"a_pos",components:2,type:"Int16"}],4).members,Ja=Qa,Ka=Qa;function Qa(t,e,r){r=r||2;var i,n,a,o,s,l,u,c=e&&e.length,h=c?e[0]*r:t.length,p=to(t,0,h,r,!0),d=[];if(!p||p.next===p.prev)return d;if(c&&(p=function(t,e,r,i){var n,a,o,s,l,u=[];for(n=0,a=e.length;n<a;n++)o=e[n]*i,s=n<a-1?e[n+1]*i:t.length,(l=to(t,o,s,i,!1))===l.next&&(l.steiner=!0),u.push(ho(l));for(u.sort(so),n=0;n<u.length;n++)lo(u[n],r),r=eo(r,r.next);return r}(t,e,p,r)),t.length>80*r){i=a=t[0],n=o=t[1];for(var f=r;f<h;f+=r)(s=t[f])<i&&(i=s),(l=t[f+1])<n&&(n=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-i,o-n))?1/u:0}return ro(p,d,r,i,n,u),d}function to(t,e,r,i,n){var a,o;if(n===Eo(t,e,r,i)>0)for(a=e;a<r;a+=i)o=wo(a,t[a],t[a+1],o);else for(a=r-i;a>=e;a-=i)o=wo(a,t[a],t[a+1],o);return o&&vo(o,o.next)&&(To(o),o=o.next),o}function eo(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!vo(i,i.next)&&0!==mo(i.prev,i,i.next))i=i.next;else{if(To(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function ro(t,e,r,i,n,a,o){if(t){!o&&a&&function(t,e,r,i){var n=t;do{null===n.z&&(n.z=co(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,a,o,s,l,u=1;do{for(r=t,t=null,a=null,o=0;r;){for(o++,i=r,s=0,e=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,l--),a?a.nextZ=n:t=n,n.prevZ=a,a=n;r=i}a.nextZ=null,u*=2}while(o>1)}(n)}(t,i,n,a);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,a?no(t,i,n,a):io(t))e.push(s.i/r),e.push(t.i/r),e.push(l.i/r),To(t),t=l.next,u=l.next;else if((t=l)===u){o?1===o?ro(t=ao(eo(t),e,r),e,r,i,n,a,2):2===o&&oo(t,e,r,i,n,a):ro(eo(t),e,r,i,n,a,1);break}}}function io(t){var e=t.prev,r=t,i=t.next;if(mo(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(po(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&mo(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function no(t,e,r,i){var n=t.prev,a=t,o=t.next;if(mo(n,a,o)>=0)return!1;for(var s=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,l=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,u=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,c=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y,h=co(s,l,e,r,i),p=co(u,c,e,r,i),d=t.prevZ,f=t.nextZ;d&&d.z>=h&&f&&f.z<=p;){if(d!==t.prev&&d!==t.next&&po(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&mo(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,f!==t.prev&&f!==t.next&&po(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&mo(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&po(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&mo(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&po(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&mo(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function ao(t,e,r){var i=t;do{var n=i.prev,a=i.next.next;!vo(n,a)&&go(n,i,i.next,a)&&xo(n,a)&&xo(a,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(a.i/r),To(i),To(i.next),i=t=a),i=i.next}while(i!==t);return eo(i)}function oo(t,e,r,i,n,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&fo(o,s)){var l=bo(o,s);return o=eo(o,o.next),l=eo(l,l.next),ro(o,e,r,i,n,a),void ro(l,e,r,i,n,a)}s=s.next}o=o.next}while(o!==t)}function so(t,e){return t.x-e.x}function lo(t,e){if(e=function(t,e){var r,i=e,n=t.x,a=t.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>o){if(o=s,s===n){if(a===i.y)return i;if(a===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===o)return r;var l,u=r,c=r.x,h=r.y,p=1/0;i=r;do{n>=i.x&&i.x>=c&&n!==i.x&&po(a<h?n:o,a,c,h,a<h?o:n,a,i.x,i.y)&&(l=Math.abs(a-i.y)/(n-i.x),xo(i,t)&&(l<p||l===p&&(i.x>r.x||i.x===r.x&&uo(r,i)))&&(r=i,p=l)),i=i.next}while(i!==u);return r}(t,e)){var r=bo(e,t);eo(r,r.next)}}function uo(t,e){return mo(t.prev,t,e.prev)<0&&mo(e.next,t,t.next)<0}function co(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ho(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function po(t,e,r,i,n,a,o,s){return(n-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(r-o)*(e-s)>=0&&(r-o)*(a-s)-(n-o)*(i-s)>=0}function fo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&go(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(xo(t,e)&&xo(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,a=(t.y+e.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)&&(mo(t.prev,t,e.prev)||mo(t,e.prev,e))||vo(t,e)&&mo(t.prev,t,t.next)>0&&mo(e.prev,e,e.next)>0)}function mo(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function vo(t,e){return t.x===e.x&&t.y===e.y}function go(t,e,r,i){var n=_o(mo(t,e,r)),a=_o(mo(t,e,i)),o=_o(mo(r,i,t)),s=_o(mo(r,i,e));return n!==a&&o!==s||!(0!==n||!yo(t,r,e))||!(0!==a||!yo(t,i,e))||!(0!==o||!yo(r,t,i))||!(0!==s||!yo(r,e,i))}function yo(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function _o(t){return t>0?1:t<0?-1:0}function xo(t,e){return mo(t.prev,t,t.next)<0?mo(t,e,t.next)>=0&&mo(t,t.prev,e)>=0:mo(t,e,t.prev)<0||mo(t,t.next,e)<0}function bo(t,e){var r=new So(t.i,t.x,t.y),i=new So(e.i,e.x,e.y),n=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function wo(t,e,r,i){var n=new So(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function To(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function So(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Eo(t,e,r,i){for(var n=0,a=e,o=r-i;a<r;a+=i)n+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return n}function Mo(t,e,r,i,n){!function t(e,r,i,n,a){for(;n>i;){if(n-i>600){var o=n-i+1,s=r-i+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1),h=Math.max(i,Math.floor(r-s*u/o+c)),p=Math.min(n,Math.floor(r+(o-s)*u/o+c));t(e,r,h,p,a)}var d=e[r],f=i,m=n;for(Ao(e,i,r),a(e[n],d)>0&&Ao(e,i,n);f<m;){for(Ao(e,f,m),f++,m--;a(e[f],d)<0;)f++;for(;a(e[m],d)>0;)m--}0===a(e[i],d)?Ao(e,i,m):Ao(e,++m,n),m<=r&&(i=m+1),r<=m&&(n=m-1)}}(t,e,r||0,i||t.length-1,n||Co)}function Ao(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function Co(t,e){return t<e?-1:t>e?1:0}function Po(t,e){var r=t.length;if(r<=1)return[t];for(var i,n,a=[],o=0;o<r;o++){var s=S(t[o]);0!==s&&(t[o].area=Math.abs(s),void 0===n&&(n=s<0),n===s<0?(i&&a.push(i),i=[t[o]]):i.push(t[o]))}if(i&&a.push(i),e>1)for(var l=0;l<a.length;l++)a[l].length<=e||(Mo(a[l],e,1,a[l].length-1,Lo),a[l]=a[l].slice(0,e));return a}function Lo(t,e){return e.area-t.area}function Io(t,e,r){for(var i=r.patternDependencies,n=!1,a=0,o=e;a<o.length;a+=1){var s=o[a].paint.get(t+"-pattern");s.isConstant()||(n=!0);var l=s.constantOr(null);l&&(n=!0,i[l.to]=!0,i[l.from]=!0)}return n}function ko(t,e,r,i,n){for(var a=n.patternDependencies,o=0,s=e;o<s.length;o+=1){var l=s[o],u=l.paint.get(t+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:i-1},r,{},n.availableImages),h=u.evaluate({zoom:i},r,{},n.availableImages),p=u.evaluate({zoom:i+1},r,{},n.availableImages);c=c&&c.name?c.name:c,h=h&&h.name?h.name:h,p=p&&p.name?p.name:p,a[c]=!0,a[h]=!0,a[p]=!0,r.patterns[l.id]={min:c,mid:h,max:p}}}return r}Qa.deviation=function(t,e,r,i){var n=e&&e.length,a=n?e[0]*r:t.length,o=Math.abs(Eo(t,0,a,r));if(n)for(var s=0,l=e.length;s<l;s++){var u=e[s]*r,c=s<l-1?e[s+1]*r:t.length;o-=Math.abs(Eo(t,u,c,r))}var h=0;for(s=0;s<i.length;s+=3){var p=i[s]*r,d=i[s+1]*r,f=i[s+2]*r;h+=Math.abs((t[p]-t[f])*(t[d+1]-t[p+1])-(t[p]-t[d])*(t[f+1]-t[p+1]))}return 0===o&&0===h?0:Math.abs((h-o)/o)},Qa.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++)for(var o=0;o<e;o++)r.vertices.push(t[n][a][o]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r},Ja.default=Ka;var Ro=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new un,this.indexArray=new En,this.indexArray2=new Mn,this.programConfigurations=new ua(Za,t.layers,t.zoom),this.segments=new Gn,this.segments2=new Gn,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Ro.prototype.populate=function(t,e){this.hasPattern=Io("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),i=[],n=0,a=t;n<a.length;n+=1){var o=a[n],s=o.feature,l=o.index,u=o.sourceLayerIndex;if(this.layers[0]._featureFilter(new Vi(this.zoom),s)){var c=ma(s),h=r?r.evaluate(s,{},e.availableImages):void 0,p={id:s.id,properties:s.properties,type:s.type,sourceLayerIndex:u,index:l,geometry:c,patterns:{},sortKey:h};i.push(p)}}r&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var d=0,f=i;d<f.length;d+=1){var m=f[d],v=m,g=v.geometry,y=v.index,_=v.sourceLayerIndex;if(this.hasPattern){var x=ko("fill",this.layers,m,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(m,g,y,{});var b=t[y].feature;e.featureIndex.insert(b,g,y,_,this.index)}},Ro.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Ro.prototype.addFeatures=function(t,e){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var n=i[r];this.addFeature(n,n.geometry,n.index,e)}},Ro.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ro.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ro.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Za),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Ro.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ro.prototype.addFeature=function(t,e,r,i){for(var n=0,a=Po(e,500);n<a.length;n+=1){for(var o=a[n],s=0,l=0,u=o;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),h=c.vertexLength,p=[],d=[],f=0,m=o;f<m.length;f+=1){var v=m[f];if(0!==v.length){v!==o[0]&&d.push(p.length/2);var g=this.segments2.prepareSegment(v.length,this.layoutVertexArray,this.indexArray2),y=g.vertexLength;this.layoutVertexArray.emplaceBack(v[0].x,v[0].y),this.indexArray2.emplaceBack(y+v.length-1,y),p.push(v[0].x),p.push(v[0].y);for(var _=1;_<v.length;_++)this.layoutVertexArray.emplaceBack(v[_].x,v[_].y),this.indexArray2.emplaceBack(y+_-1,y+_),p.push(v[_].x),p.push(v[_].y);g.vertexLength+=v.length,g.primitiveLength+=v.length}}for(var x=Ja(p,d),b=0;b<x.length;b+=3)this.indexArray.emplaceBack(h+x[b],h+x[b+1],h+x[b+2]);c.vertexLength+=s,c.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i)},xi("FillBucket",Ro,{omit:["layers","patternFeatures"]});var Oo=new en({"fill-sort-key":new Ji(Mt.layout_fill["fill-sort-key"])}),zo={paint:new en({"fill-antialias":new Zi(Mt.paint_fill["fill-antialias"]),"fill-opacity":new Ji(Mt.paint_fill["fill-opacity"]),"fill-color":new Ji(Mt.paint_fill["fill-color"]),"fill-outline-color":new Ji(Mt.paint_fill["fill-outline-color"]),"fill-translate":new Zi(Mt.paint_fill["fill-translate"]),"fill-translate-anchor":new Zi(Mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ki(Mt.paint_fill["fill-pattern"])}),layout:Oo},Do=function(t){function e(e){t.call(this,e,zo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r);var i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Ro(t)},e.prototype.queryRadius=function(){return La(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,n,a,o){return xa(Ia(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),i)},e.prototype.isTileClipped=function(){return!0},e}(rn),Bo=sn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Fo=No;function No(t,e,r,i,n){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=n,t.readFields(Uo,this,e)}function Uo(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var i=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[i]=n}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function Vo(t){for(var e,r,i=0,n=0,a=t.length,o=a-1;n<a;o=n++)e=t[n],i+=((r=t[o]).x-e.x)*(e.y+r.y);return i}No.types=["Unknown","Point","LineString","Polygon"],No.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,i=1,a=0,o=0,s=0,l=[];t.pos<r;){if(a<=0){var u=t.readVarint();i=7&u,a=u>>3}if(a--,1===i||2===i)o+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&l.push(e),e=[]),e.push(new n(o,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&l.push(e),l},No.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,i=0,n=0,a=0,o=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(i<=0){var c=t.readVarint();r=7&c,i=c>>3}if(i--,1===r||2===r)(n+=t.readSVarint())<o&&(o=n),n>s&&(s=n),(a+=t.readSVarint())<l&&(l=a),a>u&&(u=a);else if(7!==r)throw new Error("unknown command "+r)}return[o,l,s,u]},No.prototype.toGeoJSON=function(t,e,r){var i,n,a=this.extent*Math.pow(2,r),o=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=No.types[this.type];function c(t){for(var e=0;e<t.length;e++){var r=t[e],i=180-360*(r.y+s)/a;t[e]=[360*(r.x+o)/a-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<l.length;i++)h[i]=l[i][0];c(l=h);break;case 2:for(i=0;i<l.length;i++)c(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var r,i,n=[],a=0;a<e;a++){var o=Vo(t[a]);0!==o&&(void 0===i&&(i=o<0),i===o<0?(r&&n.push(r),r=[t[a]]):r.push(t[a]))}return r&&n.push(r),n}(l),i=0;i<l.length;i++)for(n=0;n<l[i].length;n++)c(l[i][n])}1===l.length?l=l[0]:u="Multi"+u;var p={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var jo=Go;function Go(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Ho,this,e),this.length=this._features.length}function Ho(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(r))}function Wo(t,e,r){if(3===t){var i=new jo(r,r.readVarint()+r.pos);i.length&&(e[i.name]=i)}}Go.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Fo(this._pbf,e,this.extent,this._keys,this._values)};var qo={VectorTile:function(t,e){this.layers=t.readFields(Wo,{},e)},VectorTileFeature:Fo,VectorTileLayer:jo},Xo=qo.VectorTileFeature.types,$o=Math.pow(2,13);function Yo(t,e,r,i,n,a,o,s){t.emplaceBack(e,r,2*Math.floor(i*$o)+o,n*$o*2,a*$o*2,Math.round(s))}var Zo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new hn,this.indexArray=new En,this.programConfigurations=new ua(Bo,t.layers,t.zoom),this.segments=new Gn,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Jo(t,e){return t.x===e.x&&(t.x<0||t.x>da)||t.y===e.y&&(t.y<0||t.y>da)}function Ko(t){return t.every((function(t){return t.x<0}))||t.every((function(t){return t.x>da}))||t.every((function(t){return t.y<0}))||t.every((function(t){return t.y>da}))}Zo.prototype.populate=function(t,e){this.features=[],this.hasPattern=Io("fill-extrusion",this.layers,e);for(var r=0,i=t;r<i.length;r+=1){var n=i[r],a=n.feature,o=n.index,s=n.sourceLayerIndex;if(this.layers[0]._featureFilter(new Vi(this.zoom),a)){var l=ma(a),u={sourceLayerIndex:s,index:o,geometry:l,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(u.id=a.id),this.hasPattern?this.features.push(ko("fill-extrusion",this.layers,u,this.zoom,e)):this.addFeature(u,l,o,{}),e.featureIndex.insert(a,l,o,s,this.index,!0)}}},Zo.prototype.addFeatures=function(t,e){for(var r=0,i=this.features;r<i.length;r+=1){var n=i[r],a=n.geometry;this.addFeature(n,a,n.index,e)}},Zo.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Zo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Zo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Bo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Zo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Zo.prototype.addFeature=function(t,e,r,i){for(var n=0,a=Po(e,500);n<a.length;n+=1){for(var o=a[n],s=0,l=0,u=o;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,p=o;h<p.length;h+=1){var d=p[h];if(0!==d.length&&!Ko(d))for(var f=0,m=0;m<d.length;m++){var v=d[m];if(m>=1){var g=d[m-1];if(!Jo(v,g)){c.vertexLength+4>Gn.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var y=v.sub(g)._perp()._unit(),_=g.dist(v);f+_>32768&&(f=0),Yo(this.layoutVertexArray,v.x,v.y,y.x,y.y,0,0,f),Yo(this.layoutVertexArray,v.x,v.y,y.x,y.y,0,1,f),f+=_,Yo(this.layoutVertexArray,g.x,g.y,y.x,y.y,0,0,f),Yo(this.layoutVertexArray,g.x,g.y,y.x,y.y,0,1,f);var x=c.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),c.vertexLength+=4,c.primitiveLength+=2}}}}if(c.vertexLength+s>Gn.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray)),"Polygon"===Xo[t.type]){for(var b=[],w=[],T=c.vertexLength,S=0,E=o;S<E.length;S+=1){var M=E[S];if(0!==M.length){M!==o[0]&&w.push(b.length/2);for(var A=0;A<M.length;A++){var C=M[A];Yo(this.layoutVertexArray,C.x,C.y,0,0,1,1,0),b.push(C.x),b.push(C.y)}}}for(var P=Ja(b,w),L=0;L<P.length;L+=3)this.indexArray.emplaceBack(T+P[L],T+P[L+2],T+P[L+1]);c.primitiveLength+=P.length/3,c.vertexLength+=s}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i)},xi("FillExtrusionBucket",Zo,{omit:["layers","features"]});var Qo={paint:new en({"fill-extrusion-opacity":new Zi(Mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ji(Mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zi(Mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zi(Mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ki(Mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ji(Mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ji(Mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zi(Mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ts=function(t){function e(e){t.call(this,e,Qo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Zo(t)},e.prototype.queryRadius=function(){return La(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,r,i,a,o,s,l){var u=Ia(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,r),h=this.paint.get("fill-extrusion-base").evaluate(e,r),p=function(t,e,r,i){for(var a=[],o=0,s=t;o<s.length;o+=1){var l=s[o],u=[l.x,l.y,i,1];Da(u,u,e),a.push(new n(u[0]/u[3],u[1]/u[3]))}return a}(u,l,0,0),d=function(t,e,r,i){for(var a=[],o=[],s=i[8]*e,l=i[9]*e,u=i[10]*e,c=i[11]*e,h=i[8]*r,p=i[9]*r,d=i[10]*r,f=i[11]*r,m=0,v=t;m<v.length;m+=1){for(var g=v[m],y=[],_=[],x=0,b=g;x<b.length;x+=1){var w=b[x],T=w.x,S=w.y,E=i[0]*T+i[4]*S+i[12],M=i[1]*T+i[5]*S+i[13],A=i[2]*T+i[6]*S+i[14],C=i[3]*T+i[7]*S+i[15],P=A+u,L=C+c,I=E+h,k=M+p,R=A+d,O=C+f,z=new n((E+s)/L,(M+l)/L);z.z=P/L,y.push(z);var D=new n(I/O,k/O);D.z=R/O,_.push(D)}a.push(y),o.push(_)}return[a,o]}(i,h,c,l);return function(t,e,r){var i=1/0;xa(r,e)&&(i=rs(r,e[0]));for(var n=0;n<e.length;n++)for(var a=e[n],o=t[n],s=0;s<a.length-1;s++){var l=a[s],u=a[s+1],c=o[s],h=o[s+1],p=[l,u,h,c,l];ya(r,p)&&(i=Math.min(i,rs(r,p)))}return i!==1/0&&i}(d[0],d[1],p)},e}(rn);function es(t,e){return t.x*e.x+t.y*e.y}function rs(t,e){if(1===t.length){var r=e[0],i=e[1],n=e[3],a=t[0],o=i.sub(r),s=n.sub(r),l=a.sub(r),u=es(o,o),c=es(o,s),h=es(s,s),p=es(l,o),d=es(l,s),f=u*h-c*c,m=(h*p-c*d)/f,v=(u*d-c*p)/f,g=1-m-v;return r.z*g+i.z*m+n.z*v}for(var y=1/0,_=0,x=e;_<x.length;_+=1){var b=x[_];y=Math.min(y,b.z)}return y}var is=sn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ns=qo.VectorTileFeature.types,as=Math.cos(Math.PI/180*37.5),os=Math.pow(2,14)/.5,ss=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new pn,this.indexArray=new En,this.programConfigurations=new ua(is,t.layers,t.zoom),this.segments=new Gn,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};ss.prototype.populate=function(t,e){this.hasPattern=Io("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),i=[],n=0,a=t;n<a.length;n+=1){var o=a[n],s=o.feature,l=o.index,u=o.sourceLayerIndex;if(this.layers[0]._featureFilter(new Vi(this.zoom),s)){var c=ma(s),h=r?r.evaluate(s,{}):void 0,p={id:s.id,properties:s.properties,type:s.type,sourceLayerIndex:u,index:l,geometry:c,patterns:{},sortKey:h};i.push(p)}}r&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var d=0,f=i;d<f.length;d+=1){var m=f[d],v=m,g=v.geometry,y=v.index,_=v.sourceLayerIndex;if(this.hasPattern){var x=ko("line",this.layers,m,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(m,g,y,{});var b=t[y].feature;e.featureIndex.insert(b,g,y,_,this.index)}},ss.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},ss.prototype.addFeatures=function(t,e){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var n=i[r];this.addFeature(n,n.geometry,n.index,e)}},ss.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ss.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,is),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ss.prototype.addFeature=function(t,e,r,i){for(var n=this.layers[0].layout,a=n.get("line-join").evaluate(t,{}),o=n.get("line-cap"),s=n.get("line-miter-limit"),l=n.get("line-round-limit"),u=0,c=e;u<c.length;u+=1){var h=c[u];this.addLine(h,t,a,o,s,l,r,i)}},ss.prototype.addLine=function(t,e,r,i,n,a,o,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var l=0;l<t.length-1;l++)this.totalDistance+=t[l].dist(t[l+1])}for(var u="Polygon"===ns[e.type],c=t.length;c>=2&&t[c-1].equals(t[c-2]);)c--;for(var h=0;h<c-1&&t[h].equals(t[h+1]);)h++;if(!(c<(u?3:2))){"bevel"===r&&(n=1.05);var p,d=da/(512*this.overscaling)*15,f=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray),m=void 0,v=void 0,g=void 0,y=void 0;this.e1=this.e2=-1,u&&(p=t[c-2],y=t[h].sub(p)._unit()._perp());for(var _=h;_<c;_++)if(!(v=u&&_===c-1?t[h+1]:t[_+1])||!t[_].equals(v)){y&&(g=y),p&&(m=p),p=t[_],y=v?v.sub(p)._unit()._perp():g;var x=(g=g||y).add(y);0===x.x&&0===x.y||x._unit();var b=g.x*y.x+g.y*y.y,w=x.x*y.x+x.y*y.y,T=0!==w?1/w:1/0,S=2*Math.sqrt(2-2*w),E=w<as&&m&&v,M=g.x*y.y-g.y*y.x>0;if(E&&_>h){var A=p.dist(m);if(A>2*d){var C=p.sub(p.sub(m)._mult(d/A)._round());this.updateDistance(m,C),this.addCurrentVertex(C,g,0,0,f),m=C}}var P=m&&v,L=P?r:u?"butt":i;if(P&&"round"===L&&(T<a?L="miter":T<=2&&(L="fakeround")),"miter"===L&&T>n&&(L="bevel"),"bevel"===L&&(T>2&&(L="flipbevel"),T<n&&(L="miter")),m&&this.updateDistance(m,p),"miter"===L)x._mult(T),this.addCurrentVertex(p,x,0,0,f);else if("flipbevel"===L){if(T>100)x=y.mult(-1);else{var I=T*g.add(y).mag()/g.sub(y).mag();x._perp()._mult(I*(M?-1:1))}this.addCurrentVertex(p,x,0,0,f),this.addCurrentVertex(p,x.mult(-1),0,0,f)}else if("bevel"===L||"fakeround"===L){var k=-Math.sqrt(T*T-1),R=M?k:0,O=M?0:k;if(m&&this.addCurrentVertex(p,g,R,O,f),"fakeround"===L)for(var z=Math.round(180*S/Math.PI/20),D=1;D<z;D++){var B=D/z;if(.5!==B){var F=B-.5;B+=B*F*(B-1)*((1.0904+b*(b*(3.55645-1.43519*b)-3.2452))*F*F+(.848013+b*(.215638*b-1.06021)))}var N=y.sub(g)._mult(B)._add(g)._unit()._mult(M?-1:1);this.addHalfVertex(p,N.x,N.y,!1,M,0,f)}v&&this.addCurrentVertex(p,y,-R,-O,f)}else if("butt"===L)this.addCurrentVertex(p,x,0,0,f);else if("square"===L){var U=m?1:-1;this.addCurrentVertex(p,x,U,U,f)}else"round"===L&&(m&&(this.addCurrentVertex(p,g,0,0,f),this.addCurrentVertex(p,g,1,1,f,!0)),v&&(this.addCurrentVertex(p,y,-1,-1,f,!0),this.addCurrentVertex(p,y,0,0,f)));if(E&&_<c-1){var V=p.dist(v);if(V>2*d){var j=p.add(v.sub(p)._mult(d/V)._round());this.updateDistance(p,j),this.addCurrentVertex(j,y,0,0,f),p=j}}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,s)}},ss.prototype.addCurrentVertex=function(t,e,r,i,n,a){void 0===a&&(a=!1);var o=e.x+e.y*r,s=e.y-e.x*r,l=-e.x+e.y*i,u=-e.y-e.x*i;this.addHalfVertex(t,o,s,a,!1,r,n),this.addHalfVertex(t,l,u,a,!0,-i,n),this.distance>os/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,r,i,n,a))},ss.prototype.addHalfVertex=function(t,e,r,i,n,a,o){var s=t.x,l=t.y,u=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((s<<1)+(i?1:0),(l<<1)+(n?1:0),Math.round(63*e)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1)|(63&u)<<2,u>>6);var c=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),o.primitiveLength++),n?this.e2=c:this.e1=c},ss.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(os-1):this.distance},xi("LineBucket",ss,{omit:["layers","patternFeatures"]});var ls=new en({"line-cap":new Zi(Mt.layout_line["line-cap"]),"line-join":new Ji(Mt.layout_line["line-join"]),"line-miter-limit":new Zi(Mt.layout_line["line-miter-limit"]),"line-round-limit":new Zi(Mt.layout_line["line-round-limit"]),"line-sort-key":new Ji(Mt.layout_line["line-sort-key"])}),us={paint:new en({"line-opacity":new Ji(Mt.paint_line["line-opacity"]),"line-color":new Ji(Mt.paint_line["line-color"]),"line-translate":new Zi(Mt.paint_line["line-translate"]),"line-translate-anchor":new Zi(Mt.paint_line["line-translate-anchor"]),"line-width":new Ji(Mt.paint_line["line-width"]),"line-gap-width":new Ji(Mt.paint_line["line-gap-width"]),"line-offset":new Ji(Mt.paint_line["line-offset"]),"line-blur":new Ji(Mt.paint_line["line-blur"]),"line-dasharray":new Qi(Mt.paint_line["line-dasharray"]),"line-pattern":new Ki(Mt.paint_line["line-pattern"]),"line-gradient":new tn(Mt.paint_line["line-gradient"])}),layout:ls},cs=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new Vi(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,i,n){return r=h({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,i,n)},e}(Ji))(us.paint.properties["line-width"].specification);cs.useIntegerZoom=!0;var hs=function(t){function e(e){t.call(this,e,us)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=qa(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r),this.paint._values["line-floorwidth"]=cs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new ss(t)},e.prototype.queryRadius=function(t){var e=t,r=ps(Pa("line-width",this,e),Pa("line-gap-width",this,e)),i=Pa("line-offset",this,e);return r/2+Math.abs(i)+La(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,a,o,s){var l=Ia(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),u=s/2*ps(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),c=this.paint.get("line-offset").evaluate(e,r);return c&&(i=function(t,e){for(var r=[],i=new n(0,0),a=0;a<t.length;a++){for(var o=t[a],s=[],l=0;l<o.length;l++){var u=o[l-1],c=o[l],h=o[l+1],p=0===l?i:c.sub(u)._unit()._perp(),d=l===o.length-1?i:h.sub(c)._unit()._perp(),f=p._add(d)._unit(),m=f.x*d.x+f.y*d.y;f._mult(1/m),s.push(f._mult(e)._add(c))}r.push(s)}return r}(i,c*s)),function(t,e,r){for(var i=0;i<e.length;i++){var n=e[i];if(t.length>=3)for(var a=0;a<n.length;a++)if(Aa(t,n[a]))return!0;if(ba(t,n,r))return!0}return!1}(l,i,u)},e.prototype.isTileClipped=function(){return!0},e}(rn);function ps(t,e){return e>0?e+2*t:t}var ds=sn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),fs=sn([{name:"a_projected_pos",components:3,type:"Float32"}],4),ms=(sn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),sn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),vs=(sn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),sn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),gs=sn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function ys(t,e,r){return t.sections.forEach((function(t){t.text=function(t,e,r){var i=e.layout.get("text-transform").evaluate(r,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),Ui.applyArabicShaping&&(t=Ui.applyArabicShaping(t)),t}(t.text,e,r)})),t}sn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),sn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"}]),sn([{type:"Float32",name:"offsetX"}]),sn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var _s={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},xs=24,bs={horizontal:1,vertical:2,horizontalOnly:3},ws=function(){this.text="",this.sectionIndex=[],this.sections=[]};function Ts(t,e,r,i,n,a,o,s,l,u,c,h){var p,d=ws.fromFeature(t,r);u===bs.vertical&&d.verticalizePunctuation();var f=Ui.processBidirectionalText,m=Ui.processStyledBidirectionalText;if(f&&1===d.sections.length){p=[];for(var v=0,g=f(d.toString(),Ps(d,s,i,e,h));v<g.length;v+=1){var y=g[v],_=new ws;_.text=y,_.sections=d.sections;for(var x=0;x<y.length;x++)_.sectionIndex.push(0);p.push(_)}}else if(m){p=[];for(var b=0,w=m(d.text,d.sectionIndex,Ps(d,s,i,e,h));b<w.length;b+=1){var T=w[b],S=new ws;S.text=T[0],S.sectionIndex=T[1],S.sections=d.sections,p.push(S)}}else p=function(t,e){for(var r=[],i=t.text,n=0,a=0,o=e;a<o.length;a+=1){var s=o[a];r.push(t.substring(n,s)),n=s}return n<i.length&&r.push(t.substring(n,i.length)),r}(d,Ps(d,s,i,e,h));var E=[],M={positionedGlyphs:E,text:d.toString(),top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:u,lineCount:p.length,yOffset:-17};return function(t,e,r,i,n,a,o,s,l){for(var u=0,c=t.yOffset,h=0,p=t.positionedGlyphs,d="right"===a?1:"left"===a?0:.5,f=0,m=r;f<m.length;f+=1){var v=m[f];v.trim();var g=v.getMaxScale();if(v.length()){for(var y=p.length,_=0;_<v.length();_++){var x=v.getSection(_),b=v.getSectionIndex(_),w=v.getCharCode(_),T=24*(g-x.scale),S=e[x.fontStack],E=S&&S[w];E&&(o===bs.horizontal||!l&&!Pi(w)||l&&(Ss[w]||(A=w,Mi.Arabic(A)||Mi["Arabic Supplement"](A)||Mi["Arabic Extended-A"](A)||Mi["Arabic Presentation Forms-A"](A)||Mi["Arabic Presentation Forms-B"](A)))?(p.push({glyph:w,x:u,y:c+T,vertical:!1,scale:x.scale,fontStack:x.fontStack,sectionIndex:b}),u+=E.metrics.advance*x.scale+s):(p.push({glyph:w,x:u,y:c+T,vertical:!0,scale:x.scale,fontStack:x.fontStack,sectionIndex:b}),u+=xs*x.scale+s))}if(p.length!==y){var M=u-s;h=Math.max(M,h),Is(p,e,y,p.length-1,d)}u=0,c+=i*g}else c+=i}var A,C=Ls(n),P=C.horizontalAlign,L=C.verticalAlign;!function(t,e,r,i,n,a,o){for(var s=(e-r)*n,l=(-i*o+.5)*a,u=0;u<t.length;u++)t[u].x+=s,t[u].y+=l}(p,d,P,L,h,i,r.length);var I=c-t.yOffset;t.top+=-L*I,t.bottom=t.top+I,t.left+=-P*h,t.right=t.left+h}(M,e,p,n,a,o,u,s,c),!!E.length&&M}ws.fromFeature=function(t,e){for(var r=new ws,i=0;i<t.sections.length;i++){var n=t.sections[i];r.sections.push({scale:n.scale||1,fontStack:n.fontStack||e}),r.text+=n.text;for(var a=0;a<n.text.length;a++)r.sectionIndex.push(i)}return r},ws.prototype.length=function(){return this.text.length},ws.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},ws.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},ws.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},ws.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",r=0;r<t.length;r++){var i=t.charCodeAt(r+1)||null,n=t.charCodeAt(r-1)||null;i&&Li(i)&&!_s[t[r+1]]||n&&Li(n)&&!_s[t[r-1]]||!_s[t[r]]?e+=t[r]:e+=_s[t[r]]}return e}(this.text)},ws.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Ss[this.text.charCodeAt(e)];e++)t++;for(var r=this.text.length,i=this.text.length-1;i>=0&&i>=t&&Ss[this.text.charCodeAt(i)];i--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)},ws.prototype.substring=function(t,e){var r=new ws;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r},ws.prototype.toString=function(){return this.text},ws.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,r){return Math.max(e,t.sections[r].scale)}),0)};var Ss={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Es={};function Ms(t,e,r,i){var n=Math.pow(t-e,2);return i?t<e?n/2:2*n:n+Math.abs(r)*r}function As(t,e,r){var i=0;return 10===t&&(i-=1e4),r&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function Cs(t,e,r,i,n,a){for(var o=null,s=Ms(e,r,n,a),l=0,u=i;l<u.length;l+=1){var c=u[l],h=Ms(e-c.x,r,n,a)+c.badness;h<=s&&(o=c,s=h)}return{index:t,x:e,priorBreak:o,badness:s}}function Ps(t,e,r,i,n){if("point"!==n)return[];if(!t)return[];for(var a,o=[],s=function(t,e,r,i){for(var n=0,a=0;a<t.length();a++){var o=t.getSection(a),s=i[o.fontStack],l=s&&s[t.getCharCode(a)];l&&(n+=l.metrics.advance*o.scale+e)}return n/Math.max(1,Math.ceil(n/r))}(t,e,r,i),l=t.text.indexOf("​")>=0,u=0,c=0;c<t.length();c++){var h=t.getSection(c),p=t.getCharCode(c),d=i[h.fontStack],f=d&&d[p];if(f&&!Ss[p]&&(u+=f.metrics.advance*h.scale+e),c<t.length()-1){var m=!((a=p)<11904||!(Mi["Bopomofo Extended"](a)||Mi.Bopomofo(a)||Mi["CJK Compatibility Forms"](a)||Mi["CJK Compatibility Ideographs"](a)||Mi["CJK Compatibility"](a)||Mi["CJK Radicals Supplement"](a)||Mi["CJK Strokes"](a)||Mi["CJK Symbols and Punctuation"](a)||Mi["CJK Unified Ideographs Extension A"](a)||Mi["CJK Unified Ideographs"](a)||Mi["Enclosed CJK Letters and Months"](a)||Mi["Halfwidth and Fullwidth Forms"](a)||Mi.Hiragana(a)||Mi["Ideographic Description Characters"](a)||Mi["Kangxi Radicals"](a)||Mi["Katakana Phonetic Extensions"](a)||Mi.Katakana(a)||Mi["Vertical Forms"](a)||Mi["Yi Radicals"](a)||Mi["Yi Syllables"](a)));(Es[p]||m)&&o.push(Cs(c+1,u,s,o,As(p,t.getCharCode(c+1),m&&l),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Cs(t.length(),u,s,o,0,!0))}function Ls(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Is(t,e,r,i,n){if(n){var a=t[i],o=e[a.fontStack],s=o&&o[a.glyph];if(s)for(var l=s.metrics.advance*a.scale,u=(t[i].x+l)*n,c=r;c<=i;c++)t[c].x-=u}}function ks(t,e,r,i,n,a){var o,s,l,u,c=t.image,h=e.left*a,p=e.right*a;"width"===r||"both"===r?(u=n[0]+h-i[3],s=n[0]+p+i[1]):s=(u=n[0]+(h+p-c.displaySize[0])/2)+c.displaySize[0];var d=e.top*a,f=e.bottom*a;return"height"===r||"both"===r?(o=n[1]+d-i[0],l=n[1]+f+i[2]):l=(o=n[1]+(d+f-c.displaySize[1])/2)+c.displaySize[1],{image:c,top:o,right:s,bottom:l,left:u}}Es[10]=!0,Es[32]=!0,Es[38]=!0,Es[40]=!0,Es[41]=!0,Es[43]=!0,Es[45]=!0,Es[47]=!0,Es[173]=!0,Es[183]=!0,Es[8203]=!0,Es[8208]=!0,Es[8211]=!0,Es[8231]=!0;var Rs=function(t){function e(e,r,i,n){t.call(this,e,r),this.angle=i,void 0!==n&&(this.segment=n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(n);xi("Anchor",Rs);var Os=256;function zs(t,e){var r=e.expression;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new Vi(t+1))};if("source"===r.kind)return{kind:"source"};for(var i=r.zoomStops,n=r.interpolationType,a=0;a<i.length&&i[a]<=t;)a++;for(var o=a=Math.max(0,a-1);o<i.length&&i[o]<t+1;)o++;o=Math.min(i.length-1,o);var s=i[a],l=i[o];return"composite"===r.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:l,minSize:r.evaluate(new Vi(s)),maxSize:r.evaluate(new Vi(l)),interpolationType:n}}function Ds(t,e,r){var i=e.uSize,n=e.uSizeT,a=r.lowerSize,o=r.upperSize;return"source"===t.kind?a/Os:"composite"===t.kind?Ee(a/Os,o/Os,n):i}function Bs(t,e){var r=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){var n=t.interpolationType,a=t.minZoom,o=t.maxZoom,s=n?u(qe.interpolationFactor(n,e,a,o),0,1):0;"camera"===t.kind?i=Ee(t.minSize,t.maxSize,s):r=s}return{uSizeT:r,uSize:i}}var Fs=Object.freeze({__proto__:null,getSizeData:zs,evaluateSizeForFeature:Ds,evaluateSizeForZoom:Bs,SIZE_PACK_FACTOR:Os}),Ns=qo.VectorTileFeature.types,Us=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Vs(t,e,r,i,n,a,o,s){t.emplaceBack(e,r,Math.round(32*i),Math.round(32*n),a,o,s?s[0]:0,s?s[1]:0)}function js(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}var Gs=function(t){this.layoutVertexArray=new fn,this.indexArray=new En,this.programConfigurations=t,this.segments=new Gn,this.dynamicLayoutVertexArray=new mn,this.opacityVertexArray=new vn,this.placedSymbolArray=new Rn};Gs.prototype.upload=function(t,e,r,i){r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ds.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,fs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Us,!0),this.opacityVertexBuffer.itemSize=1),(r||i)&&this.programConfigurations.upload(t)},Gs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},xi("SymbolBuffers",Gs);var Hs=function(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new Gn,this.collisionVertexArray=new _n};Hs.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,ms.members,!0)},Hs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},xi("CollisionBuffers",Hs);var Ws=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasPaintOverrides=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zs(this.zoom,e["text-size"]),this.iconSizeData=zs(this.zoom,e["icon-size"]);var r=this.layers[0].layout,i=r.get("symbol-sort-key"),n=r.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==n&&void 0!==i.constantOr(1);var a="viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey;this.sortFeaturesByY=a&&(r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")),"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((function(t){return bs[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};Ws.prototype.createArrays=function(){var t=this.layers[0].layout;this.hasPaintOverrides=Ys.hasPaintOverrides(t),this.text=new Gs(new ua(ds.members,this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new Gs(new ua(ds.members,this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.textCollisionBox=new Hs(yn,vs.members,Mn),this.iconCollisionBox=new Hs(yn,vs.members,Mn),this.textCollisionCircle=new Hs(yn,gs.members,En),this.iconCollisionCircle=new Hs(yn,gs.members,En),this.glyphOffsetArray=new Bn,this.lineVertexArray=new Nn,this.symbolInstances=new zn},Ws.prototype.calculateGlyphDependencies=function(t,e,r,i,n){for(var a=0;a<t.length;a++)if(e[t.charCodeAt(a)]=!0,(r||i)&&n){var o=_s[t.charAt(a)];o&&(e[o.charCodeAt(0)]=!0)}},Ws.prototype.populate=function(t,e){var r=this.layers[0],i=r.layout,n=i.get("text-font"),a=i.get("text-field"),o=i.get("icon-image"),s=("constant"!==a.value.kind||a.value.value.toString().length>0)&&("constant"!==n.value.kind||n.value.value.length>0),l=("constant"!==o.value.kind||!!o.value.value)&&Object.keys(o.parameters).length>0,u=i.get("symbol-sort-key");if(this.features=[],s||l){for(var c=e.iconDependencies,h=e.glyphDependencies,p=e.availableImages,d=new Vi(this.zoom),f=0,m=t;f<m.length;f+=1){var v=m[f],g=v.feature,y=v.index,_=v.sourceLayerIndex;if(r._featureFilter(d,g)){var x=void 0;if(s){var b=r.getValueAndResolveTokens("text-field",g,p);x=ys(b instanceof Qt?b:Qt.fromString(b),r,g)}var w=void 0;if(l){var T=r.getValueAndResolveTokens("icon-image",g,p);w=T instanceof te?T:te.fromString(T)}if(x||w){var S=this.sortFeaturesByKey?u.evaluate(g,{}):void 0,E={text:x,icon:w,index:y,sourceLayerIndex:_,geometry:ma(g),properties:g.properties,type:Ns[g.type],sortKey:S};if(void 0!==g.id&&(E.id=g.id),this.features.push(E),w&&(c[w.name]=!0),x){var M=n.evaluate(g,{}).join(","),A="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(bs.vertical)>=0;for(var C=0,P=x.sections;C<P.length;C+=1){var L=P[C],I=Ai(x.toString()),k=L.fontStack||M,R=h[k]=h[k]||{};this.calculateGlyphDependencies(L.text,R,A,this.allowVerticalPlacement,I)}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){var e={},r={},i=[],n=0;function a(e){i.push(t[e]),n++}function o(t,e,n){var a=r[t];return delete r[t],r[e]=a,i[a].geometry[0].pop(),i[a].geometry[0]=i[a].geometry[0].concat(n[0]),a}function s(t,r,n){var a=e[r];return delete e[r],e[t]=a,i[a].geometry[0].shift(),i[a].geometry[0]=n[0].concat(i[a].geometry[0]),a}function l(t,e,r){var i=r?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.text?c.text.toString():null;if(p){var d=l(p,h),f=l(p,h,!0);if(d in r&&f in e&&r[d]!==e[f]){var m=s(d,f,h),v=o(d,f,i[m].geometry);delete e[d],delete r[f],r[l(p,i[v].geometry,!0)]=v,i[m].geometry=null}else d in r?o(d,f,h):f in e?s(d,f,h):(a(u),e[d]=n-1,r[f]=n-1)}else a(u)}return i.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},Ws.prototype.update=function(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r))},Ws.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Ws.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ws.prototype.upload=function(t){this.uploaded||(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t),this.textCollisionCircle.upload(t),this.iconCollisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ws.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.textCollisionBox.destroy(),this.iconCollisionBox.destroy(),this.textCollisionCircle.destroy(),this.iconCollisionCircle.destroy()},Ws.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]),a={},o=t.segment+1;o<e.length;o++)a[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:i},o<e.length-1&&(i+=e[o+1].dist(e[o]));for(var s=t.segment||0;s>=0;s--)a[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:n},s>0&&(n+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=a[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},Ws.prototype.addSymbols=function(t,e,r,i,n,a,o,s,l,u,c){var h=this,p=t.indexArray,d=t.layoutVertexArray,f=t.dynamicLayoutVertexArray,m=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,a.sortKey),v=this.glyphOffsetArray.length,g=m.vertexLength,y=this.allowVerticalPlacement&&o===bs.vertical?Math.PI/2:0,_=function(t){var e=t.tl,i=t.tr,n=t.bl,a=t.br,o=t.tex,l=m.vertexLength,u=t.glyphOffset[1];Vs(d,s.x,s.y,e.x,u+e.y,o.x,o.y,r),Vs(d,s.x,s.y,i.x,u+i.y,o.x+o.w,o.y,r),Vs(d,s.x,s.y,n.x,u+n.y,o.x,o.y+o.h,r),Vs(d,s.x,s.y,a.x,u+a.y,o.x+o.w,o.y+o.h,r),js(f,s,y),p.emplaceBack(l,l+1,l+2),p.emplaceBack(l+1,l+2,l+3),m.vertexLength+=4,m.primitiveLength+=2,h.glyphOffsetArray.emplaceBack(t.glyphOffset[0])};if(a.text&&a.text.sections){var x=a.text.sections;if(this.hasPaintOverrides){for(var b,w=function(e,r){void 0===b||b===e&&!r||t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,a,a.index,{},x[b]),b=e},T=0,S=e;T<S.length;T+=1){var E=S[T];w(E.sectionIndex,!1),_(E)}w(b,!0)}else{for(var M=0,A=e;M<A.length;M+=1)_(A[M]);t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,a,a.index,{},x[0])}}else{for(var C=0,P=e;C<P.length;C+=1)_(P[C]);t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,a,a.index,{})}t.placedSymbolArray.emplaceBack(s.x,s.y,v,this.glyphOffsetArray.length-v,g,l,u,s.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],o,0,!1,0,c)},Ws.prototype._addCollisionDebugVertex=function(t,e,r,i,n,a){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,i,n,Math.round(a.x),Math.round(a.y))},Ws.prototype.addCollisionDebugVertices=function(t,e,r,i,a,o,s,l){var u=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),c=u.vertexLength,h=a.layoutVertexArray,p=a.collisionVertexArray,d=s.anchorX,f=s.anchorY;if(this._addCollisionDebugVertex(h,p,o,d,f,new n(t,e)),this._addCollisionDebugVertex(h,p,o,d,f,new n(r,e)),this._addCollisionDebugVertex(h,p,o,d,f,new n(r,i)),this._addCollisionDebugVertex(h,p,o,d,f,new n(t,i)),u.vertexLength+=4,l){var m=a.indexArray;m.emplaceBack(c,c+1,c+2),m.emplaceBack(c,c+2,c+3),u.primitiveLength+=2}else{var v=a.indexArray;v.emplaceBack(c,c+1),v.emplaceBack(c+1,c+2),v.emplaceBack(c+2,c+3),v.emplaceBack(c+3,c),u.primitiveLength+=4}},Ws.prototype.addDebugCollisionBoxes=function(t,e,r,i){for(var n=t;n<e;n++){var a=this.collisionBoxArray.get(n),o=a.x1,s=a.y1,l=a.x2,u=a.y2,c=a.radius>0;this.addCollisionDebugVertices(o,s,l,u,c?i?this.textCollisionCircle:this.iconCollisionCircle:i?this.textCollisionBox:this.iconCollisionBox,a.anchorPoint,r,c)}},Ws.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},Ws.prototype._deserializeCollisionBoxesForSymbol=function(t,e,r,i,n,a,o,s,l){for(var u={},c=e;c<r;c++){var h=t.get(c);if(0===h.radius){u.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},u.textFeatureIndex=h.featureIndex;break}u.textCircles||(u.textCircles=[],u.textFeatureIndex=h.featureIndex),u.textCircles.push(h.anchorPointX,h.anchorPointY,h.radius,h.signedDistanceFromAnchor,1)}for(var p=i;p<n;p++){var d=t.get(p);if(0===d.radius){u.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},u.verticalTextFeatureIndex=d.featureIndex;break}}for(var f=a;f<o;f++){var m=t.get(f);if(0===m.radius){u.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},u.iconFeatureIndex=m.featureIndex;break}}for(var v=s;v<l;v++){var g=t.get(v);if(0===g.radius){u.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},u.verticalIconFeatureIndex=g.featureIndex;break}}return u},Ws.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}},Ws.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ws.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ws.prototype.hasTextCollisionBoxData=function(){return this.textCollisionBox.segments.get().length>0},Ws.prototype.hasIconCollisionBoxData=function(){return this.iconCollisionBox.segments.get().length>0},Ws.prototype.hasTextCollisionCircleData=function(){return this.textCollisionCircle.segments.get().length>0},Ws.prototype.hasIconCollisionCircleData=function(){return this.iconCollisionCircle.segments.get().length>0},Ws.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),r=e.vertexStartIndex+4*e.numGlyphs,i=e.vertexStartIndex;i<r;i+=4)this.text.indexArray.emplaceBack(i,i+1,i+2),this.text.indexArray.emplaceBack(i+1,i+2,i+3)},Ws.prototype.addIndicesForPlacedIconSymbol=function(t){var e=this.icon.placedSymbolArray.get(t);if(e.numGlyphs){var r=e.vertexStartIndex;this.icon.indexArray.emplaceBack(r,r+1,r+2),this.icon.indexArray.emplaceBack(r+1,r+2,r+3)}},Ws.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),r=Math.cos(t),i=[],n=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);i.push(0|Math.round(e*s.anchorX+r*s.anchorY)),n.push(s.featureIndex)}return a.sort((function(t,e){return i[t]-i[e]||n[e]-n[t]})),a},Ws.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var r=0,i=this.symbolInstanceIndexes;r<i.length;r+=1){var n=i[r],a=this.symbolInstances.get(n);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(t,r,i){t>=0&&i.indexOf(t)===r&&e.addIndicesForPlacedTextSymbol(t)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedIconSymbol(a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedIconSymbol(a.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},xi("SymbolBucket",Ws,{omit:["layers","collisionBoxArray","features","compareText"]}),Ws.MAX_GLYPHS=65535,Ws.addDynamicAttributes=js;var qs=new en({"symbol-placement":new Zi(Mt.layout_symbol["symbol-placement"]),"symbol-spacing":new Zi(Mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zi(Mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ji(Mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zi(Mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zi(Mt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Zi(Mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zi(Mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zi(Mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ji(Mt.layout_symbol["icon-size"]),"icon-text-fit":new Zi(Mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zi(Mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ji(Mt.layout_symbol["icon-image"]),"icon-rotate":new Ji(Mt.layout_symbol["icon-rotate"]),"icon-padding":new Zi(Mt.layout_symbol["icon-padding"]),"icon-keep-upright":new Zi(Mt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ji(Mt.layout_symbol["icon-offset"]),"icon-anchor":new Ji(Mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zi(Mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zi(Mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zi(Mt.layout_symbol["text-rotation-alignment"]),"text-field":new Ji(Mt.layout_symbol["text-field"]),"text-font":new Ji(Mt.layout_symbol["text-font"]),"text-size":new Ji(Mt.layout_symbol["text-size"]),"text-max-width":new Ji(Mt.layout_symbol["text-max-width"]),"text-line-height":new Zi(Mt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ji(Mt.layout_symbol["text-letter-spacing"]),"text-justify":new Ji(Mt.layout_symbol["text-justify"]),"text-radial-offset":new Ji(Mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zi(Mt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ji(Mt.layout_symbol["text-anchor"]),"text-max-angle":new Zi(Mt.layout_symbol["text-max-angle"]),"text-writing-mode":new Zi(Mt.layout_symbol["text-writing-mode"]),"text-rotate":new Ji(Mt.layout_symbol["text-rotate"]),"text-padding":new Zi(Mt.layout_symbol["text-padding"]),"text-keep-upright":new Zi(Mt.layout_symbol["text-keep-upright"]),"text-transform":new Ji(Mt.layout_symbol["text-transform"]),"text-offset":new Ji(Mt.layout_symbol["text-offset"]),"text-allow-overlap":new Zi(Mt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Zi(Mt.layout_symbol["text-ignore-placement"]),"text-optional":new Zi(Mt.layout_symbol["text-optional"])}),Xs={paint:new en({"icon-opacity":new Ji(Mt.paint_symbol["icon-opacity"]),"icon-color":new Ji(Mt.paint_symbol["icon-color"]),"icon-halo-color":new Ji(Mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ji(Mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ji(Mt.paint_symbol["icon-halo-blur"]),"icon-translate":new Zi(Mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zi(Mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ji(Mt.paint_symbol["text-opacity"]),"text-color":new Ji(Mt.paint_symbol["text-color"],{runtimeType:Nt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new Ji(Mt.paint_symbol["text-halo-color"]),"text-halo-width":new Ji(Mt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ji(Mt.paint_symbol["text-halo-blur"]),"text-translate":new Zi(Mt.paint_symbol["text-translate"]),"text-translate-anchor":new Zi(Mt.paint_symbol["text-translate-anchor"])}),layout:qs},$s=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:zt,this.defaultValue=t};$s.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},$s.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},$s.prototype.possibleOutputs=function(){return[void 0]},$s.prototype.serialize=function(){return null},xi("FormatSectionOverride",$s,{omit:["defaultValue"]});var Ys=function(t){function e(e){t.call(this,e,Xs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e,r){if(t.prototype.recalculate.call(this,e,r),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var i=this.layout.get("text-writing-mode");if(i){for(var n=[],a=0,o=i;a<o.length;a+=1){var s=o[a];n.indexOf(s)<0&&n.push(s)}this.layout._values["text-writing-mode"]=n}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,r){var i=this.layout.get(t).evaluate(e,{},r),n=this._unevaluatedLayout._values[t];return n.isDataDriven()||Pr(n.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,r){return r in t?String(t[r]):""}))}(e.properties,i)},e.prototype.createBucket=function(t){return new Ws(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,r=Xs.paint.overridableProperties;t<r.length;t+=1){var i=r[t];if(e.hasPaintOverride(this.layout,i)){var n=this.paint.get(i),a=new $s(n),o=new Cr(a,n.property.specification),s=null;s="constant"===n.value.kind||"source"===n.value.kind?new Ir("source",o):new kr("composite",o,n.value.zoomStops,n.value._interpolationType),this.paint._values[i]=new $i(n.property,s,n.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,r,i){return!(!this.layout||r.isDataDriven()||i.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var r=t.get("text-field"),i=Xs.paint.properties[e],n=!1,a=function(t){for(var e=0,r=t;e<r.length;e+=1){var a=r[e];if(i.overrides&&i.overrides.hasOverride(a))return void(n=!0)}};if("constant"===r.value.kind&&r.value.value instanceof Qt)a(r.value.value.sections);else if("source"===r.value.kind){var o=function(t){if(!n)if(t instanceof ne&&re(t.value)===Gt){var e=t.value;a(e.sections)}else t instanceof le?a(t.sections):t.eachChild(o)},s=r.value;s._styleExpression&&o(s._styleExpression.expression)}return n},e.hasPaintOverrides=function(t){for(var r=0,i=Xs.paint.overridableProperties;r<i.length;r+=1){var n=i[r];if(e.hasPaintOverride(t,n))return!0}return!1},e}(rn),Zs={paint:new en({"background-color":new Zi(Mt.paint_background["background-color"]),"background-pattern":new Qi(Mt.paint_background["background-pattern"]),"background-opacity":new Zi(Mt.paint_background["background-opacity"])})},Js=function(t){function e(e){t.call(this,e,Zs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(rn),Ks={paint:new en({"raster-opacity":new Zi(Mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zi(Mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zi(Mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zi(Mt.paint_raster["raster-brightness-max"]),"raster-saturation":new Zi(Mt.paint_raster["raster-saturation"]),"raster-contrast":new Zi(Mt.paint_raster["raster-contrast"]),"raster-resampling":new Zi(Mt.paint_raster["raster-resampling"]),"raster-fade-duration":new Zi(Mt.paint_raster["raster-fade-duration"])})},Qs=function(t){function e(e){t.call(this,e,Ks)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(rn),tl=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(rn),el={circle:Ba,heatmap:Xa,hillshade:Ya,fill:Do,"fill-extrusion":ts,line:hs,symbol:Ys,background:Js,raster:Qs};function rl(t){for(var e=0,r=0,i=0,n=t;i<n.length;i+=1){var a=n[i];e+=a.w*a.h,r=Math.max(r,a.w)}t.sort((function(t,e){return e.h-t.h}));for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}],s=0,l=0,u=0,c=t;u<c.length;u+=1)for(var h=c[u],p=o.length-1;p>=0;p--){var d=o[p];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,l=Math.max(l,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===d.w&&h.h===d.h){var f=o.pop();p<o.length&&(o[p]=f)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(o.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}var il=function(t,e){var r=e.pixelRatio,i=e.version;this.paddedRect=t,this.pixelRatio=r,this.version=i},nl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};nl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},nl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},nl.tlbr.get=function(){return this.tl.concat(this.br)},nl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(il.prototype,nl);var al=function(t,e){var r={},i={};this.haveRenderCallbacks=[];var n=[];this.addImages(t,r,n),this.addImages(e,i,n);var a=rl(n),o=a.w,s=a.h,l=new Ha({width:o||1,height:s||1});for(var u in t){var c=t[u],h=r[u].paddedRect;Ha.copy(c.data,l,{x:0,y:0},{x:h.x+1,y:h.y+1},c.data)}for(var p in e){var d=e[p],f=i[p].paddedRect,m=f.x+1,v=f.y+1,g=d.data.width,y=d.data.height;Ha.copy(d.data,l,{x:0,y:0},{x:m,y:v},d.data),Ha.copy(d.data,l,{x:0,y:y-1},{x:m,y:v-1},{width:g,height:1}),Ha.copy(d.data,l,{x:0,y:0},{x:m,y:v+y},{width:g,height:1}),Ha.copy(d.data,l,{x:g-1,y:0},{x:m-1,y:v},{width:1,height:y}),Ha.copy(d.data,l,{x:0,y:0},{x:m+g,y:v},{width:1,height:y})}this.image=l,this.iconPositions=r,this.patternPositions=i};al.prototype.addImages=function(t,e,r){for(var i in t){var n=t[i],a={x:0,y:0,w:n.data.width+2,h:n.data.height+2};r.push(a),e[i]=new il(a,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(i)}},al.prototype.patchUpdatedImages=function(t,e){for(var r in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e)},al.prototype.patchUpdatedImage=function(t,e,r){if(t&&e&&t.version!==e.version){t.version=e.version;var i=t.tl,n=i[0],a=i[1];r.update(e.data,void 0,{x:n,y:a})}},xi("ImagePosition",il),xi("ImageAtlas",al);var ol=self.HTMLImageElement,sl=self.HTMLCanvasElement,ll=self.HTMLVideoElement,ul=self.ImageData,cl=function(t,e,r,i){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,i)};cl.prototype.update=function(t,e,r){var i=t.width,n=t.height,a=!(this.size&&this.size[0]===i&&this.size[1]===n||r),o=this.context,s=o.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),a)this.size=[i,n],t instanceof ol||t instanceof sl||t instanceof ll||t instanceof ul?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,n,0,this.format,s.UNSIGNED_BYTE,t.data);else{var l=r||{x:0,y:0},u=l.x,c=l.y;t instanceof ol||t instanceof sl||t instanceof ll||t instanceof ul?s.texSubImage2D(s.TEXTURE_2D,0,u,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,u,c,i,n,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},cl.prototype.bind=function(t,e,r){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),r!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},cl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},cl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var hl={read:function(t,e,r,i,n){var a,o,s=8*n-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=r?n-1:0,p=r?-1:1,d=t[e+h];for(h+=p,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+t[e+h],h+=p,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;c>0;o=256*o+t[e+h],h+=p,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),a-=u}return(d?-1:1)*o*Math.pow(2,a-i)},write:function(t,e,r,i,n,a){var o,s,l,u=8*a-n-1,c=(1<<u)-1,h=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(e*l-1)*Math.pow(2,n),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;t[r+d]=255&s,d+=f,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;t[r+d]=255&o,d+=f,o/=256,u-=8);t[r+d-f]|=128*m}},pl=dl;function dl(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}dl.Varint=0,dl.Fixed64=1,dl.Bytes=2,dl.Fixed32=5;var fl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function ml(t){return t.type===dl.Bytes?t.readVarint()+t.pos:t.pos+1}function vl(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function gl(t,e,r){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(i);for(var n=r.pos-1;n>=t;n--)r.buf[n+i]=r.buf[n]}function yl(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function _l(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function xl(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function bl(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function wl(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function Tl(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function Sl(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function El(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function Ml(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function Al(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Cl(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function Pl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}dl.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),n=i>>3,a=this.pos;this.type=7&i,t(n,e,this),this.pos===a&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Al(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Pl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Al(this.buf,this.pos)+4294967296*Al(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Al(this.buf,this.pos)+4294967296*Pl(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=hl.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=hl.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,i=this.buf;return e=127&(r=i[this.pos++]),r<128?e:(e|=(127&(r=i[this.pos++]))<<7,r<128?e:(e|=(127&(r=i[this.pos++]))<<14,r<128?e:(e|=(127&(r=i[this.pos++]))<<21,r<128?e:function(t,e,r){var i,n,a=r.buf;if(n=a[r.pos++],i=(112&n)>>4,n<128)return vl(t,i,e);if(n=a[r.pos++],i|=(127&n)<<3,n<128)return vl(t,i,e);if(n=a[r.pos++],i|=(127&n)<<10,n<128)return vl(t,i,e);if(n=a[r.pos++],i|=(127&n)<<17,n<128)return vl(t,i,e);if(n=a[r.pos++],i|=(127&n)<<24,n<128)return vl(t,i,e);if(n=a[r.pos++],i|=(1&n)<<31,n<128)return vl(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&fl?function(t,e,r){return fl.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var i="",n=e;n<r;){var a,o,s,l=t[n],u=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(a=t[n+1]))&&(u=(31&l)<<6|63&a)<=127&&(u=null):3===c?(a=t[n+1],o=t[n+2],128==(192&a)&&128==(192&o)&&((u=(15&l)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[n+1],o=t[n+2],s=t[n+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),n+=c}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==dl.Bytes)return t.push(this.readVarint(e));var r=ml(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==dl.Bytes)return t.push(this.readSVarint());var e=ml(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==dl.Bytes)return t.push(this.readBoolean());var e=ml(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==dl.Bytes)return t.push(this.readFloat());var e=ml(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==dl.Bytes)return t.push(this.readDouble());var e=ml(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==dl.Bytes)return t.push(this.readFixed32());var e=ml(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==dl.Bytes)return t.push(this.readSFixed32());var e=ml(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==dl.Bytes)return t.push(this.readFixed64());var e=ml(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==dl.Bytes)return t.push(this.readSFixed64());var e=ml(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===dl.Varint)for(;this.buf[this.pos++]>127;);else if(e===dl.Bytes)this.pos=this.readVarint()+this.pos;else if(e===dl.Fixed32)this.pos+=4;else{if(e!==dl.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Cl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Cl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Cl(this.buf,-1&t,this.pos),Cl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Cl(this.buf,-1&t,this.pos),Cl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,i;if(t>=0?(r=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var i,n,a=0;a<e.length;a++){if((i=e.charCodeAt(a))>55295&&i<57344){if(!n){i>56319||a+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):n=i;continue}if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(t[r++]=239,t[r++]=191,t[r++]=189,n=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=63&i|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&gl(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),hl.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),hl.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var i=this.pos-r;i>=128&&gl(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,r){this.writeTag(t,dl.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,yl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,_l,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,wl,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,xl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,bl,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Tl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Sl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,El,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Ml,e)},writeBytesField:function(t,e){this.writeTag(t,dl.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,dl.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,dl.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,dl.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,dl.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,dl.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,dl.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,dl.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,dl.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,dl.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Ll=3;function Il(t,e,r){1===t&&r.readMessage(kl,e)}function kl(t,e,r){if(3===t){var i=r.readMessage(Rl,{}),n=i.id,a=i.bitmap,o=i.width,s=i.height,l=i.left,u=i.top,c=i.advance;e.push({id:n,bitmap:new Ga({width:o+2*Ll,height:s+2*Ll},a),metrics:{width:o,height:s,left:l,top:u,advance:c}})}}function Rl(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}var Ol=Ll,zl=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};zl.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},zl.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Dl=function(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},v(["receive","process"],this),this.invoker=new zl(this.process),this.target.addEventListener("message",this.receive,!1)};function Bl(t,e,r){var i=2*Math.PI*6378137/256/Math.pow(2,r);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}Dl.prototype.send=function(t,e,r,i){var n=this,a=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(this.callbacks[a]=r);var o=[];return this.target.postMessage({id:a,type:t,hasCallback:!!r,targetMapId:i,sourceMapId:this.mapId,data:Ti(e,o)},o),{cancel:function(){r&&delete n.callbacks[a],n.target.postMessage({id:a,type:"<cancel>",targetMapId:i,sourceMapId:n.mapId})}}},Dl.prototype.receive=function(t){var e=t.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[r];var i=this.cancelCallbacks[r];delete this.cancelCallbacks[r],i&&i()}else this.tasks[r]=e,this.taskQueue.push(r),this.invoker.trigger()},Dl.prototype.process=function(){var t=this;if(this.taskQueue.length){var e=this.taskQueue.shift(),r=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),r)if("<response>"===r.type){var i=this.callbacks[e];delete this.callbacks[e],i&&(r.error?i(Si(r.error)):i(null,Si(r.data)))}else{var n=!1,a=r.hasCallback?function(r,i){n=!0,delete t.cancelCallbacks[e];var a=[];t.target.postMessage({id:e,type:"<response>",sourceMapId:t.mapId,error:r?Ti(r):null,data:Ti(i,a)},a)}:function(t){n=!0},o=null,s=Si(r.data);if(this.parent[r.type])o=this.parent[r.type](r.sourceMapId,s,a);else if(this.parent.getWorkerSource){var l=r.type.split(".");o=this.parent.getWorkerSource(r.sourceMapId,l[0],s.source)[l[1]](s,a)}else a(new Error("Could not find function "+r.type));!n&&o&&o.cancel&&(this.cancelCallbacks[e]=o.cancel)}}},Dl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Fl=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Fl.prototype.setNorthEast=function(t){return this._ne=t instanceof Nl?new Nl(t.lng,t.lat):Nl.convert(t),this},Fl.prototype.setSouthWest=function(t){return this._sw=t instanceof Nl?new Nl(t.lng,t.lat):Nl.convert(t),this},Fl.prototype.extend=function(t){var e,r,i=this._sw,n=this._ne;if(t instanceof Nl)e=t,r=t;else{if(!(t instanceof Fl))return Array.isArray(t)?t.every(Array.isArray)?this.extend(Fl.convert(t)):this.extend(Nl.convert(t)):this;if(e=t._sw,r=t._ne,!e||!r)return this}return i||n?(i.lng=Math.min(e.lng,i.lng),i.lat=Math.min(e.lat,i.lat),n.lng=Math.max(r.lng,n.lng),n.lat=Math.max(r.lat,n.lat)):(this._sw=new Nl(e.lng,e.lat),this._ne=new Nl(r.lng,r.lat)),this},Fl.prototype.getCenter=function(){return new Nl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Fl.prototype.getSouthWest=function(){return this._sw},Fl.prototype.getNorthEast=function(){return this._ne},Fl.prototype.getNorthWest=function(){return new Nl(this.getWest(),this.getNorth())},Fl.prototype.getSouthEast=function(){return new Nl(this.getEast(),this.getSouth())},Fl.prototype.getWest=function(){return this._sw.lng},Fl.prototype.getSouth=function(){return this._sw.lat},Fl.prototype.getEast=function(){return this._ne.lng},Fl.prototype.getNorth=function(){return this._ne.lat},Fl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Fl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Fl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Fl.convert=function(t){return!t||t instanceof Fl?t:new Fl(t)};var Nl=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Nl.prototype.wrap=function(){return new Nl(c(this.lng,-180,180),this.lat)},Nl.prototype.toArray=function(){return[this.lng,this.lat]},Nl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Nl.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new Fl(new Nl(this.lng-r,this.lat-e),new Nl(this.lng+r,this.lat+e))},Nl.convert=function(t){if(t instanceof Nl)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Nl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Nl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ul=2*Math.PI*6378137;function Vl(t){return Ul*Math.cos(t*Math.PI/180)}function jl(t){return(180+t)/360}function Gl(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Hl(t,e){return t/Vl(e)}function Wl(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}var ql=function(t,e,r){void 0===r&&(r=0),this.x=+t,this.y=+e,this.z=+r};ql.fromLngLat=function(t,e){void 0===e&&(e=0);var r=Nl.convert(t);return new ql(jl(r.lng),Gl(r.lat),Hl(e,r.lat))},ql.prototype.toLngLat=function(){return new Nl(360*this.x-180,Wl(this.y))},ql.prototype.toAltitude=function(){return t=this.z,e=this.y,t*Vl(Wl(e));var t,e},ql.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ul*(t=Wl(this.y),1/Math.cos(t*Math.PI/180));var t};var Xl=function(t,e,r){this.z=t,this.x=e,this.y=r,this.key=Zl(0,t,e,r)};Xl.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Xl.prototype.url=function(t,e){var r,i,n,a,o,s=(r=this.x,i=this.y,n=this.z,a=Bl(256*r,256*(i=Math.pow(2,n)-i-1),n),o=Bl(256*(r+1),256*(i+1),n),a[0]+","+a[1]+","+o[0]+","+o[1]),l=function(t,e,r){for(var i,n="",a=t;a>0;a--)n+=(e&(i=1<<a-1)?1:0)+(r&i?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Xl.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new n((t.x*e-this.x)*da,(t.y*e-this.y)*da)};var $l=function(t,e){this.wrap=t,this.canonical=e,this.key=Zl(t,e.z,e.x,e.y)},Yl=function(t,e,r,i,n){this.overscaledZ=t,this.wrap=e,this.canonical=new Xl(r,+i,+n),this.key=Zl(e,t,i,n)};function Zl(t,e,r,i){(t*=2)<0&&(t=-1*t-1);var n=1<<e;return 32*(n*n*t+n*i+r)+e}Yl.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Yl.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Yl(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Yl(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Yl.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Yl.prototype.children=function(t){if(this.overscaledZ>=t)return[new Yl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new Yl(e,this.wrap,e,r,i),new Yl(e,this.wrap,e,r+1,i),new Yl(e,this.wrap,e,r,i+1),new Yl(e,this.wrap,e,r+1,i+1)]},Yl.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Yl.prototype.wrapped=function(){return new Yl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Yl.prototype.unwrapTo=function(t){return new Yl(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Yl.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Yl.prototype.toUnwrapped=function(){return new $l(this.wrap,this.canonical)},Yl.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Yl.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new ql(t.x-this.wrap,t.y))},xi("CanonicalTileID",Xl),xi("OverscaledTileID",Yl,{omit:["posMatrix"]});var Jl=function(t,e,r){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return w('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var i=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=r||"mapbox";for(var n=0;n<i;n++)this.data[this._idx(-1,n)]=this.data[this._idx(0,n)],this.data[this._idx(i,n)]=this.data[this._idx(i-1,n)],this.data[this._idx(n,-1)]=this.data[this._idx(n,0)],this.data[this._idx(n,i)]=this.data[this._idx(n,i-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(i,-1)]=this.data[this._idx(i-1,0)],this.data[this._idx(-1,i)]=this.data[this._idx(0,i-1)],this.data[this._idx(i,i)]=this.data[this._idx(i-1,i-1)]};Jl.prototype.get=function(t,e){var r=new Uint8Array(this.data.buffer),i=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[i],r[i+1],r[i+2])},Jl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Jl.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Jl.prototype._unpackMapbox=function(t,e,r){return(256*t*256+256*e+r)/10-1e4},Jl.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768},Jl.prototype.getPixels=function(){return new Ha({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Jl.prototype.backfillBorder=function(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var i=e*this.dim,n=e*this.dim+this.dim,a=r*this.dim,o=r*this.dim+this.dim;switch(e){case-1:i=n-1;break;case 1:n=i+1}switch(r){case-1:a=o-1;break;case 1:o=a+1}for(var s=-e*this.dim,l=-r*this.dim,u=a;u<o;u++)for(var c=i;c<n;c++)this.data[this._idx(c,u)]=t.data[this._idx(c+s,u+l)]},xi("DEMData",Jl);var Kl=sn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ql=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}};Ql.prototype.encode=function(t){return this._stringToNumber[t]},Ql.prototype.decode=function(t){return this._numberToString[t]};var tu=function(t,e,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=r,t._y=i,this.properties=t.properties,null!=t.id&&(this.id=t.id)},eu={geometry:{configurable:!0}};eu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},eu.geometry.set=function(t){this._geometry=t},tu.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(tu.prototype,eu);var ru=function(){this.state={},this.stateChanges={},this.deletedStates={}};ru.prototype.updateState=function(t,e,r){var i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},h(this.stateChanges[t][i],r),null===this.deletedStates[t])for(var n in this.deletedStates[t]={},this.state[t])n!==i&&(this.deletedStates[t][n]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][i])for(var a in this.deletedStates[t][i]={},this.state[t][i])r[a]||(this.deletedStates[t][i][a]=null);else for(var o in r)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][o]&&delete this.deletedStates[t][i][o]},ru.prototype.removeFeatureState=function(t,e,r){if(null!==this.deletedStates[t]){var i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&void 0!==e&&e>=0)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][r]=null);else if(void 0!==e&&e>=0)if(this.stateChanges[t]&&this.stateChanges[t][i])for(r in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][r]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}},ru.prototype.getState=function(t,e){var r=String(e),i=this.state[t]||{},n=this.stateChanges[t]||{},a=h({},i[r],n[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var o=this.deletedStates[t][e];if(null===o)return{};for(var s in o)delete a[s]}return a},ru.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},ru.prototype.coalesceChanges=function(t,e){var r={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var n={};for(var a in this.stateChanges[i])this.state[i][a]||(this.state[i][a]={}),h(this.state[i][a],this.stateChanges[i][a]),n[a]=this.state[i][a];r[i]=n}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var l in this.state[o])s[l]={},this.state[o][l]={};else for(var u in this.deletedStates[o]){if(null===this.deletedStates[o][u])this.state[o][u]={};else for(var c=0,p=Object.keys(this.deletedStates[o][u]);c<p.length;c+=1){var d=p[c];delete this.state[o][u][d]}s[u]=this.state[o][u]}r[o]=r[o]||{},h(r[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var f in t)t[f].setFeatureState(r,e)};var iu=function(t,e,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new mi(da,16,0),this.grid3D=new mi(da,16,0),this.featureIndexArray=r||new Vn};function nu(t){for(var e=1/0,r=1/0,i=-1/0,n=-1/0,a=0,o=t;a<o.length;a+=1){var s=o[a];e=Math.min(e,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),n=Math.max(n,s.y)}return{minX:e,minY:r,maxX:i,maxY:n}}function au(t,e){return e-t}iu.prototype.insert=function(t,e,r,i,n,a){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,i,n);for(var s=a?this.grid3D:this.grid,l=0;l<e.length;l++){for(var u=e[l],c=[1/0,1/0,-1/0,-1/0],h=0;h<u.length;h++){var p=u[h];c[0]=Math.min(c[0],p.x),c[1]=Math.min(c[1],p.y),c[2]=Math.max(c[2],p.x),c[3]=Math.max(c[3],p.y)}c[0]<da&&c[1]<da&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}},iu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new qo.VectorTile(new pl(this.rawTileData)).layers,this.sourceLayerCoder=new Ql(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},iu.prototype.query=function(t,e,r){var i=this;this.loadVTLayers();for(var a=t.params||{},o=da/t.tileSize/t.scale,s=Gr(a.filter),l=t.queryGeometry,u=t.queryPadding*o,c=nu(l),h=this.grid.query(c.minX-u,c.minY-u,c.maxX+u,c.maxY+u),p=nu(t.cameraQueryGeometry),d=this.grid3D.query(p.minX-u,p.minY-u,p.maxX+u,p.maxY+u,(function(e,r,i,a){return function(t,e,r,i,a){for(var o=0,s=t;o<s.length;o+=1){var l=s[o];if(e<=l.x&&r<=l.y&&i>=l.x&&a>=l.y)return!0}var u=[new n(e,r),new n(e,a),new n(i,a),new n(i,r)];if(t.length>2)for(var c=0,h=u;c<h.length;c+=1)if(Aa(t,h[c]))return!0;for(var p=0;p<t.length-1;p++)if(Ca(t[p],t[p+1],u))return!0;return!1}(t.cameraQueryGeometry,e-u,r-u,i+u,a+u)})),f=0,m=d;f<m.length;f+=1){var v=m[f];h.push(v)}h.sort(au);for(var g,y={},_=function(n){var u=h[n];if(u!==g){g=u;var c=i.featureIndexArray.get(u),p=null;i.loadMatchingFeature(y,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,s,a.layers,e,(function(e,n){p||(p=ma(e));var a={};return e.id&&(a=r.getState(n.sourceLayer||"_geojsonTileLayer",e.id)),n.queryIntersectsFeature(l,e,a,p,i.z,t.transform,o,t.pixelPosMatrix)}))}},x=0;x<h.length;x++)_(x);return y},iu.prototype.loadMatchingFeature=function(t,e,r,i,n,a,o,s){var l=this.bucketLayerIDs[e];if(!a||function(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1}(a,l)){var u=this.sourceLayerCoder.decode(r),c=this.vtLayers[u].feature(i);if(n(new Vi(this.tileID.overscaledZ),c))for(var h=0;h<l.length;h++){var p=l[h];if(!(a&&a.indexOf(p)<0)){var d=o[p];if(d){var f=!s||s(c,d);if(f){var m=new tu(c,this.z,this.x,this.y);m.layer=d.serialize();var v=t[p];void 0===v&&(v=t[p]=[]),v.push({featureIndex:i,feature:m,intersectionZ:f})}}}}}},iu.prototype.lookupSymbolFeatures=function(t,e,r,i,n,a){var o={};this.loadVTLayers();for(var s=Gr(i),l=0,u=t;l<u.length;l+=1){var c=u[l];this.loadMatchingFeature(o,e,r,c,s,n,a)}return o},iu.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var i=0,n=r[e];i<n.length;i+=1)if(t===n[i])return!0;return!1},xi("FeatureIndex",iu,{omit:["rawTileData","sourceLayerCoder"]});var ou=function(t,e){this.tileID=t,this.uid=d(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};function su(t,e,r,i,n){if(void 0===e.segment)return!0;for(var a=e,o=e.segment+1,s=0;s>-r/2;){if(--o<0)return!1;s-=t[o].dist(a),a=t[o]}s+=t[o].dist(t[o+1]),o++;for(var l=[],u=0;s<r/2;){var c=t[o-1],h=t[o],p=t[o+1];if(!p)return!1;var d=c.angleTo(h)-h.angleTo(p);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:d}),u+=d;s-l[0].distance>i;)u-=l.shift().angleDelta;if(u>n)return!1;o++,s+=h.dist(p)}return!0}function lu(t){for(var e=0,r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function uu(t,e,r){return t?.6*e*r:0}function cu(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function hu(t,e,r,i,n,a){for(var o=uu(r,n,a),s=cu(r,i)*a,l=0,u=lu(t)/2,c=0;c<t.length-1;c++){var h=t[c],p=t[c+1],d=h.dist(p);if(l+d>u){var f=(u-l)/d,m=Ee(h.x,p.x,f),v=Ee(h.y,p.y,f),g=new Rs(m,v,p.angleTo(h),c);return g._round(),!o||su(t,g,s,o,e)?g:void 0}l+=d}}function pu(t,e,r,i,n,a,o,s,l){var u=uu(i,a,o),c=cu(i,n),h=c*o,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),function t(e,r,i,n,a,o,s,l,u){for(var c=o/2,h=lu(e),p=0,d=r-i,f=[],m=0;m<e.length-1;m++){for(var v=e[m],g=e[m+1],y=v.dist(g),_=g.angleTo(v);d+i<p+y;){var x=((d+=i)-p)/y,b=Ee(v.x,g.x,x),w=Ee(v.y,g.y,x);if(b>=0&&b<u&&w>=0&&w<u&&d-c>=0&&d+c<=h){var T=new Rs(b,w,_,m);T._round(),n&&!su(e,T,o,n,a)||f.push(T)}}p+=y}return l||f.length||s||(f=t(e,p/2,i,n,a,o,s,!0,u)),f}(t,p?e/2*s%e:(c/2+2*a)*o*s%e,e,u,r,h,p,!1,l)}function du(t,e){var r=t.image,i=t.right-t.left,a=(i*r.paddedRect.w/(r.paddedRect.w-2)-i)/2,o=t.left-a,s=t.right+a,l=t.bottom-t.top,u=(l*r.paddedRect.h/(r.paddedRect.h-2)-l)/2,c=t.top-u,h=t.bottom+u,p=new n(o,c),d=new n(s,c),f=new n(s,h),m=new n(o,h),v=e*Math.PI/180;if(v){var g=Math.sin(v),y=Math.cos(v),_=[y,-g,g,y];p._matMult(_),d._matMult(_),m._matMult(_),f._matMult(_)}return[{tl:p,tr:d,bl:m,br:f,tex:r.paddedRect,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0}]}ou.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<O.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},ou.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ou.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var i in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var r={};if(!e)return r;for(var i=function(){var t=a[n],i=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return i.filter((function(e){return e.id===t}))[0]})));for(var o=0,s=i;o<s.length;o+=1){var l=s[o];r[l.id]=t}}},n=0,a=t;n<a.length;n+=1)i();return r}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var n=this.buckets[i];if(n instanceof Ws){if(this.hasSymbolBuckets=!0,!r)break;n.justReloaded=!0}}for(var a in this.queryPadding=0,this.buckets){var o=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a).queryRadius(o))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new In},ou.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ou.prototype.getBucket=function(t){return this.buckets[t.id]},ou.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t)}var i=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new cl(t,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new cl(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},ou.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},ou.prototype.queryRenderedFeatures=function(t,e,r,i,n,a,o,s,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:n,tileSize:this.tileSize,pixelPosMatrix:l,transform:o,params:a,queryPadding:this.queryPadding*s},t,e):{}},ou.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),i=e?e.sourceLayer:"",n=r._geojsonTileLayer||r[i];if(n)for(var a=Gr(e&&e.filter),o=this.tileID.canonical,s=o.z,l=o.x,u=o.y,c={z:s,x:l,y:u},h=0;h<n.length;h++){var p=n.feature(h);if(a(new Vi(this.tileID.overscaledZ),p)){var d=new tu(p,s,l,u);d.tile=c,t.push(d)}}}},ou.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer),delete this.mask},ou.prototype.setMask=function(t,e){if(!o(this.mask,t)&&(this.clearMask(),this.mask=t,!o(t,{0:!0}))){var r=new cn,i=new En;this.segments=new Gn,this.segments.prepareSegment(0,r,i);for(var a=Object.keys(t),s=0;s<a.length;s++){var l=t[+a[s]],u=da>>l.z,c=new n(l.x*u,l.y*u),h=new n(c.x+u,c.y+u),p=this.segments.prepareSegment(4,r,i);r.emplaceBack(c.x,c.y,c.x,c.y),r.emplaceBack(h.x,c.y,h.x,c.y),r.emplaceBack(c.x,h.y,c.x,h.y),r.emplaceBack(h.x,h.y,h.x,h.y);var d=p.vertexLength;i.emplaceBack(d,d+1,d+2),i.emplaceBack(d+1,d+2,d+3),p.vertexLength+=4,p.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(r,Kl.members),this.maskedIndexBuffer=e.createIndexBuffer(i)}},ou.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ou.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ou.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=E(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),n=!1;if(this.expirationTime>i)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{var a=this.expirationTime-e;a?this.expirationTime=i+Math.max(a,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ou.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ou.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var i in this.buckets){var n=this.buckets[i],a=n.layers[0].sourceLayer||"_geojsonTileLayer",o=r[a],s=t[a];o&&s&&0!==Object.keys(s).length&&(n.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(i).queryRadius(n))))}}},ou.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ou.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<O.now()},ou.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ou.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=O.now()+t};var fu=function(t,e,r,i,a,o,s,l,u,c,h,p){var d=s.top*l-u,f=s.bottom*l+u,m=s.left*l-u,v=s.right*l+u;if(this.boxStartIndex=t.length,c){var g=f-d,y=v-m;g>0&&(g=Math.max(10*l,g),this._addLineCollisionCircles(t,e,r,r.segment,y,g,i,a,o,h))}else{if(p){var _=new n(m,d),x=new n(v,d),b=new n(m,f),w=new n(v,f),T=p*Math.PI/180;_._rotate(T),x._rotate(T),b._rotate(T),w._rotate(T),m=Math.min(_.x,x.x,b.x,w.x),v=Math.max(_.x,x.x,b.x,w.x),d=Math.min(_.y,x.y,b.y,w.y),f=Math.max(_.y,x.y,b.y,w.y)}t.emplaceBack(r.x,r.y,m,d,v,f,i,a,o,0,0)}this.boxEndIndex=t.length};fu.prototype._addLineCollisionCircles=function(t,e,r,i,n,a,o,s,l,u){var c=a/2,h=Math.floor(n/c)||1,p=1+.4*Math.log(u)/Math.LN2,d=Math.floor(h*p/2),f=-a/2,m=r,v=i+1,g=f,y=-n/2,_=y-n/4;do{if(--v<0){if(g>y)return;v=0;break}g-=e[v].dist(m),m=e[v]}while(g>_);for(var x=e[v].dist(e[v+1]),b=-d;b<h+d;b++){var w=b*c,T=y+w;if(w<0&&(T+=w),w>n&&(T+=w-n),!(T<g)){for(;g+x<T;){if(g+=x,++v+1>=e.length)return;x=e[v].dist(e[v+1])}var S=T-g,E=e[v],M=e[v+1].sub(E)._unit()._mult(S)._add(E)._round(),A=Math.abs(T-f)<c?0:.8*(T-f);t.emplaceBack(M.x,M.y,-a/2,-a/2,a/2,a/2,o,s,l,a/2,A)}}};var mu=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=vu),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)};function vu(t,e){return t<e?-1:t>e?1:0}function gu(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1);for(var i=1/0,a=1/0,o=-1/0,s=-1/0,l=t[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<i)&&(i=c.x),(!u||c.y<a)&&(a=c.y),(!u||c.x>o)&&(o=c.x),(!u||c.y>s)&&(s=c.y)}var h=o-i,p=s-a,d=Math.min(h,p),f=d/2,m=new mu([],yu);if(0===d)return new n(i,a);for(var v=i;v<o;v+=d)for(var g=a;g<s;g+=d)m.push(new _u(v+f,g+f,f,t));for(var y=function(t){for(var e=0,r=0,i=0,n=t[0],a=0,o=n.length,s=o-1;a<o;s=a++){var l=n[a],u=n[s],c=l.x*u.y-u.x*l.y;r+=(l.x+u.x)*c,i+=(l.y+u.y)*c,e+=3*c}return new _u(r/e,i/e,0,t)}(t),_=m.length;m.length;){var x=m.pop();(x.d>y.d||!y.d)&&(y=x,r&&console.log("found best %d after %d probes",Math.round(1e4*x.d)/1e4,_)),x.max-y.d<=e||(f=x.h/2,m.push(new _u(x.p.x-f,x.p.y-f,f,t)),m.push(new _u(x.p.x+f,x.p.y-f,f,t)),m.push(new _u(x.p.x-f,x.p.y+f,f,t)),m.push(new _u(x.p.x+f,x.p.y+f,f,t)),_+=4)}return r&&(console.log("num probes: "+_),console.log("best distance: "+y.d)),y.p}function yu(t,e){return e.max-t.max}function _u(t,e,r,i){this.p=new n(t,e),this.h=r,this.d=function(t,e){for(var r=!1,i=1/0,n=0;n<e.length;n++)for(var a=e[n],o=0,s=a.length,l=s-1;o<s;l=o++){var u=a[o],c=a[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(r=!r),i=Math.min(i,Ea(t,u,c))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}mu.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},mu.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},mu.prototype.peek=function(){return this.data[0]},mu.prototype._up=function(t){for(var e=this.data,r=this.compare,i=e[t];t>0;){var n=t-1>>1,a=e[n];if(r(i,a)>=0)break;e[t]=a,t=n}e[t]=i},mu.prototype._down=function(t){for(var e=this.data,r=this.compare,i=this.length>>1,n=e[t];t<i;){var a=1+(t<<1),o=e[a],s=a+1;if(s<this.length&&r(e[s],o)<0&&(a=s,o=e[s]),r(o,n)>=0)break;e[t]=o,t=a}e[t]=n};var xu=e((function(t){t.exports=function(t,e){var r,i,n,a,o,s,l,u;for(r=3&t.length,i=t.length-r,n=e,o=3432918353,s=461845907,u=0;u<i;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,n=27492+(65535&(a=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}})),bu=e((function(t){t.exports=function(t,e){for(var r,i=t.length,n=e^i,a=0;i>=4;)r=1540483477*(65535&(r=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24))+((1540483477*(r>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),i-=4,++a;switch(i){case 3:n^=(255&t.charCodeAt(a+2))<<16;case 2:n^=(255&t.charCodeAt(a+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(a)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}})),wu=xu,Tu=xu,Su=bu;wu.murmur3=Tu,wu.murmur2=Su;var Eu=7,Mu=Number.POSITIVE_INFINITY;function Au(t,e){return e[1]!==Mu?function(t,e,r){var i=0,n=0;switch(e=Math.abs(e),r=Math.abs(r),t){case"top-right":case"top-left":case"top":n=r-Eu;break;case"bottom-right":case"bottom-left":case"bottom":n=-r+Eu}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}return[i,n]}(t,e[0],e[1]):function(t,e){var r=0,i=0;e<0&&(e=0);var n=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":i=n-Eu;break;case"bottom-right":case"bottom-left":i=-n+Eu;break;case"bottom":i=-e+Eu;break;case"top":i=e-Eu}switch(t){case"top-right":case"bottom-right":r=-n;break;case"top-left":case"bottom-left":r=n;break;case"left":r=e;break;case"right":r=-e}return[r,i]}(t,e[0])}function Cu(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var Pu=65535;function Lu(t,e,r,i,a,o,s,l,u,c,h,p,d,f){var m=function(t,e,r,i,a,o,s,l){for(var u=i.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=e.positionedGlyphs,h=[],p=0;p<c.length;p++){var d=c[p],f=s[d.fontStack],m=f&&f[d.glyph];if(m){var v=m.rect;if(v){var g=Ol+1,y=m.metrics.advance*d.scale/2,_=a?[d.x+y,d.y]:[0,0],x=a?[0,0]:[d.x+y+r[0],d.y+r[1]],b=(a||l)&&d.vertical,w=[0,0];b&&(w=x,x=[0,0]);var T=(m.metrics.left-g)*d.scale-y+x[0],S=(-m.metrics.top-g)*d.scale+x[1],E=T+v.w*d.scale,M=S+v.h*d.scale,A=new n(T,S),C=new n(E,S),P=new n(T,M),L=new n(E,M);if(b){var I=new n(-y,y-e.yOffset),k=-Math.PI/2,R=xs/2-y,O=new n(5-e.yOffset-R,0),z=new(Function.prototype.bind.apply(n,[null].concat(w)));A._rotateAround(k,I)._add(O)._add(z),C._rotateAround(k,I)._add(O)._add(z),P._rotateAround(k,I)._add(O)._add(z),L._rotateAround(k,I)._add(O)._add(z)}if(u){var D=Math.sin(u),B=Math.cos(u),F=[B,-D,D,B];A._matMult(F),C._matMult(F),P._matMult(F),L._matMult(F)}h.push({tl:A,tr:C,bl:P,br:L,tex:v,writingMode:e.writingMode,glyphOffset:_,sectionIndex:d.sectionIndex})}}}return h}(0,r,s,i,a,o,p,t.allowVerticalPlacement),v=t.textSizeData,g=null;"source"===v.kind?(g=[Os*i.layout.get("text-size").evaluate(o,{})])[0]>Pu&&w(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===v.kind&&((g=[Os*f.compositeTextSizes[0].evaluate(o,{}),Os*f.compositeTextSizes[1].evaluate(o,{})])[0]>Pu||g[1]>Pu)&&w(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),t.addSymbols(t.text,m,g,s,a,o,u,e,l.lineStartIndex,l.lineLength,d);for(var y=0,_=c;y<_.length;y+=1)h[_[y]]=t.text.placedSymbolArray.length-1;return 4*m.length}function Iu(t,e,r,i){var n=t.compareText;if(e in n){for(var a=n[e],o=a.length-1;o>=0;o--)if(i.dist(a[o])<r)return!0}else n[e]=[];return n[e].push(i),!1}t.Actor=Dl,t.AlphaImage=Ga,t.CanonicalTileID=Xl,t.CollisionBoxArray=In,t.Color=Zt,t.DEMData=Jl,t.DataConstantProperty=Zi,t.DictionaryCoder=Ql,t.EXTENT=da,t.ErrorEvent=St,t.EvaluationParameters=Vi,t.Event=Tt,t.Evented=Et,t.FeatureIndex=iu,t.FillBucket=Ro,t.FillExtrusionBucket=Zo,t.ImageAtlas=al,t.ImagePosition=il,t.LineBucket=ss,t.LngLat=Nl,t.LngLatBounds=Fl,t.MercatorCoordinate=ql,t.ONE_EM=xs,t.OverscaledTileID=Yl,t.Point=n,t.Point$1=n,t.ProgramConfiguration=la,t.Properties=en,t.Protobuf=pl,t.RGBAImage=Ha,t.RequestManager=V,t.ResourceType=ct,t.SegmentVector=Gn,t.SourceFeatureState=ru,t.StructArrayLayout1ui2=An,t.StructArrayLayout2i4=un,t.StructArrayLayout2ui4=Mn,t.StructArrayLayout3ui6=En,t.StructArrayLayout4i8=cn,t.SymbolBucket=Ws,t.Texture=cl,t.Tile=ou,t.Transitionable=Hi,t.Uniform1f=Yn,t.Uniform1i=$n,t.Uniform2f=Zn,t.Uniform3f=Jn,t.Uniform4f=Kn,t.UniformColor=Qn,t.UniformMatrix4f=ea,t.UnwrappedTileID=$l,t.ValidationError=At,t.WritingMode=bs,t.ZoomHistory=Ei,t.addDynamicAttributes=js,t.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var i=t.length,n=new Array(t.length),a=null;t.forEach((function(t,o){e(t,(function(t,e){t&&(a=t),n[o]=e,0==--i&&r(a,n)}))}))},t.bezier=s,t.bindAll=v,t.browser=O,t.cacheEntryPossiblyAdded=function(t){++ut>nt&&(t.getActor().send("enforceCacheSizeLimit",it),ut=0)},t.clamp=u,t.clearTileCache=function(t){var e=self.caches.delete(rt);t&&e.catch(t).then((function(){return t()}))},t.clone=function(t){var e=new za(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=x,t.config=z,t.create=function(){var t=new za(16);return za!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new za(9);return za!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new za(4);return za!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Lr,t.createLayout=sn,t.createStyleLayer=function(t){return"custom"===t.type?new tl(t):new el[t.type](t)},t.deepEqual=o,t.ease=l,t.emitValidationErrors=fi,t.endsWith=g,t.enforceCacheSizeLimit=function(t){self.caches&&self.caches.open(rt).then((function(e){e.keys().then((function(r){for(var i=0;i<r.length-t;i++)e.delete(r[i])}))}))},t.evaluateSizeForFeature=Ds,t.evaluateSizeForZoom=Bs,t.evaluateVariableOffset=Au,t.evented=Ni,t.extend=h,t.featureFilter=Gr,t.filterObject=_,t.fromRotation=function(t,e){var r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=0,t[3]=-r,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Ls,t.getAnchorJustification=Cu,t.getArrayBuffer=yt,t.getImage=xt,t.getJSON=function(t,e){return gt(h(t,{type:"json"}),e)},t.getRTLTextPluginStatus=function(){return Bi},t.getReferrer=dt,t.getVideo=function(t,e){var r,i,n=self.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(var a=0;a<t.length;a++){var o=self.document.createElement("source");r=t[a],i=void 0,(i=self.document.createElement("a")).href=r,(i.protocol!==self.document.location.protocol||i.host!==self.document.location.host)&&(n.crossOrigin="Anonymous"),o.src=t[a],n.appendChild(o)}return{cancel:function(){}}},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.ieee754=hl,t.invert=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],v=e[14],g=e[15],y=r*s-i*o,_=r*l-n*o,x=r*u-a*o,b=i*l-n*s,w=i*u-a*s,T=n*u-a*l,S=c*m-h*f,E=c*v-p*f,M=c*g-d*f,A=h*v-p*m,C=h*g-d*m,P=p*g-d*v,L=y*P-_*C+x*A+b*M-w*E+T*S;return L?(L=1/L,t[0]=(s*P-l*C+u*A)*L,t[1]=(n*C-i*P-a*A)*L,t[2]=(m*T-v*w+g*b)*L,t[3]=(p*w-h*T-d*b)*L,t[4]=(l*M-o*P-u*E)*L,t[5]=(r*P-n*M+a*E)*L,t[6]=(v*x-f*T-g*_)*L,t[7]=(c*T-p*x+d*_)*L,t[8]=(o*C-s*M+u*S)*L,t[9]=(i*M-r*C-a*S)*L,t[10]=(f*w-m*x+g*y)*L,t[11]=(h*x-c*w-d*y)*L,t[12]=(s*E-o*A-l*S)*L,t[13]=(r*A-i*E+n*S)*L,t[14]=(m*_-f*b-v*y)*L,t[15]=(c*b-h*_+p*y)*L,t):null},t.isChar=Mi,t.isMapboxURL=j,t.keysDifference=function(t,e){var r=[];for(var i in t)i in e||r.push(i);return r},t.makeRequest=gt,t.mapObject=y,t.mercatorXfromLng=jl,t.mercatorYfromLat=Gl,t.mercatorZfromAltitude=Hl,t.multiply=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],m=e[12],v=e[13],g=e[14],y=e[15],_=r[0],x=r[1],b=r[2],w=r[3];return t[0]=_*i+x*s+b*h+w*m,t[1]=_*n+x*l+b*p+w*v,t[2]=_*a+x*u+b*d+w*g,t[3]=_*o+x*c+b*f+w*y,_=r[4],x=r[5],b=r[6],w=r[7],t[4]=_*i+x*s+b*h+w*m,t[5]=_*n+x*l+b*p+w*v,t[6]=_*a+x*u+b*d+w*g,t[7]=_*o+x*c+b*f+w*y,_=r[8],x=r[9],b=r[10],w=r[11],t[8]=_*i+x*s+b*h+w*m,t[9]=_*n+x*l+b*p+w*v,t[10]=_*a+x*u+b*d+w*g,t[11]=_*o+x*c+b*f+w*y,_=r[12],x=r[13],b=r[14],w=r[15],t[12]=_*i+x*s+b*h+w*m,t[13]=_*n+x*l+b*p+w*v,t[14]=_*a+x*u+b*d+w*g,t[15]=_*o+x*c+b*f+w*y,t},t.mvt=qo,t.number=Ee,t.ortho=function(t,e,r,i,n,a,o){var s=1/(e-r),l=1/(i-n),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(n+i)*l,t[14]=(o+a)*u,t[15]=1,t},t.parseGlyphPBF=function(t){return new pl(t).readFields(Il,[])},t.performSymbolLayout=function(t,e,r,i,a,o){t.createArrays();var s=512*t.overscaling;t.tilePixelRatio=da/s,t.compareText={},t.iconsNeedLinear=!1;var l=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,c={};if("composite"===t.textSizeData.kind){var h=t.textSizeData,p=h.minZoom,d=h.maxZoom;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Vi(p)),u["text-size"].possiblyEvaluate(new Vi(d))]}if("composite"===t.iconSizeData.kind){var f=t.iconSizeData,m=f.minZoom,v=f.maxZoom;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Vi(m)),u["icon-size"].possiblyEvaluate(new Vi(v))]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new Vi(t.zoom+1)),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new Vi(t.zoom+1)),c.textMaxSize=u["text-size"].possiblyEvaluate(new Vi(18));for(var g=l.get("text-line-height")*xs,y="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),_=l.get("text-keep-upright"),x=function(){var o=T[b],s=l.get("text-font").evaluate(o,{}).join(","),u=r,h={horizontal:{},vertical:void 0},p=o.text,d=[0,0];if(p){var f=p.toString(),m=l.get("text-letter-spacing").evaluate(o,{})*xs,v=function(t){for(var e=0,r=t;e<r.length;e+=1)if(!Ci(r[e].charCodeAt(0)))return!1;return!0}(f)?m:0,x=l.get("text-anchor").evaluate(o,{}),S=l.get("text-variable-anchor");if(!S){var E=l.get("text-radial-offset").evaluate(o,{});d=E?Au(x,[E*xs,Mu]):l.get("text-offset").evaluate(o,{}).map((function(t){return t*xs}))}var M=y?"center":l.get("text-justify").evaluate(o,{}),A=l.get("symbol-placement"),C="point"===A?l.get("text-max-width").evaluate(o,{})*xs:0,P=function(){t.allowVerticalPlacement&&Ai(f)&&(h.vertical=Ts(p,e,s,C,g,x,"left",v,d,bs.vertical,!0,A))};if(!y&&S){for(var L="auto"===M?S.map((function(t){return Cu(t)})):[M],I=!1,k=0;k<L.length;k++){var R=L[k];if(!h.horizontal[R])if(I)h.horizontal[R]=h.horizontal[0];else{var O=Ts(p,e,s,C,g,"center",R,v,d,bs.horizontal,!1,A);O&&(h.horizontal[R]=O,I=1===O.lineCount)}}P()}else{"auto"===M&&(M=Cu(x));var z=Ts(p,e,s,C,g,x,M,v,d,bs.horizontal,!1,A);z&&(h.horizontal[M]=z),P(),Ai(f)&&y&&_&&(h.vertical=Ts(p,e,s,C,g,x,M,v,d,bs.vertical,!1,A))}}var D=void 0;if(o.icon&&o.icon.name){var B=i[o.icon.name];B&&(D=function(t,e,r){var i=Ls(r),n=i.horizontalAlign,a=i.verticalAlign,o=e[0],s=e[1],l=o-t.displaySize[0]*n,u=l+t.displaySize[0],c=s-t.displaySize[1]*a;return{image:t,top:c,bottom:c+t.displaySize[1],left:l,right:u}}(a[o.icon.name],l.get("icon-offset").evaluate(o,{}),l.get("icon-anchor").evaluate(o,{})),void 0===t.sdfIcons?t.sdfIcons=B.sdf:t.sdfIcons!==B.sdf&&w("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),B.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(Object.keys(h.horizontal).length||D)&&function(t,e,r,i,a,o,s){var l=o.layoutTextSize.evaluate(e,{}),u=o.layoutIconSize.evaluate(e,{}),c=o.textMaxSize.evaluate(e,{});void 0===c&&(c=l);var h,p=t.layers[0].layout,d=p.get("icon-offset").evaluate(e,{}),f=function(t){for(var e in t)return t[e];return null}(r.horizontal),m=l/24,v=t.tilePixelRatio*m,g=t.tilePixelRatio*c/24,y=t.tilePixelRatio*u,_=t.tilePixelRatio*p.get("symbol-spacing"),x=p.get("text-padding")*t.tilePixelRatio,b=p.get("icon-padding")*t.tilePixelRatio,T=p.get("text-max-angle")/180*Math.PI,S="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),E="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),M=p.get("symbol-placement"),A=_/2,C=p.get("icon-text-fit");i&&"none"!==C&&(t.allowVerticalPlacement&&r.vertical&&(h=ks(i,r.vertical,C,p.get("icon-text-fit-padding"),d,m)),f&&(i=ks(i,f,C,p.get("icon-text-fit-padding"),d,m)));var P=function(n,l){l.x<0||l.x>=da||l.y<0||l.y>=da||function(t,e,r,i,n,a,o,s,l,u,c,h,p,d,f,m,v,g,y,_,x,b){var T,S,E,M,A,C=t.addToLineVertexArray(e,r),P=0,L=0,I=0,k=0,R=-1,O=-1,z={},D=wu(""),B=0,F=0;if(void 0===o._unevaluatedLayout.getValue("text-radial-offset")?(T=o.layout.get("text-offset").evaluate(_,{}).map((function(t){return t*xs})),B=T[0],F=T[1]):(B=o.layout.get("text-radial-offset").evaluate(_,{})*xs,F=Mu),t.allowVerticalPlacement&&i.vertical){var N=o.layout.get("text-rotate").evaluate(_,{})+90,U=i.vertical;M=new fu(s,r,e,l,u,c,U,h,p,d,t.overscaling,N),a&&(A=new fu(s,r,e,l,u,c,a,m,v,d,t.overscaling,N))}if(n){var V=o.layout.get("icon-rotate").evaluate(_,{}),j=du(n,V),G=a?du(a,V):void 0;E=new fu(s,r,e,l,u,c,n,m,v,!1,t.overscaling,V),P=4*j.length;var H=t.iconSizeData,W=null;"source"===H.kind?(W=[Os*o.layout.get("icon-size").evaluate(_,{})])[0]>Pu&&w(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===H.kind&&((W=[Os*b.compositeIconSizes[0].evaluate(_,{}),Os*b.compositeIconSizes[1].evaluate(_,{})])[0]>Pu||W[1]>Pu)&&w(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),t.addSymbols(t.icon,j,W,y,g,_,!1,e,C.lineStartIndex,C.lineLength,-1),R=t.icon.placedSymbolArray.length-1,G&&(L=4*G.length,t.addSymbols(t.icon,G,W,y,g,_,bs.vertical,e,C.lineStartIndex,C.lineLength,-1),O=t.icon.placedSymbolArray.length-1)}for(var q in i.horizontal){var X=i.horizontal[q];if(!S){D=wu(X.text);var $=o.layout.get("text-rotate").evaluate(_,{});S=new fu(s,r,e,l,u,c,X,h,p,d,t.overscaling,$)}var Y=1===X.lineCount;if(I+=Lu(t,e,X,o,d,_,f,C,i.vertical?bs.horizontal:bs.horizontalOnly,Y?Object.keys(i.horizontal):[q],z,x,R,b),Y)break}i.vertical&&(k+=Lu(t,e,i.vertical,o,d,_,f,C,bs.vertical,["vertical"],z,x,O,b));var Z=S?S.boxStartIndex:t.collisionBoxArray.length,J=S?S.boxEndIndex:t.collisionBoxArray.length,K=M?M.boxStartIndex:t.collisionBoxArray.length,Q=M?M.boxEndIndex:t.collisionBoxArray.length,tt=E?E.boxStartIndex:t.collisionBoxArray.length,et=E?E.boxEndIndex:t.collisionBoxArray.length,rt=A?A.boxStartIndex:t.collisionBoxArray.length,it=A?A.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=Ws.MAX_GLYPHS&&w("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),t.symbolInstances.emplaceBack(e.x,e.y,z.right>=0?z.right:-1,z.center>=0?z.center:-1,z.left>=0?z.left:-1,z.vertical||-1,R,O,D,Z,J,K,Q,tt,et,rt,it,l,I,k,P,L,0,h,B,F)}(t,l,n,r,i,h,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,v,x,S,s,y,b,E,d,e,a,o)};if("line"===M)for(var L=0,I=function(t,e,r,i,a){for(var o=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,c=0;c<l.length-1;c++){var h=l[c],p=l[c+1];h.x<e&&p.x<e||(h.x<e?h=new n(e,h.y+(p.y-h.y)*((e-h.x)/(p.x-h.x)))._round():p.x<e&&(p=new n(e,h.y+(p.y-h.y)*((e-h.x)/(p.x-h.x)))._round()),h.y<r&&p.y<r||(h.y<r?h=new n(h.x+(p.x-h.x)*((r-h.y)/(p.y-h.y)),r)._round():p.y<r&&(p=new n(h.x+(p.x-h.x)*((r-h.y)/(p.y-h.y)),r)._round()),h.x>=i&&p.x>=i||(h.x>=i?h=new n(i,h.y+(p.y-h.y)*((i-h.x)/(p.x-h.x)))._round():p.x>=i&&(p=new n(i,h.y+(p.y-h.y)*((i-h.x)/(p.x-h.x)))._round()),h.y>=a&&p.y>=a||(h.y>=a?h=new n(h.x+(p.x-h.x)*((a-h.y)/(p.y-h.y)),a)._round():p.y>=a&&(p=new n(h.x+(p.x-h.x)*((a-h.y)/(p.y-h.y)),a)._round()),u&&h.equals(u[u.length-1])||(u=[h],o.push(u)),u.push(p)))))}return o}(e.geometry,0,0,da,da);L<I.length;L+=1)for(var k=I[L],R=pu(k,_,T,r.vertical||f,i,24,g,t.overscaling,da),O=0,z=R;O<z.length;O+=1){var D=z[O],B=f;B&&Iu(t,B.text,A,D)||P(k,D)}else if("line-center"===M)for(var F=0,N=e.geometry;F<N.length;F+=1){var U=N[F];if(U.length>1){var V=hu(U,T,r.vertical||f,i,24,g);V&&P(U,V)}}else if("Polygon"===e.type)for(var j=0,G=Po(e.geometry,0);j<G.length;j+=1){var H=G[j],W=gu(H,16);P(H[0],new Rs(W.x,W.y,0))}else if("LineString"===e.type)for(var q=0,X=e.geometry;q<X.length;q+=1){var $=X[q];P($,new Rs($[0].x,$[0].y,0))}else if("Point"===e.type)for(var Y=0,Z=e.geometry;Y<Z.length;Y+=1)for(var J=Z[Y],K=0,Q=J;K<Q.length;K+=1){var tt=Q[K];P([tt],new Rs(tt.x,tt.y,0))}}(t,o,h,D,u,c,d)},b=0,T=t.features;b<T.length;b+=1)x();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,r,i,n){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(a=1/(i-n),t[10]=(n+i)*a,t[14]=2*n*i*a):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){for(var r={},i=0;i<e.length;i++){var n=e[i];n in t&&(r[n]=t[n])}return r},t.plugin=Ui,t.polygonIntersectsPolygon=ya,t.postMapLoadEvent=et,t.postTurnstileEvent=Q,t.potpack=rl,t.rasterBoundsAttributes=Kl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=xi,t.registerForPluginAvailability=function(t){return Fi?t({pluginURL:Fi,completionCallback:ki}):Ni.once("pluginAvailable",t),t},t.rotate=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=i*l+a*s,t[1]=n*l+o*s,t[2]=i*-s+a*l,t[3]=n*-s+o*l,t},t.rotateX=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*n+u*i,t[5]=o*n+c*i,t[6]=s*n+h*i,t[7]=l*n+p*i,t[8]=u*n-a*i,t[9]=c*n-o*i,t[10]=h*n-s*i,t[11]=p*n-l*i,t},t.rotateZ=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*n+u*i,t[1]=o*n+c*i,t[2]=s*n+h*i,t[3]=l*n+p*i,t[4]=u*n-a*i,t[5]=c*n-o*i,t[6]=h*n-s*i,t[7]=p*n-l*i,t},t.scale=function(t,e,r){var i=r[0],n=r[1],a=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.setCacheLimits=function(t,e){it=t,nt=e},t.setRTLTextPlugin=function(t,e){if(Bi===Oi||Bi===zi)throw new Error("setRTLTextPlugin cannot be called multiple times.");Bi=Oi,Fi=O.resolveURL(t),ki=function(t){t?(Bi=Ri,Fi=null,Bi=Di,e&&e(t)):Bi=zi},Ni.fire(new Tt("pluginAvailable",{pluginURL:Fi,completionCallback:ki}))},t.sphericalToCartesian=function(t){var e=t[0],r=t[1],i=t[2];return r+=90,r*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(i),y:e*Math.sin(r)*Math.sin(i),z:e*Math.cos(i)}},t.styleSpec=Mt,t.symbolSize=Fs,t.transformMat3=function(t,e,r){var i=e[0],n=e[1],a=e[2];return t[0]=i*r[0]+n*r[3]+a*r[6],t[1]=i*r[1]+n*r[4]+a*r[7],t[2]=i*r[2]+n*r[5]+a*r[8],t},t.transformMat4=Da,t.translate=function(t,e,r){var i,n,a,o,s,l,u,c,h,p,d,f,m=r[0],v=r[1],g=r[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*g+e[12],t[13]=e[1]*m+e[5]*v+e[9]*g+e[13],t[14]=e[2]*m+e[6]*v+e[10]*g+e[14],t[15]=e[3]*m+e[7]*v+e[11]*g+e[15]):(i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],t[0]=i,t[1]=n,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=d,t[11]=f,t[12]=i*m+s*v+h*g+e[12],t[13]=n*m+l*v+p*g+e[13],t[14]=a*m+u*v+d*g+e[14],t[15]=o*m+c*v+f*g+e[15]),t},t.uniqueId=d,t.validateCustomStyleLayer=function(t){var e=[],r=t.id;return void 0===r&&e.push({message:"layers."+r+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+r+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=hi,t.validateStyle=ci,t.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},t.vectorTile=qo,t.version="1.5.0",t.warnOnce=w,t.webpSupported=D,t.window=self,t.wrap=c})),i(["./shared"],(function(t){function e(t){var r=typeof t;if("number"===r||"boolean"===r||"string"===r||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var i="[",n=0,a=t;n<a.length;n+=1)i+=e(a[n])+",";return i+"]"}for(var o=Object.keys(t).sort(),s="{",l=0;l<o.length;l++)s+=JSON.stringify(o[l])+":"+e(t[o[l]])+",";return s+"}"}function r(r){for(var i="",n=0,a=t.refProperties;n<a.length;n+=1)i+="/"+e(r[a[n]]);return i}var i=function(t){this.keyCache={},t&&this.replace(t)};i.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},i.prototype.update=function(e,i){for(var n=this,a=0,o=e;a<o.length;a+=1){var s=o[a];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=t.createStyleLayer(s);l._featureFilter=t.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var u=0,c=i;u<c.length;u+=1){var h=c[u];delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var p=0,d=function(t,e){for(var i={},n=0;n<t.length;n++){var a=e&&e[t[n].id]||r(t[n]);e&&(e[t[n].id]=a);var o=i[a];o||(o=i[a]=[]),o.push(t[n])}var s=[];for(var l in i)s.push(i[l]);return s}(t.values(this._layerConfigs),this.keyCache);p<d.length;p+=1){var f=d[p].map((function(t){return n._layers[t.id]})),m=f[0];if("none"!==m.visibility){var v=m.source||"",g=this.familiesBySource[v];g||(g=this.familiesBySource[v]={});var y=m.sourceLayer||"_geojsonTileLayer",_=g[y];_||(_=g[y]=[]),_.push(f)}}};var n=function(e){var r={},i=[];for(var n in e){var a=e[n],o=r[n]={};for(var s in a){var l=a[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};i.push(u),o[s]={rect:u,metrics:l.metrics}}}}var c=t.potpack(i),h=c.w,p=c.h,d=new t.AlphaImage({width:h||1,height:p||1});for(var f in e){var m=e[f];for(var v in m){var g=m[+v];if(g&&0!==g.bitmap.width&&0!==g.bitmap.height){var y=r[f][v].rect;t.AlphaImage.copy(g.bitmap,d,{x:0,y:0},{x:y.x+1,y:y.y+1},g.bitmap)}}}this.image=d,this.positions=r};t.register("GlyphAtlas",n);var a=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies};function o(e,r,i){for(var n=new t.EvaluationParameters(r),a=0,o=e;a<o.length;a+=1)o[a].recalculate(n,i)}a.prototype.parse=function(e,r,i,a,s){var l=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var u=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID);c.bucketLayerIDs=[];var h,p,d,f,m={},v={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},g=r.familiesBySource[this.source];for(var y in g){var _=e.layers[y];if(_){1===_.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var x=u.encode(y),b=[],w=0;w<_.length;w++){var T=_.feature(w);b.push({feature:T,index:w,sourceLayerIndex:x})}for(var S=0,E=g[y];S<E.length;S+=1){var M=E[S],A=M[0];A.minzoom&&this.zoom<Math.floor(A.minzoom)||A.maxzoom&&this.zoom>=A.maxzoom||"none"!==A.visibility&&(o(M,this.zoom,i),(m[A.id]=A.createBucket({index:c.bucketLayerIDs.length,layers:M,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:x,sourceID:this.source})).populate(b,v),c.bucketLayerIDs.push(M.map((function(t){return t.id}))))}}}var C=t.mapObject(v.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(C).length?a.send("getGlyphs",{uid:this.uid,stacks:C},(function(t,e){h||(h=t,p=e,I.call(l))})):p={};var P=Object.keys(v.iconDependencies);P.length?a.send("getImages",{icons:P},(function(t,e){h||(h=t,d=e,I.call(l))})):d={};var L=Object.keys(v.patternDependencies);function I(){if(h)return s(h);if(p&&d&&f){var e=new n(p),r=new t.ImageAtlas(d,f);for(var a in m){var l=m[a];l instanceof t.SymbolBucket?(o(l.layers,this.zoom,i),t.performSymbolLayout(l,p,e.positions,d,r.iconPositions,this.showCollisionBoxes)):l.hasPattern&&(l instanceof t.LineBucket||l instanceof t.FillBucket||l instanceof t.FillExtrusionBucket)&&(o(l.layers,this.zoom,i),l.addFeatures(v,r.patternPositions))}this.status="done",s(null,{buckets:t.values(m).filter((function(t){return!t.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:r,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?e.positions:null})}}L.length?a.send("getImages",{icons:L},(function(t,e){h||(h=t,f=e,I.call(l))})):f={},I.call(this)};var s="undefined"!=typeof performance,l={getEntriesByName:function(t){return!!(s&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(s&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,r){return!!(s&&performance&&performance.measure)&&performance.measure(t,e,r)},clearMarks:function(t){return!!(s&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(s&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},u=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},l.mark(this._marks.start)};function c(e,r){var i=t.getArrayBuffer(e.request,(function(e,i,n,a){e?r(e):i&&r(null,{vectorTile:new t.vectorTile.VectorTile(new t.Protobuf(i)),rawData:i,cacheControl:n,expires:a})}));return function(){i.cancel(),r()}}u.prototype.finish=function(){l.mark(this._marks.end);var t=l.getEntriesByName(this._marks.measure);return 0===t.length&&(l.measure(this._marks.measure,this._marks.start,this._marks.end),t=l.getEntriesByName(this._marks.measure),l.clearMarks(this._marks.start),l.clearMarks(this._marks.end),l.clearMeasures(this._marks.measure)),t},l.Performance=u;var h=function(t,e,r,i){this.actor=t,this.layerIndex=e,this.availableImages=r,this.loadVectorData=i||c,this.loading={},this.loaded={}};h.prototype.loadTile=function(e,r){var i=this,n=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new l.Performance(e.request),s=this.loading[n]=new a(e);s.abort=this.loadVectorData(e,(function(e,a){if(delete i.loading[n],e||!a)return s.status="done",i.loaded[n]=s,r(e);var l=a.rawData,u={};a.expires&&(u.expires=a.expires),a.cacheControl&&(u.cacheControl=a.cacheControl);var c={};if(o){var h=o.finish();h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}s.vectorTile=a.vectorTile,s.parse(a.vectorTile,i.layerIndex,i.availableImages,i.actor,(function(e,i){if(e||!i)return r(e);r(null,t.extend({rawTileData:l.slice(0)},i,u,c))})),i.loaded=i.loaded||{},i.loaded[n]=s}))},h.prototype.reloadTile=function(t,e){var r=this,i=this.loaded,n=t.uid,a=this;if(i&&i[n]){var o=i[n];o.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,i){var n=o.reloadCallback;n&&(delete o.reloadCallback,o.parse(o.vectorTile,a.layerIndex,r.availableImages,a.actor,n)),e(t,i)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},h.prototype.abortTile=function(t,e){var r=this.loading,i=t.uid;r&&r[i]&&r[i].abort&&(r[i].abort(),delete r[i]),e()},h.prototype.removeTile=function(t,e){var r=this.loaded,i=t.uid;r&&r[i]&&delete r[i],e()};var p=function(){this.loaded={}};p.prototype.loadTile=function(e,r){var i=e.uid,n=e.encoding,a=e.rawImageData,o=new t.DEMData(i,a,n);this.loaded=this.loaded||{},this.loaded[i]=o,r(null,o)},p.prototype.removeTile=function(t){var e=this.loaded,r=t.uid;e&&e[r]&&delete e[r]};var d={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function f(t){var e=0;if(t&&t.length>0){e+=Math.abs(m(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(m(t[r]))}return e}function m(t){var e,r,i,n,a,o,s=0,l=t.length;if(l>2){for(o=0;o<l;o++)o===l-2?(i=l-2,n=l-1,a=0):o===l-1?(i=l-1,n=0,a=1):(i=o,n=o+1,a=o+2),e=t[i],r=t[n],s+=(v(t[a][0])-v(e[0]))*Math.sin(v(r[1]));s=s*d.RADIUS*d.RADIUS/2}return s}function v(t){return t*Math.PI/180}var g={geometry:function t(e){var r,i=0;switch(e.type){case"Polygon":return f(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)i+=f(e.coordinates[r]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)i+=t(e.geometries[r]);return i}},ring:m},y=function t(e,r){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(_(t,r)),e;case"GeometryCollection":return e.geometries=e.geometries.map(_(t,r)),e;case"Feature":return e.geometry=t(e.geometry,r),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=x(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(_(x,e))),t}(e,r);default:return e}};function _(t,e){return function(r){return t(r,e)}}function x(t,e){e=!!e,t[0]=b(t[0],e);for(var r=1;r<t.length;r++)t[r]=b(t[r],!e);return t}function b(t,e){return function(t){return g.ring(t)>=0}(t)===e?t:t.reverse()}var w=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,T=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};T.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],r=0,i=this._feature.geometry;r<i.length;r+=1){var n=i[r];e.push([new t.Point$1(n[0],n[1])])}return e}for(var a=[],o=0,s=this._feature.geometry;o<s.length;o+=1){for(var l=[],u=0,c=s[o];u<c.length;u+=1){var h=c[u];l.push(new t.Point$1(h[0],h[1]))}a.push(l)}return a},T.prototype.toGeoJSON=function(t,e,r){return w.call(this,t,e,r)};var S=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};S.prototype.feature=function(t){return new T(this._features[t])};var E=M;function M(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function A(t){return t.type===M.Bytes?t.readVarint()+t.pos:t.pos+1}function C(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function P(t,e,r){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(i);for(var n=r.pos-1;n>=t;n--)r.buf[n+i]=r.buf[n]}function L(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function I(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function k(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function R(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function O(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function z(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function D(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function B(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function F(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function N(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function U(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function V(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}M.Varint=0,M.Fixed64=1,M.Bytes=2,M.Fixed32=5,M.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),n=i>>3,a=this.pos;this.type=7&i,t(n,e,this),this.pos===a&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=N(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=V(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=N(this.buf,this.pos)+4294967296*N(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=N(this.buf,this.pos)+4294967296*V(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var e=t.ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=t.ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(t){var e,r,i=this.buf;return e=127&(r=i[this.pos++]),r<128?e:(e|=(127&(r=i[this.pos++]))<<7,r<128?e:(e|=(127&(r=i[this.pos++]))<<14,r<128?e:(e|=(127&(r=i[this.pos++]))<<21,r<128?e:function(t,e,r){var i,n,a=r.buf;if(n=a[r.pos++],i=(112&n)>>4,n<128)return C(t,i,e);if(n=a[r.pos++],i|=(127&n)<<3,n<128)return C(t,i,e);if(n=a[r.pos++],i|=(127&n)<<10,n<128)return C(t,i,e);if(n=a[r.pos++],i|=(127&n)<<17,n<128)return C(t,i,e);if(n=a[r.pos++],i|=(127&n)<<24,n<128)return C(t,i,e);if(n=a[r.pos++],i|=(1&n)<<31,n<128)return C(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,r){for(var i="",n=e;n<r;){var a,o,s,l=t[n],u=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(a=t[n+1]))&&(u=(31&l)<<6|63&a)<=127&&(u=null):3===c?(a=t[n+1],o=t[n+2],128==(192&a)&&128==(192&o)&&((u=(15&l)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[n+1],o=t[n+2],s=t[n+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),n+=c}return i}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==M.Bytes)return t.push(this.readVarint(e));var r=A(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==M.Bytes)return t.push(this.readSVarint());var e=A(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==M.Bytes)return t.push(this.readBoolean());var e=A(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==M.Bytes)return t.push(this.readFloat());var e=A(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==M.Bytes)return t.push(this.readDouble());var e=A(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==M.Bytes)return t.push(this.readFixed32());var e=A(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==M.Bytes)return t.push(this.readSFixed32());var e=A(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==M.Bytes)return t.push(this.readFixed64());var e=A(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==M.Bytes)return t.push(this.readSFixed64());var e=A(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===M.Varint)for(;this.buf[this.pos++]>127;);else if(e===M.Bytes)this.pos=this.readVarint()+this.pos;else if(e===M.Fixed32)this.pos+=4;else{if(e!==M.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),U(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),U(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),U(this.buf,-1&t,this.pos),U(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),U(this.buf,-1&t,this.pos),U(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,i;if(t>=0?(r=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var i,n,a=0;a<e.length;a++){if((i=e.charCodeAt(a))>55295&&i<57344){if(!n){i>56319||a+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):n=i;continue}if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(t[r++]=239,t[r++]=191,t[r++]=189,n=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=63&i|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&P(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),t.ieee754.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),t.ieee754.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var i=this.pos-r;i>=128&&P(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,r){this.writeTag(t,M.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,L,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,I,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,O,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,k,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,R,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,z,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,D,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,B,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,F,e)},writeBytesField:function(t,e){this.writeTag(t,M.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,M.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,M.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,M.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,M.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,M.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,M.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,M.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,M.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,M.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var j=t.vectorTile.VectorTileFeature,G=H;function H(t,e){this.options=e||{},this.features=t,this.length=t.length}function W(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}H.prototype.feature=function(t){return new W(this.features[t],this.options.extent)},W.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var r=0;r<e.length;r++){for(var i=e[r],n=[],a=0;a<i.length;a++)n.push(new t.Point$1(i[a][0],i[a][1]));this.geometry.push(n)}return this.geometry},W.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,r=-1/0,i=1/0,n=-1/0,a=0;a<t.length;a++)for(var o=t[a],s=0;s<o.length;s++){var l=o[s];e=Math.min(e,l.x),r=Math.max(r,l.x),i=Math.min(i,l.y),n=Math.max(n,l.y)}return[e,i,r,n]},W.prototype.toGeoJSON=j.prototype.toGeoJSON;var q=Z,X=Z,$=function(t,e){e=e||{};var r={};for(var i in t)r[i]=new G(t[i].features,e),r[i].name=i,r[i].version=e.version,r[i].extent=e.extent;return Z({layers:r})},Y=G;function Z(t){var e=new E;return function(t,e){for(var r in t.layers)e.writeMessage(3,J,t.layers[r])}(t,e),e.finish()}function J(t,e){var r;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<t.length;r++)i.feature=t.feature(r),e.writeMessage(2,K,i);var n=i.keys;for(r=0;r<n.length;r++)e.writeStringField(3,n[r]);var a=i.values;for(r=0;r<a.length;r++)e.writeMessage(4,it,a[r])}function K(t,e){var r=t.feature;void 0!==r.id&&e.writeVarintField(1,r.id),e.writeMessage(2,Q,t),e.writeVarintField(3,r.type),e.writeMessage(4,rt,r)}function Q(t,e){var r=t.feature,i=t.keys,n=t.values,a=t.keycache,o=t.valuecache;for(var s in r.properties){var l=a[s];void 0===l&&(i.push(s),l=i.length-1,a[s]=l),e.writeVarint(l);var u=r.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var h=c+":"+u,p=o[h];void 0===p&&(n.push(u),p=n.length-1,o[h]=p),e.writeVarint(p)}}function tt(t,e){return(e<<3)+(7&t)}function et(t){return t<<1^t>>31}function rt(t,e){for(var r=t.loadGeometry(),i=t.type,n=0,a=0,o=r.length,s=0;s<o;s++){var l=r[s],u=1;1===i&&(u=l.length),e.writeVarint(tt(1,u));for(var c=3===i?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==i&&e.writeVarint(tt(2,c-1));var p=l[h].x-n,d=l[h].y-a;e.writeVarint(et(p)),e.writeVarint(et(d)),n+=p,a+=d}3===i&&e.writeVarint(tt(7,1))}}function it(t,e){var r=typeof t;"string"===r?e.writeStringField(1,t):"boolean"===r?e.writeBooleanField(7,t):"number"===r&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function nt(t,e,r,i,n,a){if(!(n-i<=r)){var o=i+n>>1;!function t(e,r,i,n,a,o){for(;a>n;){if(a-n>600){var s=a-n+1,l=i-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1),p=Math.max(n,Math.floor(i-l*c/s+h)),d=Math.min(a,Math.floor(i+(s-l)*c/s+h));t(e,r,i,p,d,o)}var f=r[2*i+o],m=n,v=a;for(at(e,r,n,i),r[2*a+o]>f&&at(e,r,n,a);m<v;){for(at(e,r,m,v),m++,v--;r[2*m+o]<f;)m++;for(;r[2*v+o]>f;)v--}r[2*n+o]===f?at(e,r,n,v):at(e,r,++v,a),v<=i&&(n=v+1),i<=v&&(a=v-1)}}(t,e,o,i,n,a%2),nt(t,e,r,i,o-1,a+1),nt(t,e,r,o+1,n,a+1)}}function at(t,e,r,i){ot(t,r,i),ot(e,2*r,2*i),ot(e,2*r+1,2*i+1)}function ot(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function st(t,e,r,i){var n=t-r,a=e-i;return n*n+a*a}q.fromVectorTileJs=X,q.fromGeojsonVt=$,q.GeoJSONWrapper=Y;var lt=function(t){return t[0]},ut=function(t){return t[1]},ct=function(t,e,r,i,n){void 0===e&&(e=lt),void 0===r&&(r=ut),void 0===i&&(i=64),void 0===n&&(n=Float64Array),this.nodeSize=i,this.points=t;for(var a=t.length<65536?Uint16Array:Uint32Array,o=this.ids=new a(t.length),s=this.coords=new n(2*t.length),l=0;l<t.length;l++)o[l]=l,s[2*l]=e(t[l]),s[2*l+1]=r(t[l]);nt(o,s,i,0,o.length-1,0)};ct.prototype.range=function(t,e,r,i){return function(t,e,r,i,n,a,o){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var h=u.pop(),p=u.pop(),d=u.pop();if(p-d<=o)for(var f=d;f<=p;f++)s=e[2*f],l=e[2*f+1],s>=r&&s<=n&&l>=i&&l<=a&&c.push(t[f]);else{var m=Math.floor((d+p)/2);s=e[2*m],l=e[2*m+1],s>=r&&s<=n&&l>=i&&l<=a&&c.push(t[m]);var v=(h+1)%2;(0===h?r<=s:i<=l)&&(u.push(d),u.push(m-1),u.push(v)),(0===h?n>=s:a>=l)&&(u.push(m+1),u.push(p),u.push(v))}}return c}(this.ids,this.coords,t,e,r,i,this.nodeSize)},ct.prototype.within=function(t,e,r){return function(t,e,r,i,n,a){for(var o=[0,t.length-1,0],s=[],l=n*n;o.length;){var u=o.pop(),c=o.pop(),h=o.pop();if(c-h<=a)for(var p=h;p<=c;p++)st(e[2*p],e[2*p+1],r,i)<=l&&s.push(t[p]);else{var d=Math.floor((h+c)/2),f=e[2*d],m=e[2*d+1];st(f,m,r,i)<=l&&s.push(t[d]);var v=(u+1)%2;(0===u?r-n<=f:i-n<=m)&&(o.push(h),o.push(d-1),o.push(v)),(0===u?r+n>=f:i+n>=m)&&(o.push(d+1),o.push(c),o.push(v))}}return s}(this.ids,this.coords,t,e,r,this.nodeSize)};var ht={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(t){return t}},pt=function(t){this.options=_t(Object.create(ht),t),this.trees=new Array(this.options.maxZoom+1)};function dt(t,e,r,i,n){return{x:t,y:e,zoom:1/0,id:r,parentId:-1,numPoints:i,properties:n}}function ft(t,e){var r=t.geometry.coordinates,i=r[0],n=r[1];return{x:gt(i),y:yt(n),zoom:1/0,index:e,parentId:-1}}function mt(t){return{type:"Feature",id:t.id,properties:vt(t),geometry:{type:"Point",coordinates:[(i=t.x,360*(i-.5)),(e=t.y,r=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var e,r,i}function vt(t){var e=t.numPoints,r=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return _t(_t({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function gt(t){return t/360+.5}function yt(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function _t(t,e){for(var r in e)t[r]=e[r];return t}function xt(t){return t.x}function bt(t){return t.y}function wt(t,e,r,i,n,a){var o=n-r,s=a-i;if(0!==o||0!==s){var l=((t-r)*o+(e-i)*s)/(o*o+s*s);l>1?(r=n,i=a):l>0&&(r+=o*l,i+=s*l)}return(o=t-r)*o+(s=e-i)*s}function Tt(t,e,r,i){var n={id:void 0===t?null:t,type:e,geometry:r,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,r=t.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)St(t,e);else if("Polygon"===r||"MultiLineString"===r)for(var i=0;i<e.length;i++)St(t,e[i]);else if("MultiPolygon"===r)for(i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++)St(t,e[i][n])}(n),n}function St(t,e){for(var r=0;r<e.length;r+=3)t.minX=Math.min(t.minX,e[r]),t.minY=Math.min(t.minY,e[r+1]),t.maxX=Math.max(t.maxX,e[r]),t.maxY=Math.max(t.maxY,e[r+1])}function Et(t,e,r,i){if(e.geometry){var n=e.geometry.coordinates,a=e.geometry.type,o=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=e.id;if(r.promoteId?l=e.properties[r.promoteId]:r.generateId&&(l=i||0),"Point"===a)Mt(n,s);else if("MultiPoint"===a)for(var u=0;u<n.length;u++)Mt(n[u],s);else if("LineString"===a)At(n,s,o,!1);else if("MultiLineString"===a){if(r.lineMetrics){for(u=0;u<n.length;u++)s=[],At(n[u],s,o,!1),t.push(Tt(l,"LineString",s,e.properties));return}Ct(n,s,o,!1)}else if("Polygon"===a)Ct(n,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(u=0;u<e.geometry.geometries.length;u++)Et(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},r,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<n.length;u++){var c=[];Ct(n[u],c,o,!0),s.push(c)}}t.push(Tt(l,a,s,e.properties))}}function Mt(t,e){e.push(Pt(t[0])),e.push(Lt(t[1])),e.push(0)}function At(t,e,r,i){for(var n,a,o=0,s=0;s<t.length;s++){var l=Pt(t[s][0]),u=Lt(t[s][1]);e.push(l),e.push(u),e.push(0),s>0&&(o+=i?(n*u-l*a)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(u-a,2))),n=l,a=u}var c=e.length-3;e[2]=1,function t(e,r,i,n){for(var a,o=n,s=i-r>>1,l=i-r,u=e[r],c=e[r+1],h=e[i],p=e[i+1],d=r+3;d<i;d+=3){var f=wt(e[d],e[d+1],u,c,h,p);if(f>o)a=d,o=f;else if(f===o){var m=Math.abs(d-s);m<l&&(a=d,l=m)}}o>n&&(a-r>3&&t(e,r,a,n),e[a+2]=o,i-a>3&&t(e,a,i,n))}(e,0,c,r),e[c+2]=1,e.size=Math.abs(o),e.start=0,e.end=e.size}function Ct(t,e,r,i){for(var n=0;n<t.length;n++){var a=[];At(t[n],a,r,i),e.push(a)}}function Pt(t){return t/360+.5}function Lt(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function It(t,e,r,i,n,a,o,s){if(i/=e,a>=(r/=e)&&o<i)return t;if(o<r||a>=i)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.type,d=0===n?c.minX:c.minY,f=0===n?c.maxX:c.maxY;if(d>=r&&f<i)l.push(c);else if(!(f<r||d>=i)){var m=[];if("Point"===p||"MultiPoint"===p)kt(h,m,r,i,n);else if("LineString"===p)Rt(h,m,r,i,n,!1,s.lineMetrics);else if("MultiLineString"===p)zt(h,m,r,i,n,!1);else if("Polygon"===p)zt(h,m,r,i,n,!0);else if("MultiPolygon"===p)for(var v=0;v<h.length;v++){var g=[];zt(h[v],g,r,i,n,!0),g.length&&m.push(g)}if(m.length){if(s.lineMetrics&&"LineString"===p){for(v=0;v<m.length;v++)l.push(Tt(c.id,p,m[v],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push(Tt(c.id,p,m,c.tags))}}}return l.length?l:null}function kt(t,e,r,i,n){for(var a=0;a<t.length;a+=3){var o=t[a+n];o>=r&&o<=i&&(e.push(t[a]),e.push(t[a+1]),e.push(t[a+2]))}}function Rt(t,e,r,i,n,a,o){for(var s,l,u=Ot(t),c=0===n?Bt:Ft,h=t.start,p=0;p<t.length-3;p+=3){var d=t[p],f=t[p+1],m=t[p+2],v=t[p+3],g=t[p+4],y=0===n?d:f,_=0===n?v:g,x=!1;o&&(s=Math.sqrt(Math.pow(d-v,2)+Math.pow(f-g,2))),y<r?_>r&&(l=c(u,d,f,v,g,r),o&&(u.start=h+s*l)):y>i?_<i&&(l=c(u,d,f,v,g,i),o&&(u.start=h+s*l)):Dt(u,d,f,m),_<r&&y>=r&&(l=c(u,d,f,v,g,r),x=!0),_>i&&y<=i&&(l=c(u,d,f,v,g,i),x=!0),!a&&x&&(o&&(u.end=h+s*l),e.push(u),u=Ot(t)),o&&(h+=s)}var b=t.length-3;d=t[b],f=t[b+1],m=t[b+2],(y=0===n?d:f)>=r&&y<=i&&Dt(u,d,f,m),b=u.length-3,a&&b>=3&&(u[b]!==u[0]||u[b+1]!==u[1])&&Dt(u,u[0],u[1],u[2]),u.length&&e.push(u)}function Ot(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function zt(t,e,r,i,n,a){for(var o=0;o<t.length;o++)Rt(t[o],e,r,i,n,a,!1)}function Dt(t,e,r,i){t.push(e),t.push(r),t.push(i)}function Bt(t,e,r,i,n,a){var o=(a-e)/(i-e);return t.push(a),t.push(r+(n-r)*o),t.push(1),o}function Ft(t,e,r,i,n,a){var o=(a-r)/(n-r);return t.push(e+(i-e)*o),t.push(a),t.push(1),o}function Nt(t,e){for(var r=[],i=0;i<t.length;i++){var n,a=t[i],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)n=Ut(a.geometry,e);else if("MultiLineString"===o||"Polygon"===o){n=[];for(var s=0;s<a.geometry.length;s++)n.push(Ut(a.geometry[s],e))}else if("MultiPolygon"===o)for(n=[],s=0;s<a.geometry.length;s++){for(var l=[],u=0;u<a.geometry[s].length;u++)l.push(Ut(a.geometry[s][u],e));n.push(l)}r.push(Tt(a.id,o,n,a.tags))}return r}function Ut(t,e){var r=[];r.size=t.size,void 0!==t.start&&(r.start=t.start,r.end=t.end);for(var i=0;i<t.length;i+=3)r.push(t[i]+e,t[i+1],t[i+2]);return r}function Vt(t,e){if(t.transformed)return t;var r,i,n,a=1<<t.z,o=t.x,s=t.y;for(r=0;r<t.features.length;r++){var l=t.features[r],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(i=0;i<u.length;i+=2)l.geometry.push(jt(u[i],u[i+1],e,a,o,s));else for(i=0;i<u.length;i++){var h=[];for(n=0;n<u[i].length;n+=2)h.push(jt(u[i][n],u[i][n+1],e,a,o,s));l.geometry.push(h)}}return t.transformed=!0,t}function jt(t,e,r,i,n,a){return[Math.round(r*(t*i-n)),Math.round(r*(e*i-a))]}function Gt(t,e,r,i,n){for(var a=e===n.maxZoom?0:n.tolerance/((1<<e)*n.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){o.numFeatures++,Ht(o,t[s],a,n);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<o.minX&&(o.minX=l),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),h>o.maxY&&(o.maxY=h)}return o}function Ht(t,e,r,i){var n=e.geometry,a=e.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<n.length;s+=3)o.push(n[s]),o.push(n[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)Wt(o,n,t,r,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<n.length;s++)Wt(o,n[s],t,r,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<n.length;l++){var u=n[l];for(s=0;s<u.length;s++)Wt(o,u[s],t,r,!0,0===s)}if(o.length){var c=e.tags||null;if("LineString"===a&&i.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=n.start/n.size,c.mapbox_clip_end=n.end/n.size}var p={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}function Wt(t,e,r,i,n,a){var o=i*i;if(i>0&&e.size<(n?o:i))r.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>o)&&(r.numSimplified++,s.push(e[l]),s.push(e[l+1])),r.numPoints++;n&&function(t,e){for(var r=0,i=0,n=t.length,a=n-2;i<n;a=i,i+=2)r+=(t[i]-t[a])*(t[i+1]+t[a+1]);if(r>0===e)for(i=0,n=t.length;i<n/2;i+=2){var o=t[i],s=t[i+1];t[i]=t[n-2-i],t[i+1]=t[n-1-i],t[n-2-i]=o,t[n-1-i]=s}}(s,a),t.push(s)}}function qt(t,e){var r=(e=this.options=function(t,e){for(var r in e)t[r]=e[r];return t}(Object.create(this.options),e)).debug;if(r&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var r=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)Et(r,t.features[i],e,i);else"Feature"===t.type?Et(r,t,e):Et(r,{geometry:t},e);return r}(t,e);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e){var r=e.buffer/e.extent,i=t,n=It(t,1,-1-r,r,0,-1,2,e),a=It(t,1,1-r,2+r,0,-1,2,e);return(n||a)&&(i=It(t,1,-r,1+r,0,-1,2,e)||[],n&&(i=Nt(n,1).concat(i)),a&&(i=i.concat(Nt(a,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),r&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Xt(t,e,r){return 32*((1<<t)*r+e)+t}function $t(t,e){var r=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return e(null,null);var n=new S(i.features),a=q(n);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),e(null,{vectorTile:n,rawData:a.buffer})}pt.prototype.load=function(t){var e=this.options,r=e.log,i=e.minZoom,n=e.maxZoom,a=e.nodeSize;r&&console.time("total time");var o="prepare "+t.length+" points";r&&console.time(o),this.points=t;for(var s=[],l=0;l<t.length;l++)t[l].geometry&&s.push(ft(t[l],l));this.trees[n+1]=new ct(s,xt,bt,a,Float32Array),r&&console.timeEnd(o);for(var u=n;u>=i;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new ct(s,xt,bt,a,Float32Array),r&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return r&&console.timeEnd("total time"),this},pt.prototype.getClusters=function(t,e){var r=((t[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[1])),n=180===t[2]?180:((t[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)r=-180,n=180;else if(r>n){var o=this.getClusters([r,i,180,a],e),s=this.getClusters([-180,i,n,a],e);return o.concat(s)}for(var l=this.trees[this._limitZoom(e)],u=[],c=0,h=l.range(gt(r),yt(a),gt(n),yt(i));c<h.length;c+=1){var p=h[c],d=l.points[p];u.push(d.numPoints?mt(d):this.points[d.index])}return u},pt.prototype.getChildren=function(t){var e=t>>5,r=t%32,i="No cluster with the specified id.",n=this.trees[r];if(!n)throw new Error(i);var a=n.points[e];if(!a)throw new Error(i);for(var o=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=[],l=0,u=n.within(a.x,a.y,o);l<u.length;l+=1){var c=u[l],h=n.points[c];h.parentId===t&&s.push(h.numPoints?mt(h):this.points[h.index])}if(0===s.length)throw new Error(i);return s},pt.prototype.getLeaves=function(t,e,r){e=e||10,r=r||0;var i=[];return this._appendLeaves(i,t,e,r,0),i},pt.prototype.getTile=function(t,e,r){var i=this.trees[this._limitZoom(t)],n=Math.pow(2,t),a=this.options,o=a.extent,s=a.radius/o,l=(r-s)/n,u=(r+1+s)/n,c={features:[]};return this._addTileFeatures(i.range((e-s)/n,l,(e+1+s)/n,u),i.points,e,r,n,c),0===e&&this._addTileFeatures(i.range(1-s/n,l,1,u),i.points,n,r,n,c),e===n-1&&this._addTileFeatures(i.range(0,l,s/n,u),i.points,-1,r,n,c),c.features.length?c:null},pt.prototype.getClusterExpansionZoom=function(t){for(var e=t%32-1;e<=this.options.maxZoom;){var r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e},pt.prototype._appendLeaves=function(t,e,r,i,n){for(var a=0,o=this.getChildren(e);a<o.length;a+=1){var s=o[a],l=s.properties;if(l&&l.cluster?n+l.point_count<=i?n+=l.point_count:n=this._appendLeaves(t,l.cluster_id,r,i,n):n<i?n++:t.push(s),t.length===r)break}return n},pt.prototype._addTileFeatures=function(t,e,r,i,n,a){for(var o=0,s=t;o<s.length;o+=1){var l=e[s[o]],u={type:1,geometry:[[Math.round(this.options.extent*(l.x*n-r)),Math.round(this.options.extent*(l.y*n-i))]],tags:l.numPoints?vt(l):this.points[l.index].properties},c=l.numPoints?l.id:this.points[l.index].id;void 0!==c&&(u.id=c),a.features.push(u)}},pt.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},pt.prototype._cluster=function(t,e){for(var r=[],i=this.options,n=i.radius,a=i.extent,o=i.reduce,s=n/(a*Math.pow(2,e)),l=0;l<t.length;l++){var u=t[l];if(!(u.zoom<=e)){u.zoom=e;for(var c=this.trees[e+1],h=c.within(u.x,u.y,s),p=u.numPoints||1,d=u.x*p,f=u.y*p,m=o&&p>1?this._map(u,!0):null,v=(l<<5)+(e+1),g=0,y=h;g<y.length;g+=1){var _=y[g],x=c.points[_];if(!(x.zoom<=e)){x.zoom=e;var b=x.numPoints||1;d+=x.x*b,f+=x.y*b,p+=b,x.parentId=v,o&&(m||(m=this._map(u,!0)),o(m,this._map(x)))}}1===p?r.push(u):(u.parentId=v,r.push(dt(d/p,f/p,v,p,m)))}}return r},pt.prototype._map=function(t,e){if(t.numPoints)return e?_t({},t.properties):t.properties;var r=this.points[t.index].properties,i=this.options.map(r);return e&&i===r?_t({},i):i},qt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},qt.prototype.splitTile=function(t,e,r,i,n,a,o){for(var s=[t,e,r,i],l=this.options,u=l.debug;s.length;){i=s.pop(),r=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=Xt(e,r,i),p=this.tiles[h];if(!p&&(u>1&&console.time("creation"),p=this.tiles[h]=Gt(t,e,r,i,l),this.tileCoords.push({z:e,x:r,y:i}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,r,i,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=t,n){if(e===l.maxZoom||e===n)continue;var f=1<<n-e;if(r!==Math.floor(a/f)||i!==Math.floor(o/f))continue}else if(e===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==t.length){u>1&&console.time("clipping");var m,v,g,y,_,x,b=.5*l.buffer/l.extent,w=.5-b,T=.5+b,S=1+b;m=v=g=y=null,_=It(t,c,r-b,r+T,0,p.minX,p.maxX,l),x=It(t,c,r+w,r+S,0,p.minX,p.maxX,l),t=null,_&&(m=It(_,c,i-b,i+T,1,p.minY,p.maxY,l),v=It(_,c,i+w,i+S,1,p.minY,p.maxY,l),_=null),x&&(g=It(x,c,i-b,i+T,1,p.minY,p.maxY,l),y=It(x,c,i+w,i+S,1,p.minY,p.maxY,l),x=null),u>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*r,2*i),s.push(v||[],e+1,2*r,2*i+1),s.push(g||[],e+1,2*r+1,2*i),s.push(y||[],e+1,2*r+1,2*i+1)}}},qt.prototype.getTile=function(t,e,r){var i=this.options,n=i.extent,a=i.debug;if(t<0||t>24)return null;var o=1<<t,s=Xt(t,e=(e%o+o)%o,r);if(this.tiles[s])return Vt(this.tiles[s],n);a>1&&console.log("drilling down to z%d-%d-%d",t,e,r);for(var l,u=t,c=e,h=r;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[Xt(u,c,h)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",u,c,h),a>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,r),a>1&&console.timeEnd("drilling down"),this.tiles[s]?Vt(this.tiles[s],n):null):null};var Yt=function(e){function r(t,r,i,n){e.call(this,t,r,i,$t),n&&(this.loadGeoJSON=n)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},r.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var r=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var n=!!(i&&i.request&&i.request.collectResourceTiming)&&new l.Performance(i.request);this.loadGeoJSON(i,(function(a,o){if(a||!o)return r(a);if("object"!=typeof o)return r(new Error("Input data given to '"+i.source+"' is not a valid GeoJSON object."));y(o,!0);try{e._geoJSONIndex=i.cluster?new pt(function(e){var r=e.superclusterOptions,i=e.clusterProperties;if(!i||!r)return r;for(var n={},a={},o={accumulated:null,zoom:0},s={properties:null},l=Object.keys(i),u=0,c=l;u<c.length;u+=1){var h=c[u],p=i[h],d=p[0],f=p[1],m=t.createExpression(f),v=t.createExpression("string"==typeof d?[d,["accumulated"],["get",h]]:d);n[h]=m.value,a[h]=v.value}return r.map=function(t){s.properties=t;for(var e={},r=0,i=l;r<i.length;r+=1){var a=i[r];e[a]=n[a].evaluate(o,s)}return e},r.reduce=function(t,e){s.properties=e;for(var r=0,i=l;r<i.length;r+=1){var n=i[r];o.accumulated=t[n],t[n]=a[n].evaluate(o,s)}},r}(i)).load(o.features):function(t,e){return new qt(t,e)}(o,i.geojsonVtOptions)}catch(a){return r(a)}e.loaded={};var s={};if(n){var l=n.finish();l&&(s.resourceTiming={},s.resourceTiming[i.source]=JSON.parse(JSON.stringify(l)))}r(null,s)}))}},r.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},r.prototype.reloadTile=function(t,r){var i=this.loaded,n=t.uid;return i&&i[n]?e.prototype.reloadTile.call(this,t,r):this.loadTile(t,r)},r.prototype.loadGeoJSON=function(e,r){if(e.request)t.getJSON(e.request,r);else{if("string"!=typeof e.data)return r(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return r(null,JSON.parse(e.data))}catch(t){return r(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},r.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},r.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},r.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},r.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},r}(h),Zt=function(e){var r=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:h,geojson:Yt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(r.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');r.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isLoaded())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Zt.prototype.setReferrer=function(t,e){this.referrer=e},Zt.prototype.setImages=function(t,e,r){this.availableImages[t]=e,r()},Zt.prototype.setLayers=function(t,e,r){this.getLayerIndex(t).replace(e),r()},Zt.prototype.updateLayers=function(t,e,r){this.getLayerIndex(t).update(e.layers,e.removedIds),r()},Zt.prototype.loadTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).loadTile(e,r)},Zt.prototype.loadDEMTile=function(t,e,r){this.getDEMWorkerSource(t,e.source).loadTile(e,r)},Zt.prototype.reloadTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).reloadTile(e,r)},Zt.prototype.abortTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).abortTile(e,r)},Zt.prototype.removeTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).removeTile(e,r)},Zt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Zt.prototype.removeSource=function(t,e,r){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,r):r()}},Zt.prototype.loadWorkerSource=function(t,e,r){try{this.self.importScripts(e.url),r()}catch(t){r(t.toString())}},Zt.prototype.loadRTLTextPlugin=function(e,r,i){try{t.plugin.isLoaded()||(this.self.importScripts(r),i(t.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+r)))}catch(t){i(t.toString())}},Zt.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},Zt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},Zt.prototype.getWorkerSource=function(t,e,r){var i=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][r]){var n={send:function(e,r,n){i.actor.send(e,r,n,t)}};this.workerSources[t][e][r]=new this.workerSourceTypes[e](n,this.getLayerIndex(t),this.getAvailableImages(t))}return this.workerSources[t][e][r]},Zt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new p),this.demWorkerSources[t][e]},Zt.prototype.enforceCacheSizeLimit=function(e,r){t.enforceCacheSizeLimit(r)},"undefined"!=typeof WorkerGlobalScope&&void 0!==t.window&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new Zt(t.window)),Zt})),i(["./shared"],(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,r=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(r);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===r[t]&&(r[t]=function(t){var r=document.createElement("canvas"),i=Object.create(e.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,r.probablySupportsContext?r.probablySupportsContext("webgl",i)||r.probablySupportsContext("experimental-webgl",i):r.supportsContext?r.supportsContext("webgl",i)||r.supportsContext("experimental-webgl",i):r.getContext("webgl",i)||r.getContext("experimental-webgl",i)}(t)),r[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var r={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),r={create:function(e,r,i){var n=t.window.document.createElement(e);return void 0!==r&&(n.className=r),i&&i.appendChild(n),n},createNS:function(e,r){return t.window.document.createElementNS(e,r)}},i=t.window.document.documentElement.style;function n(t){if(!i)return t[0];for(var e=0;e<t.length;e++)if(t[e]in i)return t[e];return t[0]}var a,o=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);r.disableDrag=function(){i&&o&&(a=i[o],i[o]="none")},r.enableDrag=function(){i&&o&&(i[o]=a)};var s=n(["transform","WebkitTransform"]);r.setTransform=function(t,e){t.style[s]=e};var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",u,u),t.window.removeEventListener("test",u,u)}catch(t){l=!1}r.addEventListener=function(t,e,r,i){void 0===i&&(i={}),"passive"in i&&l?t.addEventListener(e,r,i):t.addEventListener(e,r,i.capture)},r.removeEventListener=function(t,e,r,i){void 0===i&&(i={}),"passive"in i&&l?t.removeEventListener(e,r,i):t.removeEventListener(e,r,i.capture)};var c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};function h(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}r.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",c,!0)}),0)},r.mousePos=function(e,r){var i=e.getBoundingClientRect(),n=t.window.TouchEvent&&r instanceof t.window.TouchEvent?r.touches[0]:r;return new t.Point(n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop)},r.touchPos=function(e,r){for(var i=e.getBoundingClientRect(),n=[],a="touchend"===r.type?r.changedTouches:r.touches,o=0;o<a.length;o++)n.push(new t.Point(a[o].clientX-i.left-e.clientLeft,a[o].clientY-i.top-e.clientTop));return n},r.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},r.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var p=function(e){function r(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.isLoaded=function(){return this.loaded},r.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,r=this.requestors;e<r.length;e+=1){var i=r[e],n=i.ids,a=i.callback;this._notify(n,a)}this.requestors=[]}},r.prototype.getImage=function(t){return this.images[t]},r.prototype.addImage=function(t,e){this.images[t]=e},r.prototype.updateImage=function(t,e){var r=this.images[t];e.version=r.version+1,this.images[t]=e,this.updatedImages[t]=!0},r.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},r.prototype.listImages=function(){return Object.keys(this.images)},r.prototype.getImages=function(t,e){var r=!0;if(!this.isLoaded())for(var i=0,n=t;i<n.length;i+=1){var a=n[i];this.images[a]||(r=!1)}this.isLoaded()||r?this._notify(t,e):this.requestors.push({ids:t,callback:e})},r.prototype._notify=function(e,r){for(var i={},n=0,a=e;n<a.length;n+=1){var o=a[n];this.images[o]||this.fire(new t.Event("styleimagemissing",{id:o}));var s=this.images[o];s?i[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}r(null,i)},r.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},r.prototype.getPattern=function(e){var r=this.patterns[e],i=this.getImage(e);if(!i)return null;if(r&&r.position.version===i.version)return r.position;if(r)r.position.version=i.version;else{var n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},a=new t.ImagePosition(n,i);this.patterns[e]={bin:n,position:a}}return this._updatePatternAtlas(),this.patterns[e].position},r.prototype.bind=function(e){var r=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)},r.prototype._updatePatternAtlas=function(){var e=[];for(var r in this.patterns)e.push(this.patterns[r].bin);var i=t.potpack(e),n=i.w,a=i.h,o=this.atlasImage;for(var s in o.resize({width:n||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,h=this.images[s].data,p=h.width,d=h.height;t.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c},{width:p,height:d}),t.RGBAImage.copy(h,o,{x:0,y:d-1},{x:u,y:c-1},{width:p,height:1}),t.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c+d},{width:p,height:1}),t.RGBAImage.copy(h,o,{x:p-1,y:0},{x:u-1,y:c},{width:1,height:d}),t.RGBAImage.copy(h,o,{x:0,y:0},{x:u+p,y:c},{width:1,height:d})}this.dirty=!0},r.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},r.prototype.dispatchRenderCallbacks=function(t){for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var n=this.images[i];h(n)&&this.updateImage(i,n)}}},r}(t.Evented),d=v,f=v,m=1e20;function v(t,e,r,i,n,a){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=n||"sans-serif",this.fontWeight=a||"normal",this.radius=r||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(t,e,r,i,n,a,o){for(var s=0;s<e;s++){for(var l=0;l<r;l++)i[l]=t[l*e+s];for(y(i,n,a,o,r),l=0;l<r;l++)t[l*e+s]=n[l]}for(l=0;l<r;l++){for(s=0;s<e;s++)i[s]=t[l*e+s];for(y(i,n,a,o,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(n[s])}}function y(t,e,r,i,n){r[0]=0,i[0]=-m,i[1]=+m;for(var a=1,o=0;a<n;a++){for(var s=(t[a]+a*a-(t[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);s<=i[o];)o--,s=(t[a]+a*a-(t[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);r[++o]=a,i[o]=s,i[o+1]=+m}for(a=0,o=0;a<n;a++){for(;i[o+1]<a;)o++;e[a]=(a-r[o])*(a-r[o])+t[r[o]]}}v.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var n=e.data[4*i+3]/255;this.gridOuter[i]=1===n?0:0===n?m:Math.pow(Math.max(0,.5-n),2),this.gridInner[i]=1===n?m:0===n?0:Math.pow(Math.max(0,n-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var a=this.gridOuter[i]-this.gridInner[i];r[i]=Math.max(0,Math.min(255,Math.round(255-255*(a/this.radius+this.cutoff))))}return r},d.default=f;var _=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};_.prototype.setURL=function(t){this.url=t},_.prototype.getGlyphs=function(e,r){var i=this,n=[];for(var a in e)for(var o=0,s=e[a];o<s.length;o+=1){var l=s[o];n.push({stack:a,id:l})}t.asyncAll(n,(function(t,e){var r=t.stack,n=t.id,a=i.entries[r];a||(a=i.entries[r]={glyphs:{},requests:{}});var o=a.glyphs[n];if(void 0===o){if(o=i._tinySDF(a,r,n))return a.glyphs[n]=o,void e(null,{stack:r,id:n,glyph:o});var s=Math.floor(n/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var l=a.requests[s];l||(l=a.requests[s]=[],_.loadGlyphRange(r,s,i.url,i.requestManager,(function(t,e){if(e)for(var r in e)i._doesCharSupportLocalGlyph(+r)||(a.glyphs[+r]=e[+r]);for(var n=0,o=l;n<o.length;n+=1)(0,o[n])(t,e);delete a.requests[s]}))),l.push((function(t,i){t?e(t):i&&e(null,{stack:r,id:n,glyph:i[n]||null})}))}}else e(null,{stack:r,id:n,glyph:o})}),(function(t,e){if(t)r(t);else if(e){for(var i={},n=0,a=e;n<a.length;n+=1){var o=a[n],s=o.stack,l=o.id,u=o.glyph;(i[s]||(i[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}r(null,i)}}))},_.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},_.prototype._tinySDF=function(e,r,i){var n=this.localIdeographFontFamily;if(n&&this._doesCharSupportLocalGlyph(i)){var a=e.tinySDF;if(!a){var o="400";/bold/i.test(r)?o="900":/medium/i.test(r)?o="500":/light/i.test(r)&&(o="200"),a=e.tinySDF=new _.TinySDF(24,3,8,.25,n,o)}return{id:i,bitmap:new t.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},_.loadGlyphRange=function(e,r,i,n,a){var o=256*r,s=o+255,l=n.transformRequest(n.normalizeGlyphsURL(i).replace("{fontstack}",e).replace("{range}",o+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,(function(e,r){if(e)a(e);else if(r){for(var i={},n=0,o=t.parseGlyphPBF(r);n<o.length;n+=1){var s=o[n];i[s.id]=s}a(null,i)}}))},_.TinySDF=d;var x=function(){this.specification=t.styleSpec.light.position};x.prototype.possiblyEvaluate=function(e,r){return t.sphericalToCartesian(e.expression.evaluate(r))},x.prototype.interpolate=function(e,r,i){return{x:t.number(e.x,r.x,i),y:t.number(e.y,r.y,i),z:t.number(e.z,r.z,i)}};var b=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new x,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),w=function(e){function r(r){e.call(this),this._transitionable=new t.Transitionable(b),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getLight=function(){return this._transitionable.serialize()},r.prototype.setLight=function(e,r){if(void 0===r&&(r={}),!this._validate(t.validateLight,e,r))for(var i in e){var n=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),n):this._transitionable.setValue(i,n)}},r.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},r.prototype.hasTransition=function(){return this._transitioning.hasTransition()},r.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},r.prototype._validate=function(e,r,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},r}(t.Evented),T=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};T.prototype.getDash=function(t,e){var r=t.join(",")+String(e);return this.positions[r]||(this.positions[r]=this.addDash(t,e)),this.positions[r]},T.prototype.addDash=function(e,r){var i=r?7:0,n=2*i+1;if(this.nextRow+n>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var a=0,o=0;o<e.length;o++)a+=e[o];for(var s=this.width/a,l=s/2,u=e.length%2==1,c=-i;c<=i;c++)for(var h=this.nextRow+i+c,p=this.width*h,d=u?-e[e.length-1]:0,f=e[0],m=1,v=0;v<this.width;v++){for(;f<v/s;)d=f,f+=e[m],u&&m===e.length-1&&(f+=e[0]),m++;var g=Math.abs(v-d*s),y=Math.abs(v-f*s),_=Math.min(g,y),x=m%2==1,b=void 0;if(r){var w=i?c/i*(l+1):0;if(x){var T=l-Math.abs(w);b=Math.sqrt(_*_+T*T)}else b=l-Math.sqrt(_*_+w*w)}else b=(x?1:-1)*_;this.data[3+4*(p+v)]=Math.max(0,Math.min(255,b+128))}var S={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:a};return this.nextRow+=n,this.dirty=!0,S},T.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var S=function e(r,i){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var n=this.workerPool.acquire(this.id),a=0;a<n.length;a++){var o=n[a],s=new e.Actor(o,i,this.id);s.name="Worker "+a,this.actors.push(s)}};function E(e,r,i){var n=function(n,a){if(n)return i(n);if(a){var o=t.pick(t.extend(a,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(o.vectorLayers=a.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(t){return t.id}))),e.url&&(o.tiles=r.canonicalizeTileset(o,e.url)),i(null,o)}};return e.url?t.getJSON(r.transformRequest(r.normalizeSourceURL(e.url),t.ResourceType.Source),n):t.browser.frame((function(){return n(null,e)}))}S.prototype.broadcast=function(e,r,i){i=i||function(){},t.asyncAll(this.actors,(function(t,i){t.send(e,r,i)}),i)},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},S.Actor=t.Actor;var M=function(e,r,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=r||0,this.maxzoom=i||24};M.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},M.prototype.contains=function(e){var r=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*r),n=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*r),a=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*r),o=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*r);return e.x>=i&&e.x<a&&e.y>=n&&e.y<o};var A=function(e){function r(r,i,n,a){if(e.call(this),this.id=r,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,(function(r,i){e._tileJSONRequest=null,e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new M(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},r.prototype.loaded=function(){return this._loaded},r.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},r.prototype.serialize=function(){return t.extend({},this._options)},r.prototype.loadTile=function(e,r){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,null),n={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function a(i,n){return delete e.request,e.aborted?r(null):i&&404!==i.status?r(i):(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}n.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=r:e.request=e.actor.send("reloadTile",n,a.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",n,a.bind(this)))},r.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},r.prototype.unloadTile=function(t){t.unloadVectorData(),t.clearMask(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},r.prototype.hasTransition=function(){return!1},r}(t.Evented),C=function(e){function r(r,i,n,a){e.call(this),this.id=r,this.dispatcher=n,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,(function(r,i){e._tileJSONRequest=null,e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new M(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},r.prototype.loaded=function(){return this._loaded},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},r.prototype.serialize=function(){return t.extend({},this._options)},r.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},r.prototype.loadTile=function(e,r){var i=this,n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),(function(n,a){if(delete e.request,e.aborted)e.state="unloaded",r(null);else if(n)e.state="errored",r(n);else if(a){i.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;var o=i.map.painter.context,s=o.gl;e.texture=i.map.painter.getTileTexture(a.width),e.texture?e.texture.update(a,{useMipmap:!0}):(e.texture=new t.Texture(o,a,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(i.dispatcher),r(null)}}))},r.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},r.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),t.clearMask(),e()},r.prototype.hasTransition=function(){return!1},r}(t.Evented),P=function(e){function r(r,i,n,a){e.call(this,r,i,n,a),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},r.prototype.loadTile=function(e,r){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);function n(t,i){t&&(e.state="errored",r(t)),i&&(e.dem=i,e.needsHillshadePrepare=!0,e.state="loaded",r(null))}e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,a){if(delete e.request,e.aborted)e.state="unloaded",r(null);else if(i)e.state="errored",r(i);else if(a){this.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;var o=t.browser.getImageData(a,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,n.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},r.prototype._getNeighboringTiles=function(e){var r=e.canonical,i=Math.pow(2,r.z),n=(r.x-1+i)%i,a=0===r.x?e.wrap-1:e.wrap,o=(r.x+1+i)%i,s=r.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,a,r.z,n,r.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,r.z,o,r.y).key]={backfilled:!1},r.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,a,r.z,n,r.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,r.z,o,r.y-1).key]={backfilled:!1}),r.y+1<i&&(l[new t.OverscaledTileID(e.overscaledZ,a,r.z,n,r.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,r.z,o,r.y+1).key]={backfilled:!1}),l},r.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.clearMask(),t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},r}(C),L=function(e){function r(r,i,n,a){e.call(this),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(a),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution);var o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(i.clusterRadius||50)*o,log:!1},clusterProperties:i.clusterProperties},i.workerOptions)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(r){if(r)e.fire(new t.ErrorEvent(r));else{var i={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",i))}}))},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.setData=function(e){var r=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)r.fire(new t.ErrorEvent(e));else{var i={dataType:"source",sourceDataType:"content"};r._collectResourceTiming&&r._resourceTiming&&r._resourceTiming.length>0&&(i.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new t.Event("data",i))}})),this},r.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},r.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},r.prototype.getClusterLeaves=function(t,e,r,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:r},i),this},r.prototype._updateWorkerData=function(e){var r=this;this._loaded=!1;var i=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(i.request=this.map._requestManager.transformRequest(t.browser.resolveURL(n),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(n),this.actor.send(this.type+".loadData",i,(function(t,n){r._removed||n&&n.abandoned||(r._loaded=!0,n&&n.resourceTiming&&n.resourceTiming[r.id]&&(r._resourceTiming=n.resourceTiming[r.id].slice(0)),r.actor.send(r.type+".coalesce",{source:i.source},null),e(t))}))},r.prototype.loaded=function(){return this._loaded},r.prototype.loadTile=function(e,r){var i=this,n=e.actor?"reloadTile":"loadTile";e.actor=this.actor;var a={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.request=this.actor.send(n,a,(function(t,a){return delete e.request,e.unloadVectorData(),e.aborted?r(null):t?r(t):(e.loadVectorData(a,i.map.painter,"reloadTile"===n),r(null))}))},r.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},r.prototype.unloadTile=function(t){t.unloadVectorData(),t.clearMask(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},r.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},r.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},r.prototype.hasTransition=function(){return!1},r}(t.Evented),I=function(e){function r(t,r,i,n){e.call(this),this.id=t,this.dispatcher=i,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=r}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(e,r){var i=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(n,a){i._loaded=!0,n?i.fire(new t.ErrorEvent(n)):a&&(i.image=a,e&&(i.coordinates=e),r&&r(),i._finishLoading())}))},r.prototype.loaded=function(){return this._loaded},r.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},r.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.setCoordinates=function(e){var r=this;this.coordinates=e;var i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var r=1/0,i=1/0,n=-1/0,a=-1/0,o=0,s=e;o<s.length;o+=1){var l=s[o];r=Math.min(r,l.x),i=Math.min(i,l.y),n=Math.max(n,l.x),a=Math.max(a,l.y)}var u=n-r,c=a-i,h=Math.max(u,c),p=Math.max(0,Math.floor(-Math.log(h)/Math.LN2)),d=Math.pow(2,p);return new t.CanonicalTileID(p,Math.floor((r+n)/2*d),Math.floor((i+a)/2*d))}(i),this.minzoom=this.maxzoom=this.tileID.z;var n=i.map((function(t){return r.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},r.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,r=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[i];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},r.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},r.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},r.prototype.hasTransition=function(){return!1},r}(t.Evented),k=function(e){function r(t,r,i,n){e.call(this,t,r,i,n),this.roundZoom=!0,this.type="video",this.options=r}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1;var r=this.options;this.urls=[];for(var i=0,n=r.urls;i<n.length;i+=1){var a=n[i];this.urls.push(this.map._requestManager.transformRequest(a,t.ResourceType.Source).url)}t.getVideo(this.urls,(function(r,i){e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):i&&(e.video=i,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},r.prototype.pause=function(){this.video&&this.video.pause()},r.prototype.play=function(){this.video&&this.video.play()},r.prototype.seek=function(e){if(this.video){var r=this.video.seekable;e<r.start(0)||e>r.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("Playback for this video can be set only between the "+r.start(0)+" and "+r.end(0)+"-second mark."))):this.video.currentTime=e}},r.prototype.getVideo=function(){return this.video},r.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},r.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,r=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[i];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},r.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},r.prototype.hasTransition=function(){return this.video&&!this.video.paused},r}(I),R=function(e){function r(r,i,n,a){e.call(this,r,i,n,a),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},r.prototype.getCanvas=function(){return this.canvas},r.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},r.prototype.onRemove=function(){this.pause()},r.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var r=this.map.painter.context,i=r.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(r,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var a=this.tiles[n];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},r.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},r.prototype.hasTransition=function(){return this._playing},r.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var r=e[t];if(isNaN(r)||r<=0)return!0}return!1},r}(I),O={vector:A,raster:C,"raster-dem":P,geojson:L,video:k,image:I,canvas:R},z=function(e,r,i,n){var a=new O[r.type](e,r,i,n);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return t.bindAll(["load","abort","unload","serialize","prepare"],a),a};function D(e,r){var i=t.identity([]);return t.translate(i,i,[1,1,0]),t.scale(i,i,[.5*e.width,.5*e.height,1]),t.multiply(i,i,e.calculatePosMatrix(r.toUnwrapped()))}function B(t,e,r,i,n){var a=function(t,e,r){if(t)for(var i=0,n=t;i<n.length;i+=1){var a=e[n[i]];if(a&&a.source===r&&"fill-extrusion"===a.type)return!0}else for(var o in e){var s=e[o];if(s.source===r&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,e,t.id),o=n.maxPitchScaleFactor(),s=t.tilesIn(r,o,a);s.sort(F);for(var l=[],u=0,c=s;u<c.length;u+=1){var h=c[u];l.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,i,n,o,D(t.transform,h.tileID))})}var p=function(t){for(var e={},r={},i=0,n=t;i<n.length;i+=1){var a=n[i],o=a.queryResults,s=a.wrappedTileID,l=r[s]=r[s]||{};for(var u in o)for(var c=o[u],h=l[u]=l[u]||{},p=e[u]=e[u]||[],d=0,f=c;d<f.length;d+=1){var m=f[d];h[m.featureIndex]||(h[m.featureIndex]=!0,p.push(m))}}return e}(l);for(var d in p)p[d].forEach((function(e){var r=e.feature,i=t.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=i}));return p}function F(t,e){var r=t.tileID,i=e.tileID;return r.overscaledZ-i.overscaledZ||r.canonical.y-i.canonical.y||r.wrap-i.wrap||r.canonical.x-i.canonical.x}var N=function(t,e){this.max=t,this.onRemove=e,this.reset()};N.prototype.reset=function(){for(var t in this.data)for(var e=0,r=this.data[t];e<r.length;e+=1){var i=r[e];i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}return this.data={},this.order=[],this},N.prototype.add=function(t,e,r){var i=this,n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);var a={value:e,timeout:void 0};if(void 0!==r&&(a.timeout=setTimeout((function(){i.remove(t,a)}),r)),this.data[n].push(a),this.order.push(n),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},N.prototype.has=function(t){return t.wrapped().key in this.data},N.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},N.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},N.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},N.prototype.remove=function(t,e){if(!this.has(t))return this;var r=t.wrapped().key,i=void 0===e?0:this.data[r].indexOf(e),n=this.data[r][i];return this.data[r].splice(i,1),n.timeout&&clearTimeout(n.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(n.value),this.order.splice(this.order.indexOf(r),1),this},N.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var U=function(t,e,r){this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};U.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},U.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},U.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var V={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},j=function(t,e,r,i){this.length=e.length,this.attributes=r,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;var n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};j.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},j.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},j.prototype.enableAttributes=function(t,e){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],n=e.attributes[i.name];void 0!==n&&t.enableVertexAttribArray(n)}},j.prototype.setVertexAttribPointers=function(t,e,r){for(var i=0;i<this.attributes.length;i++){var n=this.attributes[i],a=e.attributes[n.name];void 0!==a&&t.vertexAttribPointer(a,n.components,t[V[n.type]],!1,this.itemSize,n.offset+this.itemSize*(r||0))}},j.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var G=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};G.prototype.get=function(){return this.current},G.prototype.set=function(t){},G.prototype.getDefault=function(){return this.default},G.prototype.setDefault=function(){this.set(this.default)};var H=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getDefault=function(){return t.Color.transparent},r.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},r}(G),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(G),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(G),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(G),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(G),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(G),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(G),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(G),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(G),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(G),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(G),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(G),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(G),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(G),nt=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getDefault=function(){return t.Color.transparent},r.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},r}(G),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(G),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(G),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(G),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(G),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(G),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(G),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(G),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(G),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(G),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(G),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(G),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(G),gt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(G),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(G),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(G),xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(G),bt=function(t){function e(e,r){t.call(this,e),this.context=e,this.parent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e}(G),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(bt),Tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(bt),St=function(t,e,r){this.context=t,this.width=e,this.height=r;var i=t.gl,n=this.framebuffer=i.createFramebuffer();this.colorAttachment=new wt(t,n),this.depthAttachment=new Tt(t,n)};St.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var r=this.depthAttachment.get();r&&t.deleteRenderbuffer(r),t.deleteFramebuffer(this.framebuffer)};var Et=function(t,e,r){this.func=t,this.mask=e,this.range=r};Et.ReadOnly=!1,Et.ReadWrite=!0,Et.disabled=new Et(519,Et.ReadOnly,[0,1]);var Mt=function(t,e,r,i,n,a){this.test=t,this.ref=e,this.mask=r,this.fail=i,this.depthFail=n,this.pass=a};Mt.disabled=new Mt({func:519,mask:0},0,0,7680,7680,7680);var At=function(t,e,r){this.blendFunction=t,this.blendColor=e,this.mask=r};At.Replace=[1,0],At.disabled=new At(At.Replace,t.Color.transparent,[!1,!1,!1,!1]),At.unblended=new At(At.Replace,t.Color.transparent,[!0,!0,!0,!0]),At.alphaBlended=new At([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Ct=function(t,e,r){this.enable=t,this.mode=e,this.frontFace=r};Ct.disabled=new Ct(!1,1029,2305),Ct.backCCW=new Ct(!0,1029,2305);var Pt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new H(this),this.clearDepth=new W(this),this.clearStencil=new q(this),this.colorMask=new X(this),this.depthMask=new $(this),this.stencilMask=new Y(this),this.stencilFunc=new Z(this),this.stencilOp=new J(this),this.stencilTest=new K(this),this.depthRange=new Q(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new rt(this),this.blendFunc=new it(this),this.blendColor=new nt(this),this.blendEquation=new at(this),this.cullFace=new ot(this),this.cullFaceSide=new st(this),this.frontFace=new lt(this),this.program=new ut(this),this.activeTexture=new ct(this),this.viewport=new ht(this),this.bindFramebuffer=new pt(this),this.bindRenderbuffer=new dt(this),this.bindTexture=new ft(this),this.bindVertexBuffer=new mt(this),this.bindElementBuffer=new vt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gt(this),this.pixelStoreUnpack=new yt(this),this.pixelStoreUnpackPremultiplyAlpha=new _t(this),this.pixelStoreUnpackFlipY=new xt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};Pt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Pt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Pt.prototype.createIndexBuffer=function(t,e){return new U(this,t,e)},Pt.prototype.createVertexBuffer=function(t,e,r){return new j(this,t,e,r)},Pt.prototype.createRenderbuffer=function(t,e,r){var i=this.gl,n=i.createRenderbuffer();return this.bindRenderbuffer.set(n),i.renderbufferStorage(i.RENDERBUFFER,t,e,r),this.bindRenderbuffer.set(null),n},Pt.prototype.createFramebuffer=function(t,e){return new St(this,t,e)},Pt.prototype.clear=function(t){var e=t.color,r=t.depth,i=this.gl,n=0;e&&(n|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(n|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),i.clear(n)},Pt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},Pt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Pt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Pt.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,At.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Pt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Lt=function(e){function r(r,i,n){var a=this;e.call(this),this.id=r,this.dispatcher=n,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))})),this.on("error",(function(){a._sourceErrored=!0})),this._source=z(r,i,n,this),this._tiles={},this._cache=new N(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},r.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},r.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},r.prototype.getSource=function(){return this._source},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},r.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},r.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},r.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},r.prototype.serialize=function(){return this._source.serialize()},r.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var r=this._tiles[e];r.upload(t),r.prepare(this.map.style.imageManager)}},r.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(It)},r.prototype.getRenderableIds=function(e){var r=this,i=[];for(var n in this._tiles)this._isIdRenderable(+n,e)&&i.push(+n);return e?i.sort((function(e,i){var n=r._tiles[e].tileID,a=r._tiles[i].tileID,o=new t.Point(n.canonical.x,n.canonical.y)._rotate(r.transform.angle),s=new t.Point(a.canonical.x,a.canonical.y)._rotate(r.transform.angle);return n.overscaledZ-a.overscaledZ||s.y-o.y||s.x-o.x})):i.sort(It)},r.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},r.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},r.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},r.prototype._reloadTile=function(t,e){var r=this._tiles[t];r&&("loading"!==r.state&&(r.state=e),this._loadTile(r,this._tileLoaded.bind(this,r,t,e)))},r.prototype._tileLoaded=function(e,r,i,n){if(n)return e.state="errored",void(404!==n.status?this._source.fire(new t.ErrorEvent(n,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},r.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),r=0;r<e.length;r++){var i=e[r];if(t.neighboringTiles&&t.neighboringTiles[i]){var n=this.getTileByID(i);a(t,n),a(n,t)}}function a(t,e){t.needsHillshadePrepare=!0;var r=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===r&&0===i||Math.abs(i)>1||(Math.abs(r)>1&&(1===Math.abs(r+n)?r+=n:1===Math.abs(r-n)&&(r-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,r,i),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}},r.prototype.getTile=function(t){return this.getTileByID(t.key)},r.prototype.getTileByID=function(t){return this._tiles[t]},r.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},r.prototype._retainLoadedChildren=function(t,e,r,i){for(var n in this._tiles){var a=this._tiles[n];if(!(i[n]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>r)){for(var o=a.tileID;a&&a.tileID.overscaledZ>e+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var l=o;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){i[o.key]=o;break}}}},r.prototype.findLoadedParent=function(t,e){for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r);if(!i)return;var n=String(i.key),a=this._tiles[n];if(a&&a.hasData())return a;if(this._cache.has(i))return this._cache.get(i)}},r.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),r=Math.floor(5*e),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},r.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,r=Math.round(e);if(this._prevLng=t,r){var i={};for(var n in this._tiles){var a=this._tiles[n];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+r),i[a.tileID.key]=a}for(var o in this._tiles=i,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},r.prototype.update=function(e){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var n;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(n=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter((function(t){return i._source.hasTile(t)})))):n=[];var a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),o=Math.max(a-r.maxOverzooming,this._source.minzoom),s=Math.max(a+r.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(n,a);if(kt(this._source.type)){for(var u={},c={},h=0,p=Object.keys(l);h<p.length;h+=1){var d=p[h],f=l[d],m=this._tiles[d];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=t.browser.now())){var v=this.findLoadedParent(f,o);v&&(this._addTile(v.tileID),u[v.tileID.key]=v.tileID),c[d]=f}}for(var g in this._retainLoadedChildren(c,a,s,l),u)l[g]||(this._coveredTiles[g]=!0,l[g]=u[g])}for(var y in l)this._tiles[y].clearFadeHold();for(var _=0,x=t.keysDifference(this._tiles,l);_<x.length;_+=1){var b=x[_],w=this._tiles[b];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(b)}}},r.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},r.prototype._updateRetainedTiles=function(t,e){for(var i={},n={},a=Math.max(e-r.maxOverzooming,this._source.minzoom),o=Math.max(e+r.maxUnderzooming,this._source.minzoom),s={},l=0,u=t;l<u.length;l+=1){var c=u[l],h=this._addTile(c);i[c.key]=c,h.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,o,i);for(var p=0,d=t;p<d.length;p+=1){var f=d[p],m=this._tiles[f.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var v=f.children(this._source.maxzoom)[0],g=this.getTile(v);if(g&&g.hasData()){i[v.key]=v;continue}}else{var y=f.children(this._source.maxzoom);if(i[y[0].key]&&i[y[1].key]&&i[y[2].key]&&i[y[3].key])continue}for(var _=m.wasRequested(),x=f.overscaledZ-1;x>=a;--x){var b=f.scaledTo(x);if(n[b.key])break;if(n[b.key]=!0,!(m=this.getTile(b))&&_&&(m=this._addTile(b)),m&&(i[b.key]=b,_=m.wasRequested(),m.hasData()))break}}}return i},r.prototype._addTile=function(e){var r=this._tiles[e.key];if(r)return r;(r=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));var i=Boolean(r);return i||(r=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))),r?(r.uses++,this._tiles[e.key]=r,i||this._source.fire(new t.Event("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null},r.prototype._setTileReloadTimer=function(t,e){var r=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((function(){r._reloadTile(t,"expired"),delete r._timers[t]}),i))},r.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},r.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},r.prototype.tilesIn=function(e,r,i){var n=this,a=[],o=this.transform;if(!o)return a;for(var s=i?o.getCameraQueryGeometry(e):e,l=e.map((function(t){return o.pointCoordinate(t)})),u=s.map((function(t){return o.pointCoordinate(t)})),c=this.getIds(),h=1/0,p=1/0,d=-1/0,f=-1/0,m=0,v=u;m<v.length;m+=1){var g=v[m];h=Math.min(h,g.x),p=Math.min(p,g.y),d=Math.max(d,g.x),f=Math.max(f,g.y)}for(var y=function(e){var i=n._tiles[c[e]];if(!i.holdingForFade()){var s=i.tileID,m=Math.pow(2,o.zoom-i.tileID.overscaledZ),v=r*i.queryPadding*t.EXTENT/i.tileSize/m,g=[s.getTilePoint(new t.MercatorCoordinate(h,p)),s.getTilePoint(new t.MercatorCoordinate(d,f))];if(g[0].x-v<t.EXTENT&&g[0].y-v<t.EXTENT&&g[1].x+v>=0&&g[1].y+v>=0){var y=l.map((function(t){return s.getTilePoint(t)})),_=u.map((function(t){return s.getTilePoint(t)}));a.push({tile:i,tileID:s,queryGeometry:y,cameraQueryGeometry:_,scale:m})}}},_=0;_<c.length;_++)y(_);return a},r.prototype.getVisibleCoordinates=function(t){for(var e=this,r=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),i=0,n=r;i<n.length;i+=1){var a=n[i];a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}return r},r.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(kt(this._source.type))for(var e in this._tiles){var r=this._tiles[e];if(void 0!==r.fadeEndTime&&r.fadeEndTime>=t.browser.now())return!0}return!1},r.prototype.setFeatureState=function(t,e,r){t=t||"_geojsonTileLayer",this._state.updateState(t,e,r)},r.prototype.removeFeatureState=function(t,e,r){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,e,r)},r.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},r}(t.Evented);function It(t,e){return t%32-e%32||e-t}function kt(t){return"raster"===t||"image"===t||"video"===t}function Rt(){return new t.window.Worker(rn.workerUrl)}Lt.maxOverzooming=10,Lt.maxUnderzooming=3;var Ot=function(){this.active={}};Ot.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Ot.workerCount;)this.workers.push(new Rt);return this.active[t]=!0,this.workers.slice()},Ot.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)};var zt,Dt=Math.floor(t.browser.hardwareConcurrency/2);function Bt(e,r){var i={};for(var n in e)"ref"!==n&&(i[n]=e[n]);return t.refProperties.forEach((function(t){t in r&&(i[t]=r[t])})),i}function Ft(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=Bt(t[i],e[t[i].ref]));return t}Ot.workerCount=Math.max(Math.min(Dt,6),1);var Nt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ut(t,e,r){r.push({command:Nt.addSource,args:[t,e[t]]})}function Vt(t,e,r){e.push({command:Nt.removeSource,args:[t]}),r[t]=!0}function jt(t,e,r,i){Vt(t,r,i),Ut(t,e,r)}function Gt(e,r,i){var n;for(n in e[i])if(e[i].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[i][n],r[i][n]))return!1;for(n in r[i])if(r[i].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[i][n],r[i][n]))return!1;return!0}function Ht(e,r,i,n,a,o){var s;for(s in r=r||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],r[s])||i.push({command:o,args:[n,s,r[s],a]}));for(s in r)r.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],r[s])||i.push({command:o,args:[n,s,r[s],a]}))}function Wt(t){return t.id}function qt(t,e){return t[e.id]=e,t}function Xt(e,r){if(!e)return[{command:Nt.setStyle,args:[r]}];var i=[];try{if(!t.deepEqual(e.version,r.version))return[{command:Nt.setStyle,args:[r]}];t.deepEqual(e.center,r.center)||i.push({command:Nt.setCenter,args:[r.center]}),t.deepEqual(e.zoom,r.zoom)||i.push({command:Nt.setZoom,args:[r.zoom]}),t.deepEqual(e.bearing,r.bearing)||i.push({command:Nt.setBearing,args:[r.bearing]}),t.deepEqual(e.pitch,r.pitch)||i.push({command:Nt.setPitch,args:[r.pitch]}),t.deepEqual(e.sprite,r.sprite)||i.push({command:Nt.setSprite,args:[r.sprite]}),t.deepEqual(e.glyphs,r.glyphs)||i.push({command:Nt.setGlyphs,args:[r.glyphs]}),t.deepEqual(e.transition,r.transition)||i.push({command:Nt.setTransition,args:[r.transition]}),t.deepEqual(e.light,r.light)||i.push({command:Nt.setLight,args:[r.light]});var n={},a=[];!function(e,r,i,n){var a;for(a in r=r||{},e=e||{})e.hasOwnProperty(a)&&(r.hasOwnProperty(a)||Vt(a,i,n));for(a in r)r.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t.deepEqual(e[a],r[a])||("geojson"===e[a].type&&"geojson"===r[a].type&&Gt(e,r,a)?i.push({command:Nt.setGeoJSONSourceData,args:[a,r[a].data]}):jt(a,r,i,n)):Ut(a,r,i))}(e.sources,r.sources,a,n);var o=[];e.layers&&e.layers.forEach((function(t){n[t.source]?i.push({command:Nt.removeLayer,args:[t.id]}):o.push(t)})),i=i.concat(a),function(e,r,i){r=r||[];var n,a,o,s,l,u,c,h=(e=e||[]).map(Wt),p=r.map(Wt),d=e.reduce(qt,{}),f=r.reduce(qt,{}),m=h.slice(),v=Object.create(null);for(n=0,a=0;n<h.length;n++)o=h[n],f.hasOwnProperty(o)?a++:(i.push({command:Nt.removeLayer,args:[o]}),m.splice(m.indexOf(o,a),1));for(n=0,a=0;n<p.length;n++)o=p[p.length-1-n],m[m.length-1-n]!==o&&(d.hasOwnProperty(o)?(i.push({command:Nt.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-a),1)):a++,u=m[m.length-n],i.push({command:Nt.addLayer,args:[f[o],u]}),m.splice(m.length-n,0,o),v[o]=!0);for(n=0;n<p.length;n++)if(s=d[o=p[n]],l=f[o],!v[o]&&!t.deepEqual(s,l))if(t.deepEqual(s.source,l.source)&&t.deepEqual(s["source-layer"],l["source-layer"])&&t.deepEqual(s.type,l.type)){for(c in Ht(s.layout,l.layout,i,o,null,Nt.setLayoutProperty),Ht(s.paint,l.paint,i,o,null,Nt.setPaintProperty),t.deepEqual(s.filter,l.filter)||i.push({command:Nt.setFilter,args:[o,l.filter]}),t.deepEqual(s.minzoom,l.minzoom)&&t.deepEqual(s.maxzoom,l.maxzoom)||i.push({command:Nt.setLayerZoomRange,args:[o,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ht(s[c],l[c],i,o,c.slice(6),Nt.setPaintProperty):t.deepEqual(s[c],l[c])||i.push({command:Nt.setLayerProperty,args:[o,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ht(s[c],l[c],i,o,c.slice(6),Nt.setPaintProperty):t.deepEqual(s[c],l[c])||i.push({command:Nt.setLayerProperty,args:[o,c,l[c]]}))}else i.push({command:Nt.removeLayer,args:[o]}),u=m[m.lastIndexOf(o)+1],i.push({command:Nt.addLayer,args:[l,u]})}(o,r.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Nt.setStyle,args:[r]}]}return i}var $t=function(t,e,r){var i=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(e/r);for(var a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Yt(e,r,i,n,a){var o=t.create();return r?(t.scale(o,o,[1/a,1/a,1]),i||t.rotateZ(o,o,n.angle)):t.multiply(o,n.labelPlaneMatrix,e),o}function Zt(e,r,i,n,a){if(r){var o=t.clone(e);return t.scale(o,o,[a,a,1]),i||t.rotateZ(o,o,-n.angle),o}return n.glCoordMatrix}function Jt(e,r){var i=[e.x,e.y,0,1];se(i,i,r);var n=i[3];return{point:new t.Point(i[0]/n,i[1]/n),signedDistanceFromCamera:n}}function Kt(t,e){var r=t[0]/t[3],i=t[1]/t[3];return r>=-e[0]&&r<=e[0]&&i>=-e[1]&&i<=e[1]}function Qt(e,r,i,n,a,o,s,l){var u=n?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(u,i.transform.zoom),h=[256/i.width*2+1,256/i.height*2+1],p=n?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var d=e.lineVertexArray,f=n?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=i.transform.width/i.transform.height,v=!1,g=0;g<f.length;g++){var y=f.get(g);if(y.hidden||y.writingMode===t.WritingMode.vertical&&!v)oe(y.numGlyphs,p);else{v=!1;var _=[y.anchorX,y.anchorY,0,1];if(t.transformMat4(_,_,r),Kt(_,h)){var x=.5+_[3]/i.transform.cameraToCenterDistance*.5,b=t.evaluateSizeForFeature(u,c,y),w=s?b*x:b/x,T=new t.Point(y.anchorX,y.anchorY),S=Jt(T,a).point,E={},M=re(y,w,!1,l,r,a,o,e.glyphOffsetArray,d,p,S,T,E,m);v=M.useVertical,(M.notEnoughRoom||v||M.needsFlipping&&re(y,w,!0,l,r,a,o,e.glyphOffsetArray,d,p,S,T,E,m).notEnoughRoom)&&oe(y.numGlyphs,p)}else oe(y.numGlyphs,p)}}n?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function te(t,e,r,i,n,a,o,s,l,u,c,h){var p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),v=e.getoffsetX(p-1),g=ne(t*m,r,i,n,a,o,s.segment,d,f,l,u,c,h);if(!g)return null;var y=ne(t*v,r,i,n,a,o,s.segment,d,f,l,u,c,h);return y?{first:g,last:y}:null}function ee(e,r,i,n){return e===t.WritingMode.horizontal&&Math.abs(i.y-r.y)>Math.abs(i.x-r.x)*n?{useVertical:!0}:(e===t.WritingMode.vertical?r.y<i.y:r.x>i.x)?{needsFlipping:!0}:null}function re(e,r,i,n,a,o,s,l,u,c,h,p,d,f){var m,v=r/24,g=e.lineOffsetX*v,y=e.lineOffsetY*v;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,w=te(v,l,g,y,i,h,p,e,u,o,d,!1);if(!w)return{notEnoughRoom:!0};var T=Jt(w.first.point,s).point,S=Jt(w.last.point,s).point;if(n&&!i){var E=ee(e.writingMode,T,S,f);if(E)return E}m=[w.first];for(var M=e.glyphStartIndex+1;M<_-1;M++)m.push(ne(v*l.getoffsetX(M),g,y,i,h,p,e.segment,x,b,u,o,d,!1));m.push(w.last)}else{if(n&&!i){var A=Jt(p,a).point,C=e.lineStartIndex+e.segment+1,P=new t.Point(u.getx(C),u.gety(C)),L=Jt(P,a),I=L.signedDistanceFromCamera>0?L.point:ie(p,P,A,1,a),k=ee(e.writingMode,A,I,f);if(k)return k}var R=ne(v*l.getoffsetX(e.glyphStartIndex),g,y,i,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,o,d,!1);if(!R)return{notEnoughRoom:!0};m=[R]}for(var O=0,z=m;O<z.length;O+=1){var D=z[O];t.addDynamicAttributes(c,D.point,D.angle)}return{}}function ie(t,e,r,i,n){var a=Jt(t.add(t.sub(e)._unit()),n).point,o=r.sub(a);return r.add(o._mult(i/o.mag()))}function ne(e,r,i,n,a,o,s,l,u,c,h,p,d){var f=n?e-r:e+r,m=f>0?1:-1,v=0;n&&(m*=-1,v=Math.PI),m<0&&(v+=Math.PI);for(var g=m>0?l+s:l+s+1,y=g,_=a,x=a,b=0,w=0,T=Math.abs(f);b+w<=T;){if((g+=m)<l||g>=u)return null;if(x=_,void 0===(_=p[g])){var S=new t.Point(c.getx(g),c.gety(g)),E=Jt(S,h);if(E.signedDistanceFromCamera>0)_=p[g]=E.point;else{var M=g-m;_=ie(0===b?o:new t.Point(c.getx(M),c.gety(M)),S,x,T-b+1,h)}}b+=w,w=x.dist(_)}var A=(T-b)/w,C=_.sub(x),P=C.mult(A)._add(x);return P._add(C._unit()._perp()._mult(i*m)),{point:P,angle:v+Math.atan2(_.y-x.y,_.x-x.x),tileDistance:d?{prevTileDistance:g-m===y?0:c.gettileUnitDistanceFromAnchor(g-m),lastSegmentViewportDistance:T-b}:null}}$t.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},$t.prototype.insert=function(t,e,r,i,n){this._forEachCell(e,r,i,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)},$t.prototype.insertCircle=function(t,e,r,i){this._forEachCell(e-i,r-i,e+i,r+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(r),this.circles.push(i)},$t.prototype._insertBoxCell=function(t,e,r,i,n,a){this.boxCells[n].push(a)},$t.prototype._insertCircleCell=function(t,e,r,i,n,a){this.circleCells[n].push(a)},$t.prototype._query=function(t,e,r,i,n,a){if(r<0||t>this.width||i<0||e>this.height)return!n&&[];var o=[];if(t<=0&&e<=0&&this.width<=r&&this.height<=i){if(n)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];o.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return a?o.filter(a):o}var p={hitTest:n,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,r,i,this._queryCell,o,p,a),n?o.length>0:o},$t.prototype._queryCircle=function(t,e,r,i,n){var a=t-r,o=t+r,s=e-r,l=e+r;if(o<0||a>this.width||l<0||s>this.height)return!i&&[];var u=[],c={hitTest:i,circle:{x:t,y:e,radius:r},seenUids:{box:{},circle:{}}};return this._forEachCell(a,s,o,l,this._queryCellCircle,u,c,n),i?u.length>0:u},$t.prototype.query=function(t,e,r,i,n){return this._query(t,e,r,i,!1,n)},$t.prototype.hitTest=function(t,e,r,i,n){return this._query(t,e,r,i,!0,n)},$t.prototype.hitTestCircle=function(t,e,r,i){return this._queryCircle(t,e,r,!0,i)},$t.prototype._queryCell=function(t,e,r,i,n,a,o,s){var l=o.seenUids,u=this.boxCells[n];if(null!==u)for(var c=this.bboxes,h=0,p=u;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var f=4*d;if(t<=c[f+2]&&e<=c[f+3]&&r>=c[f+0]&&i>=c[f+1]&&(!s||s(this.boxKeys[d]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var m=this.circleCells[n];if(null!==m)for(var v=this.circles,g=0,y=m;g<y.length;g+=1){var _=y[g];if(!l.circle[_]){l.circle[_]=!0;var x=3*_;if(this._circleAndRectCollide(v[x],v[x+1],v[x+2],t,e,r,i)&&(!s||s(this.circleKeys[_]))){if(o.hitTest)return a.push(!0),!0;var b=v[x],w=v[x+1],T=v[x+2];a.push({key:this.circleKeys[_],x1:b-T,y1:w-T,x2:b+T,y2:w+T})}}}},$t.prototype._queryCellCircle=function(t,e,r,i,n,a,o,s){var l=o.circle,u=o.seenUids,c=this.boxCells[n];if(null!==c)for(var h=this.bboxes,p=0,d=c;p<d.length;p+=1){var f=d[p];if(!u.box[f]){u.box[f]=!0;var m=4*f;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[m+0],h[m+1],h[m+2],h[m+3])&&(!s||s(this.boxKeys[f])))return a.push(!0),!0}}var v=this.circleCells[n];if(null!==v)for(var g=this.circles,y=0,_=v;y<_.length;y+=1){var x=_[y];if(!u.circle[x]){u.circle[x]=!0;var b=3*x;if(this._circlesCollide(g[b],g[b+1],g[b+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[x])))return a.push(!0),!0}}},$t.prototype._forEachCell=function(t,e,r,i,n,a,o,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(r),h=this._convertToYCellCoord(i),p=l;p<=c;p++)for(var d=u;d<=h;d++){var f=this.xCellCount*d+p;if(n.call(this,t,e,r,i,f,a,o,s))return}},$t.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},$t.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},$t.prototype._circlesCollide=function(t,e,r,i,n,a){var o=i-t,s=n-e,l=r+a;return l*l>o*o+s*s},$t.prototype._circleAndRectCollide=function(t,e,r,i,n,a,o){var s=(a-i)/2,l=Math.abs(t-(i+s));if(l>s+r)return!1;var u=(o-n)/2,c=Math.abs(e-(n+u));if(c>u+r)return!1;if(l<=s||c<=u)return!0;var h=l-s,p=c-u;return h*h+p*p<=r*r};var ae=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function oe(t,e){for(var r=0;r<t;r++){var i=e.length;e.resize(i+4),e.float32.set(ae,3*i)}}function se(t,e,r){var i=e[0],n=e[1];return t[0]=r[0]*i+r[4]*n+r[12],t[1]=r[1]*i+r[5]*n+r[13],t[3]=r[3]*i+r[7]*n+r[15],t}var le=function(t,e,r){void 0===e&&(e=new $t(t.width+200,t.height+200,25)),void 0===r&&(r=new $t(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function ue(t,e,r){t[e+4]=r?1:0}function ce(e,r,i){return r*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}le.prototype.placeCollisionBox=function(t,e,r,i,n){var a=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),o=r*a.perspectiveRatio,s=t.x1*o+a.point.x,l=t.y1*o+a.point.y,u=t.x2*o+a.point.x,c=t.y2*o+a.point.y;return!this.isInsideGrid(s,l,u,c)||!e&&this.grid.hitTest(s,l,u,c,n)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},le.prototype.approximateTileDistance=function(t,e,r,i,n){var a=n?1:i/this.pitchfactor,o=t.lastSegmentViewportDistance*r;return t.prevTileDistance+o+(a-1)*o*Math.abs(Math.sin(e))},le.prototype.placeCollisionCircles=function(e,r,i,n,a,o,s,l,u,c,h,p,d){var f=[],m=this.projectAnchor(u,a.anchorX,a.anchorY),v=l/24,g=a.lineOffsetX*l,y=a.lineOffsetY*l,_=new t.Point(a.anchorX,a.anchorY),x=te(v,s,g,y,!1,Jt(_,c).point,_,a,o,c,{},!0),b=!1,w=!1,T=!0,S=m.perspectiveRatio*n,E=1/(n*i),M=0,A=0;x&&(M=this.approximateTileDistance(x.first.tileDistance,x.first.angle,E,m.cameraDistance,p),A=this.approximateTileDistance(x.last.tileDistance,x.last.angle,E,m.cameraDistance,p));for(var C=0;C<e.length;C+=5){var P=e[C],L=e[C+1],I=e[C+2],k=e[C+3];if(!x||k<-M||k>A)ue(e,C,!1);else{var R=this.projectPoint(u,P,L),O=I*S;if(f.length>0){var z=R.x-f[f.length-4],D=R.y-f[f.length-3];if(O*O*2>z*z+D*D&&C+8<e.length){var B=e[C+8];if(B>-M&&B<A){ue(e,C,!1);continue}}}var F=C/5;f.push(R.x,R.y,O,F),ue(e,C,!0);var N=R.x-O,U=R.y-O,V=R.x+O,j=R.y+O;if(T=T&&this.isOffscreen(N,U,V,j),w=w||this.isInsideGrid(N,U,V,j),!r&&this.grid.hitTestCircle(R.x,R.y,O,d)){if(!h)return{circles:[],offscreen:!1};b=!0}}}return{circles:b||!w?[]:f,offscreen:T}},le.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var r=[],i=1/0,n=1/0,a=-1/0,o=-1/0,s=0,l=e;s<l.length;s+=1){var u=l[s],c=new t.Point(u.x+100,u.y+100);i=Math.min(i,c.x),n=Math.min(n,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y),r.push(c)}for(var h={},p={},d=0,f=this.grid.query(i,n,a,o).concat(this.ignoredGrid.query(i,n,a,o));d<f.length;d+=1){var m=f[d],v=m.key;if(void 0===h[v.bucketInstanceId]&&(h[v.bucketInstanceId]={}),!h[v.bucketInstanceId][v.featureIndex]){var g=[new t.Point(m.x1,m.y1),new t.Point(m.x2,m.y1),new t.Point(m.x2,m.y2),new t.Point(m.x1,m.y2)];t.polygonIntersectsPolygon(r,g)&&(h[v.bucketInstanceId][v.featureIndex]=!0,void 0===p[v.bucketInstanceId]&&(p[v.bucketInstanceId]=[]),p[v.bucketInstanceId].push(v.featureIndex))}}return p},le.prototype.insertCollisionBox=function(t,e,r,i,n){var a={bucketInstanceId:r,featureIndex:i,collisionGroupID:n};(e?this.ignoredGrid:this.grid).insert(a,t[0],t[1],t[2],t[3])},le.prototype.insertCollisionCircles=function(t,e,r,i,n){for(var a=e?this.ignoredGrid:this.grid,o={bucketInstanceId:r,featureIndex:i,collisionGroupID:n},s=0;s<t.length;s+=4)a.insertCircle(o,t[s],t[s+1],t[s+2])},le.prototype.projectAnchor=function(t,e,r){var i=[e,r,0,1];return se(i,i,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5,cameraDistance:i[3]}},le.prototype.projectPoint=function(e,r,i){var n=[r,i,0,1];return se(n,n,e),new t.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100)},le.prototype.projectAndGetPerspectiveRatio=function(e,r,i){var n=[r,i,0,1];return se(n,n,e),{point:new t.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}},le.prototype.isOffscreen=function(t,e,r,i){return r<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},le.prototype.isInsideGrid=function(t,e,r,i){return r>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary};var he=function(t,e,r,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&r?1:0,this.placed=r};he.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var pe=function(t,e,r,i,n){this.text=new he(t?t.text:null,e,r,n),this.icon=new he(t?t.icon:null,e,i,n)};pe.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var de=function(t,e,r){this.text=t,this.icon=e,this.skipFade=r},fe=function(t,e,r,i,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=n},me=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function ve(e,r,i,n,a){var o=t.getAnchorAlignment(e),s=-(o.horizontalAlign-.5)*r,l=-(o.verticalAlign-.5)*i,u=t.evaluateVariableOffset(e,n);return new t.Point(s+u[0]*a,l+u[1]*a)}function ge(e,r,i,n,a,o){var s=e.x1,l=e.x2,u=e.y1,c=e.y2,h=e.anchorPointX,p=e.anchorPointY,d=new t.Point(r,i);return n&&d._rotate(a?o:-o),{x1:s+d.x,y1:u+d.y,x2:l+d.x,y2:c+d.y,anchorPointX:h,anchorPointY:p}}me.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var ye=function(t,e,r,i){this.transform=t.clone(),this.collisionIndex=new le(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new me(r),this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}};function _e(t,e,r,i,n){t.emplaceBack(e?1:0,r?1:0,i||0,n||0),t.emplaceBack(e?1:0,r?1:0,i||0,n||0),t.emplaceBack(e?1:0,r?1:0,i||0,n||0),t.emplaceBack(e?1:0,r?1:0,i||0,n||0)}ye.prototype.placeLayerTile=function(e,r,i,n){var a=r.getBucket(e),o=r.latestFeatureIndex;if(a&&o&&e.id===a.layerIds[0]){var s=r.collisionBoxArray,l=a.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p=Yt(h,"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,ce(r,1,this.transform.zoom)),d=Yt(h,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,ce(r,1,this.transform.zoom));this.retainedQueryData[a.bucketInstanceId]=new fe(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,r.tileID),this.placeLayerBucket(a,h,p,d,u,c,i,r.holdingForFade(),n,s)}},ye.prototype.attemptAnchorPlacement=function(t,e,r,i,n,a,o,s,l,u,c,h,p,d,f){var m,v=[h.textOffset0,h.textOffset1],g=ve(t,r,i,v,n),y=this.collisionIndex.placeCollisionBox(ge(e,g.x,g.y,a,o,this.transform.angle),c,s,l,u.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(ge(f,g.x,g.y,a,o,this.transform.angle),c,s,l,u.predicate).box.length)return y.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(m=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:v,width:r,height:i,anchor:t,textBoxScale:n,prevAnchor:m},this.markUsedJustification(p,t,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:g,placedGlyphBoxes:y}):void 0},ye.prototype.placeLayerBucket=function(e,r,i,n,a,o,s,l,u,c){var h=this,p=e.layers[0].layout,d=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom),f=p.get("text-optional"),m=p.get("icon-optional"),v=p.get("text-allow-overlap"),g=p.get("icon-allow-overlap"),y=v&&(g||!e.hasIconData()||m),_=g&&(v||!e.hasTextData()||f),x=this.collisionGroups.get(e.sourceID),b="map"===p.get("text-rotation-alignment"),w="map"===p.get("text-pitch-alignment"),T="none"!==p.get("icon-text-fit"),S="viewport-y"===p.get("symbol-z-order");!e.collisionArrays&&c&&e.deserializeCollisionBoxes(c);var E=function(n,c){if(!u[n.crossTileID])if(l)h.placements[n.crossTileID]=new de(!1,!1,!1);else{var S,E=!1,M=!1,A=!0,C=null,P={box:null,offscreen:null},L={box:null,offscreen:null},I=null,k=null,R=0,O=0,z=0;c.textFeatureIndex&&(R=c.textFeatureIndex),c.verticalTextFeatureIndex&&(O=c.verticalTextFeatureIndex);var D=c.textBox;if(D){var B=function(r){var i=t.WritingMode.horizontal;if(e.allowVerticalPlacement&&!r&&h.prevPlacement){var a=h.prevPlacement.placedOrientations[n.crossTileID];a&&(h.placedOrientations[n.crossTileID]=a,i=a,h.markUsedOrientation(e,i,n))}return i},F=function(r,i){if(e.allowVerticalPlacement&&n.numVerticalGlyphVertices>0&&c.verticalTextBox){for(var a=0,o=e.writingModes;a<o.length;a+=1)if(o[a]===t.WritingMode.vertical?(P=i(),L=P):P=r(),P&&P.box&&P.box.length)break}else P=r()};if(p.get("text-variable-anchor")){var N=p.get("text-variable-anchor");if(h.prevPlacement&&h.prevPlacement.variableOffsets[n.crossTileID]){var U=h.prevPlacement.variableOffsets[n.crossTileID];N.indexOf(U.anchor)>0&&(N=N.filter((function(t){return t!==U.anchor}))).unshift(U.anchor)}var V=function(t,i,a){for(var s=t.x2-t.x1,l=t.y2-t.y1,u=n.textBoxScale,c=T&&!g?i:null,p={box:[],offscreen:!1},d=v?2*N.length:N.length,f=0;f<d;++f){var m=N[f%N.length],y=f>=N.length,_=h.attemptAnchorPlacement(m,t,s,l,u,b,w,o,r,x,y,n,e,a,c);if(_&&(p=_.placedGlyphBoxes)&&p.box&&p.box.length){E=!0,C=_.shift;break}}return p};F((function(){return V(D,c.iconBox,t.WritingMode.horizontal)}),(function(){var r=c.verticalTextBox,i=P&&P.box&&P.box.length;return e.allowVerticalPlacement&&!i&&n.numVerticalGlyphVertices>0&&r?V(r,c.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),P&&(E=P.box,A=P.offscreen);var j=B(P&&P.box);if(!E&&h.prevPlacement){var G=h.prevPlacement.variableOffsets[n.crossTileID];G&&(h.variableOffsets[n.crossTileID]=G,h.markUsedJustification(e,G.anchor,n,j))}}else{var H=function(t,i){var a=h.collisionIndex.placeCollisionBox(t,p.get("text-allow-overlap"),o,r,x.predicate);return a&&a.box&&a.box.length&&(h.markUsedOrientation(e,i,n),h.placedOrientations[n.crossTileID]=i),a};F((function(){return H(D,t.WritingMode.horizontal)}),(function(){var r=c.verticalTextBox;return e.allowVerticalPlacement&&n.numVerticalGlyphVertices>0&&r?H(r,t.WritingMode.vertical):{box:null,offscreen:null}})),B(P&&P.box&&P.box.length)}}E=(S=P)&&S.box&&S.box.length>0,A=S&&S.offscreen;var W=c.textCircles;if(W){var q=e.text.placedSymbolArray.get(n.centerJustifiedTextSymbolIndex),X=t.evaluateSizeForFeature(e.textSizeData,d,q);I=h.collisionIndex.placeCollisionCircles(W,p.get("text-allow-overlap"),a,o,q,e.lineVertexArray,e.glyphOffsetArray,X,r,i,s,w,x.predicate),E=p.get("text-allow-overlap")||I.circles.length>0,A=A&&I.offscreen}if(c.iconFeatureIndex&&(z=c.iconFeatureIndex),c.iconBox){var $=function(t){var e=T&&C?ge(t,C.x,C.y,b,w,h.transform.angle):t;return h.collisionIndex.placeCollisionBox(e,p.get("icon-allow-overlap"),o,r,x.predicate)};M=L&&L.box&&L.box.length&&c.verticalIconBox?(k=$(c.verticalIconBox)).box.length>0:(k=$(c.iconBox)).box.length>0,A=A&&k.offscreen}var Y=f||0===n.numHorizontalGlyphVertices&&0===n.numVerticalGlyphVertices,Z=m||0===n.numIconVertices;Y||Z?Z?Y||(M=M&&E):E=M&&E:M=E=M&&E,E&&S&&S.box&&(L&&L.box&&O?h.collisionIndex.insertCollisionBox(S.box,p.get("text-ignore-placement"),e.bucketInstanceId,O,x.ID):h.collisionIndex.insertCollisionBox(S.box,p.get("text-ignore-placement"),e.bucketInstanceId,R,x.ID)),M&&k&&h.collisionIndex.insertCollisionBox(k.box,p.get("icon-ignore-placement"),e.bucketInstanceId,z,x.ID),E&&I&&h.collisionIndex.insertCollisionCircles(I.circles,p.get("text-ignore-placement"),e.bucketInstanceId,R,x.ID),h.placements[n.crossTileID]=new de(E||y,M||_,A||e.justReloaded),u[n.crossTileID]=!0}};if(S)for(var M=e.getSortedSymbolIndexes(this.transform.angle),A=M.length-1;A>=0;--A){var C=M[A];E(e.symbolInstances.get(C),e.collisionArrays[C])}else for(var P=0;P<e.symbolInstances.length;++P)E(e.symbolInstances.get(P),e.collisionArrays[P]);e.justReloaded=!1},ye.prototype.markUsedJustification=function(e,r,i,n){var a,o={left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex};a=n===t.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:o[t.getAnchorJustification(r)];for(var s=0,l=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];s<l.length;s+=1){var u=l[s];u>=0&&(e.text.placedSymbolArray.get(u).crossTileID=a>=0&&u!==a?0:i.crossTileID)}},ye.prototype.markUsedOrientation=function(e,r,i){for(var n=r===t.WritingMode.horizontal||r===t.WritingMode.horizontalOnly?r:0,a=r===t.WritingMode.vertical?r:0,o=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];o<s.length;o+=1){var l=s[o];e.text.placedSymbolArray.get(l).placedOrientation=n}i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=a)},ye.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,r=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var i=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},a=e?e.variableOffsets:{},o=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=n[s];u?(this.opacities[s]=new pe(u,i,l.text,l.icon),r=r||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new pe(null,i,l.text,l.icon,l.skipFade),r=r||l.text||l.icon)}for(var c in n){var h=n[c];if(!this.opacities[c]){var p=new pe(h,i,!1,!1);p.isHidden()||(this.opacities[c]=p,r=r||h.text.placed||h.icon.placed)}}for(var d in a)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=a[d]);for(var f in o)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=o[f]);r?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},ye.prototype.updateLayerOpacities=function(t,e){for(var r={},i=0,n=e;i<n.length;i+=1){var a=n[i],o=a.getBucket(t);o&&a.latestFeatureIndex&&t.id===o.layerIds[0]&&this.updateBucketOpacities(o,r,a.collisionBoxArray)}},ye.prototype.updateBucketOpacities=function(e,r,i){var n=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear(),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexArray.clear(),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexArray.clear();var a=e.layers[0].layout,o=new pe(null,0,!1,!1,!0),s=a.get("text-allow-overlap"),l=a.get("icon-allow-overlap"),u=a.get("text-variable-anchor"),c="map"===a.get("text-rotation-alignment"),h="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),d=new pe(null,0,s&&(l||!e.hasIconData()||a.get("icon-optional")),l&&(s||!e.hasTextData()||a.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData())&&e.deserializeCollisionBoxes(i);for(var f=function(t,e,r){for(var i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(r)},m=function(i){var a=e.symbolInstances.get(i),s=a.numHorizontalGlyphVertices,l=a.numVerticalGlyphVertices,m=a.crossTileID,v=r[m],g=n.opacities[m];v?g=o:g||(g=d,n.opacities[m]=g),r[m]=!0;var y=s>0||l>0,_=a.numIconVertices>0,x=n.placedOrientations[a.crossTileID],b=x===t.WritingMode.vertical,w=x===t.WritingMode.horizontal||x===t.WritingMode.horizontalOnly;if(y){var T=Ae(g.text),S=b?Ce:T;f(e.text,s,S);var E=w?Ce:T;f(e.text,l,E);var M=g.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=M||b?1:0)})),a.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=M||w?1:0);var A=n.variableOffsets[a.crossTileID];A&&n.markUsedJustification(e,A.anchor,a,x);var C=n.placedOrientations[a.crossTileID];C&&(n.markUsedJustification(e,"left",a,C),n.markUsedOrientation(e,C,a))}if(_){var P=Ae(g.icon),L=!(p&&a.verticalPlacedIconSymbolIndex&&b);if(a.placedIconSymbolIndex>=0){var I=L?P:Ce;f(e.icon,a.numIconVertices,I),e.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=g.icon.isHidden()}if(a.verticalPlacedIconSymbolIndex>=0){var k=L?Ce:P;f(e.icon,a.numVerticalIconVertices,k),e.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden()}}if(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData()){var R=e.collisionArrays[i];if(R){var O=new t.Point(0,0);if(R.textBox||R.verticalTextBox){var z=!0;if(u){var D=n.variableOffsets[m];D?(O=ve(D.anchor,D.width,D.height,D.textOffset,D.textBoxScale),c&&O._rotate(h?n.transform.angle:-n.transform.angle)):z=!1}R.textBox&&_e(e.textCollisionBox.collisionVertexArray,g.text.placed,!z||b,O.x,O.y),R.verticalTextBox&&_e(e.textCollisionBox.collisionVertexArray,g.text.placed,!z||w,O.x,O.y)}var B=Boolean(!w&&R.verticalIconBox);R.iconBox&&_e(e.iconCollisionBox.collisionVertexArray,g.icon.placed,B,p?O.x:0,p?O.y:0),R.verticalIconBox&&_e(e.iconCollisionBox.collisionVertexArray,g.icon.placed,!B,p?O.x:0,p?O.y:0);var F=R.textCircles;if(F&&e.hasTextCollisionCircleData())for(var N=0;N<F.length;N+=5){var U=v||0===F[N+4];_e(e.textCollisionCircle.collisionVertexArray,g.text.placed,U)}}}},v=0;v<e.symbolInstances.length;v++)m(v);e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexBuffer&&e.iconCollisionCircle.collisionVertexBuffer.updateData(e.iconCollisionCircle.collisionVertexArray),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexBuffer&&e.textCollisionCircle.collisionVertexBuffer.updateData(e.textCollisionCircle.collisionVertexArray)},ye.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ye.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},ye.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},ye.prototype.stillRecent=function(t,e){var r=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*r>t},ye.prototype.setStale=function(){this.stale=!0};var xe=Math.pow(2,25),be=Math.pow(2,24),we=Math.pow(2,17),Te=Math.pow(2,16),Se=Math.pow(2,9),Ee=Math.pow(2,8),Me=Math.pow(2,1);function Ae(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,r=Math.floor(127*t.opacity);return r*xe+e*be+r*we+e*Te+r*Se+e*Ee+r*Me+e}var Ce=0,Pe=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};Pe.prototype.continuePlacement=function(t,e,r,i,n){for(;this._currentTileIndex<t.length;){var a=t[this._currentTileIndex];if(e.placeLayerTile(i,a,r,this._seenCrossTileIDs),this._currentTileIndex++,n())return!0}};var Le=function(t,e,r,i,n,a,o){this.placement=new ye(t,n,a,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1};Le.prototype.isDone=function(){return this._done},Le.prototype.continuePlacement=function(e,r,i){for(var n=this,a=t.browser.now(),o=function(){var e=t.browser.now()-a;return!n._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=r[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Pe),this._inProgressLayer.continuePlacement(i[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Le.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Ie=512/t.EXTENT/2,ke=function(t,e,r){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var i=0;i<e.length;i++){var n=e.get(i),a=n.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}};ke.prototype.getScaledCoordinates=function(e,r){var i=r.canonical.z-this.tileID.canonical.z,n=Ie/Math.pow(2,i);return{x:Math.floor((r.canonical.x*t.EXTENT+e.anchorX)*n),y:Math.floor((r.canonical.y*t.EXTENT+e.anchorY)*n)}},ke.prototype.findMatches=function(t,e,r){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),n=0;n<t.length;n++){var a=t.get(n);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o)for(var s=this.getScaledCoordinates(a,e),l=0,u=o;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=i&&Math.abs(c.coord.y-s.y)<=i&&!r[c.crossTileID]){r[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}}};var Re=function(){this.maxCrossTileID=0};Re.prototype.generate=function(){return++this.maxCrossTileID};var Oe=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Oe.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var r in this.indexes){var i=this.indexes[r],n={};for(var a in i){var o=i[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+e),n[o.tileID.key]=o}this.indexes[r]=n}this.lng=t},Oe.prototype.addBucket=function(t,e,r){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var n=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>t.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,n)}else{var u=o[t.scaledTo(Number(a)).key];u&&u.findMatches(e.symbolInstances,t,n)}}for(var c=0;c<e.symbolInstances.length;c++){var h=e.symbolInstances.get(c);h.crossTileID||(h.crossTileID=r.generate(),n[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new ke(t,e.symbolInstances,e.bucketInstanceId),!0},Oe.prototype.removeBucketCrossTileIDs=function(t,e){for(var r in e.indexedSymbolInstances)for(var i=0,n=e.indexedSymbolInstances[r];i<n.length;i+=1){var a=n[i];delete this.usedCrossTileIDs[t][a.crossTileID]}},Oe.prototype.removeStaleBuckets=function(t){var e=!1;for(var r in this.indexes){var i=this.indexes[r];for(var n in i)t[i[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,i[n]),delete i[n],e=!0)}return e};var ze=function(){this.layerIndexes={},this.crossTileIDs=new Re,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ze.prototype.addLayer=function(t,e,r){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new Oe);var n=!1,a={};i.handleWrapJump(r);for(var o=0,s=e;o<s.length;o+=1){var l=s[o],u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(l.tileID,u,this.crossTileIDs)&&(n=!0),a[u.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(n=!0),n},ze.prototype.pruneUnusedLayers=function(t){var e={};for(var r in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[r]||delete this.layerIndexes[r]};var De=function(e,r){return t.emitValidationErrors(e,r&&r.filter((function(t){return"source.canvas"!==t.identifier})))},Be=t.pick(Nt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Fe=t.pick(Nt,["setCenter","setZoom","setBearing","setPitch"]),Ne=function(e){function r(i,n){var a=this;void 0===n&&(n={}),e.call(this),this.map=i,this.dispatcher=new S((zt||(zt=new Ot),zt),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new _(i._requestManager,n.localIdeographFontFamily),this.lineAtlas=new T(256,512),this.crossTileSymbolIndex=new ze,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var o=this;this._rtlTextPluginCallback=r.registerForPluginAvailability((function(t){for(var e in o.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),o.sourceCaches)o.sourceCaches[e].reload()})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=a.sourceCaches[t.sourceId];if(e){var r=e.getSource();if(r&&r.vectorLayerIds)for(var i in a._layers){var n=a._layers[i];n.source===r.id&&a._validateLayer(n)}}}}))}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.loadURL=function(e,r){var i=this;void 0===r&&(r={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var n="boolean"==typeof r.validate?r.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,r.accessToken);var a=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(a,(function(e,r){i._request=null,e?i.fire(new t.ErrorEvent(e)):r&&i._load(r,n)}))},r.prototype.loadJSON=function(e,r){var i=this;void 0===r&&(r={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){i._request=null,i._load(e,!1!==r.validate)}))},r.prototype._load=function(e,r){var i=this;if(!r||!De(this,t.validateStyle(e))){for(var n in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(n,e.sources[n],{validate:!1});e.sprite?this._spriteRequest=function(e,r,i){var n,a,o,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(r.transformRequest(r.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){l=null,o||(o=t,n=e,c())})),u=t.getImage(r.transformRequest(r.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){u=null,o||(o=t,a=e,c())}));function c(){if(o)i(o);else if(n&&a){var e=t.browser.getImageData(a),r={};for(var s in n){var l=n[s],u=l.width,c=l.height,h=l.x,p=l.y,d=l.sdf,f=l.pixelRatio,m=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,m,{x:h,y:p},{x:0,y:0},{width:u,height:c}),r[s]={data:m,pixelRatio:f,sdf:d}}i(null,r)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(e.sprite,this.map._requestManager,(function(e,r){if(i._spriteRequest=null,e)i.fire(new t.ErrorEvent(e));else if(r)for(var n in r)i.imageManager.addImage(n,r[n]);i.imageManager.setLoaded(!0),i.dispatcher.broadcast("setImages",i.imageManager.listImages()),i.fire(new t.Event("data",{dataType:"style"}))})):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=Ft(this.stylesheet.layers);this._order=a.map((function(t){return t.id})),this._layers={};for(var o=0,s=a;o<s.length;o+=1){var l=s[o];(l=t.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},r.prototype._validateLayer=function(e){var r=this.sourceCaches[e.source];if(r){var i=e.sourceLayer;if(i){var n=r.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+i+'" does not exist on source "'+n.id+'" as specified by style layer "'+e.id+'"')))}}},r.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},r.prototype._serializeLayers=function(t){for(var e=[],r=0,i=t;r<i.length;r+=1){var n=i[r],a=this._layers[n];"custom"!==a.type&&e.push(a.serialize())}return e},r.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},r.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},r.prototype.update=function(e){if(this._loaded){var r=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);for(var a in(i.length||n.length)&&this._updateWorkerLayers(i,n),this._updatedSources){var o=this._updatedSources[a];"reload"===o?this._reloadSource(a):"clear"===o&&this._clearSource(a)}for(var s in this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var u=0,c=this._order;u<c.length;u+=1){var h=c[u],p=this._layers[h];p.recalculate(e,this.imageManager.listImages()),!p.isHidden(e.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,r&&this.fire(new t.Event("data",{dataType:"style"}))}},r.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},r.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},r.prototype.setState=function(e){var r=this;if(this._checkLoaded(),De(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Ft(e.layers);var i=Xt(this.serialize(),e).filter((function(t){return!(t.command in Fe)}));if(0===i.length)return!1;var n=i.filter((function(t){return!(t.command in Be)}));if(n.length>0)throw new Error("Unimplemented: "+n.map((function(t){return t.command})).join(", ")+".");return i.forEach((function(t){"setTransition"!==t.command&&r[t.command].apply(r,t.args)})),this.stylesheet=e,!0},r.prototype.addImage=function(e,r){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,r),this.fire(new t.Event("data",{dataType:"style"}))},r.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},r.prototype.getImage=function(t){return this.imageManager.getImage(t)},r.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},r.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},r.prototype.addSource=function(e,r,i){var n=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!r.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(r).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(r.type)>=0)||!this._validate(t.validateStyle.source,"sources."+e,r,null,i)){this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);var a=this.sourceCaches[e]=new Lt(e,r,this.dispatcher);a.style=this,a.setEventedParent(this,(function(){return{isSourceLoaded:n.loaded(),source:a.serialize(),sourceId:e}})),a.onAdd(this.map),this._changed=!0}},r.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+r+'" is using it.')));var i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},r.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},r.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},r.prototype.addLayer=function(e,r,i){void 0===i&&(i={}),this._checkLoaded();var n=e.id;if(this.getLayer(n))this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" already exists on this map')));else{var a;if("custom"===e.type){if(De(this,t.validateCustomStyleLayer(e)))return;a=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(n,e.source),e=t.clone$1(e),e=t.extend(e,{source:n})),this._validate(t.validateStyle.layer,"layers."+n,e,{arrayIndex:-1},i))return;a=t.createStyleLayer(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:n}})}var o=r?this._order.indexOf(r):this._order.length;if(r&&-1===o)this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" does not exist on this map.')));else{if(this._order.splice(o,0,n),this._layerOrderChanged=!0,this._layers[n]=a,this._removedLayers[n]&&a.source&&"custom"!==a.type){var s=this._removedLayers[n];delete this._removedLayers[n],s.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}},r.prototype.moveLayer=function(e,r){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==r){var i=this._order.indexOf(e);this._order.splice(i,1);var n=r?this._order.indexOf(r):this._order.length;r&&-1===n?this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" does not exist on this map.'))):(this._order.splice(n,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},r.prototype.removeLayer=function(e){this._checkLoaded();var r=this._layers[e];if(r){r.setEventedParent(null);var i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},r.prototype.getLayer=function(t){return this._layers[t]},r.prototype.setLayerZoomRange=function(e,r,i){this._checkLoaded();var n=this.getLayer(e);n?n.minzoom===r&&n.maxzoom===i||(null!=r&&(n.minzoom=r),null!=i&&(n.maxzoom=i),this._updateLayer(n)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},r.prototype.setFilter=function(e,r,i){void 0===i&&(i={}),this._checkLoaded();var n=this.getLayer(e);if(n){if(!t.deepEqual(n.filter,r))return null==r?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(t.validateStyle.filter,"layers."+n.id+".filter",r,null,i)||(n.filter=t.clone$1(r),this._updateLayer(n)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},r.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},r.prototype.setLayoutProperty=function(e,r,i,n){void 0===n&&(n={}),this._checkLoaded();var a=this.getLayer(e);a?t.deepEqual(a.getLayoutProperty(r),i)||(a.setLayoutProperty(r,i,n),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},r.prototype.getLayoutProperty=function(e,r){var i=this.getLayer(e);if(i)return i.getLayoutProperty(r);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},r.prototype.setPaintProperty=function(e,r,i,n){void 0===n&&(n={}),this._checkLoaded();var a=this.getLayer(e);a?t.deepEqual(a.getPaintProperty(r),i)||(a.setPaintProperty(r,i,n)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},r.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},r.prototype.setFeatureState=function(e,r){this._checkLoaded();var i=e.source,n=e.sourceLayer,a=this.sourceCaches[i],o=parseInt(e.id,10);if(void 0!==a){var s=a.getSource().type;"geojson"===s&&n?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||n?isNaN(o)||o<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):a.setFeatureState(n,o,r):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},r.prototype.removeFeatureState=function(e,r){this._checkLoaded();var i=e.source,n=this.sourceCaches[i];if(void 0!==n){var a=n.getSource().type,o="vector"===a?e.sourceLayer:void 0,s=parseInt(e.id,10);"vector"!==a||o?void 0!==e.id&&isNaN(s)||s<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):r&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):n.removeFeatureState(o,s,r):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},r.prototype.getFeatureState=function(e){this._checkLoaded();var r=e.source,i=e.sourceLayer,n=this.sourceCaches[r],a=parseInt(e.id,10);if(void 0!==n)if("vector"!==n.getSource().type||i){if(!(isNaN(a)||a<0))return n.getFeatureState(i,a);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},r.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},r.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},r.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},r.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,r=function(t){return"fill-extrusion"===e._layers[t].type},i={},n=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(r(o)){i[o]=a;for(var s=0,l=t;s<l.length;s+=1){var u=l[s][o];if(u)for(var c=0,h=u;c<h.length;c+=1){var p=h[c];n.push(p)}}}}n.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var d=[],f=this._order.length-1;f>=0;f--){var m=this._order[f];if(r(m))for(var v=n.length-1;v>=0;v--){var g=n[v].feature;if(i[g.layer.id]<f)break;d.push(g),n.pop()}else for(var y=0,_=t;y<_.length;y+=1){var x=_[y][m];if(x)for(var b=0,w=x;b<w.length;b+=1){var T=w[b];d.push(T.feature)}}}return d},r.prototype.queryRenderedFeatures=function(e,r,i){r&&r.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",r.filter,null,r);var n={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var a=0,o=r.layers;a<o.length;a+=1){var s=o[a],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];n[l.source]=!0}}var u=[];for(var c in this.sourceCaches)r.layers&&!n[c]||u.push(B(this.sourceCaches[c],this._layers,e,r,i));return this.placement&&u.push(function(t,e,r,i,n,a){for(var o={},s=n.queryRenderedSymbols(r),l=[],u=0,c=Object.keys(s).map(Number);u<c.length;u+=1){var h=c[u];l.push(a[h])}l.sort(F);for(var p=function(){var e=f[d],r=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,i.filter,i.layers,t);for(var n in r){var a=o[n]=o[n]||[],l=r[n];l.sort((function(t,r){var i=e.featureSortOrder;if(i){var n=i.indexOf(t.featureIndex);return i.indexOf(r.featureIndex)-n}return r.featureIndex-t.featureIndex}));for(var u=0,c=l;u<c.length;u+=1){var h=c[u];a.push(h)}}},d=0,f=l;d<f.length;d+=1)p();var m=function(r){o[r].forEach((function(i){var n=i.feature,a=t[r],o=e[a.source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=o}))};for(var v in o)m(v);return o}(this._layers,this.sourceCaches,e,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},r.prototype.querySourceFeatures=function(e,r){r&&r.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",r.filter,null,r);var i=this.sourceCaches[e];return i?function(t,e){for(var r=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),i=[],n={},a=0;a<r.length;a++){var o=r[a],s=o.tileID.canonical.key;n[s]||(n[s]=!0,o.querySourceFeatures(i,e))}return i}(i,r):[]},r.prototype.addSourceType=function(t,e,i){return r.getSourceType(t)?i(new Error('A source type called "'+t+'" already exists.')):(r.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))},r.prototype.getLight=function(){return this.light.getLight()},r.prototype.setLight=function(e,r){void 0===r&&(r={}),this._checkLoaded();var i=this.light.getLight(),n=!1;for(var a in e)if(!t.deepEqual(e[a],i[a])){n=!0;break}if(n){var o={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,r),this.light.updateTransitions(o)}},r.prototype._validate=function(e,r,i,n,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&De(this,e.call(t.validateStyle,t.extend({key:r,style:this.serialize(),value:i,styleSpec:t.styleSpec},n)))},r.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var r in this.sourceCaches)this.sourceCaches[r].clearTiles(),this.sourceCaches[r].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},r.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},r.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},r.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},r.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},r.prototype._updatePlacement=function(e,r,i,n){for(var a=!1,o=!1,s={},l=0,u=this._order;l<u.length;l+=1){var c=u[l],h=this._layers[c];if("symbol"===h.type){if(!s[h.source]){var p=this.sourceCaches[h.source];s[h.source]=p.getRenderableIds(!0).map((function(t){return p.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var d=this.crossTileSymbolIndex.addLayer(h,s[h.source],e.center.lng);a=a||d}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var f=this._layerOrderChanged||0===i;if((f||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Le(e,this._order,f,r,i,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),o=!0),a&&this.pauseablePlacement.placement.setStale()),o||a)for(var m=0,v=this._order;m<v.length;m+=1){var g=v[m],y=this._layers[g];"symbol"===y.type&&this.placement.updateLayerOpacities(y,s[y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},r.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},r.prototype.getImages=function(t,e,r){this.imageManager.getImages(e.icons,r)},r.prototype.getGlyphs=function(t,e,r){this.glyphManager.getGlyphs(e.stacks,r)},r.prototype.getResource=function(e,r,i){return t.makeRequest(r,i)},r}(t.Evented);Ne.getSourceType=function(t){return O[t]},Ne.setSourceType=function(t,e){O[t]=e},Ne.registerForPluginAvailability=t.registerForPluginAvailability;var Ue=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ve=pr("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),je=pr("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ge=pr("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),He=pr("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),We=pr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),qe=pr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Xe=pr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),$e=pr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ye=pr("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Ze=pr("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Je=pr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Ke=pr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Qe=pr("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),tr=pr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),er=pr("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),rr=pr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),ir=pr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),nr=pr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ar=pr("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),or=pr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),sr=pr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),lr=pr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ur=pr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),cr=pr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),hr=pr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function pr(t,e){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i={};return{fragmentSource:t=t.replace(r,(function(t,e,r,n,a){return i[a]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nvarying "+r+" "+n+" "+a+";\n#else\nuniform "+r+" "+n+" u_"+a+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+a+"\n    "+r+" "+n+" "+a+" = u_"+a+";\n#endif\n"})),vertexSource:e=e.replace(r,(function(t,e,r,n,a){var o="float"===n?"vec2":"vec4",s=a.match(/color/)?"color":o;return i[a]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float u_"+a+"_t;\nattribute "+r+" "+o+" a_"+a+";\nvarying "+r+" "+n+" "+a+";\n#else\nuniform "+r+" "+n+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = a_"+a+";\n#else\n    "+r+" "+n+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = unpack_mix_"+s+"(a_"+a+", u_"+a+"_t);\n#else\n    "+r+" "+n+" "+a+" = u_"+a+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float u_"+a+"_t;\nattribute "+r+" "+o+" a_"+a+";\n#else\nuniform "+r+" "+n+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+r+" "+n+" "+a+" = a_"+a+";\n#else\n    "+r+" "+n+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+r+" "+n+" "+a+" = unpack_mix_"+s+"(a_"+a+", u_"+a+"_t);\n#else\n    "+r+" "+n+" "+a+" = u_"+a+";\n#endif\n"}))}}var dr=Object.freeze({__proto__:null,prelude:Ve,background:je,backgroundPattern:Ge,circle:He,clippingMask:We,heatmap:qe,heatmapTexture:Xe,collisionBox:$e,collisionCircle:Ye,debug:Ze,fill:Je,fillOutline:Ke,fillOutlinePattern:Qe,fillPattern:tr,fillExtrusion:er,fillExtrusionPattern:rr,hillshadePrepare:ir,hillshade:nr,line:ar,lineGradient:or,linePattern:sr,lineSDF:lr,raster:ur,symbolIcon:cr,symbolSDF:hr}),fr=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};fr.prototype.bind=function(t,e,r,i,n,a,o,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==i.length,u=0;!l&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(l=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==r||l||this.boundIndexBuffer!==n||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==o||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,r,i,n,a,o,s):(t.bindVertexArrayOES.set(this.vao),o&&o.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind())},fr.prototype.freshBind=function(t,e,r,i,n,a,o){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=i,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{s=u.currentNumAttributes||0;for(var h=l;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var p=0,d=r;p<d.length;p+=1)d[p].enableAttributes(c,t);a&&a.enableAttributes(c,t),o&&o.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,n);for(var f=0,m=r;f<m.length;f+=1){var v=m[f];v.bind(),v.setVertexAttribPointers(c,t,n)}a&&(a.bind(),a.setVertexAttribPointers(c,t,n)),i&&i.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,t,n)),u.currentNumAttributes=l},fr.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var mr=function(t,e,r,i,n){var a=t.gl;this.program=a.createProgram();var o=r.defines();n&&o.push("#define OVERDRAW_INSPECTOR;");var s=o.concat(Ve.fragmentSource,e.fragmentSource).join("\n"),l=o.concat(Ve.vertexSource,e.vertexSource).join("\n"),u=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(u,s),a.compileShader(u),a.attachShader(this.program,u);var c=a.createShader(a.VERTEX_SHADER);a.shaderSource(c,l),a.compileShader(c),a.attachShader(this.program,c);for(var h=r.layoutAttributes||[],p=0;p<h.length;p++)a.bindAttribLocation(this.program,p,h[p].name);a.linkProgram(this.program),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},f=0;f<this.numAttributes;f++){var m=a.getActiveAttrib(this.program,f);m&&(this.attributes[m.name]=a.getAttribLocation(this.program,m.name))}for(var v=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),g=0;g<v;g++){var y=a.getActiveUniform(this.program,g);y&&(d[y.name]=a.getUniformLocation(this.program,y.name))}this.fixedUniforms=i(t,d),this.binderUniforms=r.getUniforms(t,d)};function vr(e,r,i){var n=1/ce(i,1,r.transform.tileZoom),a=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,r.transform.tileZoom)/a,s=o*(i.tileID.canonical.x+i.tileID.wrap*a),l=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,n,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,l>>16],u_pixel_coord_lower:[65535&s,65535&l]}}mr.prototype.draw=function(t,e,r,i,n,a,o,s,l,u,c,h,p,d,f,m){var v,g=t.gl;for(var y in t.program.set(this.program),t.setDepthMode(r),t.setStencilMode(i),t.setColorMode(n),t.setCullFace(a),this.fixedUniforms)this.fixedUniforms[y].set(o[y]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:p});for(var _=(v={},v[g.LINES]=2,v[g.TRIANGLES]=3,v[g.LINE_STRIP]=1,v)[e],x=0,b=c.get();x<b.length;x+=1){var w=b[x],T=w.vaos||(w.vaos={});(T[s]||(T[s]=new fr)).bind(t,this,l,d?d.getPaintVertexBuffers():[],u,w.vertexOffset,f,m),g.drawElements(e,w.primitiveLength*_,g.UNSIGNED_SHORT,w.primitiveOffset*_*2)}};var gr=function(e,r,i,n){var a=r.style.light,o=a.properties.get("position"),s=[o.x,o.y,o.z],l=t.create$1();"viewport"===a.properties.get("anchor")&&t.fromRotation(l,-r.transform.angle),t.transformMat3(s,s,l);var u=a.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+i,u_opacity:n}},yr=function(e,r,i,n,a,o,s){return t.extend(gr(e,r,i,n),vr(o,r,s),{u_height_factor:-Math.pow(2,a.overscaledZ)/s.tileSize/8})},_r=function(t){return{u_matrix:t}},xr=function(e,r,i,n){return t.extend(_r(e),vr(i,r,n))},br=function(t,e){return{u_matrix:t,u_world:e}},wr=function(e,r,i,n,a){return t.extend(xr(e,r,i,n),{u_world:a})},Tr=function(e,r,i,n){var a,o,s=e.transform;if("map"===n.paint.get("circle-pitch-alignment")){var l=ce(i,1,s.zoom);a=!0,o=[l,l]}else a=!1,o=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(r.posMatrix,i,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+a,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:o}},Sr=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,r.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,r.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,r.u_overscale_factor)}},Er=function(t,e,r){var i=ce(r,1,e.zoom),n=Math.pow(2,e.zoom-r.tileID.overscaledZ),a=r.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:i,u_extrude_scale:[e.pixelsToGLUnits[0]/(i*n),e.pixelsToGLUnits[1]/(i*n)],u_overscale_factor:a}},Mr=function(t,e){return{u_matrix:t,u_color:e}},Ar=function(t){return{u_matrix:t}},Cr=function(t,e,r,i){return{u_matrix:t,u_extrude_scale:ce(e,1,r),u_intensity:i}},Pr=function(e,r,i,n){var a=t.create();t.ortho(a,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:a,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:i,u_color_ramp:n,u_opacity:r.paint.get("heatmap-opacity")}},Lr=function(t,e,r){var i=r.paint.get("hillshade-shadow-color"),n=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color"),o=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(o-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:kr(t,e.tileID),u_light:[r.paint.get("hillshade-exaggeration"),o],u_shadow:i,u_highlight:n,u_accent:a}},Ir=function(e,r,i){var n=r.stride,a=t.create();return t.ortho(a,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(a,a,[0,-t.EXTENT,0]),{u_matrix:a,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_maxzoom:i,u_unpack:r.getUnpackVector()}};function kr(e,r){var i=Math.pow(2,r.canonical.z),n=r.canonical.y;return[new t.MercatorCoordinate(0,n/i).toLngLat().lat,new t.MercatorCoordinate(0,(n+1)/i).toLngLat().lat]}var Rr=function(e,r,i){var n=e.transform;return{u_matrix:Fr(e,r,i),u_ratio:1/ce(r,1,n.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Or=function(e,r,i){return t.extend(Rr(e,r,i),{u_image:0})},zr=function(e,r,i,n){var a=e.transform,o=Br(r,a);return{u_matrix:Fr(e,r,i),u_texsize:r.imageAtlasTexture.size,u_ratio:1/ce(r,1,a.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[t.browser.devicePixelRatio,o,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Dr=function(e,r,i,n,a){var o=e.transform,s=e.lineAtlas,l=Br(r,o),u="round"===i.layout.get("line-cap"),c=s.getDash(n.from,u),h=s.getDash(n.to,u),p=c.width*a.fromScale,d=h.width*a.toScale;return t.extend(Rr(e,r,i),{u_patternscale_a:[l/p,-c.height/2],u_patternscale_b:[l/d,-h.height/2],u_sdfgamma:s.width/(256*Math.min(p,d)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:h.y,u_mix:a.t})};function Br(t,e){return 1/ce(t,1,e.tileZoom)}function Fr(t,e,r){return t.translatePosMatrix(e.tileID.posMatrix,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}var Nr=function(t,e,r,i,n){return{u_matrix:t,u_tl_parent:e,u_scale_parent:r,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(o=n.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(a=n.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Ur(n.paint.get("raster-hue-rotate"))};var a,o};function Ur(t){t*=Math.PI/180;var e=Math.sin(t),r=Math.cos(t);return[(2*r+1)/3,(-Math.sqrt(3)*e-r+1)/3,(Math.sqrt(3)*e-r+1)/3]}var Vr=function(t,e,r,i,n,a,o,s,l,u){var c=n.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:c.width/c.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+i,u_texsize:u,u_texture:0}},jr=function(e,r,i,n,a,o,s,l,u,c,h){var p=a.transform;return t.extend(Vr(e,r,i,n,a,o,s,l,u,c),{u_gamma_scale:n?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+h})},Gr=function(t,e,r){return{u_matrix:t,u_opacity:e,u_color:r}},Hr=function(e,r,i,n,a,o){return t.extend(function(t,e,r,i){var n=r.imageManager.getPattern(t.from.toString()),a=r.imageManager.getPattern(t.to.toString()),o=r.imageManager.getPixelSize(),s=o.width,l=o.height,u=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,r.transform.tileZoom)/u,h=c*(i.tileID.canonical.x+i.tileID.wrap*u),p=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/ce(i,1,r.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(n,o,i,a),{u_matrix:e,u_opacity:r})},Wr={fillExtrusion:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_lightpos:new t.Uniform3f(e,r.u_lightpos),u_lightintensity:new t.Uniform1f(e,r.u_lightintensity),u_lightcolor:new t.Uniform3f(e,r.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,r.u_vertical_gradient),u_opacity:new t.Uniform1f(e,r.u_opacity)}},fillExtrusionPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_lightpos:new t.Uniform3f(e,r.u_lightpos),u_lightintensity:new t.Uniform1f(e,r.u_lightintensity),u_lightcolor:new t.Uniform3f(e,r.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,r.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,r.u_height_factor),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade),u_opacity:new t.Uniform1f(e,r.u_opacity)}},fill:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},fillPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},fillOutline:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world)}},fillOutlinePattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},circle:function(e,r){return{u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,r.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,r.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},collisionBox:Sr,collisionCircle:Sr,debug:function(e,r){return{u_color:new t.UniformColor(e,r.u_color),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},clippingMask:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},heatmap:function(e,r){return{u_extrude_scale:new t.Uniform1f(e,r.u_extrude_scale),u_intensity:new t.Uniform1f(e,r.u_intensity),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},heatmapTexture:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world),u_image:new t.Uniform1i(e,r.u_image),u_color_ramp:new t.Uniform1i(e,r.u_color_ramp),u_opacity:new t.Uniform1f(e,r.u_opacity)}},hillshade:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_latrange:new t.Uniform2f(e,r.u_latrange),u_light:new t.Uniform2f(e,r.u_light),u_shadow:new t.UniformColor(e,r.u_shadow),u_highlight:new t.UniformColor(e,r.u_highlight),u_accent:new t.UniformColor(e,r.u_accent)}},hillshadePrepare:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_dimension:new t.Uniform2f(e,r.u_dimension),u_zoom:new t.Uniform1f(e,r.u_zoom),u_maxzoom:new t.Uniform1f(e,r.u_maxzoom),u_unpack:new t.Uniform4f(e,r.u_unpack)}},line:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels)}},lineGradient:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_image:new t.Uniform1i(e,r.u_image)}},linePattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_texsize:new t.Uniform2f(e,r.u_texsize),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_image:new t.Uniform1i(e,r.u_image),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},lineSDF:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,r.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,r.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,r.u_sdfgamma),u_image:new t.Uniform1i(e,r.u_image),u_tex_y_a:new t.Uniform1f(e,r.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,r.u_tex_y_b),u_mix:new t.Uniform1f(e,r.u_mix)}},raster:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_tl_parent:new t.Uniform2f(e,r.u_tl_parent),u_scale_parent:new t.Uniform1f(e,r.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,r.u_buffer_scale),u_fade_t:new t.Uniform1f(e,r.u_fade_t),u_opacity:new t.Uniform1f(e,r.u_opacity),u_image0:new t.Uniform1i(e,r.u_image0),u_image1:new t.Uniform1i(e,r.u_image1),u_brightness_low:new t.Uniform1f(e,r.u_brightness_low),u_brightness_high:new t.Uniform1f(e,r.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,r.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,r.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,r.u_spin_weights)}},symbolIcon:function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,r.u_coord_matrix),u_is_text:new t.Uniform1f(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texture:new t.Uniform1i(e,r.u_texture)}},symbolSDF:function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,r.u_coord_matrix),u_is_text:new t.Uniform1f(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texture:new t.Uniform1i(e,r.u_texture),u_gamma_scale:new t.Uniform1f(e,r.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_is_halo:new t.Uniform1f(e,r.u_is_halo)}},background:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_opacity:new t.Uniform1f(e,r.u_opacity),u_color:new t.UniformColor(e,r.u_color)}},backgroundPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_opacity:new t.Uniform1f(e,r.u_opacity),u_image:new t.Uniform1i(e,r.u_image),u_pattern_tl_a:new t.Uniform2f(e,r.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,r.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,r.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,r.u_pattern_br_b),u_texsize:new t.Uniform2f(e,r.u_texsize),u_mix:new t.Uniform1f(e,r.u_mix),u_pattern_size_a:new t.Uniform2f(e,r.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,r.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,r.u_scale_a),u_scale_b:new t.Uniform1f(e,r.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,r.u_tile_units_to_pixels)}}};function qr(e,r){for(var i=e.sort((function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0})),n=0;n<i.length;n++){var a={},o=i[n],s=i.slice(n+1);Xr(o.tileID.wrapped(),o.tileID,s,new t.OverscaledTileID(0,o.tileID.wrap+1,0,0,0),a),o.setMask(a,r)}}function Xr(e,r,i,n,a){for(var o=0;o<i.length;o++){var s=i[o];if(n.isLessThan(s.tileID))break;if(r.key===s.tileID.key)return;if(s.tileID.isChildOf(r)){for(var l=r.children(1/0),u=0;u<l.length;u++)Xr(e,l[u],i.slice(o),n,a);return}}var c=r.overscaledZ-e.overscaledZ,h=new t.CanonicalTileID(c,r.canonical.x-(e.canonical.x<<c),r.canonical.y-(e.canonical.y<<c));a[h.key]=a[h.key]||h}function $r(t,e,r,i,n,a,o,s){for(var l=t.context,u=l.gl,c=n?t.useProgram("collisionCircle"):t.useProgram("collisionBox"),h=0;h<i.length;h++){var p=i[h],d=e.getTile(p),f=d.getBucket(r);if(f){var m=n?s?f.textCollisionCircle:f.iconCollisionCircle:s?f.textCollisionBox:f.iconCollisionBox;if(m){var v=p.posMatrix;0===a[0]&&0===a[1]||(v=t.translatePosMatrix(p.posMatrix,d,a,o)),c.draw(l,n?u.TRIANGLES:u.LINES,Et.disabled,Mt.disabled,t.colorModeForRenderPass(),Ct.disabled,Er(v,t.transform,d),r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,t.transform.zoom,null,null,m.collisionVertexBuffer)}}}}function Yr(t,e,r,i,n,a,o){$r(t,e,r,i,!1,n,a,o),$r(t,e,r,i,!0,n,a,o)}var Zr=t.identity(new Float32Array(16));function Jr(e,r,i,n,a,o){var s=t.getAnchorAlignment(e),l=-(s.horizontalAlign-.5)*r,u=-(s.verticalAlign-.5)*i,c=t.evaluateVariableOffset(e,n);return new t.Point((l/a+c[0])*o,(u/a+c[1])*o)}function Kr(e,r,i,n,a,o,s,l,u,c,h){var p=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,m={};d.clear();for(var v=0;v<p.length;v++){var g=p.get(v),y=e.allowVerticalPlacement&&!g.placedOrientation,_=g.hidden||!g.crossTileID||y?null:n[g.crossTileID];if(_){var x=new t.Point(g.anchorX,g.anchorY),b=Jt(x,i?l:s),w=.5+o.cameraToCenterDistance/b.signedDistanceFromCamera*.5,T=a.evaluateSizeForFeature(e.textSizeData,c,g)*w/t.ONE_EM;i&&(T*=e.tilePixelRatio/u);for(var S=_.width,E=_.height,M=Jr(_.anchor,S,E,_.textOffset,_.textBoxScale,T),A=i?Jt(x.add(M),s).point:b.point.add(r?M.rotate(-o.angle):M),C=e.allowVerticalPlacement&&g.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,P=0;P<g.numGlyphs;P++)t.addDynamicAttributes(d,A,C);h&&g.associatedIconIndex>=0&&(m[g.associatedIconIndex]={shiftedAnchor:A,angle:C})}else oe(g.numGlyphs,d)}if(h){f.clear();for(var L=e.icon.placedSymbolArray,I=0;I<L.length;I++){var k=L.get(I);if(k.hidden)oe(k.numGlyphs,f);else{var R=m[I];if(R)for(var O=0;O<k.numGlyphs;O++)t.addDynamicAttributes(f,R.shiftedAnchor,R.angle);else oe(k.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function Qr(e,r,i,n,a,o,s,l,u,c,h,p){for(var d,f,m=e.context,v=m.gl,g=e.transform,y="map"===l,_="map"===u,x=y&&"point"!==i.layout.get("symbol-placement"),b=y&&!_&&!x,w=void 0!==i.layout.get("symbol-sort-key").constantOr(1),T=e.depthModeForSublayer(0,Et.ReadOnly),S=i.layout.get("text-variable-anchor"),E=[],M=0,A=n;M<A.length;M+=1){var C=A[M],P=r.getTile(C),L=P.getBucket(i);if(L){var I=a?L.text:L.icon;if(I&&I.segments.get().length){var k=I.programConfigurations.get(i.id),R=a||L.sdfIcons,O=a?L.textSizeData:L.iconSizeData;d||(d=e.useProgram(R?"symbolSDF":"symbolIcon",k),f=t.evaluateSizeForZoom(O,g.zoom)),m.activeTexture.set(v.TEXTURE0);var z=void 0,D=void 0,B=void 0;if(a)D=P.glyphAtlasTexture,B=v.LINEAR,z=P.glyphAtlasTexture.size;else{var F=1!==i.layout.get("icon-size").constantOr(0)||L.iconsNeedLinear,N=_||0!==g.pitch;D=P.imageAtlasTexture,B=R||e.options.rotating||e.options.zooming||F||N?v.LINEAR:v.NEAREST,z=P.imageAtlasTexture.size}var U=ce(P,1,e.transform.zoom),V=Yt(C.posMatrix,_,y,e.transform,U),j=Zt(C.posMatrix,_,y,e.transform,U),G=S&&L.hasTextData(),H="none"!==i.layout.get("icon-text-fit")&&G&&L.hasIconData();x&&Qt(L,C.posMatrix,e,a,V,j,_,c);var W=e.translatePosMatrix(C.posMatrix,P,o,s),q=x||a&&S||H?Zr:V,X=e.translatePosMatrix(j,P,o,s,!0),$=R&&0!==i.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),Y={program:d,buffers:I,uniformValues:R?jr(O.kind,f,b,_,e,W,q,X,a,z,!0):Vr(O.kind,f,b,_,e,W,q,X,a,z),atlasTexture:D,atlasInterpolation:B,isSDF:R,hasHalo:$};if(w)for(var Z=0,J=I.segments.get();Z<J.length;Z+=1){var K=J[Z];E.push({segments:new t.SegmentVector([K]),sortKey:K.sortKey,state:Y})}else E.push({segments:I.segments,sortKey:0,state:Y})}}}w&&E.sort((function(t,e){return t.sortKey-e.sortKey}));for(var Q=0,tt=E;Q<tt.length;Q+=1){var et=tt[Q],rt=et.state;if(rt.atlasTexture.bind(rt.atlasInterpolation,v.CLAMP_TO_EDGE),rt.isSDF){var it=rt.uniformValues;rt.hasHalo&&(it.u_is_halo=1,ti(rt.buffers,et.segments,i,e,rt.program,T,h,p,it)),it.u_is_halo=0}ti(rt.buffers,et.segments,i,e,rt.program,T,h,p,rt.uniformValues)}}function ti(t,e,r,i,n,a,o,s,l){var u=i.context,c=u.gl;n.draw(u,c.TRIANGLES,a,o,s,Ct.disabled,l,r.id,t.layoutVertexBuffer,t.indexBuffer,e,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function ei(t,e,r,i,n,a,o){var s,l,u,c,h,p=t.context.gl,d=r.paint.get("fill-pattern"),f=d&&d.constantOr(1),m=r.getCrossfadeParameters();o?(l=f&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(l=f?"fillPattern":"fill",s=p.TRIANGLES);for(var v=0,g=i;v<g.length;v+=1){var y=g[v],_=e.getTile(y);if(!f||_.patternsLoaded()){var x=_.getBucket(r);if(x){var b=x.programConfigurations.get(r.id),w=t.useProgram(l,b);f&&(t.context.activeTexture.set(p.TEXTURE0),_.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),b.updatePatternPaintBuffers(m));var T=d.constantOr(null);if(T&&_.imageAtlas){var S=_.imageAtlas,E=S.patternPositions[T.to.toString()],M=S.patternPositions[T.from.toString()];E&&M&&b.setConstantPatternPositions(E,M)}var A=t.translatePosMatrix(y.posMatrix,_,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(o){c=x.indexBuffer2,h=x.segments2;var C=[p.drawingBufferWidth,p.drawingBufferHeight];u="fillOutlinePattern"===l&&f?wr(A,t,m,_,C):br(A,C)}else c=x.indexBuffer,h=x.segments,u=f?xr(A,t,m,_):_r(A);w.draw(t.context,s,n,t.stencilModeForClipping(y),a,Ct.disabled,u,r.id,x.layoutVertexBuffer,c,h,r.paint,t.transform.zoom,b)}}}}function ri(t,e,r,i,n,a,o){for(var s=t.context,l=s.gl,u=r.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),h=r.getCrossfadeParameters(),p=r.paint.get("fill-extrusion-opacity"),d=0,f=i;d<f.length;d+=1){var m=f[d],v=e.getTile(m),g=v.getBucket(r);if(g){var y=g.programConfigurations.get(r.id),_=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(t.context.activeTexture.set(l.TEXTURE0),v.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePatternPaintBuffers(h));var x=u.constantOr(null);if(x&&v.imageAtlas){var b=v.imageAtlas,w=b.patternPositions[x.to.toString()],T=b.patternPositions[x.from.toString()];w&&T&&y.setConstantPatternPositions(w,T)}var S=t.translatePosMatrix(m.posMatrix,v,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),E=r.paint.get("fill-extrusion-vertical-gradient"),M=c?yr(S,t,E,p,m,h,v):gr(S,t,E,p);_.draw(s,s.gl.TRIANGLES,n,a,o,Ct.backCCW,M,r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,t.transform.zoom,y)}}}function ii(t,e,r,i,n,a){var o=t.context,s=o.gl,l=e.fbo;if(l){var u=t.useProgram("hillshade");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var c=Lr(t,e,r);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?u.draw(o,s.TRIANGLES,i,n,a,Ct.disabled,c,r.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):u.draw(o,s.TRIANGLES,i,n,a,Ct.disabled,c,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function ni(e,r,i,n,a,o,s){var l=e.context,u=l.gl,c=r.dem;if(c&&c.data){var h=c.dim,p=c.stride,d=c.getPixels();if(l.activeTexture.set(u.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||e.getTileTexture(p),r.demTexture){var f=r.demTexture;f.update(d,{premultiply:!1}),f.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else r.demTexture=new t.Texture(l,d,u.RGBA,{premultiply:!1}),r.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);l.activeTexture.set(u.TEXTURE0);var m=r.fbo;if(!m){var v=new t.Texture(l,{width:h,height:h,data:null},u.RGBA);v.bind(u.LINEAR,u.CLAMP_TO_EDGE),(m=r.fbo=l.createFramebuffer(h,h)).colorAttachment.set(v.texture)}l.bindFramebuffer.set(m.framebuffer),l.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(l,u.TRIANGLES,a,o,s,Ct.disabled,Ir(r.tileID,c,n),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function ai(e,r,i,n,a){var o=n.paint.get("raster-fade-duration");if(o>0){var s=t.browser.now(),l=(s-e.timeAdded)/o,u=r?(s-r.timeAdded)/o:-1,c=i.getSource(),h=a.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!r||Math.abs(r.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=p&&e.refreshedUponExpiration?1:t.clamp(p?l:1-u,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),r?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}function oi(e,r,i){var n=e.context,a=n.gl,o=i.posMatrix,s=e.useProgram("debug"),l=Et.disabled,u=Mt.disabled,c=e.colorModeForRenderPass(),h="$debug";s.draw(n,a.LINE_STRIP,l,u,c,Ct.disabled,Mr(o,t.Color.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var p=r.getTileByID(i.key).latestRawTileData,d=p&&p.byteLength||0,f=Math.floor(d/1024),m=r.getTile(i).tileSize,v=512/Math.min(m,512),g=function(t,e,r,i){i=i||1;var n,a,o,s,l,u,c,h,p=[];for(n=0,a=t.length;n<a;n++)if(l=si[t[n]]){for(h=null,o=0,s=l[1].length;o<s;o+=2)-1===l[1][o]&&-1===l[1][o+1]?h=null:(u=e+l[1][o]*i,c=r-l[1][o+1]*i,h&&p.push(h.x,h.y,u,c),h={x:u,y:c});e+=l[0]*i}return p}(i.toString()+" "+f+"kb",50,200*v,5*v),y=new t.StructArrayLayout2i4,_=new t.StructArrayLayout2ui4,x=0;x<g.length;x+=2)y.emplaceBack(g[x],g[x+1]),_.emplaceBack(x,x+1);for(var b=n.createVertexBuffer(y,Ue.members),w=n.createIndexBuffer(_),T=t.SegmentVector.simpleSegment(0,0,y.length/2,y.length/2),S=t.EXTENT/(Math.pow(2,e.transform.zoom-i.overscaledZ)*m*v),E=[],M=-1;M<=1;M++)for(var A=-1;A<=1&&(0!==M||0!==A);A++)E.push([M,A]);for(var C=0;C<E.length;C++){var P=E[C];s.draw(n,a.LINES,l,u,c,Ct.disabled,Mr(t.translate([],o,[S*P[0],S*P[1],0]),t.Color.white),h,b,w,T)}s.draw(n,a.LINES,l,u,c,Ct.disabled,Mr(o,t.Color.black),h,b,w,T),b.destroy(),w.destroy(),T.destroy()}var si={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},li={symbol:function(e,r,i,n,a){if("translucent"===e.renderPass){var o=Mt.disabled,s=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,r,i,n,a,o,s){for(var l=r.transform,u="map"===a,c="map"===o,h=0,p=e;h<p.length;h+=1){var d=p[h],f=n.getTile(d),m=f.getBucket(i);if(m&&m.text&&m.text.segments.get().length){var v=m.textSizeData,g=t.evaluateSizeForZoom(v,l.zoom),y=ce(f,1,r.transform.zoom),_=Yt(d.posMatrix,c,u,r.transform,y),x="none"!==i.layout.get("icon-text-fit")&&m.hasIconData();if(g){var b=Math.pow(2,l.zoom-f.tileID.overscaledZ);Kr(m,u,c,s,t.symbolSize,l,_,d.posMatrix,b,g,x)}}}}(n,e,i,r,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),a),0!==i.paint.get("icon-opacity").constantOr(1)&&Qr(e,r,i,n,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),o,s),0!==i.paint.get("text-opacity").constantOr(1)&&Qr(e,r,i,n,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),o,s),r.map.showCollisionBoxes&&(Yr(e,r,i,n,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),Yr(e,r,i,n,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(e,r,i,n){if("translucent"===e.renderPass){var a=i.paint.get("circle-opacity"),o=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var u=e.context,c=u.gl,h=e.depthModeForSublayer(0,Et.ReadOnly),p=Mt.disabled,d=e.colorModeForRenderPass(),f=[],m=0;m<n.length;m++){var v=n[m],g=r.getTile(v),y=g.getBucket(i);if(y){var _=y.programConfigurations.get(i.id),x={programConfiguration:_,program:e.useProgram("circle",_),layoutVertexBuffer:y.layoutVertexBuffer,indexBuffer:y.indexBuffer,uniformValues:Tr(e,v,g,i)};if(l)for(var b=0,w=y.segments.get();b<w.length;b+=1){var T=w[b];f.push({segments:new t.SegmentVector([T]),sortKey:T.sortKey,state:x})}else f.push({segments:y.segments,sortKey:0,state:x})}}l&&f.sort((function(t,e){return t.sortKey-e.sortKey}));for(var S=0,E=f;S<E.length;S+=1){var M=E[S],A=M.state,C=A.programConfiguration,P=A.program,L=A.layoutVertexBuffer,I=A.indexBuffer,k=A.uniformValues,R=M.segments;P.draw(u,c.TRIANGLES,h,p,d,Ct.disabled,k,i.id,L,I,R,i.paint,e.transform.zoom,C)}}}},heatmap:function(e,r,i,n){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var a=e.context,o=a.gl,s=e.depthModeForSublayer(0,Et.ReadOnly),l=Mt.disabled,u=new At([o.ONE,o.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,r){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var n=r.heatmapFbo;if(n)i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{var a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),n=r.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,r,i,n){var a=e.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,r.width/4,r.height/4,0,a.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),n.colorAttachment.set(i),e.extTextureHalfFloat&&a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,n.colorAttachment.setDirty(),t(e,r,i,n))}(t,e,a,n)}}(a,e,i),a.clear({color:t.Color.transparent});for(var c=0;c<n.length;c++){var h=n[c];if(!r.hasRenderableParent(h)){var p=r.getTile(h),d=p.getBucket(i);if(d){var f=d.programConfigurations.get(i.id),m=e.useProgram("heatmap",f),v=e.transform.zoom;m.draw(a,o.TRIANGLES,s,l,u,Ct.disabled,Cr(h.posMatrix,p,v,i.paint.get("heatmap-intensity")),i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,i.paint,e.transform.zoom,f)}}}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,r){var i=e.context,n=i.gl,a=r.heatmapFbo;if(a){i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,a.colorAttachment.get()),i.activeTexture.set(n.TEXTURE1);var o=r.colorRampTexture;o||(o=r.colorRampTexture=new t.Texture(i,r.colorRamp,n.RGBA)),o.bind(n.LINEAR,n.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,n.TRIANGLES,Et.disabled,Mt.disabled,e.colorModeForRenderPass(),Ct.disabled,Pr(e,r,0,1),r.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,r.paint,e.transform.zoom)}}(e,i))},line:function(e,r,i,n){if("translucent"===e.renderPass){var a=i.paint.get("line-opacity"),o=i.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var s=e.depthModeForSublayer(0,Et.ReadOnly),l=e.colorModeForRenderPass(),u=i.paint.get("line-dasharray"),c=i.paint.get("line-pattern"),h=c.constantOr(1),p=i.paint.get("line-gradient"),d=i.getCrossfadeParameters(),f=u?"lineSDF":h?"linePattern":p?"lineGradient":"line",m=e.context,v=m.gl,g=!0;if(p){m.activeTexture.set(v.TEXTURE0);var y=i.gradientTexture;if(!i.gradient)return;y||(y=i.gradientTexture=new t.Texture(m,i.gradient,v.RGBA)),y.bind(v.LINEAR,v.CLAMP_TO_EDGE)}for(var _=0,x=n;_<x.length;_+=1){var b=x[_],w=r.getTile(b);if(!h||w.patternsLoaded()){var T=w.getBucket(i);if(T){var S=T.programConfigurations.get(i.id),E=e.context.program.get(),M=e.useProgram(f,S),A=g||M.program!==E,C=c.constantOr(null);if(C&&w.imageAtlas){var P=w.imageAtlas,L=P.patternPositions[C.to.toString()],I=P.patternPositions[C.from.toString()];L&&I&&S.setConstantPatternPositions(L,I)}var k=u?Dr(e,w,i,u,d):h?zr(e,w,i,d):p?Or(e,w,i):Rr(e,w,i);u&&(A||e.lineAtlas.dirty)?(m.activeTexture.set(v.TEXTURE0),e.lineAtlas.bind(m)):h&&(m.activeTexture.set(v.TEXTURE0),w.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),S.updatePatternPaintBuffers(d)),M.draw(m,v.TRIANGLES,s,e.stencilModeForClipping(b),l,Ct.disabled,k,i.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,i.paint,e.transform.zoom,S),g=!1}}}}}},fill:function(e,r,i,n){var a=i.paint.get("fill-color"),o=i.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(t.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?Et.ReadWrite:Et.ReadOnly);ei(e,r,i,n,c,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){var h=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,Et.ReadOnly);ei(e,r,i,n,h,s,!0)}}},"fill-extrusion":function(t,e,r,i){var n=r.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===t.renderPass){var a=new Et(t.context.gl.LEQUAL,Et.ReadWrite,t.depthRangeFor3D);if(1!==n||r.paint.get("fill-extrusion-pattern").constantOr(1))ri(t,e,r,i,a,Mt.disabled,At.disabled),ri(t,e,r,i,a,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var o=t.colorModeForRenderPass();ri(t,e,r,i,a,Mt.disabled,o)}}},hillshade:function(t,e,r,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var n=t.context,a=e.getSource().maxzoom,o=t.depthModeForSublayer(0,Et.ReadOnly),s=Mt.disabled,l=t.colorModeForRenderPass(),u=0,c=i;u<c.length;u+=1){var h=c[u],p=e.getTile(h);p.needsHillshadePrepare&&"offscreen"===t.renderPass?ni(t,p,r,a,o,s,l):"translucent"===t.renderPass&&ii(t,p,r,o,s,l)}n.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,r,i){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity"))for(var n=t.context,a=n.gl,o=e.getSource(),s=t.useProgram("raster"),l=Mt.disabled,u=t.colorModeForRenderPass(),c=i.length&&i[0].overscaledZ,h=!t.options.moving,p=0,d=i;p<d.length;p+=1){var f=d[p],m=t.depthModeForSublayer(f.overscaledZ-c,1===r.paint.get("raster-opacity")?Et.ReadWrite:Et.ReadOnly,a.LESS),v=e.getTile(f),g=t.transform.calculatePosMatrix(f.toUnwrapped(),h);v.registerFadeDuration(r.paint.get("raster-fade-duration"));var y=e.findLoadedParent(f,0),_=ai(v,y,e,r,t.transform),x=void 0,b=void 0,w="nearest"===r.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;n.activeTexture.set(a.TEXTURE0),v.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(a.TEXTURE1),y?(y.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,y.tileID.overscaledZ-v.tileID.overscaledZ),b=[v.tileID.canonical.x*x%1,v.tileID.canonical.y*x%1]):v.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var T=Nr(g,b||[0,0],x||1,_,r);o instanceof I?s.draw(n,a.TRIANGLES,m,l,u,Ct.disabled,T,r.id,o.boundsBuffer,t.quadTriangleIndexBuffer,o.boundsSegments):v.maskedBoundsBuffer&&v.maskedIndexBuffer&&v.segments?s.draw(n,a.TRIANGLES,m,l,u,Ct.disabled,T,r.id,v.maskedBoundsBuffer,v.maskedIndexBuffer,v.segments,r.paint,t.transform.zoom):s.draw(n,a.TRIANGLES,m,l,u,Ct.disabled,T,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,r){var i=r.paint.get("background-color"),n=r.paint.get("background-opacity");if(0!==n){var a=t.context,o=a.gl,s=t.transform,l=s.tileSize,u=r.paint.get("background-pattern");if(!t.isPatternMissing(u)){var c=!u&&1===i.a&&1===n&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var h=Mt.disabled,p=t.depthModeForSublayer(0,"opaque"===c?Et.ReadWrite:Et.ReadOnly),d=t.colorModeForRenderPass(),f=t.useProgram(u?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:l});u&&(a.activeTexture.set(o.TEXTURE0),t.imageManager.bind(t.context));for(var v=r.getCrossfadeParameters(),g=0,y=m;g<y.length;g+=1){var _=y[g],x=t.transform.calculatePosMatrix(_.toUnwrapped()),b=u?Hr(x,n,t,u,{tileID:_,tileSize:l},v):Gr(x,n,i);f.draw(a,o.TRIANGLES,p,h,d,Ct.disabled,b,r.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,r){for(var i=0;i<r.length;i++)oi(t,e,r[i])},custom:function(t,e,r){var i=t.context,n=r.implementation;if("offscreen"===t.renderPass){var a=n.prerender;a&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),a.call(n,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(Mt.disabled);var o="3d"===n.renderingMode?new Et(t.context.gl.LEQUAL,Et.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Et.ReadOnly);i.setDepthMode(o),n.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}},ui=function(e,r){this.context=new Pt(e),this.transform=r,this._tileTextures={},this.setup(),this.numSublayers=Lt.maxUnderzooming+Lt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new ze};function ci(t,e){if(t.y>e.y){var r=t;t=e,e=r}return{x0:t.x,y0:t.y,x1:e.x,y1:e.y,dx:e.x-t.x,dy:e.y-t.y}}function hi(t,e,r,i,n){var a=Math.max(r,Math.floor(e.y0)),o=Math.min(i,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=t.dx>0,h=e.dx<0,p=a;p<o;p++){var d=l*Math.max(0,Math.min(t.dy,p+c-t.y0))+t.x0,f=u*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;n(Math.floor(f),Math.ceil(d),p)}}function pi(t,e,r,i,n,a){var o,s=ci(t,e),l=ci(e,r),u=ci(r,t);s.dy>l.dy&&(o=s,s=l,l=o),s.dy>u.dy&&(o=s,s=u,u=o),l.dy>u.dy&&(o=l,l=u,u=o),s.dy&&hi(u,s,i,n,a),l.dy&&hi(u,l,i,n,a)}ui.prototype.resize=function(e,r){var i=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=r*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var n=0,a=this.style._order;n<a.length;n+=1){var o=a[n];this.style._layers[o].resize()}this.depthRbo&&(i.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},ui.prototype.setup=function(){var e=this.context,r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(r,Ue.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,Ue.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var n=new t.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(t.EXTENT,0,t.EXTENT,0),n.emplaceBack(0,t.EXTENT,0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(n,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,Ue.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(o);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var l=this.context.gl;this.stencilClearMode=new Mt({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},ui.prototype.clearStencil=function(){var e=this.context,r=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var i=t.create();t.ortho(i,0,this.width,this.height,0,0,1),t.scale(i,i,[r.drawingBufferWidth,r.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,r.TRIANGLES,Et.disabled,this.stencilClearMode,At.disabled,Ct.disabled,Ar(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ui.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var r=this.context,i=r.gl;this.nextStencilID+e.length>256&&this.clearStencil(),r.setColorMode(At.disabled),r.setDepthMode(Et.disabled);var n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var a=0,o=e;a<o.length;a+=1){var s=o[a],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;n.draw(r,i.TRIANGLES,Et.disabled,new Mt({func:i.ALWAYS,mask:0},l,255,i.KEEP,i.KEEP,i.REPLACE),At.disabled,Ct.disabled,Ar(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ui.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Mt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},ui.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Mt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},ui.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new At([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?At.unblended:At.alphaBlended},ui.prototype.depthModeForSublayer=function(t,e,r){if(!this.opaquePassEnabledForLayer())return Et.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Et(r||this.context.gl.LEQUAL,e,[i,i])},ui.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ui.prototype.render=function(e,r){this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var i=this.style._order,n=this.style.sourceCaches;for(var a in n){var o=n[a];o.used&&o.prepare(this.context)}var s={},l={},u={};for(var c in n){var h=n[c];s[c]=h.getVisibleCoordinates(),l[c]=s[c].slice().reverse(),u[c]=h.getVisibleCoordinates(!0).reverse()}for(var p in n){var d=n[p],f=d.getSource();if("raster"===f.type||"raster-dem"===f.type){for(var m=[],v=0,g=s[p];v<g.length;v+=1){var y=g[v];m.push(d.getTile(y))}qr(m,this.context)}}this.opaquePassCutoff=1/0;for(var _=0;_<i.length;_++){var x=i[_];if(this.style._layers[x].is3D()){this.opaquePassCutoff=_;break}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var b=0,w=i;b<w.length;b+=1){var T=w[b],S=this.style._layers[T];if(S.hasOffscreenPass()&&!S.isHidden(this.transform.zoom)){var E=l[S.source];("custom"===S.type||E.length)&&this.renderLayer(this,n[S.source],S,E)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var M=this.style._layers[i[this.currentLayer]],A=n[M.source],C=s[M.source];this._renderTileClippingMasks(M,C),this.renderLayer(this,A,M,C)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var P=this.style._layers[i[this.currentLayer]],L=n[P.source],I=("symbol"===P.type?u:l)[P.source];this._renderTileClippingMasks(P,s[P.source]),this.renderLayer(this,L,P,I)}if(this.options.showTileBoundaries)for(var k in n){li.debug(this,n[k],s[k]);break}this.context.setDefault()},ui.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},ui.prototype.renderLayer=function(t,e,r,i){r.isHidden(this.transform.zoom)||("background"===r.type||"custom"===r.type||i.length)&&(this.id=r.id,li[r.type](t,e,r,i,this.style.placement.variableOffsets))},ui.prototype.translatePosMatrix=function(e,r,i,n,a){if(!i[0]&&!i[1])return e;var o=a?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);i=[i[0]*l-i[1]*s,i[0]*s+i[1]*l]}var u=[a?i[0]:ce(r,i[0],this.transform.zoom),a?i[1]:ce(r,i[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c},ui.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},ui.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},ui.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from.toString()),r=this.imageManager.getPattern(t.to.toString());return!e||!r},ui.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var r=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[r]||(this.cache[r]=new mr(this.context,dr[t],e,Wr[t],this._showOverdrawInspector)),this.cache[r]},ui.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ui.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var di=function(e,r,i){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===i||i,this._minZoom=e||0,this._maxZoom=r||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},fi={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};di.prototype.clone=function(){var t=new di(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},fi.minZoom.get=function(){return this._minZoom},fi.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},fi.maxZoom.get=function(){return this._maxZoom},fi.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},fi.renderWorldCopies.get=function(){return this._renderWorldCopies},fi.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},fi.worldSize.get=function(){return this.tileSize*this.scale},fi.centerPoint.get=function(){return this.size._div(2)},fi.size.get=function(){return new t.Point(this.width,this.height)},fi.bearing.get=function(){return-this.angle/Math.PI*180},fi.bearing.set=function(e){var r=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},fi.pitch.get=function(){return this._pitch/Math.PI*180},fi.pitch.set=function(e){var r=t.clamp(e,0,60)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())},fi.fov.get=function(){return this._fov/Math.PI*180},fi.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},fi.zoom.get=function(){return this._zoom},fi.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},fi.center.get=function(){return this._center},fi.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},di.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},di.prototype.getVisibleUnwrappedCoordinates=function(e){var r=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new t.Point(0,0)),n=this.pointCoordinate(new t.Point(this.width,0)),a=this.pointCoordinate(new t.Point(this.width,this.height)),o=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(i.x,n.x,a.x,o.x)),l=Math.floor(Math.max(i.x,n.x,a.x,o.x)),u=s-1;u<=l+1;u++)0!==u&&r.push(new t.UnwrappedTileID(u,e));return r},di.prototype.coveringTiles=function(e){var r=this.coveringZoomLevel(e),i=r;if(void 0!==e.minzoom&&r<e.minzoom)return[];void 0!==e.maxzoom&&r>e.maxzoom&&(r=e.maxzoom);var n=t.MercatorCoordinate.fromLngLat(this.center),a=Math.pow(2,r),o=new t.Point(a*n.x-.5,a*n.y-.5);return function(e,r,i,n){void 0===n&&(n=!0);var a=1<<e,o={};function s(r,s,l){var u,c,h,p;if(l>=0&&l<=a)for(u=r;u<s;u++)c=Math.floor(u/a),h=(u%a+a)%a,0!==c&&!0!==n||(p=new t.OverscaledTileID(i,c,e,h,l),o[p.key]=p)}var l=r.map((function(e){return new t.Point(e.x,e.y)._mult(a)}));return pi(l[0],l[1],l[2],0,a,s),pi(l[2],l[3],l[0],0,a,s),Object.keys(o).map((function(t){return o[t]}))}(r,[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))],e.reparseOverscaled?i:r,this._renderWorldCopies).sort((function(t,e){return o.dist(t.canonical)-o.dist(e.canonical)}))},di.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},fi.unmodified.get=function(){return this._unmodified},di.prototype.zoomScale=function(t){return Math.pow(2,t)},di.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},di.prototype.project=function(e){var r=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(r)*this.worldSize)},di.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},fi.point.get=function(){return this.project(this.center)},di.prototype.setLocationAtPoint=function(e,r){var i=this.pointCoordinate(r),n=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),o=new t.MercatorCoordinate(a.x-(i.x-n.x),a.y-(i.y-n.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},di.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},di.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},di.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},di.prototype.coordinateLocation=function(t){return t.toLngLat()},di.prototype.pointCoordinate=function(e){var r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);var n=r[3],a=i[3],o=r[0]/n,s=i[0]/a,l=r[1]/n,u=i[1]/a,c=r[2]/n,h=i[2]/a,p=c===h?0:(0-c)/(h-c);return new t.MercatorCoordinate(t.number(o,s,p)/this.worldSize,t.number(l,u,p)/this.worldSize)},di.prototype.coordinatePoint=function(e){var r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(r,r,this.pixelMatrix),new t.Point(r[0]/r[3],r[1]/r[3])},di.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},di.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},di.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},di.prototype.calculatePosMatrix=function(e,r){void 0===r&&(r=!1);var i=e.key,n=r?this._alignedPosMatrixCache:this._posMatrixCache;if(n[i])return n[i];var a=e.canonical,o=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*o,a.y*o,0]),t.scale(l,l,[o/t.EXTENT,o/t.EXTENT,1]),t.multiply(l,r?this.alignedProjMatrix:this.projMatrix,l),n[i]=new Float32Array(l),n[i]},di.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},di.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,r,i,n,a=-90,o=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;a=t.mercatorYfromLat(h[1])*this.worldSize,e=(o=t.mercatorYfromLat(h[0])*this.worldSize)-a<u.y?u.y/(o-a):0}if(this.lngRange){var p=this.lngRange;s=t.mercatorXfromLng(p[0])*this.worldSize,r=(l=t.mercatorXfromLng(p[1])*this.worldSize)-s<u.x?u.x/(l-s):0}var d=this.point,f=Math.max(r||0,e||0);if(f)return this.center=this.unproject(new t.Point(r?(l+s)/2:d.x,e?(o+a)/2:d.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=d.y,v=u.y/2;m-v<a&&(n=a+v),m+v>o&&(n=o-v)}if(this.lngRange){var g=d.x,y=u.x/2;g-y<s&&(i=s+y),g+y>l&&(i=l-y)}void 0===i&&void 0===n||(this.center=this.unproject(new t.Point(void 0!==i?i:d.x,void 0!==n?n:d.y))),this._unmodified=c,this._constraining=!1}},di.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,r=Math.PI/2+this._pitch,i=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-r-e),n=this.point,a=n.x,o=n.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),l=this.height/50,u=new Float64Array(16);t.perspective(u,this._fov,this.width/this.height,l,s),t.scale(u,u,[1,-1,1]),t.translate(u,u,[0,0,-this.cameraToCenterDistance]),t.rotateX(u,u,this._pitch),t.rotateZ(u,u,this.angle),t.translate(u,u,[-a,-o,0]),this.mercatorMatrix=t.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),t.scale(u,u,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u;var c=this.width%2/2,h=this.height%2/2,p=Math.cos(this.angle),d=Math.sin(this.angle),f=a-Math.round(a)+p*c+d*h,m=o-Math.round(o)+p*h+d*c,v=new Float64Array(u);if(t.translate(v,v,[f>.5?f-1:f,m>.5?m-1:m,0]),this.alignedProjMatrix=v,u=t.create(),t.scale(u,u,[this.width/2,-this.height/2,1]),t.translate(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=t.create(),t.scale(u,u,[1,-1,1]),t.translate(u,u,[-1,-1,0]),t.scale(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(u=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},di.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(r,r,this.pixelMatrix)[3]/this.cameraToCenterDistance},di.prototype.getCameraPoint=function(){var e=this._pitch,r=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,r))},di.prototype.getCameraQueryGeometry=function(e){var r=this.getCameraPoint();if(1===e.length)return[e[0],r];for(var i=r.x,n=r.y,a=r.x,o=r.y,s=0,l=e;s<l.length;s+=1){var u=l[s];i=Math.min(i,u.x),n=Math.min(n,u.y),a=Math.max(a,u.x),o=Math.max(o,u.y)}return[new t.Point(i,n),new t.Point(a,n),new t.Point(a,o),new t.Point(i,o),new t.Point(i,n)]},Object.defineProperties(di.prototype,fi);var mi=function(e){var r,i,n,a,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(r=this._updateHashUnthrottled.bind(this),i=300,n=!1,a=null,o=function(){a=null,n&&(r(),a=setTimeout(o,i),n=!1)},function(){return n=!0,a||o(),a})};mi.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},mi.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},mi.prototype.getHashString=function(e){var r=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,n=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,n),o=Math.round(r.lng*a)/a,s=Math.round(r.lat*a)/a,l=this._map.getBearing(),u=this._map.getPitch(),c="";if(c+=e?"/"+o+"/"+s+"/"+i:i+"/"+s+"/"+o,(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/"+Math.round(u)),this._hashName){var h=this._hashName,p=!1,d=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===h?(p=!0,e+"="+c):t})).filter((function(t){return t}));return p||d.push(h+"="+c),"#"+d.join("&")}return"#"+c},mi.prototype._getCurrentHash=function(){var e=this,r=t.window.location.hash.replace("#","");if(this._hashName){var i=r.split("&").map((function(t){return t.split("=")})).find((function(t){return t[0]===e._hashName}));return(i&&i[1]||"").split("/")}return r.split("/")},mi.prototype._onHashChange=function(){var t=this._getCurrentHash();return t.length>=3&&!t.some((function(t){return isNaN(t)}))&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},mi.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var vi=function(e){function i(i,n,a,o){void 0===o&&(o={});var s=r.mousePos(n.getCanvasContainer(),a),l=n.unproject(s);e.call(this,i,t.extend({point:s,lngLat:l,originalEvent:a},o)),this._defaultPrevented=!1,this.target=n}e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i;var n={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,n),i}(t.Event),gi=function(e){function i(i,n,a){var o=r.touchPos(n.getCanvasContainer(),a),s=o.map((function(t){return n.unproject(t)})),l=o.reduce((function(t,e,r,i){return t.add(e.div(i.length))}),new t.Point(0,0)),u=n.unproject(l);e.call(this,i,{points:o,point:l,lngLats:s,lngLat:u,originalEvent:a}),this._defaultPrevented=!1}e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i;var n={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,n),i}(t.Event),yi=function(t){function e(e,r,i){t.call(this,e,{originalEvent:i}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,r),e}(t.Event),_i=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};_i.prototype.setZoomRate=function(t){this._defaultZoomRate=t},_i.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},_i.prototype.isEnabled=function(){return!!this._enabled},_i.prototype.isActive=function(){return!!this._active},_i.prototype.isZooming=function(){return!!this._zooming},_i.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},_i.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},_i.prototype.onWheel=function(e){if(this.isEnabled()){var r=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,i=t.browser.now(),n=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==r&&r%4.000244140625==0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(n*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),e.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=e,this._delta-=r,this.isActive()||this._start(e)),e.preventDefault()}},_i.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},_i.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var i=r.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},_i.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var r=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,n=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==n&&(n=1/n);var a="number"==typeof this._targetZoom?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(a*n))),"wheel"===this._type&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o="number"==typeof this._targetZoom?this._targetZoom:r.zoom,s=this._startZoom,l=this._easing,u=!1;if("wheel"===this._type&&s&&l){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),h=l(c);r.zoom=t.number(s,o,h),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):u=!0}else r.zoom=o,u=!0;r.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),u&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom}),200))}},_i.prototype._smoothOutEasing=function(e){var r=t.ease;if(this._prevEase){var i=this._prevEase,n=(t.browser.now()-i.start)/i.duration,a=i.easing(n+.01)-i.easing(n),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);r=t.bezier(o,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:r},r};var xi=function(e,r){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=r.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};xi.prototype.isEnabled=function(){return!!this._enabled},xi.prototype.isActive=function(){return!!this._active},xi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},xi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},xi.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=this._lastPos=r.mousePos(this._el,e),this._active=!0)},xi.prototype._onMouseMove=function(t){var e=r.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var i=this._startPos;this._lastPos=e,this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var n=Math.min(i.x,e.x),a=Math.max(i.x,e.x),o=Math.min(i.y,e.y),s=Math.max(i.y,e.y);r.setTransform(this._box,"translate("+n+"px,"+o+"px)"),this._box.style.width=a-n+"px",this._box.style.height=s-o+"px"}},xi.prototype._onMouseUp=function(e){if(0===e.button){var i=this._startPos,n=r.mousePos(this._el,e);this._finish(),r.suppressClick(),i.x===n.x&&i.y===n.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(i,n,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},xi.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},xi.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag(),delete this._startPos,delete this._lastPos},xi.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,{originalEvent:r}))};var bi=t.bezier(0,0,.25,1),wi=function(e,r){this._map=e,this._el=r.element||e.getCanvasContainer(),this._state="disabled",this._button=r.button||"right",this._bearingSnap=r.bearingSnap||0,this._pitchWithRotate=!1!==r.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};wi.prototype.isEnabled=function(){return"disabled"!==this._state},wi.prototype.isActive=function(){return"active"===this._state},wi.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},wi.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},wi.prototype.onMouseDown=function(e){if("enabled"===this._state){var i="touchstart"===e.type;if(i)this._startTime=Date.now();else if("right"===this._button){if(this._eventButton=r.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==r.mouseButton(e))return;this._eventButton=0}r.disableDrag(),i?(t.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("touchend",this._onMouseUp)):(t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp)),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._prevPos=this._lastPos=r.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},wi.prototype._onMouseMove=function(t){var e=r.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},wi.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var r=this._map.transform,i=this._prevPos,n=this._lastPos,a=.8*(i.x-n.x),o=-.5*(i.y-n.y),s=r.bearing-a,l=r.pitch-o,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([t.browser.now(),this._map._normalizeBearing(s,c[1])]);var h=r.bearing;if(r.bearing=s,this._pitchWithRotate){var p=r.pitch;r.pitch=l,r.pitch!==p&&this._fireEvent("pitch",e)}r.bearing!==h&&this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._prevPos=this._lastPos}},wi.prototype._onMouseUp=function(t){if("touchend"===t.type&&this._startPos===this._lastPos&&Date.now()-this._startTime<300&&this._el.click(),r.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",r.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},wi.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},wi.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("touchend",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),r.enableDrag()},wi.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._lastPos},wi.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var r=this._map,i=r.getBearing(),n=this._inertia,a=function(){Math.abs(i)<e._bearingSnap?r.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(n.length<2)a();else{var o=n[0],s=n[n.length-1],l=n[n.length-2],u=r._normalizeBearing(i,l[1]),c=s[1]-o[1],h=c<0?-1:1,p=(s[0]-o[0])/1e3;if(0!==c&&0!==p){var d=Math.abs(c*(.25/p));d>180&&(d=180);var f=d/180;u+=h*d*(f/2),Math.abs(r._normalizeBearing(u,0))<this._bearingSnap&&(u=r._normalizeBearing(0,u)),r.rotateTo(u,{duration:1e3*f,easing:bi,noMoveStart:!0},{originalEvent:t})}else a()}},wi.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,r?{originalEvent:r}:{}))},wi.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,r=t.browser.now();e.length>0&&r-e[0][0]>160;)e.shift()};var Ti=t.bezier(0,0,.3,1),Si=function(e,r){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=r.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};Si.prototype.isEnabled=function(){return"disabled"!==this._state},Si.prototype.isActive=function(){return"active"===this._state},Si.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},Si.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Si.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==r.mouseButton(e)||(r.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),r.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},Si.prototype.onTouchStart=function(e){this.isEnabled()&&(e.touches&&e.touches.length>1&&("pending"===this._state||"active"===this._state)||(r.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),r.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},Si.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=r.mousePos(this._el,e),this._startTouch=this._lastTouch=t.window.TouchEvent&&e instanceof t.window.TouchEvent?r.touchPos(this._el,e):null,this._inertia=[[t.browser.now(),this._startPos]]},Si.prototype._touchesMatch=function(t,e){return!(!t||!e||t.length!==e.length)&&t.every((function(t,r){return e[r]===t}))},Si.prototype._onMove=function(e){e.preventDefault();var i=t.window.TouchEvent&&e instanceof t.window.TouchEvent?r.touchPos(this._el,e):null,n=r.mousePos(this._el,e);(i?this._touchesMatch(this._lastTouch,i):this._lastPos.equals(n))||"pending"===this._state&&n.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=n,this._lastTouch=i,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._shouldStart=!0),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Si.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t)if(this._map.touchZoomRotate.isActive())this._abort(t);else if(this._shouldStart&&(this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._shouldStart=!1),this.isActive()){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._prevPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._prevPos=this._lastPos,delete this._lastMoveEvent}},Si.prototype._onMouseUp=function(t){if(0===r.mouseButton(t))switch(this._state){case"active":this._state="enabled",r.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},Si.prototype._onTouchEnd=function(t){if(t.touches&&0!==t.touches.length)switch(this._state){case"pending":case"active":break;case"enabled":this.onTouchStart(t)}else switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},Si.prototype._abort=function(e){switch(this._state){case"active":this._state="enabled",this._shouldStart||(this._fireEvent("dragend",e),this._fireEvent("moveend",e)),this._unbind(),this._deactivate(),t.window.TouchEvent&&e instanceof t.window.TouchEvent&&e.touches.length>1&&r.addEventListener(t.window.document,"touchend",this._onTouchEnd);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},Si.prototype._onBlur=function(t){this._abort(t)},Si.prototype._unbind=function(){r.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),r.removeEventListener(t.window.document,"touchend",this._onTouchEnd),r.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),r.removeEventListener(t.window.document,"mouseup",this._onMouseUp),r.removeEventListener(t.window,"blur",this._onBlur)},Si.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._mouseDownPos,delete this._lastPos,delete this._startTouch,delete this._lastTouch,delete this._shouldStart},Si.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var r=e[e.length-1],i=e[0],n=r[1].sub(i[1]),a=(r[0]-i[0])/1e3;if(0===a||r[1].equals(i[1]))this._fireEvent("moveend",t);else{var o=n.mult(.3/a),s=o.mag();s>1400&&(s=1400,o._unit()._mult(s));var l=s/750,u=o.mult(-l/2);this._map.panBy(u,{duration:1e3*l,easing:Ti,noMoveStart:!0},{originalEvent:t})}}},Si.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,r?{originalEvent:r}:{}))},Si.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,r=t.browser.now();e.length>0&&r-e[0][0]>160;)e.shift()};var Ei=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function Mi(t){return t*(2-t)}Ei.prototype.isEnabled=function(){return!!this._enabled},Ei.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Ei.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Ei.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,r=0,i=0,n=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),n=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),n=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(a=1,t.preventDefault());break;default:return}var o=this._map,s=o.getZoom(),l={duration:300,delayEndEvents:500,easing:Mi,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:o.getBearing()+15*r,pitch:o.getPitch()+10*i,offset:[100*-n,100*-a],center:o.getCenter()};o.easeTo(l,{originalEvent:t})}};var Ai=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};Ai.prototype.isEnabled=function(){return!!this._enabled},Ai.prototype.isActive=function(){return!!this._active},Ai.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ai.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ai.prototype.onTouchStart=function(t){var e=this;if(this.isEnabled()&&!(t.points.length>1))if(this._tapped){var r=t.points[0],i=this._tappedPoint;if(i&&i.dist(r)<=30){t.originalEvent.preventDefault();var n=function(){e._tapped&&e._zoom(t),e._map.off("touchcancel",a),e._resetTapped()},a=function(){e._map.off("touchend",n),e._resetTapped()};this._map.once("touchend",n),this._map.once("touchcancel",a)}else this._resetTapped()}else this._tappedPoint=t.points[0],this._tapped=setTimeout((function(){e._tapped=null,e._tappedPoint=null}),300)},Ai.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},Ai.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Ai.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Ai.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var Ci=t.bezier(0,0,.15,1),Pi=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Pi.prototype.isEnabled=function(){return!!this._enabled},Pi.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},Pi.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},Pi.prototype.disableRotation=function(){this._rotationDisabled=!0},Pi.prototype.enableRotation=function(){this._rotationDisabled=!1},Pi.prototype.isActive=function(){return this.isEnabled()&&!!this._gestureIntent},Pi.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var i=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]),a=i.add(n).div(2);this._startVec=i.sub(n),this._startAround=this._map.transform.pointLocation(a),this._gestureIntent=void 0,this._inertia=[],r.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),r.addEventListener(t.window.document,"touchend",this._onEnd)}},Pi.prototype._getTouchEventData=function(t){var e=r.mousePos(this._el,t.touches[0]),i=r.mousePos(this._el,t.touches[1]),n=e.sub(i);return{vec:n,center:e.add(i).div(2),scale:n.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*n.angleWith(this._startVec)/Math.PI}},Pi.prototype._onMove=function(e){if(2===e.touches.length){var r=this._getTouchEventData(e),i=r.vec,n=r.scale,a=r.bearing;if(!this._gestureIntent){var o=this._rotationDisabled&&1!==n||Math.abs(1-n)>.15;Math.abs(a)>10?this._gestureIntent="rotate":o&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=i)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},Pi.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var r=this._map.transform;this._startScale||(this._startScale=r.scale,this._startBearing=r.bearing);var i=this._getTouchEventData(this._lastTouchEvent),n=i.center,a=i.bearing,o=i.scale,s=r.pointLocation(n),l=r.locationPoint(s);"rotate"===e&&(r.bearing=this._startBearing+a),r.zoom=r.scaleZoom(this._startScale*o),r.setLocationAtPoint(this._startAround,l),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),o,n])}},Pi.prototype._onEnd=function(e){r.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),r.removeEventListener(t.window.document,"touchend",this._onEnd);var i=this._gestureIntent,n=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,i){this._map.fire(new t.Event(i+"end",{originalEvent:e})),this._drainInertiaBuffer();var a=this._inertia,o=this._map;if(a.length<2)o.snapToNorth({},{originalEvent:e});else{var s=a[a.length-1],l=a[0],u=o.transform.scaleZoom(n*s[1]),c=o.transform.scaleZoom(n*l[1]),h=u-c,p=(s[0]-l[0])/1e3,d=s[2];if(0!==p&&u!==c){var f=.15*h/p;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var m=1e3*Math.abs(f/(12*.15)),v=u+f*m/2e3;v<0&&(v=0),o.easeTo({zoom:v,duration:m,easing:Ci,around:this._aroundCenter?o.getCenter():o.unproject(d),noMoveStart:!0},{originalEvent:e})}else o.snapToNorth({},{originalEvent:e})}}},Pi.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,r=t.browser.now();e.length>2&&r-e[0][0]>160;)e.shift()};var Li={scrollZoom:_i,boxZoom:xi,dragRotate:wi,dragPan:Si,keyboard:Ei,doubleClickZoom:Ai,touchZoomRotate:Pi},Ii=function(e){function r(r,i){e.call(this),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},r.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},r.prototype.panBy=function(e,r,i){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},r),i)},r.prototype.panTo=function(e,r,i){return this.easeTo(t.extend({center:e},r),i)},r.prototype.getZoom=function(){return this.transform.zoom},r.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},r.prototype.zoomTo=function(e,r,i){return this.easeTo(t.extend({zoom:e},r),i)},r.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},r.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},r.prototype.getBearing=function(){return this.transform.bearing},r.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},r.prototype.rotateTo=function(e,r,i){return this.easeTo(t.extend({bearing:e},r),i)},r.prototype.resetNorth=function(e,r){return this.rotateTo(0,t.extend({duration:1e3},e),r),this},r.prototype.resetNorthPitch=function(e,r){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),r),this},r.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},r.prototype.getPitch=function(){return this.transform.pitch},r.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},r.prototype.cameraForBounds=function(e,r){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,r)},r.prototype._cameraForBoxAndBearing=function(e,r,i,n){if("number"==typeof(n=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var a=n.padding;n.padding={top:a,bottom:a,right:a,left:a}}if(t.deepEqual(Object.keys(n.padding).sort((function(t,e){return t<e?-1:t>e?1:0})),["bottom","left","right","top"])){var o=this.transform,s=o.project(t.LngLat.convert(e)),l=o.project(t.LngLat.convert(r)),u=s.rotate(-i*Math.PI/180),c=l.rotate(-i*Math.PI/180),h=new t.Point(Math.max(u.x,c.x),Math.max(u.y,c.y)),p=new t.Point(Math.min(u.x,c.x),Math.min(u.y,c.y)),d=h.sub(p),f=(o.width-n.padding.left-n.padding.right)/d.x,m=(o.height-n.padding.top-n.padding.bottom)/d.y;if(!(m<0||f<0)){var v=Math.min(o.scaleZoom(o.scale*Math.min(f,m)),n.maxZoom),g=t.Point.convert(n.offset),y=(n.padding.left-n.padding.right)/2,_=(n.padding.top-n.padding.bottom)/2,x=new t.Point(g.x+y,g.y+_).mult(o.scale/o.zoomScale(v));return{center:o.unproject(s.add(l).div(2).sub(x)),zoom:v,bearing:i}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},r.prototype.fitBounds=function(t,e,r){return this._fitInternal(this.cameraForBounds(t,e),e,r)},r.prototype.fitScreenCoordinates=function(e,r,i,n,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(r)),i,n),n,a)},r.prototype._fitInternal=function(e,r,i){return e?(r=t.extend(e,r)).linear?this.easeTo(r,i):this.flyTo(r,i):this},r.prototype.jumpTo=function(e,r){this.stop();var i=this.transform,n=!1,a=!1,o=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(n=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(a=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(o=!0,i.pitch=+e.pitch),this.fire(new t.Event("movestart",r)).fire(new t.Event("move",r)),n&&this.fire(new t.Event("zoomstart",r)).fire(new t.Event("zoom",r)).fire(new t.Event("zoomend",r)),a&&this.fire(new t.Event("rotatestart",r)).fire(new t.Event("rotate",r)).fire(new t.Event("rotateend",r)),o&&this.fire(new t.Event("pitchstart",r)).fire(new t.Event("pitch",r)).fire(new t.Event("pitchend",r)),this.fire(new t.Event("moveend",r))},r.prototype.easeTo=function(e,r){var i=this;this.stop(),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||t.browser.prefersReducedMotion)&&(e.duration=0);var n=this.transform,a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),l="zoom"in e?+e.zoom:a,u="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:s,h=n.centerPoint.add(t.Point.convert(e.offset)),p=n.pointLocation(h),d=t.LngLat.convert(e.center||p);this._normalizeCenter(d);var f,m,v=n.project(p),g=n.project(d).sub(v),y=n.zoomScale(l-a);return e.around&&(f=t.LngLat.convert(e.around),m=n.locationPoint(f)),this._zooming=l!==a,this._rotating=o!==u,this._pitching=c!==s,this._prepareEase(r,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease((function(e){if(i._zooming&&(n.zoom=t.number(a,l,e)),i._rotating&&(n.bearing=t.number(o,u,e)),i._pitching&&(n.pitch=t.number(s,c,e)),f)n.setLocationAtPoint(f,m);else{var p=n.zoomScale(n.zoom-a),d=l>a?Math.min(2,y):Math.max(.5,y),_=Math.pow(d,1-e),x=n.unproject(v.add(g.mult(e*_)).mult(p));n.setLocationAtPoint(n.renderWorldCopies?x.wrap():x,h)}i._fireMoveEvents(r)}),(function(){e.delayEndEvents?i._easeEndTimeoutID=setTimeout((function(){return i._afterEase(r)}),e.delayEndEvents):i._afterEase(r)}),e),this},r.prototype._prepareEase=function(e,r){this._moving=!0,r||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},r.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},r.prototype._afterEase=function(e){var r=this._zooming,i=this._rotating,n=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),n&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},r.prototype.flyTo=function(e,r){var i=this;if(t.browser.prefersReducedMotion){var n=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,r)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var a=this.transform,o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u="zoom"in e?t.clamp(+e.zoom,a.minZoom,a.maxZoom):o,c="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:l,p=a.zoomScale(u-o),d=a.centerPoint.add(t.Point.convert(e.offset)),f=a.pointLocation(d),m=t.LngLat.convert(e.center||f);this._normalizeCenter(m);var v=a.project(f),g=a.project(m).sub(v),y=e.curve,_=Math.max(a.width,a.height),x=_/p,b=g.mag();if("minZoom"in e){var w=t.clamp(Math.min(e.minZoom,o,u),a.minZoom,a.maxZoom),T=_/a.zoomScale(w-o);y=Math.sqrt(T/b*2)}var S=y*y;function E(t){var e=(x*x-_*_+(t?-1:1)*S*S*b*b)/(2*(t?x:_)*S*b);return Math.log(Math.sqrt(e*e+1)-e)}function M(t){return(Math.exp(t)-Math.exp(-t))/2}function A(t){return(Math.exp(t)+Math.exp(-t))/2}var C=E(0),P=function(t){return A(C)/A(C+y*t)},L=function(t){return _*((A(C)*(M(e=C+y*t)/A(e))-M(C))/S)/b;var e},I=(E(1)-C)/y;if(Math.abs(b)<1e-6||!isFinite(I)){if(Math.abs(_-x)<1e-6)return this.easeTo(e,r);var k=x<_?-1:1;I=Math.abs(Math.log(x/_))/y,L=function(){return 0},P=function(t){return Math.exp(k*y*t)}}if("duration"in e)e.duration=+e.duration;else{var R="screenSpeed"in e?+e.screenSpeed/y:+e.speed;e.duration=1e3*I/R}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==c,this._pitching=h!==l,this._prepareEase(r,!1),this._ease((function(e){var n=e*I,p=1/P(n);a.zoom=1===e?u:o+a.scaleZoom(p),i._rotating&&(a.bearing=t.number(s,c,e)),i._pitching&&(a.pitch=t.number(l,h,e));var f=1===e?m:a.unproject(v.add(g.mult(L(n))).mult(p));a.setLocationAtPoint(a.renderWorldCopies?f.wrap():f,d),i._fireMoveEvents(r)}),(function(){return i._afterEase(r)}),e),this},r.prototype.isEasing=function(){return!!this._easeFrameId},r.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},r.prototype._ease=function(e,r,i){!1===i.animate||0===i.duration?(e(1),r()):(this._easeStart=t.browser.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},r.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},r.prototype._normalizeBearing=function(e,r){e=t.wrap(e,-180,180);var i=Math.abs(e-r);return Math.abs(e-360-r)<i&&(e-=360),Math.abs(e+360-r)<i&&(e+=360),e},r.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var r=t.lng-e.center.lng;t.lng+=r>180?-360:r<-180?360:0}},r}(t.Evented),ki=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};ki.prototype.getDefaultPosition=function(){return"bottom-right"},ki.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=r.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ki.prototype.onRemove=function(){r.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},ki.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var i=r.reduce((function(t,e,i){return e.value&&(t+=e.key+"="+e.value+(i<r.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+i+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},ki.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},ki.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var r=this._map.style.sourceCaches;for(var i in r){var n=r[i];if(n.used){var a=n.getSource();a.attribution&&t.indexOf(a.attribution)<0&&t.push(a.attribution)}}t.sort((function(t,e){return t.length-e.length}));var o=(t=t.filter((function(e,r){for(var i=r+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}))).join(" | ");o!==this._attribHTML&&(this._attribHTML=o,t.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ki.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ri=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Ri.prototype.onAdd=function(t){this._map=t,this._container=r.create("div","mapboxgl-ctrl");var e=r.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ri.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ri.prototype.getDefaultPosition=function(){return"bottom-left"},Ri.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Ri.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Ri.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Oi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Oi.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Oi.prototype.remove=function(t){for(var e=this._currentlyRunning,r=0,i=e?this._queue.concat(e):this._queue;r<i.length;r+=1){var n=i[r];if(n.id===t)return void(n.cancelled=!0)}},Oi.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(!i.cancelled&&(i.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Oi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var zi=t.window.HTMLImageElement,Di=t.window.HTMLElement,Bi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Fi=function(i){function n(e){var n=this;if(null!=(e=t.extend({},Bi,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var a=new di(e.minZoom,e.maxZoom,e.renderWorldCopies);if(i.call(this,a,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Oi,this._controls=[],this._mapId=t.uniqueId(),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Di))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return n._update(!1)})),this.on("moveend",(function(){return n._update(!1)})),this.on("zoom",(function(){return n._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var i=t.getCanvasContainer(),n=null,a=!1,o=null;for(var s in Li)t[s]=new Li[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);r.addEventListener(i,"mouseout",(function(e){t.fire(new vi("mouseout",t,e))})),r.addEventListener(i,"mousedown",(function(n){a=!0,o=r.mousePos(i,n);var s=new vi("mousedown",t,n);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(n),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(n),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(n))})),r.addEventListener(i,"mouseup",(function(e){var r=t.dragRotate.isActive();n&&!r&&t.fire(new vi("contextmenu",t,n)),n=null,a=!1,t.fire(new vi("mouseup",t,e))})),r.addEventListener(i,"mousemove",(function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var r=e.target;r&&r!==i;)r=r.parentNode;r===i&&t.fire(new vi("mousemove",t,e))}})),r.addEventListener(i,"mouseover",(function(e){for(var r=e.target;r&&r!==i;)r=r.parentNode;r===i&&t.fire(new vi("mouseover",t,e))})),r.addEventListener(i,"touchstart",(function(r){var i=new gi("touchstart",t,r);t.fire(i),i.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(r),t.touchZoomRotate.onStart(r),t.doubleClickZoom.onTouchStart(i))}),{passive:!1}),r.addEventListener(i,"touchmove",(function(e){t.fire(new gi("touchmove",t,e))}),{passive:!1}),r.addEventListener(i,"touchend",(function(e){t.fire(new gi("touchend",t,e))})),r.addEventListener(i,"touchcancel",(function(e){t.fire(new gi("touchcancel",t,e))})),r.addEventListener(i,"click",(function(n){var a=r.mousePos(i,n);(!o||a.equals(o)||a.dist(o)<e.clickTolerance)&&t.fire(new vi("click",t,n))})),r.addEventListener(i,"dblclick",(function(e){var r=new vi("dblclick",t,e);t.fire(r),r.defaultPrevented||t.doubleClickZoom.onDblClick(r)})),r.addEventListener(i,"contextmenu",(function(e){var r=t.dragRotate.isActive();a||r?a&&(n=e):t.fire(new vi("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()})),r.addEventListener(i,"wheel",(function(r){e.interactive&&t.stop();var i=new yi("wheel",t,r);t.fire(i),i.defaultPrevented||t.scrollZoom.onWheel(r)}),{passive:!1})}(this,e);var o="string"==typeof e.hash&&e.hash||void 0;this._hash=e.hash&&new mi(o).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new ki({customAttribution:e.customAttribution})),this.addControl(new Ri,e.logoPosition),this.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),this.on("data",(function(e){n._update("style"===e.dataType),n.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){n.fire(new t.Event(e.dataType+"dataloading",e))}))}i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n;var a={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return n.prototype._getMapId=function(){return this._mapId},n.prototype.addControl=function(e,r){if(void 0===r&&e.getDefaultPosition&&(r=e.getDefaultPosition()),void 0===r&&(r="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=e.onAdd(this);this._controls.push(e);var n=this._controlPositions[r];return-1!==r.indexOf("bottom")?n.insertBefore(i,n.firstChild):n.appendChild(i),this},n.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var r=this._controls.indexOf(e);return r>-1&&this._controls.splice(r,1),e.onRemove(this),this},n.prototype.resize=function(e){var r=this._containerDimensions(),i=r[0],n=r[1];return this._resizeCanvas(i,n),this.transform.resize(i,n),this.painter.resize(i,n),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},n.prototype.getBounds=function(){return this.transform.getBounds()},n.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},n.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},n.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},n.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},n.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},n.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},n.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},n.prototype.on=function(t,e,r){var n=this;if(void 0===r)return i.prototype.on.call(this,t,e);var a=function(){var i;if("mouseenter"===t||"mouseover"===t){var a=!1;return{layer:e,listener:r,delegates:{mousemove:function(i){var o=n.getLayer(e)?n.queryRenderedFeatures(i.point,{layers:[e]}):[];o.length?a||(a=!0,r.call(n,new vi(t,n,i.originalEvent,{features:o}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===t||"mouseout"===t){var o=!1;return{layer:e,listener:r,delegates:{mousemove:function(i){(n.getLayer(e)?n.queryRenderedFeatures(i.point,{layers:[e]}):[]).length?o=!0:o&&(o=!1,r.call(n,new vi(t,n,i.originalEvent)))},mouseout:function(e){o&&(o=!1,r.call(n,new vi(t,n,e.originalEvent)))}}}}return{layer:e,listener:r,delegates:(i={},i[t]=function(t){var i=n.getLayer(e)?n.queryRenderedFeatures(t.point,{layers:[e]}):[];i.length&&(t.features=i,r.call(n,t),delete t.features)},i)}}();for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a),a.delegates)this.on(o,a.delegates[o]);return this},n.prototype.off=function(t,e,r){if(void 0===r)return i.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var n=this._delegatedListeners[t],a=0;a<n.length;a++){var o=n[a];if(o.layer===e&&o.listener===r){for(var s in o.delegates)this.off(s,o.delegates[s]);return n.splice(a,1),this}}return this},n.prototype.queryRenderedFeatures=function(e,r){if(!this.style)return[];var i;if(void 0!==r||void 0===e||e instanceof t.Point||Array.isArray(e)||(r=e,e=void 0),r=r||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])i=[t.Point.convert(e)];else{var n=t.Point.convert(e[0]),a=t.Point.convert(e[1]);i=[n,new t.Point(a.x,n.y),a,new t.Point(n.x,a.y),n]}return this.style.queryRenderedFeatures(i,r,this.transform)},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,r){return!1!==(r=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(e,r))},n.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Ne(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},n.prototype._diffStyle=function(e,r){var i=this;if("string"==typeof e){var n=this._requestManager.normalizeStyleURL(e),a=this._requestManager.transformRequest(n,t.ResourceType.Style);t.getJSON(a,(function(e,n){e?i.fire(new t.ErrorEvent(e)):n&&i._updateDiff(n,r)}))}else"object"==typeof e&&this._updateDiff(e,r)},n.prototype._updateDiff=function(e,r){try{this.style.setState(e)&&this._update(!0)}catch(i){t.warnOnce("Unable to perform style diff: "+(i.message||i.error||i)+".  Rebuilding the style from scratch."),this._updateStyle(e,r)}},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},n.prototype.isSourceLoaded=function(e){var r=this.style&&this.style.sourceCaches[e];if(void 0!==r)return r.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var r=t[e]._tiles;for(var i in r){var n=r[i];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,r){return this.style.addSourceType(t,e,r)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,r,i){void 0===i&&(i={});var n=i.pixelRatio;void 0===n&&(n=1);var a=i.sdf;if(void 0===a&&(a=!1),r instanceof zi){var o=t.browser.getImageData(r),s=o.width,l=o.height,u=o.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:l},u),pixelRatio:n,sdf:a,version:0})}else{if(void 0===r.width||void 0===r.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=r.width,h=r.height,p=r.data,d=r;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:h},new Uint8Array(p)),pixelRatio:n,sdf:a,version:0,userImage:d}),d.onAdd&&d.onAdd(this,e)}},n.prototype.updateImage=function(e,r){var i=this.style.getImage(e);if(!i)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var n=r instanceof zi?t.browser.getImageData(r):r,a=n.width,o=n.height,s=n.data;if(void 0===a||void 0===o)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==i.data.width||o!==i.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var l=!(r instanceof zi);i.data.replace(s,l),this.style.updateImage(e,i)},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,r){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),r)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setLayerZoomRange=function(t,e,r){return this.style.setLayerZoomRange(t,e,r),this._update(!0)},n.prototype.setFilter=function(t,e,r){return void 0===r&&(r={}),this.style.setFilter(t,e,r),this._update(!0)},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,r,i){return void 0===i&&(i={}),this.style.setPaintProperty(t,e,r,i),this._update(!0)},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,r,i){return void 0===i&&(i={}),this.style.setLayoutProperty(t,e,r,i),this._update(!0)},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t,e){return void 0===e&&(e={}),this.style.setLight(t,e),this._update(!0)},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},n.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},n.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=r.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=r.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=r.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var n=this._controlContainer=r.create("div","mapboxgl-control-container",t),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){a[t]=r.create("div","mapboxgl-ctrl-"+t,n)}))},n.prototype._resizeCanvas=function(e,r){var i=t.window.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*r,this._canvas.style.width=e+"px",this._canvas.style.height=r+"px"},n.prototype._setupPainter=function(){var r=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",r)||this._canvas.getContext("experimental-webgl",r);i?(this.painter=new ui(i,this.transform),t.webpSupported.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},n.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var r=this.transform.zoom,i=t.browser.now();this.style.zoomHistory.update(r,i);var n=new t.EvaluationParameters(r,{now:i,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=n.crossFadingFactor();1===a&&a===this._crossFadingFactor||(e=!0,this._crossFadingFactor=a),this.style.update(n)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},n.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,r=this._controls;e<r.length;e+=1)r[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),Ni(this._canvasContainer),Ni(this._controlContainer),Ni(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},n.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(){e._frame=null,e._render()})))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(t){this._vertices=t,this._update()},n.prototype._setCacheLimits=function(e,r){t.setCacheLimits(e,r)},a.version.get=function(){return t.version},Object.defineProperties(n.prototype,a),n}(Ii);function Ni(t){t.parentNode&&t.parentNode.removeChild(t)}var Ui={showCompass:!0,showZoom:!0,visualizePitch:!1},Vi=function(e){var i=this;this.options=t.extend({},Ui,e),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",(function(t){return i._map.zoomIn({},{originalEvent:t})})),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",(function(t){return i._map.zoomOut({},{originalEvent:t})}))),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",(function(t){i.options.visualizePitch?i._map.resetNorthPitch({},{originalEvent:t}):i._map.resetNorth({},{originalEvent:t})})),this._compassArrow=r.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function ji(e,r,i){if(e=new t.LngLat(e.lng,e.lat),r){var n=new t.LngLat(e.lng-360,e.lat),a=new t.LngLat(e.lng+360,e.lat),o=i.locationPoint(e).distSqr(r);i.locationPoint(n).distSqr(r)<o?e=n:i.locationPoint(a).distSqr(r)<o&&(e=a)}for(;Math.abs(e.lng-i.center.lng)>180;){var s=i.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=i.width&&s.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}Vi.prototype._updateZoomButtons=function(){var t=this._map.getZoom();t===this._map.getMaxZoom()?this._zoomInButton.classList.add("mapboxgl-ctrl-icon-disabled"):this._zoomInButton.classList.remove("mapboxgl-ctrl-icon-disabled"),t===this._map.getMinZoom()?this._zoomOutButton.classList.add("mapboxgl-ctrl-icon-disabled"):this._zoomOutButton.classList.remove("mapboxgl-ctrl-icon-disabled")},Vi.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},Vi.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wi(t,{button:"left",element:this._compass}),r.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),r.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container},Vi.prototype.onRemove=function(){r.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),r.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),r.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler),delete this._map},Vi.prototype._createButton=function(t,e,i){var n=r.create("button",t,this._container);return n.type="button",n.title=e,n.setAttribute("aria-label",e),n.addEventListener("click",i),n};var Gi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hi(t,e,r){var i=t.classList;for(var n in Gi)i.remove("mapboxgl-"+r+"-anchor-"+n);i.add("mapboxgl-"+r+"-anchor-"+e)}var Wi,qi=function(e){function i(i,n){if(e.call(this),(i instanceof t.window.HTMLElement||n)&&(i=t.extend({element:i},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._draggable=i&&i.draggable||!1,this._state="inactive",i&&i.element)this._element=i.element,this._offset=t.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=r.create("div");var a=r.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var o=r.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");var s=r.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var l=r.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var u=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<c.length;u+=1){var h=c[u],p=r.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",h.rx),p.setAttributeNS(null,"ry",h.ry),l.appendChild(p)}var d=r.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var f=r.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(f);var m=r.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var v=r.createNS("http://www.w3.org/2000/svg","path");v.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(v);var g=r.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var y=r.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=r.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var x=r.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),y.appendChild(_),y.appendChild(x),s.appendChild(l),s.appendChild(d),s.appendChild(m),s.appendChild(g),s.appendChild(y),a.appendChild(s),this._element.appendChild(a),this._offset=t.Point.convert(i&&i.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),Hi(this._element,this._anchor,"marker"),this._popup=null}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},i.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},i.prototype.getElement=function(){return this._element},i.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},i.prototype._onMapClick=function(t){var e=t.originalEvent.target,r=this._element;this._popup&&(e===r||r.contains(e))&&this.togglePopup()},i.prototype.getPopup=function(){return this._popup},i.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},i.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=ji(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),r.setTransform(this._element,Gi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"))},i.prototype.getOffset=function(){return this._offset},i.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},i.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},i.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},i.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},i.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},i.prototype.isDraggable=function(){return this._draggable},i}(t.Evented),Xi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},$i=function(e){function i(r){e.call(this),this.options=t.extend({},Xi,r),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(e){var i;return this._map=e,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==Wi?i(Wi):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){Wi="denied"!==t.state,i(Wi)})):(Wi=!!t.window.navigator.geolocation,i(Wi)),this._container},i.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),r.remove(this._container),this._map=void 0},i.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),r=t.coords;return e&&(r.longitude<e.getWest()||r.longitude>e.getEast()||r.latitude<e.getSouth()||r.latitude>e.getNorth())},i.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},i.prototype._onSuccess=function(e){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},i.prototype._updateCamera=function(e){var r=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,n=this._map.getBearing(),a=t.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(i),a,{geolocateSource:!0})},i.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},i.prototype._onError=function(e){this.options.trackUserLocation&&(1===e.code?(this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0,this._geolocateButton.title="Location not available",this._geolocateButton.setAttribute("aria-label","Location not available"),void 0!==this._geolocationWatchID&&this._clearWatch()):this._setErrorState()),"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},i.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},i.prototype._setupUI=function(e){var i=this;this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=r.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.title="Find my location",this._geolocateButton.setAttribute("aria-label","Find my location"),!1===e&&(t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),this._geolocateButton.disabled=!0,this._geolocateButton.title="Location not available",this._geolocateButton.setAttribute("aria-label","Location not available")),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=r.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new qi(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){var r=e.originalEvent&&"resize"===e.originalEvent.type;e.geolocateSource||"ACTIVE_LOCK"!==i._watchState||r||(i._watchState="BACKGROUND",i._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),i._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),i.fire(new t.Event("trackuserlocationend")))}))},i.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},i.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},i}(t.Evented),Yi={maxWidth:100,unit:"metric"},Zi=function(e){this.options=t.extend({},Yi,e),t.bindAll(["_onMove","setUnit"],this)};function Ji(t,e,r){var i,n,a,o,s,l,u=r&&r.maxWidth||100,c=t._container.clientHeight/2,h=(i=t.unproject([0,c]),n=t.unproject([u,c]),a=Math.PI/180,o=i.lat*a,s=n.lat*a,l=Math.sin(o)*Math.sin(s)+Math.cos(o)*Math.cos(s)*Math.cos((n.lng-i.lng)*a),6371e3*Math.acos(Math.min(l,1)));if(r&&"imperial"===r.unit){var p=3.2808*h;p>5280?Ki(e,u,p/5280,"mi"):Ki(e,u,p,"ft")}else r&&"nautical"===r.unit?Ki(e,u,h/1852,"nm"):Ki(e,u,h,"m")}function Ki(t,e,r,i){var n,a,o,s=(n=r,a=Math.pow(10,(""+Math.floor(n)).length-1),o=(o=n/a)>=10?10:o>=5?5:o>=3?3:o>=2?2:o>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(o),a*o),l=s/r;"m"===i&&s>=1e3&&(s/=1e3,i="km"),t.style.width=e*l+"px",t.innerHTML=s+i}Zi.prototype.getDefaultPosition=function(){return"bottom-left"},Zi.prototype._onMove=function(){Ji(this._map,this._container,this.options)},Zi.prototype.onAdd=function(t){return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Zi.prototype.onRemove=function(){r.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Zi.prototype.setUnit=function(t){this.options.unit=t,Ji(this._map,this._container,this.options)};var Qi=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Qi.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=r.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Qi.prototype.onRemove=function(){r.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Qi.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Qi.prototype._setupUI=function(){(this._fullscreenButton=r.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer)).type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Qi.prototype._updateTitle=function(){var t=this._isFullscreen()?"Exit fullscreen":"Enter fullscreen";this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Qi.prototype._isFullscreen=function(){return this._fullscreen},Qi.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"),this._updateTitle())},Qi.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var tn={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},en=function(e){function i(r){e.call(this),this.options=t.extend(Object.create(tn),r),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.addTo=function(e){var r=this;return this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",(function(t){r._update(t.point)})),this._map.on("mouseup",(function(t){r._update(t.point)})),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},i.prototype.isOpen=function(){return!!this._map},i.prototype.remove=function(){return this._content&&r.remove(this._content),this._container&&(r.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new t.Event("close")),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},i.prototype.trackPointer=function(){var t=this;return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",(function(e){t._update(e.point)})),this._map.on("drag",(function(e){t._update(e.point)})),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},i.prototype.getElement=function(){return this._container},i.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},i.prototype.setHTML=function(e){var r,i=t.window.document.createDocumentFragment(),n=t.window.document.createElement("body");for(n.innerHTML=e;r=n.firstChild;)i.appendChild(r);return this.setDOMContent(i)},i.prototype.getMaxWidth=function(){return this._container.style.maxWidth},i.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},i.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},i.prototype._createContent=function(){this._content&&r.remove(this._content),this._content=r.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=r.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},i.prototype._update=function(e){var i=this,n=this._lngLat||this._trackPointer;if(this._map&&n&&this._content&&(this._container||(this._container=r.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=r.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return i._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ji(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var a=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),o=this.options.anchor,s=function e(r){if(r){if("number"==typeof r){var i=Math.round(Math.sqrt(.5*Math.pow(r,2)));return{center:new t.Point(0,0),top:new t.Point(0,r),"top-left":new t.Point(i,i),"top-right":new t.Point(-i,i),bottom:new t.Point(0,-r),"bottom-left":new t.Point(i,-i),"bottom-right":new t.Point(-i,-i),left:new t.Point(r,0),right:new t.Point(-r,0)}}if(r instanceof t.Point||Array.isArray(r)){var n=t.Point.convert(r);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.Point.convert(r.center||[0,0]),top:t.Point.convert(r.top||[0,0]),"top-left":t.Point.convert(r["top-left"]||[0,0]),"top-right":t.Point.convert(r["top-right"]||[0,0]),bottom:t.Point.convert(r.bottom||[0,0]),"bottom-left":t.Point.convert(r["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(r["bottom-right"]||[0,0]),left:t.Point.convert(r.left||[0,0]),right:t.Point.convert(r.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!o){var l,u=this._container.offsetWidth,c=this._container.offsetHeight;l=a.y+s.bottom.y<c?["top"]:a.y>this._map.transform.height-c?["bottom"]:[],a.x<u/2?l.push("left"):a.x>this._map.transform.width-u/2&&l.push("right"),o=0===l.length?"bottom":l.join("-")}var h=a.add(s[o]).round();r.setTransform(this._container,Gi[o]+" translate("+h.x+"px,"+h.y+"px)"),Hi(this._container,o,"popup")}},i.prototype._onClickClose=function(){this.remove()},i}(t.Evented),rn={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Fi,NavigationControl:Vi,GeolocateControl:$i,AttributionControl:ki,ScaleControl:Zi,FullscreenControl:Qi,Popup:en,Marker:qi,Style:Ne,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Ot.workerCount},set workerCount(t){Ot.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return rn})),r}))},e4ae:function(t,e,r){var i=r("f772");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},e53d:function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},e6f3:function(t,e,r){var i=r("07e3"),n=r("36c3"),a=r("5b4e")(!1),o=r("5559")("IE_PROTO");t.exports=function(t,e){var r,s=n(t),l=0,u=[];for(r in s)r!=o&&i(s,r)&&u.push(r);while(e.length>l)i(s,r=e[l++])&&(~a(u,r)||u.push(r));return u}},e853:function(t,e,r){var i=r("d3f4"),n=r("1169"),a=r("2b4c")("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),i(e)&&(e=e[a],null===e&&(e=void 0))),void 0===e?Array:e}},ebcf:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){var t=this;if(this.lastRAFId=0,this.frameId=0,this.lastNow=0,this.uidCounter=0,this.stopped=!0,this.queue=[],"undefined"===typeof window||"undefined"===typeof window.requestAnimationFrame)throw new Error("You are not using this package in browser environment");this.frameHandler=function(){return t.frame()}}return t.prototype.start=function(){this.stopped=!1,this.lastNow=performance.now(),this.lastRAFId=window.requestAnimationFrame(this.frameHandler)},t.prototype.stop=function(t){void 0===t&&(t=!1),t&&window.cancelAnimationFrame(this.lastRAFId),this.stopped=!0},t.prototype.frame=function(){var t=this,e=performance.now(),r=e-this.lastNow;this.lastNow=e,this.queue.forEach((function(e){e.isHeavy?t.frameId%2===0&&e.handler(r,t.frameId):e.handler(r,t.frameId)})),this.frameId+=1,this.stopped||(this.lastRAFId=window.requestAnimationFrame(this.frameHandler))},t.prototype.add=function(t,e,r){if(void 0===r&&(r=!1),"function"!==typeof t)throw new Error("Expected function as handler");return"undefined"===typeof e&&(e="h_"+ ++this.uidCounter),this.queue.push({id:e,handler:t,isHeavy:r}),e},t.prototype.remove=function(t){if("undefined"===typeof t)throw new Error("Expected id");var e=this.queue.findIndex((function(e){return e.id===t}));e<0||(this.queue.splice(e,1),this.queue.length<=0&&this.stop())},t}();e.default=i},ebd6:function(t,e,r){var i=r("cb7c"),n=r("d8e8"),a=r("2b4c")("species");t.exports=function(t,e){var r,o=i(t).constructor;return void 0===o||void 0==(r=i(o)[a])?e:n(r)}},f022:function(t,e,r){var i,n;(function(){function r(t,e){return!(e.left>=t.right||e.right<=t.left||e.top>=t.bottom||e.bottom<=t.top)}"undefined"!==typeof t.exports?t.exports=r:(i=[],n=function(){return r}.apply(e,i),void 0===n||(t.exports=n))})()},f1ae:function(t,e,r){"use strict";var i=r("86cc"),n=r("4630");t.exports=function(t,e,r){e in t?i.f(t,e,n(0,r)):t[e]=r}},f28c:function(t,e){var r,i,n=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}function l(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(function(){try{r="function"===typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"===typeof clearTimeout?clearTimeout:o}catch(t){i=o}})();var u,c=[],h=!1,p=-1;function d(){h&&u&&(h=!1,u.length?c=u.concat(c):p=-1,c.length&&f())}function f(){if(!h){var t=s(d);h=!0;var e=c.length;while(e){u=c,c=[];while(++p<e)u&&u[p].run();p=-1,e=c.length}u=null,h=!1,l(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new m(t,e)),1!==c.length||h||s(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},f386:function(t,e,r){"use strict";r("386b")("small",(function(t){return function(){return t(this,"small","","")}}))},f410:function(t,e,r){r("1af6"),t.exports=r("584a").Array.isArray},f605:function(t,e){t.exports=function(t,e,r,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(r+": incorrect invocation!");return t}},f751:function(t,e,r){var i=r("5ca1");i(i.S+i.F,"Object",{assign:r("7333")})},f772:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},fa5b:function(t,e,r){t.exports=r("5537")("native-function-to-string",Function.toString)},fa78:function(t,e,r){
/*! iNoBounce - v0.1.6
* https://github.com/lazd/iNoBounce/
* Copyright (c) 2013 Larry Davis <lazdnet@gmail.com>; Licensed BSD */
(function(e){var r=0,i=!1,n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,a)}catch(f){}var o=function(t){var e=t.target;while(e!==document.body&&e!==document){var i=window.getComputedStyle(e);if(!i)break;if("INPUT"===e.nodeName&&"range"===e.getAttribute("type"))return;var n=i.getPropertyValue("-webkit-overflow-scrolling"),a=i.getPropertyValue("overflow-y"),o=parseInt(i.getPropertyValue("height"),10),s="touch"===n&&("auto"===a||"scroll"===a),l=e.scrollHeight>e.offsetHeight;if(s&&l){var u=t.touches?t.touches[0].screenY:t.screenY,c=r<=u&&0===e.scrollTop,h=r>=u&&e.scrollHeight-e.scrollTop===o;return void((c||h)&&t.preventDefault())}e=e.parentNode}t.preventDefault()},s=function(t){r=t.touches?t.touches[0].screenY:t.screenY},l=function(){window.addEventListener("touchstart",s,!!n&&{passive:!1}),window.addEventListener("touchmove",o,!!n&&{passive:!1}),i=!0},u=function(){window.removeEventListener("touchstart",s,!1),window.removeEventListener("touchmove",o,!1),i=!1},c=function(){return i},h=document.createElement("div");document.documentElement.appendChild(h),h.style.WebkitOverflowScrolling="touch";var p="getComputedStyle"in window&&"touch"===window.getComputedStyle(h)["-webkit-overflow-scrolling"];document.documentElement.removeChild(h),p&&l();var d={enable:l,disable:u,isEnabled:c};t.exports&&(t.exports=d),"function"===typeof e.define?function(t){t("iNoBounce",[],(function(){return d}))}(e.define):e.iNoBounce=d})(this)},fab2:function(t,e,r){var i=r("7726").document;t.exports=i&&i.documentElement},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-vendors.e7558657.js.map